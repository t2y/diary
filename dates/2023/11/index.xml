<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2023/11 on forest nook</title><link>/diary/dates/2023/11/</link><description>Recent content in 2023/11 on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/dates/2023/11/index.xml" rel="self" type="application/rss+xml"/><item><title>経済的且つ健康</title><link>/diary/posts/2023/1113/</link><pubDate>Mon, 13 Nov 2023 17:05:35 +0900</pubDate><guid>/diary/posts/2023/1113/</guid><description>22時頃から寝てしまって24時に起きて2時間ほどネットみたりしてまた寝て4時に起きて7時に起きた。
健康によさそうな紅生姜 昨日の続き 。業務スーパーの紅生姜は 1kg 338円、賞味期限も9ヶ月、とお得ではあるものの、中国産且つ合成保存料／着色料を使っているところに懸念がある。日常的に食べるものならもう少し健康に注意を払いたい。amazon で購入できる商品で 坂田信夫商店 という生姜専門店をみつけた。「合成着色料・保存料 不使用」なのがよい。この紅生姜も色はついているものの、野菜色素で色付けしているらしい。この商品は 1kg 1,800円、賞味期限は製造日から4ヶ月になる。健康に気を遣うと割高になるが、普段食べるものはそれで構わない。amazon の定期便で食べる量にあわせて送ってもらうのがよさそう。
お昼ご飯の行方 週末にスーパーのポイントカードの振る舞いをチェックするためにいつもより食材をたくさん買い込んでしまった。冷蔵庫が膨らんでいるので土日の両日とも自炊して、今日のランチも外食ではなく、お昼に帰って自炊した。オフィスと家の距離が徒歩3分なのですぐ帰れる。家で自炊してお昼ご飯を作るメリット・デメリットを考えてみる。
メリット
外食するよりも自炊した方が安い 物価が上がっているので外食すると1,000円前後になる 自炊なら高めに見積もっても500円もあれば済む 野菜を多く採れる 基本的に外食のランチは野菜が足りない 野菜は値段が高いのでランチやお弁当ではしばしば省略される デメリット
自炊するのが面倒くさい 家だと仕事の合間の気分転換にならない？ 基本的に私が労力さえ払えば、経済的にも健康的にもメリットしかない。自炊すればするほどスーパーのポイントも多く貯まる。毎日じゃなくても、たまに多めに買い込んでお昼も自炊してみようと思う。
go の set 型の導入予測 コードレビューをしていて、ある処理の実装を集合演算でやった方がよいとアドバイスした。go の型システムや標準ライブラリには set 型に相当するものがない。しかし、map を使って簡単に実装できるので実際の開発で問題になることはほとんどない。いまは generics と comparable があるので、汎用の set 型を map で実装することもできるはず、と思って調べたら次の記事をみつけた。
A generic Set type in Go 私のイメージとも合致して、こういったものをユーザー定義型で実装すればよいと reviewee とやり取りしていた。generics で汎用の set 型を実装できるなら、当然、それを標準ライブラリに導入しようという話しも出ているはずで軽く調べてみた。次の issue がその議論らしい。
proposal: container/set: new package to provide a generic set type (discussion) #47331 で、私は issue を読んでいないのだけど、どうやらユーザー定義の iterator 機能に依存しているらしい。従って iterator 機能が導入された後に set 型が導入されるといった流れになるだろう。</description><content>&lt;p>22時頃から寝てしまって24時に起きて2時間ほどネットみたりしてまた寝て4時に起きて7時に起きた。&lt;/p>
&lt;h2 id="健康によさそうな紅生姜">健康によさそうな紅生姜&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1112/">昨日の続き&lt;/a> 。業務スーパーの紅生姜は 1kg 338円、賞味期限も9ヶ月、とお得ではあるものの、中国産且つ合成保存料／着色料を使っているところに懸念がある。日常的に食べるものならもう少し健康に注意を払いたい。amazon で購入できる商品で &lt;a href="https://sakatashop.jp/pages/company">坂田信夫商店&lt;/a> という生姜専門店をみつけた。「合成着色料・保存料 不使用」なのがよい。この紅生姜も色はついているものの、野菜色素で色付けしているらしい。この商品は 1kg 1,800円、賞味期限は製造日から4ヶ月になる。健康に気を遣うと割高になるが、普段食べるものはそれで構わない。amazon の定期便で食べる量にあわせて送ってもらうのがよさそう。&lt;/p>
&lt;p>&lt;a href="https://amzn.to/47r3HVA" target="_blank">&lt;img src="https://m.media-amazon.com/images/I/51dzpO1MqVL._AC_.jpg" width="320">&lt;/a>&lt;/p>
&lt;h2 id="お昼ご飯の行方">お昼ご飯の行方&lt;/h2>
&lt;p>週末にスーパーのポイントカードの振る舞いをチェックするためにいつもより食材をたくさん買い込んでしまった。冷蔵庫が膨らんでいるので土日の両日とも自炊して、今日のランチも外食ではなく、お昼に帰って自炊した。オフィスと家の距離が徒歩3分なのですぐ帰れる。家で自炊してお昼ご飯を作るメリット・デメリットを考えてみる。&lt;/p>
&lt;p>メリット&lt;/p>
&lt;ul>
&lt;li>外食するよりも自炊した方が安い
&lt;ul>
&lt;li>物価が上がっているので外食すると1,000円前後になる&lt;/li>
&lt;li>自炊なら高めに見積もっても500円もあれば済む&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>野菜を多く採れる
&lt;ul>
&lt;li>基本的に外食のランチは野菜が足りない&lt;/li>
&lt;li>野菜は値段が高いのでランチやお弁当ではしばしば省略される&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>デメリット&lt;/p>
&lt;ul>
&lt;li>自炊するのが面倒くさい&lt;/li>
&lt;li>家だと仕事の合間の気分転換にならない？&lt;/li>
&lt;/ul>
&lt;p>基本的に私が労力さえ払えば、経済的にも健康的にもメリットしかない。自炊すればするほどスーパーのポイントも多く貯まる。毎日じゃなくても、たまに多めに買い込んでお昼も自炊してみようと思う。&lt;/p>
&lt;h2 id="go-の-set-型の導入予測">go の set 型の導入予測&lt;/h2>
&lt;p>コードレビューをしていて、ある処理の実装を集合演算でやった方がよいとアドバイスした。go の型システムや標準ライブラリには set 型に相当するものがない。しかし、map を使って簡単に実装できるので実際の開発で問題になることはほとんどない。いまは generics と comparable があるので、汎用の set 型を map で実装することもできるはず、と思って調べたら次の記事をみつけた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://bitfieldconsulting.com/golang/generic-set">A generic Set type in Go&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>私のイメージとも合致して、こういったものをユーザー定義型で実装すればよいと reviewee とやり取りしていた。generics で汎用の set 型を実装できるなら、当然、それを標準ライブラリに導入しようという話しも出ているはずで軽く調べてみた。次の issue がその議論らしい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/golang/go/discussions/47331">proposal: container/set: new package to provide a generic set type (discussion) #47331&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>で、私は issue を読んでいないのだけど、どうやらユーザー定義の iterator 機能に依存しているらしい。従って iterator 機能が導入された後に set 型が導入されるといった流れになるだろう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/golang/go/issues/61405">spec: add range over int, range over func #61405&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>iterator 機能は早ければ次の 1.22 ともみられているが、まだマイルストーンがついていないので開発状況によっては見送られるかもしれない。これから1-2年後あたりには go 本体が提供する set 型が支えるようになっているのではないかと推測する。&lt;/p></content></item><item><title>紅生姜とポテトサラダ</title><link>/diary/posts/2023/1112/</link><pubDate>Sun, 12 Nov 2023 14:41:49 +0900</pubDate><guid>/diary/posts/2023/1112/</guid><description>1時に寝て4時ぐらいに吐き気で起きてしばらく休んで寝たら12時に起きた。変な寝方した。
業務スーパー 昨日 よく行くスーパー について書いたが、もう1つ補足しておく。日常的に行くスーパーではないが、隔週に1回ぐらい行くところに 業務スーパー がある。年末に帰省したときになにかの番組で業務スーパーの創業者が地熱発電に取り組んでいて、そのための学校も自前で作り、エネルギー問題という難しい課題に対して政府に頼らず、自分たちで課題解決しようとしている姿勢に共感した。
業務スーパー創業者が描く日本の地熱発電の未来－スピード感が鍵 それ以来、業務スーパーでちょくちょく買いものをするようになった。運営会社の 神戸物産 は加古川市の総合商社らしい。神戸市じゃなかったのか (´・ω・`) 兵庫県という括りで地元支援の意図もあって買いものをしている。アプリの電子マネーにチャージするときに0.5%のポイントが付き、購入時にもいくらかポイントが付くらしい (店舗によって異なるみたい) 。イオン系列スーパーの買いものを最適化したタイミングで業務スーパーもそうしようと思ってアプリをダウンロードしてアカウントを作った。100ポイント溜まったら100円として使える。
現時点ではアプリであっても店舗の専用ハードウェアでチャージしないといけない。ちょっと不便。なんでこんな機械がいるのだろう？と疑問に思ったけど、おそらく物理カードのチャージのためかなと推測する。アプリなら、いずれはオンラインでチャージできるようになるのだろうと思う。
昨日、千切り紅生姜 1kg を買ってみた。
紅千切生姜 業務スーパーの紅生姜は高コスパ！料理のアクセントにおすすめ！ よく行くお店に紅生姜が置いてあって、紅生姜っていろんな食材にあう味変のトッピングだと思う。お昼によく食べに行くお店に紅生姜のポットが置いてあって、ナポリタンや鶏チーズ丼にもかけてよく食べている。食べ過ぎると塩分と添加物の懸念があるものの、生姜なので基本的には健康によい。家でももっと食べようと思い始めた。
紅しょうがに栄養はある？効果・効能や栄養素、カロリーまでご紹介！ 赤102という合成着色料は少量では発がん性はないと認められているものの、アレルギー症状を引き起こす懸念から国によっては規制している国もあるみたい。
添加物は危険？食べすぎ注意の食品添加物一覧をご紹介 買ってから気付いたが、業務スーパーの千切り紅生姜は中国産、且つ赤102という合成着色料を使っている。日常的に食べるものなら赤色である必要はない。無着色な生姜の梅酢漬けを探した方が健康によさそう。
ポテトサラダ専門店 私はポテトサラダが好きだ。居酒屋へ行くと、ほぼ必ずポテトサラダを注文する。どこの居酒屋のポテトサラダもオリジナルなものでおもしろい。ポテトサラダにこだわりのある居酒屋でもそうでないお店でも、まったく同じポテトサラダに出会うことはほぼない。それはポテトサラダが日持ちする料理ではないため、既製品を使うよりも、それぞれの店舗で手作りしているからではないかと推測する。手作りするため、それぞれのお店のアレンジが加わる。ポテトサラダはじゃがいもだけであれば、冷蔵庫で3-5日ほどもつ。しかし、具材を入れると、とくに水分が出る野菜を入れてしまうと痛みやすくなり、2-3日程度の賞味期限になってしまう。これは在庫リスクが高くて専門店には向かない商品だと思う。ググると ポテトサラダ専門店「ポテトクリーム」 というのが1件だけみつかった。皆無ではないが、メディアで珍しく取り上げられる程度には成り立つビジネスではない。
食べログ: Potato Cream ふと、お金あったらポテトサラダ専門店を作って、いろんなポテトサラダの味見がしたいと思った。居酒屋で食べられるポテトサラダは基本は1-2種類しかない。ポテトサラダをたくさん集めていろいろ味見ができればいいなと思えた。主成分がじゃがいもという性質上、ポテトサラダはたくさん食べられない。少量を5種類とか、食べながらお酒が飲めれば、私のようなポテトサラダ大好き人間にはそれだけで嬉しい。そんなお店があったらいいなと思えた。別にポテトサラダすべてがオリジナルではなくても、その辺のコンビニやスーパー、居酒屋さんで売っているポテトサラダでも構わない。違う種類のポテトサラダをいろいろ試してみたい、もしくは日替わりでポテトサラダの種類が変わるようなものでもよい。常時50種類ぐらいのポテトサラダがあって、いろいろ試して食べられれば嬉しい。
扱う種類が増えると在庫リスクが高くなる。飲食店とサブスクリプション的に提携して賞味期限が切れる前にポテトサラダを配ったり、廃棄するのはもったいないから捨てるぐらいなら無料で突き出しやサラダの添えものに出してもよいかもしれない。1,000円ぐらい払って、ポテトサラダをおつまみにビールを飲んで、それからオフィスへ戻ってお仕事するようなスタイルにあうポテトサラダ専門店がほしい。
ポテトサラダは日持ちしない？賞味期限の目安は？冷凍・冷蔵庫など別に！</description><content>&lt;p>1時に寝て4時ぐらいに吐き気で起きてしばらく休んで寝たら12時に起きた。変な寝方した。&lt;/p>
&lt;h2 id="業務スーパー">業務スーパー&lt;/h2>
&lt;p>昨日 &lt;a href="/diary/diary/posts/2023/1111/#イオン-オーナーズカード">よく行くスーパー&lt;/a> について書いたが、もう1つ補足しておく。日常的に行くスーパーではないが、隔週に1回ぐらい行くところに &lt;a href="https://www.gyomusuper.jp/">業務スーパー&lt;/a> がある。年末に帰省したときになにかの番組で業務スーパーの創業者が地熱発電に取り組んでいて、そのための学校も自前で作り、エネルギー問題という難しい課題に対して政府に頼らず、自分たちで課題解決しようとしている姿勢に共感した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.bloomberg.co.jp/news/articles/2023-07-27/RY9XYDT0G1KW01">業務スーパー創業者が描く日本の地熱発電の未来－スピード感が鍵&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>それ以来、業務スーパーでちょくちょく買いものをするようになった。運営会社の &lt;a href="https://www.kobebussan.co.jp/">神戸物産&lt;/a> は加古川市の総合商社らしい。神戸市じゃなかったのか (´・ω・`) 兵庫県という括りで地元支援の意図もあって買いものをしている。アプリの電子マネーにチャージするときに0.5%のポイントが付き、購入時にもいくらかポイントが付くらしい (店舗によって異なるみたい) 。イオン系列スーパーの買いものを最適化したタイミングで業務スーパーもそうしようと思ってアプリをダウンロードしてアカウントを作った。100ポイント溜まったら100円として使える。&lt;/p>
&lt;p>現時点ではアプリであっても店舗の専用ハードウェアでチャージしないといけない。ちょっと不便。なんでこんな機械がいるのだろう？と疑問に思ったけど、おそらく物理カードのチャージのためかなと推測する。アプリなら、いずれはオンラインでチャージできるようになるのだろうと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1112_gyoumuca.jpg"/>
&lt;/figure>
&lt;p>昨日、千切り紅生姜 1kg を買ってみた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gyomusuper.jp/product/detail.php?go_id=4464">紅千切生姜&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gyousu.love/shredded-red-pickled-ginger/">業務スーパーの紅生姜は高コスパ！料理のアクセントにおすすめ！&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>よく行くお店に紅生姜が置いてあって、紅生姜っていろんな食材にあう味変のトッピングだと思う。お昼によく食べに行くお店に紅生姜のポットが置いてあって、ナポリタンや鶏チーズ丼にもかけてよく食べている。食べ過ぎると塩分と添加物の懸念があるものの、生姜なので基本的には健康によい。家でももっと食べようと思い始めた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://botanica-media.jp/4715">紅しょうがに栄養はある？効果・効能や栄養素、カロリーまでご紹介！&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>赤102という合成着色料は少量では発がん性はないと認められているものの、アレルギー症状を引き起こす懸念から国によっては規制している国もあるみたい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://wacoms.jp/media/column/food_additive/">添加物は危険？食べすぎ注意の食品添加物一覧をご紹介&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>買ってから気付いたが、業務スーパーの千切り紅生姜は中国産、且つ赤102という合成着色料を使っている。日常的に食べるものなら赤色である必要はない。無着色な生姜の梅酢漬けを探した方が健康によさそう。&lt;/p>
&lt;h2 id="ポテトサラダ専門店">ポテトサラダ専門店&lt;/h2>
&lt;p>私はポテトサラダが好きだ。居酒屋へ行くと、ほぼ必ずポテトサラダを注文する。どこの居酒屋のポテトサラダもオリジナルなものでおもしろい。ポテトサラダにこだわりのある居酒屋でもそうでないお店でも、まったく同じポテトサラダに出会うことはほぼない。それはポテトサラダが日持ちする料理ではないため、既製品を使うよりも、それぞれの店舗で手作りしているからではないかと推測する。手作りするため、それぞれのお店のアレンジが加わる。ポテトサラダはじゃがいもだけであれば、冷蔵庫で3-5日ほどもつ。しかし、具材を入れると、とくに水分が出る野菜を入れてしまうと痛みやすくなり、2-3日程度の賞味期限になってしまう。これは在庫リスクが高くて専門店には向かない商品だと思う。ググると &lt;a href="https://icotto.jp/presses/3051">ポテトサラダ専門店「ポテトクリーム」&lt;/a> というのが1件だけみつかった。皆無ではないが、メディアで珍しく取り上げられる程度には成り立つビジネスではない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tabelog.com/tokyo/A1317/A131703/13164350/">食べログ: Potato Cream&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ふと、お金あったらポテトサラダ専門店を作って、いろんなポテトサラダの味見がしたいと思った。居酒屋で食べられるポテトサラダは基本は1-2種類しかない。ポテトサラダをたくさん集めていろいろ味見ができればいいなと思えた。主成分がじゃがいもという性質上、ポテトサラダはたくさん食べられない。少量を5種類とか、食べながらお酒が飲めれば、私のようなポテトサラダ大好き人間にはそれだけで嬉しい。そんなお店があったらいいなと思えた。別にポテトサラダすべてがオリジナルではなくても、その辺のコンビニやスーパー、居酒屋さんで売っているポテトサラダでも構わない。違う種類のポテトサラダをいろいろ試してみたい、もしくは日替わりでポテトサラダの種類が変わるようなものでもよい。常時50種類ぐらいのポテトサラダがあって、いろいろ試して食べられれば嬉しい。&lt;/p>
&lt;p>扱う種類が増えると在庫リスクが高くなる。飲食店とサブスクリプション的に提携して賞味期限が切れる前にポテトサラダを配ったり、廃棄するのはもったいないから捨てるぐらいなら無料で突き出しやサラダの添えものに出してもよいかもしれない。1,000円ぐらい払って、ポテトサラダをおつまみにビールを飲んで、それからオフィスへ戻ってお仕事するようなスタイルにあうポテトサラダ専門店がほしい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://chisou-media.jp/posts/1089">ポテトサラダは日持ちしない？賞味期限の目安は？冷凍・冷蔵庫など別に！&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>ポッキーの日</title><link>/diary/posts/2023/1111/</link><pubDate>Sat, 11 Nov 2023 00:53:50 +0900</pubDate><guid>/diary/posts/2023/1111/</guid><description>なんか深夜にお腹空いて2時から冷凍食品の横綱ラーメン作って食べた。深夜に食べるラーメンはおいしかった。それから寝て6時に起きて8時に起きた。
ストレッチ 先週は筋肉痛で大変な状態だったが、今週は十分に休養して元に戻った。今日の開脚幅は開始前156cmで、ストレッチ後157cmだった。いつも通り。とくにどこかの部位が極端に疲労したり張りがあったりする感じはなかったが、左ふとももの後ろと左腰がやや張りが強かったように感じた。私のお気に入りのストレッチの部位としてふとももの後ろの筋を伸ばすのが痛気持ちいい。これは自分では伸ばせない筋なのでトレーナーさんにお願いしないといけない。張りがあっても痛気持ちよい。トレーナーさんと話していて今日が「ポッキーの日」だと教えてもらった。スーパーのクーポンでポッキーお奨めされているなと思っていたけど、そういうことだったのか。
イオン オーナーズカード イオンの株主優待制度 としてオーナーズカードがある。イオン系列のスーパーなどで買いものしたときに半年後にキャッシュバックを受けられる。持ち株数に応じて 3, 4, 5, 7% のキャッシュバックになる。6月末に四国旅行 へ行ったときに同室に泊まった方と話していて、イオンのオーナーズカードがお得だよと教えてもらった。私が普段買いものしているスーパーは3つある。
KOHYO 阪急オアシス ライフ このうち、もっともよく行くスーパーが KOHYO である。その理由はもっとも家から近いから。KOHYO はイオン系列になる。オーナーズカードをもつとお得になることに気付いてイオンの株を購入してみた。8月末と2月末の年2回、権利確定が行われる。私の場合、8月末に権利確定され、いろいろ手続きをして、オーナーズカードが10月末に届いた。
カードを持ち運ぶのは面倒なので調べてみると iAEON アプリ でオーナーズカードを連携すれば代用できることに気付いた。iAEON アプリの会員証にオーナーズカードを連携できる。スーパーで買いものするときにスマホでオーナーズカードの認証ができる。このアプリでオーナーズカードを連携するには waon ポイントカードが必要にある。これも名前がおかしいのだけど、カードを作るという手続きをするが、物理カードを作らなくてもよくて、アプリ上で waon ポイントを管理できる。
waon とはイオンが提供している電子マネーのことで waon で書いものしたときに貯まるポイントが waon ポイントである。しかし、オーナーズカードで購入しても waon ポイントを貯めることができる、現金で支払ったとしても。これも名前が混乱してしまうが waon ポイントは waon 以外の決済でもポイントが貯まるのである。waon とは別に AEON Pay もある。iAEON アプリ上で AEON Pay が使える。AEON Pay は paypay のようなバーコード決済で、イオンカード以外にも銀行口座からもチャージできる。paypay 銀行は選択できなかったが、都市銀行や地方銀行などを選択して銀行口座から直接チャージできた。AEON Pay には waon ポイントを貯めるという仕組みはなく、AEON Pay の支払いをイオンカードにすることでイオンカードの利用によって waon ポイントが還元されるという仕組みになるため、銀行口座からチャージすると本来は waon ポイントが貯まらない。しかし、オーナーズカードの支払いは waon ポイントが貯まるので、オーナーズカードの認証をした上で AEON Pay をする分には waon ポイントが貯まっているようだ。</description><content>&lt;p>なんか深夜にお腹空いて2時から冷凍食品の横綱ラーメン作って食べた。深夜に食べるラーメンはおいしかった。それから寝て6時に起きて8時に起きた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>先週は筋肉痛で大変な状態だったが、今週は十分に休養して元に戻った。今日の開脚幅は開始前156cmで、ストレッチ後157cmだった。いつも通り。とくにどこかの部位が極端に疲労したり張りがあったりする感じはなかったが、左ふとももの後ろと左腰がやや張りが強かったように感じた。私のお気に入りのストレッチの部位としてふとももの後ろの筋を伸ばすのが痛気持ちいい。これは自分では伸ばせない筋なのでトレーナーさんにお願いしないといけない。張りがあっても痛気持ちよい。トレーナーさんと話していて今日が「ポッキーの日」だと教えてもらった。スーパーのクーポンでポッキーお奨めされているなと思っていたけど、そういうことだったのか。&lt;/p>
&lt;h2 id="イオン-オーナーズカード">イオン オーナーズカード&lt;/h2>
&lt;p>&lt;a href="https://www.aeon.info/ir/stock/benefit/">イオンの株主優待制度&lt;/a> としてオーナーズカードがある。イオン系列のスーパーなどで買いものしたときに半年後にキャッシュバックを受けられる。持ち株数に応じて 3, 4, 5, 7% のキャッシュバックになる。&lt;a href="/diary/diary/tags/sightseeing/">6月末に四国旅行&lt;/a> へ行ったときに同室に泊まった方と話していて、イオンのオーナーズカードがお得だよと教えてもらった。私が普段買いものしているスーパーは3つある。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.kohyo.co.jp/">KOHYO&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.hankyu-oasis.com/">阪急オアシス&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.lifecorp.jp/">ライフ&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>このうち、もっともよく行くスーパーが KOHYO である。その理由はもっとも家から近いから。KOHYO はイオン系列になる。オーナーズカードをもつとお得になることに気付いてイオンの株を購入してみた。8月末と2月末の年2回、権利確定が行われる。私の場合、8月末に権利確定され、いろいろ手続きをして、オーナーズカードが10月末に届いた。&lt;/p>
&lt;p>カードを持ち運ぶのは面倒なので調べてみると &lt;a href="https://www.aeon.com/aeonapp/">iAEON アプリ&lt;/a> でオーナーズカードを連携すれば代用できることに気付いた。iAEON アプリの会員証にオーナーズカードを連携できる。スーパーで買いものするときにスマホでオーナーズカードの認証ができる。このアプリでオーナーズカードを連携するには waon ポイントカードが必要にある。これも名前がおかしいのだけど、カードを作るという手続きをするが、物理カードを作らなくてもよくて、アプリ上で waon ポイントを管理できる。&lt;/p>
&lt;p>waon とはイオンが提供している電子マネーのことで waon で書いものしたときに貯まるポイントが waon ポイントである。しかし、オーナーズカードで購入しても waon ポイントを貯めることができる、現金で支払ったとしても。これも名前が混乱してしまうが waon ポイントは waon 以外の決済でもポイントが貯まるのである。waon とは別に &lt;a href="https://aeon.co.jp/service/lp/aeonpay/">AEON Pay&lt;/a> もある。iAEON アプリ上で AEON Pay が使える。AEON Pay は paypay のようなバーコード決済で、イオンカード以外にも銀行口座からもチャージできる。paypay 銀行は選択できなかったが、都市銀行や地方銀行などを選択して銀行口座から直接チャージできた。AEON Pay には waon ポイントを貯めるという仕組みはなく、AEON Pay の支払いをイオンカードにすることでイオンカードの利用によって waon ポイントが還元されるという仕組みになるため、銀行口座からチャージすると本来は waon ポイントが貯まらない。しかし、オーナーズカードの支払いは waon ポイントが貯まるので、オーナーズカードの認証をした上で AEON Pay をする分には waon ポイントが貯まっているようだ。&lt;/p>
&lt;p>たまたま iAEON アプリで近所の KOHYO を登録すると、その店舗で使えるクーポンが発行されていることに気付く。なぜかクーポンを選択という手作業の登録をする必要がある。クーポンは商品ごとにたくさんあって、1つずつ選択して登録するのが面倒なので「一括選択」というボタンがある。このボタンをタップするとすべてのクーポンが選択済みになって登録される。いま選択済みのクーポンが46個ある。この次は「一括選択」をタップしなくても自動的にクーポンを選択済みの状態にしてほしい。クーポンを選択済みの状態で iAEON アプリで会員証の認証をしてから決済をするとクーポンが適用されて割引を受けられる。クーポンには何度も使える装備タイプと1回使うとなくなる道具タイプがある。そして、KOHYO のクーポンに何度でも使える全品3%引きの装備タイプのクーポンがある。さらに土曜日はそれが5%引きクーポンにクラスチェンジする。つまり、土曜日に KOHYO で買いものすれば、オーナーズカードで3%キャッシュバック、装備タイプのクーポンで5%引き、その上で waon ポイントがつくという、おそらく一番よい装備が整ったという雰囲気だ。&lt;/p>
&lt;p>試しにポッキーのクーポンを使ってみようと、夜にスーパーへ行ったらすべて売り切れていた。仕方なく同じクーポンが適用されるプリッツを買ってきた。トマトプリッツ118円が、5%割引で112円になって、さらに別クーポンのバフがかかって10円引きで102円になる。この時点で 102/118 ≒ 86% なので14%引きになっている。さらにオーナーズカードで3%キャッシュバックになるので17%引きになる。なるほど、物価の上昇を吹き飛ばすような効果がありそうだ。&lt;/p>
&lt;p>今週はここまでの設定をするのにいろいろ調べていた。waon なにそれ？みたいな人間がアプリダウンロードして、アカウント作ったり、waon ポイントカードを作ったり、オーナーズカードを連携したり、あれこれやって理解できた。&lt;/p>
&lt;h2 id="ふるさと納税">ふるさと納税&lt;/h2>
&lt;p>いつも年末に購入している。このぐらいの時期になると急に思い出して、思い出したときに購入しないと忘れてしまうので一気に買いものした。私は2019年から毎年ふるさと納税をしている。いつも食べものをいくつか、工芸品を1つぐらい選択している。気に入るものがなかったら食べものしか買わないときもある。とくに深い意図はなくて、適当に検索して今年は次の4つに決めた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=3163482">[北海道清水町] 十勝スロウフード 牛とろ丼セット&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1368233">[長崎県壱岐市]クラフトビール 6本詰め合わせ(3種類×2本)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1320793">[大阪府泉佐野市]コンパクトバスタオル6枚&amp;lt;シックグレー&amp;gt; 速乾中厚の泉州タオル 010B962&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1053132">[滋賀県甲賀市]信楽焼・明山のとなりのトトロ totoro-01&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>普通にサラリーマンとして働いている人はふるさと納税のメリットがある。寄付金控除の限度額まで、実質2,000円で好きな返礼品をもらうことができる。私は毎年確定申告をしているのでワンストップ特例制度を利用する必要もなく、手続き上の手間暇もほぼないと言っていい。ふるさと納税の問題点としては次のようなことが指摘されている。&lt;/p>
&lt;ul>
&lt;li>(一般的に) 都市から地方へ税金が流出するので都市の自治体の税収が減る&lt;/li>
&lt;li>収入の高い人ほど寄付金控除の限度額が高いために得をする傾向がある&lt;/li>
&lt;li>寄付金 (税金) の3割以下 (返戻率と呼ぶ) のお金が本来の使途ではなく返礼品として流出する&lt;/li>
&lt;/ul>
&lt;p>問題や懸念があることは私も知っているが、私のような人間は、こういう機会がないと本来使わないお金を使っていたりするので購買意欲を換気するという側面もある。どのみち、都市に住む人が納めた税金を地方交付税という形で国が地方自治体へ分配している。ふるさと納税が地方交付税の割合に影響を与えているかどうかは知らないが、都市に住む人が納めた税金が地方へ分配されるのはそう変わらないのではないかと思ったりもする。都市に住んでいる人の大半は地方出身者であり、私もそうだが、地方出身者が都市で働いて税金を納めることで都市を支えているとみなすこともできる。都市も地方から働きに来てもらわないと都市を維持できなない。地方と都市は共依存の関係でもある。そして、返礼品を購入してもそのお金は地方の地元企業の経済活動に使われる。それ自体に問題があるわけでもないのではないか。本来の税金の使途が返礼品という、どちらかと言えば、嗜好品に使われているのがやや懸念ではあるが、地方の経済をまわすことに役立っていれば、それはそれで別の意義も出てくるのではないかと思う。&lt;/p></content></item><item><title>資産運用の新たなツール</title><link>/diary/posts/2023/1110/</link><pubDate>Fri, 10 Nov 2023 07:38:17 +0900</pubDate><guid>/diary/posts/2023/1110/</guid><description>3時に寝て6時半に起きた。晩ごはん食べて、夜の作業して、寝る前に paypay 証券の積立の仕組みを調べて設定したりしていた。昨日あまり寝ていなかったせいか、今日は17時でお仕事を終えて、帰ってきて晩ごはんを食べて、すぐ1-2時間寝落ちした。あまりこういう居眠りは少ない。21時過ぎに起きてまたオフィスへ戻って作業していた。
決算後の評価 昨日の続き 。おそらくネガティブな評価になるだろうという予測通り、寄り付きの価格は大きく下落して場中もどんどん下がって次のような結果になった。
日付 始値 高値 安値 終値 出来高 調整後終値 2023-11-09 6,152 6,333 6,098 6,305 7,250,900 6,305 2023-11-10 6,000 6,016 5,721 5,790 27,804,300 5,790 寄り付きの成り行き、指値、前場引け、後場引けと段階的に空売りの返済が進んで1日で約 77% を返済した。今月中には完済してしまおうとは考えているものの、今日1日で思ったより捌けたのは予想以上にザラ場でも価格が落ちていったから。十分な収益にはなったので来週中には適当なタイミングで完済してしまう。
paypay 証券の「つみたて」 口座を開設していたものの、ずっと放置していた paypay 証券のアプリを久しぶりにたまたま開いてみた。だいぶアプリも改善されたようで機能が増えているようにみえる。適当に触っていて、投信や外国株の購入オプションに「つみたて」があることに気付いた。定期的に決められた金額を購入できる。paypay 証券のよいところは最低1,000円から購入できるところ。これなら財形貯蓄のような用途に使える。
PayPay証券アプリに機能追加！ 〜米国株式つみたてができる！さらに見やすく・使いやすく！～ 私は2016年ぐらいから株式投資を始め、もう5年以上は継続している。そのぐらいやって気付いたことはたった1つで、私には投資運用のスキルもなく、そのモチベーションも高くない。資産運用の効率を考慮して貯金に懸念があるから株式投資をしているに過ぎない。あとは経営の勉強の延長で投資や経済の先行きを自分なりに組み立てて予想したりするのにも応用している。それはともかく、これまであまりうまく投資運用してこれなかった経験から、私にとっての株式投資の最適解は ドル・コスト平均法 になる。中二病の1つだと思うが、自分ならもっとうまく資産運用できると思ってあれこれやった結果、普遍的なドル・コスト平均法の凄さを理解しただけだった。一番よくない投資は一度に大きなお金を動かすことだと思う。一方で、自分の好きな会社に投資したいという思いはあって paypay 証券のような、会社を指定して「つみたて」というドル・コスト平均法のようなオプションはもっとも望ましいとずっと考えていて、これまで手動でやっていた方法だった。
試しに毎週1,000円ずつ購入する「つみたて」をいくつか設定してみた。どうやら外国株もすべてが選択できるわけではなさそう。アトラシアンやアームは検索結果に出てこなかった。
ファイザー クラウドフレア アマゾン・ドットコム あと投信も1つぐらい設定しておこうと思って、これも同じように「つみたて」してみた。
ひふみプラス とりあえず1,000円から始めて、世の中の状況をみながら期間や金額を調整するぐらいの、その程度のカスタマイズで十分。いままでも証券会社のアプリケーションでそういったことができたのかどうか、私はよく知らないけど、スマホアプリだと、ちゃちゃっと触って操作できるのでお手軽でよい。自分が詳しくないものを扱うのはスマホアプリが便利でよい。</description><content>&lt;p>3時に寝て6時半に起きた。晩ごはん食べて、夜の作業して、寝る前に paypay 証券の積立の仕組みを調べて設定したりしていた。昨日あまり寝ていなかったせいか、今日は17時でお仕事を終えて、帰ってきて晩ごはんを食べて、すぐ1-2時間寝落ちした。あまりこういう居眠りは少ない。21時過ぎに起きてまたオフィスへ戻って作業していた。&lt;/p>
&lt;h2 id="決算後の評価">決算後の評価&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1109/#ソフトバンクグループ-第2四半期-決算">昨日の続き&lt;/a> 。おそらくネガティブな評価になるだろうという予測通り、寄り付きの価格は大きく下落して場中もどんどん下がって次のような結果になった。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">日付&lt;/th>
&lt;th style="text-align:right">始値&lt;/th>
&lt;th style="text-align:right">高値&lt;/th>
&lt;th style="text-align:right">安値&lt;/th>
&lt;th style="text-align:right">終値&lt;/th>
&lt;th style="text-align:right">出来高&lt;/th>
&lt;th style="text-align:right">調整後終値&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">2023-11-09&lt;/td>
&lt;td style="text-align:right">6,152&lt;/td>
&lt;td style="text-align:right">6,333&lt;/td>
&lt;td style="text-align:right">6,098&lt;/td>
&lt;td style="text-align:right">6,305&lt;/td>
&lt;td style="text-align:right">7,250,900&lt;/td>
&lt;td style="text-align:right">6,305&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-10&lt;/td>
&lt;td style="text-align:right">6,000&lt;/td>
&lt;td style="text-align:right">6,016&lt;/td>
&lt;td style="text-align:right">5,721&lt;/td>
&lt;td style="text-align:right">5,790&lt;/td>
&lt;td style="text-align:right">27,804,300&lt;/td>
&lt;td style="text-align:right">5,790&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>寄り付きの成り行き、指値、前場引け、後場引けと段階的に空売りの返済が進んで1日で約 77% を返済した。今月中には完済してしまおうとは考えているものの、今日1日で思ったより捌けたのは予想以上にザラ場でも価格が落ちていったから。十分な収益にはなったので来週中には適当なタイミングで完済してしまう。&lt;/p>
&lt;h1 id="paypay-証券のつみたて">paypay 証券の「つみたて」&lt;/h1>
&lt;p>口座を開設していたものの、ずっと放置していた paypay 証券のアプリを久しぶりにたまたま開いてみた。だいぶアプリも改善されたようで機能が増えているようにみえる。適当に触っていて、投信や外国株の購入オプションに「つみたて」があることに気付いた。定期的に決められた金額を購入できる。paypay 証券のよいところは最低1,000円から購入できるところ。これなら財形貯蓄のような用途に使える。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.paypay-sec.co.jp/news/20230403_2.html">PayPay証券アプリに機能追加！ 〜米国株式つみたてができる！さらに見やすく・使いやすく！～&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>私は2016年ぐらいから株式投資を始め、もう5年以上は継続している。そのぐらいやって気付いたことはたった1つで、私には投資運用のスキルもなく、そのモチベーションも高くない。資産運用の効率を考慮して貯金に懸念があるから株式投資をしているに過ぎない。あとは経営の勉強の延長で投資や経済の先行きを自分なりに組み立てて予想したりするのにも応用している。それはともかく、これまであまりうまく投資運用してこれなかった経験から、私にとっての株式投資の最適解は &lt;a href="https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%AB%E3%83%BB%E3%82%B3%E3%82%B9%E3%83%88%E5%B9%B3%E5%9D%87%E6%B3%95">ドル・コスト平均法&lt;/a> になる。中二病の1つだと思うが、自分ならもっとうまく資産運用できると思ってあれこれやった結果、普遍的なドル・コスト平均法の凄さを理解しただけだった。一番よくない投資は一度に大きなお金を動かすことだと思う。一方で、自分の好きな会社に投資したいという思いはあって paypay 証券のような、会社を指定して「つみたて」というドル・コスト平均法のようなオプションはもっとも望ましいとずっと考えていて、これまで手動でやっていた方法だった。&lt;/p>
&lt;p>試しに毎週1,000円ずつ購入する「つみたて」をいくつか設定してみた。どうやら外国株もすべてが選択できるわけではなさそう。アトラシアンやアームは検索結果に出てこなかった。&lt;/p>
&lt;ul>
&lt;li>ファイザー&lt;/li>
&lt;li>クラウドフレア&lt;/li>
&lt;li>アマゾン・ドットコム&lt;/li>
&lt;/ul>
&lt;p>あと投信も1つぐらい設定しておこうと思って、これも同じように「つみたて」してみた。&lt;/p>
&lt;ul>
&lt;li>ひふみプラス&lt;/li>
&lt;/ul>
&lt;p>とりあえず1,000円から始めて、世の中の状況をみながら期間や金額を調整するぐらいの、その程度のカスタマイズで十分。いままでも証券会社のアプリケーションでそういったことができたのかどうか、私はよく知らないけど、スマホアプリだと、ちゃちゃっと触って操作できるのでお手軽でよい。自分が詳しくないものを扱うのはスマホアプリが便利でよい。&lt;/p></content></item><item><title>儲かっていない会社に中間申告はない</title><link>/diary/posts/2023/1109/</link><pubDate>Thu, 09 Nov 2023 08:48:38 +0900</pubDate><guid>/diary/posts/2023/1109/</guid><description>0時に寝て何度か起きて7時過ぎに起きた。髭を剃っていて唇を切った。
ソフトバンクグループ 第2四半期 決算 孫さんが決算発表の場に出てこなくなってまったく関心がなくなっている。ここ数ヶ月ほどタイミングを見計らって少しずつ空売りしてきた。ちょうど年の暮れだしこのタイミングで空売りの返済をしてしまおうと考えている。昨今の雰囲気からまだまだ投資の時期ではなく、なんとなくソフトバンクグループの決算は悪いのだろうと予測していた。虎の子の ARM も上場してしまって他に材料もないだろうと。
ソフトバンクグループ 2024年3月期 第2四半期 決算 とくにみるつもりはなかったけれど、作業しながら CFO の説明を聞いていて、「守り」がうんたら、財務が健全だと何度か話していることに気付いた。周りから財務を不安視されて懸念を持たれていることの裏返しように聞こえた。普通、投資会社なら投資の成果をもっとアピールすればいいと思えるが、財務の健全性をアピールするというのがおもしろおかしく聞こえた。arm が上場したにも関わらず、現在の株価と 1株当たりNAV情報 の差も前回の決算時よりも開いてしまったと説明していた気がする。それが市場の答えにも思えた。
おそらく明日の寄り付きの価格は下がると推測するけれど、明日はマイナー SQ だし、この決算でどのぐらい下がるのか、やや楽しみ。11月中には空売りを返済してしまうつもり。
中間申告 前期は黒字決算だったので自動的に中間申告が必要なのだと思い込んでいた。しかし、例年ならすでに納税のための通知やデータが届いているはずが一向に来ない。
昨日、消費税の中間申告の通知が届いた。2年前から消費税を支払っているはずだけど、昨年は中間申告の通知が来てないような？まぁいいや。e-tax のメッセージボックスには中間申告のデータも届いていて、それを使って申告書を作成して pay-easy でそのまま納付した。作業時間は15分といったところ。中間申告はめっちゃ簡単。
本題の法人税などの中間申告の通知が来ないので厳密な中間申告の条件について調べてみた。
中間申告が必要なのは、前事業年度の法人税額が20万円を超える場合です。中間申告が必要となったとき、その提出期限と税金の納期限は、事業年度開始後6月を経過した日から2月以内です。なお、法人税の中間申告の対象となる人は、地方税（都道府県税、市町村民税、事業税等）についての申告も必要です。
法人税の中間申告とは？目的や申告方法を基礎から解説！ | 経理・会計業務を効率化「経理プラス」
法人税が20万円を超えないと中間申告は不要だという。前期の法人税を調べたら 187,800 円だった。これで法人税と地方法人税の中間申告は不要であることがわかった。
また、事業年度が6カ月を超える法人で法人税の中間申告義務のある法人は、その事業年度開始の日から6カ月を経過した日から2カ月以内に原則として前事業年度の税額の半分の額を予定（中間）申告して納めます。
法人県民税・事業税、特別法人事業税・地方法人特別税
次に法人県民税も「法人税の中間申告義務のある法人」とあるので法人税の判定基準と同じになる。
予定申告は、法人税において前事業年度の確定法人税額に前事業年度の月数で除し6を乗じて計算した金額が10万円以下の場合はその年度の申告の必要はありません。
神戸市：法人市民税に関するQ&amp;amp;A
実際に計算してみると、187,800 / 12 * 6 = 93,900 円となって10万円以下なので中間申告は必要ないとのこと。
要約すると、あまり納税していない会社は中間申告しなくてよいってことだと理解できた。前期は iphone 14 pro, m2 macbook, 社用車、デスクトップマシンといろいろお金を使ったので納税額が少なかったみたい。</description><content>&lt;p>0時に寝て何度か起きて7時過ぎに起きた。髭を剃っていて唇を切った。&lt;/p>
&lt;h2 id="ソフトバンクグループ-第2四半期-決算">ソフトバンクグループ 第2四半期 決算&lt;/h2>
&lt;p>孫さんが決算発表の場に出てこなくなってまったく関心がなくなっている。ここ数ヶ月ほどタイミングを見計らって少しずつ空売りしてきた。ちょうど年の暮れだしこのタイミングで空売りの返済をしてしまおうと考えている。昨今の雰囲気からまだまだ投資の時期ではなく、なんとなくソフトバンクグループの決算は悪いのだろうと予測していた。虎の子の ARM も上場してしまって他に材料もないだろうと。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://group.softbank/event/earnings_2023q2">ソフトバンクグループ 2024年3月期 第2四半期 決算&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>とくにみるつもりはなかったけれど、作業しながら CFO の説明を聞いていて、「守り」がうんたら、財務が健全だと何度か話していることに気付いた。周りから財務を不安視されて懸念を持たれていることの裏返しように聞こえた。普通、投資会社なら投資の成果をもっとアピールすればいいと思えるが、財務の健全性をアピールするというのがおもしろおかしく聞こえた。arm が上場したにも関わらず、現在の株価と &lt;a href="https://group.softbank/ir/stock/sotp">1株当たりNAV情報&lt;/a> の差も前回の決算時よりも開いてしまったと説明していた気がする。それが市場の答えにも思えた。&lt;/p>
&lt;p>おそらく明日の寄り付きの価格は下がると推測するけれど、明日はマイナー SQ だし、この決算でどのぐらい下がるのか、やや楽しみ。11月中には空売りを返済してしまうつもり。&lt;/p>
&lt;h2 id="中間申告">中間申告&lt;/h2>
&lt;p>前期は黒字決算だったので自動的に中間申告が必要なのだと思い込んでいた。しかし、例年ならすでに納税のための通知やデータが届いているはずが一向に来ない。&lt;/p>
&lt;p>昨日、消費税の中間申告の通知が届いた。2年前から消費税を支払っているはずだけど、昨年は中間申告の通知が来てないような？まぁいいや。e-tax のメッセージボックスには中間申告のデータも届いていて、それを使って申告書を作成して pay-easy でそのまま納付した。作業時間は15分といったところ。中間申告はめっちゃ簡単。&lt;/p>
&lt;p>本題の法人税などの中間申告の通知が来ないので厳密な中間申告の条件について調べてみた。&lt;/p>
&lt;blockquote>
&lt;p>中間申告が必要なのは、前事業年度の法人税額が20万円を超える場合です。中間申告が必要となったとき、その提出期限と税金の納期限は、事業年度開始後6月を経過した日から2月以内です。なお、法人税の中間申告の対象となる人は、地方税（都道府県税、市町村民税、事業税等）についての申告も必要です。&lt;/p>
&lt;p>&lt;a href="https://keiriplus.jp/tips/houjinzei_cyukansinkoku/">法人税の中間申告とは？目的や申告方法を基礎から解説！ | 経理・会計業務を効率化「経理プラス」&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>法人税が20万円を超えないと中間申告は不要だという。前期の法人税を調べたら 187,800 円だった。これで法人税と地方法人税の中間申告は不要であることがわかった。&lt;/p>
&lt;blockquote>
&lt;p>また、事業年度が6カ月を超える法人で法人税の中間申告義務のある法人は、その事業年度開始の日から6カ月を経過した日から2カ月以内に原則として前事業年度の税額の半分の額を予定（中間）申告して納めます。&lt;/p>
&lt;p>&lt;a href="https://web.pref.hyogo.lg.jp/kk22/pa04_000000008.html">法人県民税・事業税、特別法人事業税・地方法人特別税&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>次に法人県民税も「法人税の中間申告義務のある法人」とあるので法人税の判定基準と同じになる。&lt;/p>
&lt;blockquote>
&lt;p>予定申告は、法人税において前事業年度の確定法人税額に前事業年度の月数で除し6を乗じて計算した金額が10万円以下の場合はその年度の申告の必要はありません。&lt;/p>
&lt;p>&lt;a href="https://www.city.kobe.lg.jp/a35984/kurashi/tax/houjin/200.html#unker6">神戸市：法人市民税に関するQ&amp;amp;A&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>実際に計算してみると、187,800 / 12 * 6 = 93,900 円となって10万円以下なので中間申告は必要ないとのこと。&lt;/p>
&lt;p>要約すると、あまり納税していない会社は中間申告しなくてよいってことだと理解できた。前期は iphone 14 pro, m2 macbook, 社用車、デスクトップマシンといろいろお金を使ったので納税額が少なかったみたい。&lt;/p></content></item><item><title>rbac なロールでの動的な権限チェック</title><link>/diary/posts/2023/1108/</link><pubDate>Wed, 08 Nov 2023 08:26:25 +0900</pubDate><guid>/diary/posts/2023/1108/</guid><description>23時に寝て何度か起きて7時に起きた。夜に作業するつもりが、メイドインアビス を見ながら寝落ちした。
ldap で認証したユーザーの権限管理 rbac なロール管理 の仕組みを api サーバーに実装した。初期実装したときは静的にリソース (url) に対して acl から権限が許可されているかどうかのみをチェックするだけでよかった。ldap で認証したユーザーは自分の情報は更新できるが、他人の情報は更新できないといったリクエスト単位に権限が許可されているかどうかをミドルウェアで判別したい。いわば、リクエスト時に動的にリソースの情報をチェックしないといけない。
いくつか試行錯誤して、あーでもないこーどもないとやった結果、次のように落ち着いた。
リソースは動的な権限チェックのために AuthorizeFunc を取得するための AuthorizeKey をもつ AuthorizeFunc は Context から取得する AuthorizeFunc が true を返す場合は権限を付与する func (r *Role) CanAccess(ctx context.Context, resourceName, target string) bool { for _, ac := range r.ACL { if ac.Resource.Match(resourceName) { for _, perm := range ac.Permissions { if perm.IsGranted(target) { return true } } if authorize, ok := ctx.Value(ac.Resource.Key).(AuthorizeFunc); ok { if authorize(ctx, resourceName, target) { return true } } } } return false } ロールに渡す Context にはあらかじめ、AuthorizeKey と AuthorizeFunc を登録しておく。</description><content>&lt;p>23時に寝て何度か起きて7時に起きた。夜に作業するつもりが、&lt;a href="http://miabyss.com/">メイドインアビス&lt;/a> を見ながら寝落ちした。&lt;/p>
&lt;h2 id="ldap-で認証したユーザーの権限管理">ldap で認証したユーザーの権限管理&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1026/">rbac なロール管理&lt;/a> の仕組みを api サーバーに実装した。初期実装したときは静的にリソース (url) に対して acl から権限が許可されているかどうかのみをチェックするだけでよかった。ldap で認証したユーザーは自分の情報は更新できるが、他人の情報は更新できないといったリクエスト単位に権限が許可されているかどうかをミドルウェアで判別したい。いわば、リクエスト時に動的にリソースの情報をチェックしないといけない。&lt;/p>
&lt;p>いくつか試行錯誤して、あーでもないこーどもないとやった結果、次のように落ち着いた。&lt;/p>
&lt;ul>
&lt;li>リソースは動的な権限チェックのために AuthorizeFunc を取得するための AuthorizeKey をもつ&lt;/li>
&lt;li>AuthorizeFunc は Context から取得する&lt;/li>
&lt;li>AuthorizeFunc が true を返す場合は権限を付与する&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">r&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">Role&lt;/span>) &lt;span style="color:#a6e22e">CanAccess&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>, &lt;span style="color:#a6e22e">resourceName&lt;/span>, &lt;span style="color:#a6e22e">target&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>) &lt;span style="color:#66d9ef">bool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">ac&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">r&lt;/span>.&lt;span style="color:#a6e22e">ACL&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Resource&lt;/span>.&lt;span style="color:#a6e22e">Match&lt;/span>(&lt;span style="color:#a6e22e">resourceName&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">perm&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Permissions&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">perm&lt;/span>.&lt;span style="color:#a6e22e">IsGranted&lt;/span>(&lt;span style="color:#a6e22e">target&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">authorize&lt;/span>, &lt;span style="color:#a6e22e">ok&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">ctx&lt;/span>.&lt;span style="color:#a6e22e">Value&lt;/span>(&lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Resource&lt;/span>.&lt;span style="color:#a6e22e">Key&lt;/span>).(&lt;span style="color:#a6e22e">AuthorizeFunc&lt;/span>); &lt;span style="color:#a6e22e">ok&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">authorize&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">resourceName&lt;/span>, &lt;span style="color:#a6e22e">target&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ロールに渡す Context にはあらかじめ、AuthorizeKey と AuthorizeFunc を登録しておく。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ctx&lt;/span> = &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">WithValue&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">role&lt;/span>.&lt;span style="color:#a6e22e">LDAPResource&lt;/span>, &lt;span style="color:#a6e22e">role&lt;/span>.&lt;span style="color:#a6e22e">IsLDAPResourceOwner&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>リソースを生成するときに AuthorizeKey をセットしておく。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ldapUserResource&lt;/span> = &lt;span style="color:#a6e22e">rbac&lt;/span>.&lt;span style="color:#a6e22e">NewResource&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ldap-user-specific-operation&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;(/api/ldap/entry|/api/ldap/entry/.*)&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">LDAPResource&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ちょっと設定は煩雑になるが、ひとまずこれで要件を満たせた。&lt;/p></content></item><item><title>葛藤も逡巡もしない</title><link>/diary/posts/2023/1107/</link><pubDate>Tue, 07 Nov 2023 10:54:56 +0900</pubDate><guid>/diary/posts/2023/1107/</guid><description>2時に寝て4時に起きて6時に起きて7時半に起きた。意味なくあまりよく眠れなかった。自分の pr のレビュー待ちやリファクタリングと他人のデザインレビュー／コードレビューなど、いろいろ雑多なことをやって隙間の1日になった。
メイドインアビス 烈日の黄金郷 ちょっと時期は遅れていると思うけど、メイドインアビス の新しい作品が配信されているのに気付いた。晩ごはんを食べてから見始めたらおもしろくて、夜に別作業をするつもりが寝落ちするまで見続けてしまった。
劇場版「メイドインアビス」-深き魂の黎明- も何度もみた。好きな作品の1つだ。敵としてボンボルドというキャラクターが出てくるが、ボンボルドの在り方は一概に悪とか非道とか、サイコパスと断じられるものでもなく、なにか強い印象に残っていた。
今回の「烈日の黄金郷」においても敵でないが、ワズキャンというリーダーキャラクターが出てくる。メイドインアビスは、その世界観として死が身近な状況における強いリーダーシップを描いているようにみえる。それが世界観のせいなのか、作者の独特の感性なのか、その両方なのかはわからないが、とても特異なリーダーシップにみえてしまう。現代の生活や価値観から言えばサイコパスのようにみえるが、作品の世界観から言えば、強いリーダーシップと解釈できる。そのリーダーの選択、決断、思考、信念、潔さのどれもが淡々としたストーリーの展開をミステリアスなものにしている。
なぜか私はこの作品のちょっと特異なリーダーに共感するところがあっておもしろくみることができる。共感するところの1つに、メイドインアビスに出てくるリーダーは葛藤や逡巡をしない。括弧とした信念があるから仲間を犠牲にしても自責しない。それがある種の潔さや偽善を感じない爽快さにつながっていて私の価値観にあっているように思える。そう、失敗しても潔いのが私は好きなのだ。誰かの責任にもしないし、その結果で自暴自棄になったりもしない。なにが起きてもそれは自分の人生で受け入れていくしかない。メイドインアビスに出てくるリーダー像はまさにそれを体現しているように思う。</description><content>&lt;p>2時に寝て4時に起きて6時に起きて7時半に起きた。意味なくあまりよく眠れなかった。自分の pr のレビュー待ちやリファクタリングと他人のデザインレビュー／コードレビューなど、いろいろ雑多なことをやって隙間の1日になった。&lt;/p>
&lt;h2 id="メイドインアビス-烈日の黄金郷">メイドインアビス 烈日の黄金郷&lt;/h2>
&lt;p>ちょっと時期は遅れていると思うけど、&lt;a href="http://miabyss.com/index.html">メイドインアビス&lt;/a> の新しい作品が配信されているのに気付いた。晩ごはんを食べてから見始めたらおもしろくて、夜に別作業をするつもりが寝落ちするまで見続けてしまった。&lt;/p>
&lt;p>&lt;a href="http://miabyss.com/movie/">劇場版「メイドインアビス」-深き魂の黎明-&lt;/a> も何度もみた。好きな作品の1つだ。敵としてボンボルドというキャラクターが出てくるが、ボンボルドの在り方は一概に悪とか非道とか、サイコパスと断じられるものでもなく、なにか強い印象に残っていた。&lt;/p>
&lt;p>今回の「烈日の黄金郷」においても敵でないが、ワズキャンというリーダーキャラクターが出てくる。メイドインアビスは、その世界観として死が身近な状況における強いリーダーシップを描いているようにみえる。それが世界観のせいなのか、作者の独特の感性なのか、その両方なのかはわからないが、とても特異なリーダーシップにみえてしまう。現代の生活や価値観から言えばサイコパスのようにみえるが、作品の世界観から言えば、強いリーダーシップと解釈できる。そのリーダーの選択、決断、思考、信念、潔さのどれもが淡々としたストーリーの展開をミステリアスなものにしている。&lt;/p>
&lt;p>なぜか私はこの作品のちょっと特異なリーダーに共感するところがあっておもしろくみることができる。共感するところの1つに、メイドインアビスに出てくるリーダーは葛藤や逡巡をしない。括弧とした信念があるから仲間を犠牲にしても自責しない。それがある種の潔さや偽善を感じない爽快さにつながっていて私の価値観にあっているように思える。そう、失敗しても潔いのが私は好きなのだ。誰かの責任にもしないし、その結果で自暴自棄になったりもしない。なにが起きてもそれは自分の人生で受け入れていくしかない。メイドインアビスに出てくるリーダー像はまさにそれを体現しているように思う。&lt;/p></content></item><item><title>考えないという傷のある現場</title><link>/diary/posts/2023/1106/</link><pubDate>Mon, 06 Nov 2023 08:32:47 +0900</pubDate><guid>/diary/posts/2023/1106/</guid><description>2時に寝て7時半に起きた。昨日からよく寝た。また心機一転。
ldap エントリーの crud api 先週から ldap クライアントや そのプール を実装して結合テストも一通り書いていた。今日はそれらを使った crud な web api を一通り実装した。クライアント実装もテストもしっかり出来ているので後は時間の問題で1つずつ確認しながらコードを書いていくだけだった。こういう作業になると、まとまった時間があればすぐに終わる。他のメンバーのコードレビューをみたり、設計の話しをしたり、他に意識を取られてあまり自分の作業に集中できなかった。
言葉が通じないもどかしさ 先週「参考にして」と指示したものが「全コピー」で驚いてしまった。私がいくつか指摘したらすぐに削除し始めてさらに落胆した。自分の頭で考えて作業していないようにみえる。
開発というお仕事は自分で考えて、コードの1つ1つに明確な意図や根拠をもって書くものだ。もちろん、情報不足や設計に自信がもてなくて一時的に曖昧な実装にするときもあるけれど、それは懸念事項として把握しておくことで将来対応すればよい。基本的に追加するコードにはすべて意味がある。
他人が分からなくても自分が理解できているのなら、自分の考えを説明し、それが論理的であったり筋が通っていれば、私は自分の考えと違っていても構わない。説明できないコードを追加して、ツッコミを受けてなにも説明できない状況をみているのは本当に悲しい。
山田ズーニーさんの著書に書いてあった「考えないという傷」を思い出した。
「働きたくない」というあなたへ ７</description><content>&lt;p>2時に寝て7時半に起きた。昨日からよく寝た。また心機一転。&lt;/p>
&lt;h2 id="ldap-エントリーの-crud-api">ldap エントリーの crud api&lt;/h2>
&lt;p>先週から ldap クライアントや &lt;a href="/diary/diary/posts/2023/1102/#コネクションを共有しないプール">そのプール&lt;/a> を実装して結合テストも一通り書いていた。今日はそれらを使った crud な web api を一通り実装した。クライアント実装もテストもしっかり出来ているので後は時間の問題で1つずつ確認しながらコードを書いていくだけだった。こういう作業になると、まとまった時間があればすぐに終わる。他のメンバーのコードレビューをみたり、設計の話しをしたり、他に意識を取られてあまり自分の作業に集中できなかった。&lt;/p>
&lt;h2 id="言葉が通じないもどかしさ">言葉が通じないもどかしさ&lt;/h2>
&lt;p>先週「参考にして」と指示したものが「全コピー」で驚いてしまった。私がいくつか指摘したらすぐに削除し始めてさらに落胆した。自分の頭で考えて作業していないようにみえる。&lt;/p>
&lt;p>開発というお仕事は自分で考えて、コードの1つ1つに明確な意図や根拠をもって書くものだ。もちろん、情報不足や設計に自信がもてなくて一時的に曖昧な実装にするときもあるけれど、それは懸念事項として把握しておくことで将来対応すればよい。基本的に追加するコードにはすべて意味がある。&lt;/p>
&lt;p>他人が分からなくても自分が理解できているのなら、自分の考えを説明し、それが論理的であったり筋が通っていれば、私は自分の考えと違っていても構わない。説明できないコードを追加して、ツッコミを受けてなにも説明できない状況をみているのは本当に悲しい。&lt;/p>
&lt;p>山田ズーニーさんの著書に書いてあった「考えないという傷」を思い出した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.1101.com/essay/2010-03-17.html">「働きたくない」というあなたへ ７&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>秋休み3</title><link>/diary/posts/2023/1105/</link><pubDate>Sun, 05 Nov 2023 08:32:45 +0900</pubDate><guid>/diary/posts/2023/1105/</guid><description>2時に寝て何度か起きて8時に起きた。休むつもりはなかったのだけれども、お昼までゆっくりしていたら、今日はもういっかと思ってそのままお休みすることにした。疲れていたのかもしれない。1日のんびりしていた。</description><content>&lt;p>2時に寝て何度か起きて8時に起きた。休むつもりはなかったのだけれども、お昼までゆっくりしていたら、今日はもういっかと思ってそのままお休みすることにした。疲れていたのかもしれない。1日のんびりしていた。&lt;/p></content></item><item><title>筋肉痛の翌日</title><link>/diary/posts/2023/1104/</link><pubDate>Sat, 04 Nov 2023 12:50:02 +0900</pubDate><guid>/diary/posts/2023/1104/</guid><description>昨日は山登りで筋肉痛になって夕方からずっと寝ていて7時に起きて8時半に起きた。それでも寝たら筋肉痛はある程度は直った。寝ると回復するもんや。
ストレッチ 昨日から全身筋肉痛になっている。それでも夕方からずっと安静にしていたせいか、昨日の一番ひどかった頃よりずっと回復していた。さらにストレッチでそういった話しをしたら、トレーナーさんも筋肉痛を気遣った形でストレッチをしてくれた。筋肉痛の状態だと筋肉は伸びないらしい。あまり筋を押さず、ほぐすようなストレッチにしてくれたという。筋肉痛にも関わらず、いつもよりも関節や筋肉の負荷が小さかったように思える。今日の開脚幅は開始前153cmで、ストレッチ後155cmだった。
カフーツさん訪問 たまたま見かけたので ブログJelly Vol.135 に参加してきた。瑞祥 黒松剣菱 というお酒をもっていった。こういうイベントで灘のお酒を飲む機会にしようと思ったものの、今回は周りの人たちにあわせてワインとビールを飲むだけで終わってしまった。次回のイベントのときに飲みましょうとお酒を置いてきた。私自身、家で日本酒を飲まない。カジュアルに日本酒を飲もうという空気や雰囲気がない。入り口を変えるため、日本酒にあう食事やつまみも用意していくのがよいと気付いた。次回は日本酒向けの食べものをもっていこうと思う。
昨日の山登りの下山中もマネジメントや気付きについて2時間ほど一緒に行った人たちと話していた。ここでもお酒が入ったらその延長の話しをだらだらやってしまった。気付きがないという事象に対して、どうやれば気付きを得られるようになるか、その背景や変化、人の特性・性格・成長などについて、私はいま関心をもっている。人に依るというのも多分にあると思う。教えてできることなのかどうかすら、私はわかっていない。私の立場としては、仕組みとプラクティスで気付きを与えて、教育によって成長することを願いたい。
いとうさんに note のオンラインコンテンツの領収書にインボイスの登録番号を設定してほしいとお願いした。さらにコワーキングスペースのサービス料がいま1,000円になっている。よくみると、90円の消費税を含んで税込み価格になっている。こういうとき、1,000円をサービス料、100円を消費税、税込みで1,100円にすればいいとアドバイスした。次回からそうするといとうさんも話されていた。免税事業者が課税事業者になっても事業者の損益には影響を与えない状態を支持したい。
インボイスの少額特例 freee の「修正待ちリスト一覧」にインボイスの少額特例に該当する明細があるという通知が出ている。次の条件に当てはまる事業者は少額特例の対象になるという。
「前々年度の課税売上高が1億円以下」または「前年度の開始から6ヶ月間の課税売上高が5,000万円以下」のどちらかに当てはまる事業者で、税込1万円未満の仕入や経費は、インボイス（適格請求書）があるかどうかにかかわらず仕入税額を控除できます。
少額特例（一定規模以下の事業者に対する事務負担の軽減措置の概要）の概要 うちは消費税の申告に 簡易課税制度 を選択しているため、事実上、インボイスの有無で消費税の仕入れ控除に影響はない。実際の消費税の納税には影響を与えないが、税制の理解を深めるために取引明細や税区分の処理などをちゃんと記帳しようとは考えている。将来的に簡易課税制度が廃止されたり、その条件を満たさないようになる可能性もある。消費税のようなシンプルな税金にも関わらず、事業者は本質的に損益に影響を与えないものにも関わらず、取引先との関係、政治や社会的な事情によって税制が混乱している。
消費税の逆進性についての問題も見聞きはする。次の記事では生活必需品に低い税率を適用することで緩和するという対策を述べている。さまざまな条件で時限的な特例を多重に発令するよりも、すでに軽減税率があるのだから食品は5%にするとか、そういったシンプルな税制で対策を取れないのだろうかと考えてしまう。
消費税の逆進性は大問題か？</description><content>&lt;p>昨日は山登りで筋肉痛になって夕方からずっと寝ていて7時に起きて8時半に起きた。それでも寝たら筋肉痛はある程度は直った。寝ると回復するもんや。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>昨日から全身筋肉痛になっている。それでも夕方からずっと安静にしていたせいか、昨日の一番ひどかった頃よりずっと回復していた。さらにストレッチでそういった話しをしたら、トレーナーさんも筋肉痛を気遣った形でストレッチをしてくれた。筋肉痛の状態だと筋肉は伸びないらしい。あまり筋を押さず、ほぐすようなストレッチにしてくれたという。筋肉痛にも関わらず、いつもよりも関節や筋肉の負荷が小さかったように思える。今日の開脚幅は開始前153cmで、ストレッチ後155cmだった。&lt;/p>
&lt;h2 id="カフーツさん訪問">カフーツさん訪問&lt;/h2>
&lt;p>たまたま見かけたので &lt;a href="https://www.facebook.com/events/302759626024469">ブログJelly Vol.135&lt;/a> に参加してきた。&lt;a href="https://www.kenbishi.co.jp/product/sake5/">瑞祥 黒松剣菱&lt;/a> というお酒をもっていった。こういうイベントで灘のお酒を飲む機会にしようと思ったものの、今回は周りの人たちにあわせてワインとビールを飲むだけで終わってしまった。次回のイベントのときに飲みましょうとお酒を置いてきた。私自身、家で日本酒を飲まない。カジュアルに日本酒を飲もうという空気や雰囲気がない。入り口を変えるため、日本酒にあう食事やつまみも用意していくのがよいと気付いた。次回は日本酒向けの食べものをもっていこうと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1104_sake.jpg"/>
&lt;/figure>
&lt;p>昨日の山登りの下山中もマネジメントや気付きについて2時間ほど一緒に行った人たちと話していた。ここでもお酒が入ったらその延長の話しをだらだらやってしまった。気付きがないという事象に対して、どうやれば気付きを得られるようになるか、その背景や変化、人の特性・性格・成長などについて、私はいま関心をもっている。人に依るというのも多分にあると思う。教えてできることなのかどうかすら、私はわかっていない。私の立場としては、仕組みとプラクティスで気付きを与えて、教育によって成長することを願いたい。&lt;/p>
&lt;p>いとうさんに note のオンラインコンテンツの領収書にインボイスの登録番号を設定してほしいとお願いした。さらにコワーキングスペースのサービス料がいま1,000円になっている。よくみると、90円の消費税を含んで税込み価格になっている。こういうとき、1,000円をサービス料、100円を消費税、税込みで1,100円にすればいいとアドバイスした。次回からそうするといとうさんも話されていた。免税事業者が課税事業者になっても事業者の損益には影響を与えない状態を支持したい。&lt;/p>
&lt;h2 id="インボイスの少額特例">インボイスの少額特例&lt;/h2>
&lt;p>freee の「修正待ちリスト一覧」にインボイスの少額特例に該当する明細があるという通知が出ている。次の条件に当てはまる事業者は少額特例の対象になるという。&lt;/p>
&lt;blockquote>
&lt;p>「前々年度の課税売上高が1億円以下」または「前年度の開始から6ヶ月間の課税売上高が5,000万円以下」のどちらかに当てはまる事業者で、税込1万円未満の仕入や経費は、インボイス（適格請求書）があるかどうかにかかわらず仕入税額を控除できます。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://www.nta.go.jp/publication/pamph/shohi/kaisei/202304/02.htm">少額特例（一定規模以下の事業者に対する事務負担の軽減措置の概要）の概要&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>うちは消費税の申告に &lt;a href="https://www.nta.go.jp/taxes/shiraberu/taxanswer/shohi/6505.htm">簡易課税制度&lt;/a> を選択しているため、事実上、インボイスの有無で消費税の仕入れ控除に影響はない。実際の消費税の納税には影響を与えないが、税制の理解を深めるために取引明細や税区分の処理などをちゃんと記帳しようとは考えている。将来的に簡易課税制度が廃止されたり、その条件を満たさないようになる可能性もある。消費税のようなシンプルな税金にも関わらず、事業者は本質的に損益に影響を与えないものにも関わらず、取引先との関係、政治や社会的な事情によって税制が混乱している。&lt;/p>
&lt;p>消費税の逆進性についての問題も見聞きはする。次の記事では生活必需品に低い税率を適用することで緩和するという対策を述べている。さまざまな条件で時限的な特例を多重に発令するよりも、すでに軽減税率があるのだから食品は5%にするとか、そういったシンプルな税制で対策を取れないのだろうかと考えてしまう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.nli-research.co.jp/report/detail/id=39892?site=nli">消費税の逆進性は大問題か？&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>ハイキング山登り</title><link>/diary/posts/2023/1103/</link><pubDate>Fri, 03 Nov 2023 08:50:00 +0900</pubDate><guid>/diary/posts/2023/1103/</guid><description>4時に寝て8時に起きた。久しぶりに深夜過ぎまでコードを書いて、あと文章を書いて、気付いたら3時をまわっていた。
新神戸駅からのハイキング 新神戸駅に10時集合、遅刻もあって少し出発は遅れたが、10時半には駅を出発した。駅を出たらすぐに登山道に入れる。これはすごい立地だと思う。通常、登山道までは市街地から1-2時間かけて移動することが多いと思う。新神戸駅という市街地からすぐに山登りできるというのは神戸観光の1つとして十分によいと思えた。11月としては高めの最高気温23℃とやや暑いぐらいだったが、山登りにはちょうどいい気候だった。寒い時期や暑い時期を避けるという意味で11月はよい時期の選択にみえる。まだ暖かいせいか、紅葉は始まったばかりで、もう少し遅い時期だと紅葉も楽しめてよいかもしれない。
トレイルステーション 布引の滝 (雄滝) ハイキングマップの B 布引ゾーンは、山道もコンクリートで舗装されていて歩きやすい。布引の滝は雌と雄の2つがあり、雄滝は整備されているのもあって観光向けになっている。
布引五本松堰堤 ダムの1つ。周囲をぐるっと回りながらハイキングを続ける。この辺りも舗装された道路が続くので初心者向けコースの延長にある。紅葉はほとんどなかった。
再度山 (ふたたびやま) 山頂 大龍寺から30分ぐらいかな？ここは初心者向けではなく、やや険しい山道を登っていく必要がある。道路は整備されなくて、かろうじて1人が歩けるような狭い山道を、所々、よじ登るような感覚でやや体力がいる。体力のない人や子どもはちょっと難しいと思う。私がいっぱいいっぱいだったので (山登りに慣れていない) 高齢な人には無理だと思う。山頂には 470m という置きものがあって神戸の町並みを展望できる。ここまでは舗装された道路のハイキングなので山登りが好きな人はこのぐらいの負荷をかけた方が楽しめるかもしれない。
山頂から下って再度山公園へ到着した。上るのが山道だったから下るのも山道で、下手すると崖から滑ってしまうので降りるのも注意が必要になる。
再度山公園 ここは車でも来れるそうで、のどかな公園になっていた。紅葉もちらほらみえて、あと2-3週間したらよい時期かもしれない。また車でも行ってみようかと思う。ここで休憩しているときに13時をまわっていたと思う。登りは所々でうちらは休憩をとってゆっくり進んでいたので一般よりは遅いペースだったと思う。
下山 ここからは一気に下山してきた。なだらかな下りがずっと続くコースだったので体力的にはそうしんどくなく一気に降りてきた。だいたい2時間ぐらいで県庁駅まで来れた。そこで15時ぐらいになっていた。これはこれで山道を眺めながら歩くのも気持ちがよいし、登る方が好きな人はもっと登ってロープウェイで降りてくるというのもよいかもしれない。私は太ももの負荷が限界なぐらい体力的にしんどかったのでこのぐらいの行程が限界だというのもわかってよかった。歩ける距離としては3時間程度を目安に、なだらかなハイキングコースを探すとよさそうに思う。</description><content>&lt;p>4時に寝て8時に起きた。久しぶりに深夜過ぎまでコードを書いて、あと文章を書いて、気付いたら3時をまわっていた。&lt;/p>
&lt;h2 id="新神戸駅からのハイキング">新神戸駅からのハイキング&lt;/h2>
&lt;p>新神戸駅に10時集合、遅刻もあって少し出発は遅れたが、10時半には駅を出発した。駅を出たらすぐに登山道に入れる。これはすごい立地だと思う。通常、登山道までは市街地から1-2時間かけて移動することが多いと思う。新神戸駅という市街地からすぐに山登りできるというのは神戸観光の1つとして十分によいと思えた。11月としては高めの最高気温23℃とやや暑いぐらいだったが、山登りにはちょうどいい気候だった。寒い時期や暑い時期を避けるという意味で11月はよい時期の選択にみえる。まだ暖かいせいか、紅葉は始まったばかりで、もう少し遅い時期だと紅葉も楽しめてよいかもしれない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kobe-rokko.jp/toreko/">トレイルステーション&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="布引の滝-雄滝">布引の滝 (雄滝)&lt;/h4>
&lt;p>ハイキングマップの B 布引ゾーンは、山道もコンクリートで舗装されていて歩きやすい。布引の滝は雌と雄の2つがあり、雄滝は整備されているのもあって観光向けになっている。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_waterfall.jpg"/>
&lt;/figure>
&lt;h4 id="布引五本松堰堤">布引五本松堰堤&lt;/h4>
&lt;p>ダムの1つ。周囲をぐるっと回りながらハイキングを続ける。この辺りも舗装された道路が続くので初心者向けコースの延長にある。紅葉はほとんどなかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_dam.jpg"/>
&lt;/figure>
&lt;h4 id="再度山-ふたたびやま-山頂">再度山 (ふたたびやま) 山頂&lt;/h4>
&lt;p>大龍寺から30分ぐらいかな？ここは初心者向けではなく、やや険しい山道を登っていく必要がある。道路は整備されなくて、かろうじて1人が歩けるような狭い山道を、所々、よじ登るような感覚でやや体力がいる。体力のない人や子どもはちょっと難しいと思う。私がいっぱいいっぱいだったので (山登りに慣れていない) 高齢な人には無理だと思う。山頂には 470m という置きものがあって神戸の町並みを展望できる。ここまでは舗装された道路のハイキングなので山登りが好きな人はこのぐらいの負荷をかけた方が楽しめるかもしれない。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_mountain.jpg"/>
&lt;/figure>
&lt;p>山頂から下って再度山公園へ到着した。上るのが山道だったから下るのも山道で、下手すると崖から滑ってしまうので降りるのも注意が必要になる。&lt;/p>
&lt;h4 id="再度山公園">再度山公園&lt;/h4>
&lt;p>ここは車でも来れるそうで、のどかな公園になっていた。紅葉もちらほらみえて、あと2-3週間したらよい時期かもしれない。また車でも行ってみようかと思う。ここで休憩しているときに13時をまわっていたと思う。登りは所々でうちらは休憩をとってゆっくり進んでいたので一般よりは遅いペースだったと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_park.jpg"/>
&lt;/figure>
&lt;h4 id="下山">下山&lt;/h4>
&lt;p>ここからは一気に下山してきた。なだらかな下りがずっと続くコースだったので体力的にはそうしんどくなく一気に降りてきた。だいたい2時間ぐらいで県庁駅まで来れた。そこで15時ぐらいになっていた。これはこれで山道を眺めながら歩くのも気持ちがよいし、登る方が好きな人はもっと登ってロープウェイで降りてくるというのもよいかもしれない。私は太ももの負荷が限界なぐらい体力的にしんどかったのでこのぐらいの行程が限界だというのもわかってよかった。歩ける距離としては3時間程度を目安に、なだらかなハイキングコースを探すとよさそうに思う。&lt;/p></content></item><item><title>論理の通じない人たち</title><link>/diary/posts/2023/1102/</link><pubDate>Thu, 02 Nov 2023 12:59:43 +0900</pubDate><guid>/diary/posts/2023/1102/</guid><description>23時に寝て何度か起きて8時に起きた。ホテルの部屋が暗いと朝になった気がしなくて2度寝したら寝坊した。
組織の対応と sns の議論 先日の sns 騒ぎ の続き。公式からの声明も出たので軽くまとめておく。
PyCon APAC 2023におけるNOCコンテンツに関するご指摘について 簡潔な文章に事実の記述、責任の所在、関係者への配慮が含まれていて十分な内容にみえる。法律なども関係するため、弁護士チェックが必要なことを考慮すると、こんな短期間で組織の見解を出せたことは運営側の体制を鑑みることができる。それが適正かどうかは人によって判断は異なるかもしれないが、私はコミュニティ運営というボランティア主体の組織であれば十分なものだと思えた。その後のネット上の議論も、ちゃんと終えてはいないが、様々な見解で議論は進んでいるようにみえる。
今回みていて感じたことの1つに、コミュニケーションが成り立たない人が世の中にはたくさんいるということ。議論の前提や論理の出発点が異なる人たちは、一定の論理を含む全体や大局を理解できず、細部や詳細のところだけを拠り所に自身の論理を組み立てる。意見の差異があることはなんら問題はないが、論理が通じないのは議論の余地すらないようにみえた。そういう人たちを会話するときは前提条件を同じにしたり、思想の背景を共有したり、もっと時間をかけて丁寧にすり合わせていく作業が必要になる。そして sns のような、流れが速い不特定多数の議論はそういった丁寧な作業にまったく向いていない。だから sns で議論することは時間の無駄である。
コネクションを共有しないプール go の非同期処理であまり使われることはないが、semaphore が準公式ライブラリとして提供されている。私はセマフォを気に入っていてたまに使う。
ldap プロトコルではコネクションの確立とログインに相当する bind の操作が分かれている。コネクションを確立したまま、ログアウトに相当する処理ができればプールを設けることでコネクションの再利用ができる。
The LDAP Unbind Operation しかし、このドキュメントの説明によると、unbind という操作は用意されているものの、ログアウトに相当する機能ではなく、クローズする前に通知するといった用途だと書いてある。unbind のリクエストをした後にはクローズするしかないといったものになる。それを踏まえて、プールはセマフォで同時接続数のみを制御するのでよいのではないかと思う。そんなワーカープールを実装してみた。
type ClientPool struct { config *config.LDAP sem *semaphore.Weighted } func (p *ClientPool) Get( ctx context.Context, ) (*LDAPClient, error) { if !p.sem.TryAcquire(1) { return nil, fmt.Errorf(&amp;#34;failed to acquire, wait and get later&amp;#34;) } client := NewLDAPClient(p.config) if err := client.</description><content>&lt;p>23時に寝て何度か起きて8時に起きた。ホテルの部屋が暗いと朝になった気がしなくて2度寝したら寝坊した。&lt;/p>
&lt;h2 id="組織の対応と-sns-の議論">組織の対応と sns の議論&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1030/">先日の sns 騒ぎ&lt;/a> の続き。公式からの声明も出たので軽くまとめておく。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://pyconjp.blogspot.com/2023/11/pyconapac2023-statement.html">PyCon APAC 2023におけるNOCコンテンツに関するご指摘について&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>簡潔な文章に事実の記述、責任の所在、関係者への配慮が含まれていて十分な内容にみえる。法律なども関係するため、弁護士チェックが必要なことを考慮すると、こんな短期間で組織の見解を出せたことは運営側の体制を鑑みることができる。それが適正かどうかは人によって判断は異なるかもしれないが、私はコミュニティ運営というボランティア主体の組織であれば十分なものだと思えた。その後のネット上の議論も、ちゃんと終えてはいないが、様々な見解で議論は進んでいるようにみえる。&lt;/p>
&lt;p>今回みていて感じたことの1つに、コミュニケーションが成り立たない人が世の中にはたくさんいるということ。議論の前提や論理の出発点が異なる人たちは、一定の論理を含む全体や大局を理解できず、細部や詳細のところだけを拠り所に自身の論理を組み立てる。意見の差異があることはなんら問題はないが、論理が通じないのは議論の余地すらないようにみえた。そういう人たちを会話するときは前提条件を同じにしたり、思想の背景を共有したり、もっと時間をかけて丁寧にすり合わせていく作業が必要になる。そして sns のような、流れが速い不特定多数の議論はそういった丁寧な作業にまったく向いていない。だから sns で議論することは時間の無駄である。&lt;/p>
&lt;h2 id="コネクションを共有しないプール">コネクションを共有しないプール&lt;/h2>
&lt;p>go の非同期処理であまり使われることはないが、&lt;a href="https://pkg.go.dev/golang.org/x/sync/semaphore">semaphore&lt;/a> が準公式ライブラリとして提供されている。私はセマフォを気に入っていてたまに使う。&lt;/p>
&lt;p>ldap プロトコルではコネクションの確立とログインに相当する bind の操作が分かれている。コネクションを確立したまま、ログアウトに相当する処理ができればプールを設けることでコネクションの再利用ができる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ldap.com/the-ldap-unbind-operation/">The LDAP Unbind Operation&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>しかし、このドキュメントの説明によると、unbind という操作は用意されているものの、ログアウトに相当する機能ではなく、クローズする前に通知するといった用途だと書いてある。unbind のリクエストをした後にはクローズするしかないといったものになる。それを踏まえて、プールはセマフォで同時接続数のみを制御するのでよいのではないかと思う。そんなワーカープールを実装してみた。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">ClientPool&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">config&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">LDAP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sem&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">semaphore&lt;/span>.&lt;span style="color:#a6e22e">Weighted&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">Get&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) (&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> !&lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">TryAcquire&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to acquire, wait and get later&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">client&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">NewLDAPClient&lt;/span>(&lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Connect&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to connect: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">GetAuthenticated&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) (&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">Get&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to get: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dn&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">BindDN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">passwd&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">BindPasswd&lt;/span>.&lt;span style="color:#a6e22e">String&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Bind&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">dn&lt;/span>, &lt;span style="color:#a6e22e">passwd&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to bind: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">Close&lt;/span>(&lt;span style="color:#a6e22e">client&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>) &lt;span style="color:#66d9ef">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">NewClientPool&lt;/span>(&lt;span style="color:#a6e22e">cfg&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">LDAP&lt;/span>) &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">config&lt;/span>: &lt;span style="color:#a6e22e">cfg&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sem&lt;/span>: &lt;span style="color:#a6e22e">semaphore&lt;/span>.&lt;span style="color:#a6e22e">NewWeighted&lt;/span>(&lt;span style="color:#a6e22e">cfg&lt;/span>.&lt;span style="color:#a6e22e">ClientPoolSize&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item><item><title>穴場のビアバー</title><link>/diary/posts/2023/1101/</link><pubDate>Wed, 01 Nov 2023 08:44:08 +0900</pubDate><guid>/diary/posts/2023/1101/</guid><description>0時に寝て何度か起きて6時半に起きた。移動日の疲れもあってか、いつもよりよく眠れた気がする。
朝食バイキング 先々月から大崎探索 をしていて ニューオータニイン東京 に泊まってみた。川沿いの道を歩きながら朝食バイキングもおいしい。食品の品数があると満足度が高い。
プロジェクトの進捗報告 出張したときの月例報告の11回目。前回の進捗報告はこちら 。
まだ開発の序盤なので 事前に準備した資料 の内容を一通り終えて雑談の時間も多かったように思う。3回目の開発フェーズになるのもあり、メンバーの練度も上がって、開発の手際はかなりよくなっているように私からはみえている。それらも含めて、メンバーが自律的に issue を作ったり、タスクを自分に割り当てたりしながら開発が進むようになっていると報告した。プロジェクトオーナーからも、最近のマイルストーン定例をみていて、メンバーが気付きが増えている、自律的によくないところを改善しようという意思がみえるといった話題も出ていた。課題管理のプラクティスを実践してきて、着実によい開発者の習慣を身につけて、よい開発チームに育ってきているように、私からもみえている。あとは課題管理についてのコンテンツを私が書かないといけないのを、バーンナウトの影響もあってか、先月はさぼってしまっていたので、今月こそなんか書きますと、自分を追い込む意図でもその場で話題にした。
mongo とトランザクションとレプリカセット mongo には トランザクション の機能が提供されている。しかし、トランザクションを使うためには レプリケーション を有効にしないといけない。レプリケーションは通常は複数台のマシンでクラスタリングを構築するものになる。うちらはシングルノードの mongo を扱っているのでレプリケーションを必要としていない。それでも、ドキュメントを読んでいると、スタンドアローンでも本番環境ではレプリカセットを使う方がよいといった説明もみつかる。
Convert a Standalone mongod to a Replica Set ちょうど開発の要件としてトランザクションを必要とする状況も出てきた。mongo のレプリケーションやトランザクションの仕組みを理解するよい機会かもしれない。11月中には調査したいというところ。
エビスバー 大崎探検の2日目。YEBISU BAR 大崎店 へ行ってみた。大崎駅横の駅ビルの2階にある。アクセスもよい。水曜日なのに20-21時半ぐらいまでいて、お客さんは3組ぐらしかいなかった。よい意味で空いてて静かにゆっくり飲めてよかった。穴場のバーをみつけた。ビール2杯とつまみ2品でちょうど3000円程度。ちょっと割高かもしれないけど、場所とお店の雰囲気とゆっくりできたことを考慮するとちょうどよい価格帯にも思える。またゆっくり軽く飲みたいときに行こうと思う。</description><content>&lt;p>0時に寝て何度か起きて6時半に起きた。移動日の疲れもあってか、いつもよりよく眠れた気がする。&lt;/p>
&lt;h2 id="朝食バイキング">朝食バイキング&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0919/#大崎に泊まる">先々月から大崎探索&lt;/a> をしていて &lt;a href="https://www.newotani-inntokyo.jp/">ニューオータニイン東京&lt;/a> に泊まってみた。川沿いの道を歩きながら朝食バイキングもおいしい。食品の品数があると満足度が高い。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_breakfast.jpg"/>
&lt;/figure>
&lt;h2 id="プロジェクトの進捗報告">プロジェクトの進捗報告&lt;/h2>
&lt;p>出張したときの月例報告の11回目。&lt;a href="/diary/diary/posts/2023/0920/">前回の進捗報告はこちら&lt;/a> 。&lt;/p>
&lt;p>まだ開発の序盤なので &lt;a href="/diary/diary/posts/2023/1028/#近況報告の資料作り">事前に準備した資料&lt;/a> の内容を一通り終えて雑談の時間も多かったように思う。3回目の開発フェーズになるのもあり、メンバーの練度も上がって、開発の手際はかなりよくなっているように私からはみえている。それらも含めて、メンバーが自律的に issue を作ったり、タスクを自分に割り当てたりしながら開発が進むようになっていると報告した。プロジェクトオーナーからも、最近のマイルストーン定例をみていて、メンバーが気付きが増えている、自律的によくないところを改善しようという意思がみえるといった話題も出ていた。課題管理のプラクティスを実践してきて、着実によい開発者の習慣を身につけて、よい開発チームに育ってきているように、私からもみえている。あとは課題管理についてのコンテンツを私が書かないといけないのを、バーンナウトの影響もあってか、先月はさぼってしまっていたので、今月こそなんか書きますと、自分を追い込む意図でもその場で話題にした。&lt;/p>
&lt;h2 id="mongo-とトランザクションとレプリカセット">mongo とトランザクションとレプリカセット&lt;/h2>
&lt;p>mongo には &lt;a href="https://www.mongodb.com/docs/manual/core/transactions/">トランザクション&lt;/a> の機能が提供されている。しかし、トランザクションを使うためには &lt;a href="https://www.mongodb.com/docs/v7.0/replication/">レプリケーション&lt;/a> を有効にしないといけない。レプリケーションは通常は複数台のマシンでクラスタリングを構築するものになる。うちらはシングルノードの mongo を扱っているのでレプリケーションを必要としていない。それでも、ドキュメントを読んでいると、スタンドアローンでも本番環境ではレプリカセットを使う方がよいといった説明もみつかる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.mongodb.com/docs/manual/tutorial/convert-standalone-to-replica-set/">Convert a Standalone mongod to a Replica Set&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ちょうど開発の要件としてトランザクションを必要とする状況も出てきた。mongo のレプリケーションやトランザクションの仕組みを理解するよい機会かもしれない。11月中には調査したいというところ。&lt;/p>
&lt;h2 id="エビスバー">エビスバー&lt;/h2>
&lt;p>大崎探検の2日目。&lt;a href="https://www.ginzalion.jp/shop/brand/yebisubar/shop60.html">YEBISU BAR 大崎店&lt;/a> へ行ってみた。大崎駅横の駅ビルの2階にある。アクセスもよい。水曜日なのに20-21時半ぐらいまでいて、お客さんは3組ぐらしかいなかった。よい意味で空いてて静かにゆっくり飲めてよかった。穴場のバーをみつけた。ビール2杯とつまみ2品でちょうど3000円程度。ちょっと割高かもしれないけど、場所とお店の雰囲気とゆっくりできたことを考慮するとちょうどよい価格帯にも思える。またゆっくり軽く飲みたいときに行こうと思う。&lt;/p>
&lt;p>&lt;figure>&lt;img src="/diary/diary/img/2023/1101_beer.jpg"/>
&lt;/figure>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_salad.jpg"/>
&lt;/figure>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_potate.jpg"/>
&lt;/figure>
&lt;/p></content></item></channel></rss>