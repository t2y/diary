<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2023/11 on forest nook</title><link>/diary/dates/2023/11/</link><description>Recent content in 2023/11 on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/dates/2023/11/index.xml" rel="self" type="application/rss+xml"/><item><title>複数の kit アプリケーションを共存させる仕組みの考察</title><link>/diary/posts/2023/1130/</link><pubDate>Thu, 30 Nov 2023 09:04:34 +0900</pubDate><guid>/diary/posts/2023/1130/</guid><description>1時に寝て3時に起きて5時に起きて7時半に起きた。なんとなく布団に入らずにベッドの上でそのまま寝てた。それでもあまり寒くはなかった。
kit/vite アプリケーションのデバッグ 先日の続き の続き。
kit アプリケーションを kit アプリケーションに埋め込むといったことができないかどうかの調査をしている。いろいろ調べている中で kit の discussions でもそういった議論はいくつか行われている。マイクロフロントエンドというキーワードも出てくる。
MicroFrontends with Svelte + SvelteKit #4151 Approach to embedding Kit #5003 これらの議論をみていても kit の ssr はそれ自体が1つのアプリケーションとして動かすことを前提にビルドされているため、kit アプリケーション内に別の kit アプリケーションを埋め込んだり、一部のコンポーネントを外部のアプリケーションと組み合わせて動かすことはなかなか難しいようにみえる。マイクロフロントエンドのような思想で設計されていない。しかし、既存のアプリケーションを動かしつつ、少しずつ kit アプリケーションへ移行するといった運用をしたいという世の中のニーズも根強いことが伺える。
ここで svelte.config.js でエントリーポイントを置き換えるぐらいはできる。デフォルトは / がエントリーポイントになるのを /myapp に置き換えるには次のように設定する。relative は es モジュールのインポートを相対パスで行うか、絶対パスにするかの設定も変更できる。これもデプロイ先のインフラの都合にあわせて調整できるようになっている。この設定を切り替えられるのだからエンドポイントをハックすること自体はそう難しくないのかもしれない。
kit: { paths: { relative: false, base: &amp;#39;/myapp&amp;#39; }, } さらに調査していて、adapter-node を使ってビルドするとデフォルトでは polka というアプリケーションサーバーが起動するコードが生成される。
function polka (opts) { return new Polka(opts); } const path = env(&amp;#39;SOCKET_PATH&amp;#39;, false); const host = env(&amp;#39;HOST&amp;#39;, &amp;#39;0.</description><content>&lt;p>1時に寝て3時に起きて5時に起きて7時半に起きた。なんとなく布団に入らずにベッドの上でそのまま寝てた。それでもあまり寒くはなかった。&lt;/p>
&lt;h2 id="kitvite-アプリケーションのデバッグ">kit/vite アプリケーションのデバッグ&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1127/#kitvite-アプリケーションのデバッグ">先日の続き&lt;/a> の続き。&lt;/p>
&lt;p>kit アプリケーションを kit アプリケーションに埋め込むといったことができないかどうかの調査をしている。いろいろ調べている中で kit の discussions でもそういった議論はいくつか行われている。マイクロフロントエンドというキーワードも出てくる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/sveltejs/kit/discussions/4151">MicroFrontends with Svelte + SvelteKit #4151&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/sveltejs/kit/discussions/5003">Approach to embedding Kit #5003&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>これらの議論をみていても kit の ssr はそれ自体が1つのアプリケーションとして動かすことを前提にビルドされているため、kit アプリケーション内に別の kit アプリケーションを埋め込んだり、一部のコンポーネントを外部のアプリケーションと組み合わせて動かすことはなかなか難しいようにみえる。マイクロフロントエンドのような思想で設計されていない。しかし、既存のアプリケーションを動かしつつ、少しずつ kit アプリケーションへ移行するといった運用をしたいという世の中のニーズも根強いことが伺える。&lt;/p>
&lt;p>ここで svelte.config.js でエントリーポイントを置き換えるぐらいはできる。デフォルトは &lt;code>/&lt;/code> がエントリーポイントになるのを &lt;code>/myapp&lt;/code> に置き換えるには次のように設定する。relative は es モジュールのインポートを相対パスで行うか、絶対パスにするかの設定も変更できる。これもデプロイ先のインフラの都合にあわせて調整できるようになっている。この設定を切り替えられるのだからエンドポイントをハックすること自体はそう難しくないのかもしれない。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">kit&lt;/span>&lt;span style="color:#f92672">:&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">paths&lt;/span>&lt;span style="color:#f92672">:&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">relative&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">base&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;/myapp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>さらに調査していて、adapter-node を使ってビルドするとデフォルトでは &lt;a href="https://github.com/lukeed/polka">polka&lt;/a> というアプリケーションサーバーが起動するコードが生成される。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">polka&lt;/span> (&lt;span style="color:#a6e22e">opts&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Polka&lt;/span>(&lt;span style="color:#a6e22e">opts&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">env&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;SOCKET_PATH&amp;#39;&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">host&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">env&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;HOST&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0.0.0.0&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">port&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">env&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;PORT&amp;#39;&lt;/span>, &lt;span style="color:#f92672">!&lt;/span>&lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;3000&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">server&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">polka&lt;/span>().&lt;span style="color:#a6e22e">use&lt;/span>(&lt;span style="color:#a6e22e">handler&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">server&lt;/span>.&lt;span style="color:#a6e22e">listen&lt;/span>({ &lt;span style="color:#a6e22e">path&lt;/span>, &lt;span style="color:#a6e22e">host&lt;/span>, &lt;span style="color:#a6e22e">port&lt;/span> }, () =&amp;gt; {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#e6db74">`Listening on &lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">host&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39;:&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">port&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ここで任意のアプリケーションサーバーを使いたいという issue があって、それに対する回答から adapter-node のドキュメントにカスタムサーバーについて書かれていることに気付く。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/sveltejs/kit/issues/8794">Custom server options for adapter-node #8794&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kit.svelte.dev/docs/adapter-node#custom-server">Node servers: Custom server&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>アダプタは、ビルドディレクトリにindex.jsとhandler.jsの2つのファイルを作成します。index.js を実行すると (デフォルトのビルドディレクトリを使用している場合は node ビルドなど)、設定されたポートでサーバが起動します。&lt;/p>
&lt;p>あるいは、Express、Connect、Polka（あるいは組み込みのhttp.createServer）に適したハンドラをエクスポートするhandler.jsファイルをインポートして、独自のサーバをセットアップすることもできます。&lt;/p>
&lt;/blockquote>
&lt;p>handler.js さえインポートすればそのまま動くことはデバッグしていて知ってはいたのだけど、この自前のアプリケーションサーバーを &lt;a href="https://kit.svelte.dev/docs/hooks">hooks&lt;/a> を使って起動すれば任意のサーバーに置き換えできると issue の中で回答されていた。kit アプリケーションは1つのサーバーが1つのシステムとして動かすことを前提に設計されているが、サーバーを複数起動することでそれらを共存できるのではないか？と考えた。検証のために node.js から子プロセスを生成するには次のようなコードで起動する。些事だけど adapter-node の生成したコードが shell を介しないとポート番号を設定できなかったので &lt;code>shell: true&lt;/code> もセットしている。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-typescript" data-lang="typescript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> { &lt;span style="color:#a6e22e">spawn&lt;/span> } &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#e6db74">&amp;#39;child_process&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">start_server() {&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;called start_server&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">opts&lt;/span> &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">shell&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">env&lt;/span>&lt;span style="color:#f92672">:&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...&lt;span style="color:#a6e22e">process&lt;/span>.&lt;span style="color:#a6e22e">env&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">PORT&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;3005&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ORIGIN&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;http://localhost:5174&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">NODE_ENV&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;production&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">node&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">spawn&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;node&amp;#39;&lt;/span>, [&lt;span style="color:#e6db74">&amp;#39;apps/myapp/build/index.js&amp;#39;&lt;/span>], &lt;span style="color:#a6e22e">opts&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">node&lt;/span>.&lt;span style="color:#a6e22e">stdout&lt;/span>.&lt;span style="color:#a6e22e">on&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>, (&lt;span style="color:#a6e22e">data&lt;/span>) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#a6e22e">data&lt;/span>.&lt;span style="color:#a6e22e">toString&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">node&lt;/span>.&lt;span style="color:#a6e22e">stderr&lt;/span>.&lt;span style="color:#a6e22e">on&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>, (&lt;span style="color:#a6e22e">data&lt;/span>) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">error&lt;/span>(&lt;span style="color:#a6e22e">data&lt;/span>.&lt;span style="color:#a6e22e">toString&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">node&lt;/span>.&lt;span style="color:#a6e22e">on&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;exit&amp;#39;&lt;/span>, (&lt;span style="color:#a6e22e">code&lt;/span>) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#e6db74">`Child exited with code &lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">code&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>この node.js の子プロセスを起動する処理を hooks で呼び出すことである kit アプリケーションを起動したときに、別の kit アプリケーションを提供するアプリケーションサーバーの node.js プロセスも起動できる。そしてパスを解決できるようにするため、さらに es モジュールのインポートパスにあわせたプロキシを実装する。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-typescript" data-lang="typescript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> { &lt;span style="color:#a6e22e">start_server&lt;/span> } &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#e6db74">&amp;#39;$lib/index&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">start_server&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> &lt;span style="color:#66d9ef">type&lt;/span> { &lt;span style="color:#a6e22e">Handle&lt;/span> } &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#e6db74">&amp;#39;@sveltejs/kit&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">handle&lt;/span>: &lt;span style="color:#66d9ef">Handle&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">async&lt;/span> ({ &lt;span style="color:#a6e22e">event&lt;/span>, &lt;span style="color:#a6e22e">resolve&lt;/span> }) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">url&lt;/span>.&lt;span style="color:#a6e22e">pathname&lt;/span>.&lt;span style="color:#a6e22e">startsWith&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;/myapp&amp;#39;&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">request&lt;/span>.&lt;span style="color:#a6e22e">method&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;GET&amp;#39;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">fetch&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;http://localhost:3005&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">url&lt;/span>.&lt;span style="color:#a6e22e">pathname&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">request&lt;/span>.&lt;span style="color:#a6e22e">method&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;POST&amp;#39;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">await&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">request&lt;/span>.&lt;span style="color:#a6e22e">formData&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">endpoint&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;http://localhost:3005&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">url&lt;/span>.&lt;span style="color:#a6e22e">pathname&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">url&lt;/span>.&lt;span style="color:#a6e22e">search&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">fetch&lt;/span>(&lt;span style="color:#a6e22e">endpoint&lt;/span>, { &lt;span style="color:#a6e22e">method&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;POST&amp;#39;&lt;/span>, &lt;span style="color:#a6e22e">body&lt;/span>: &lt;span style="color:#66d9ef">data&lt;/span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">response&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">await&lt;/span> &lt;span style="color:#a6e22e">resolve&lt;/span>(&lt;span style="color:#a6e22e">event&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">response&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これは kit のデモアプリが動くことを確認するためだけに実装したプロキシで GET/POST のリクエストを localhost:3005 に起動した node.js のプロセスへプロキシしている。これで2つの kit アプリケーションが1つのサーバーで共存しているかのように振る舞うことは確認できた。この延長上に私のやりたいことが実現できるかどうかをさらに調査する必要がある。&lt;/p></content></item><item><title>気付きというスキル</title><link>/diary/posts/2023/1129/</link><pubDate>Wed, 29 Nov 2023 09:04:37 +0900</pubDate><guid>/diary/posts/2023/1129/</guid><description>2時に寝てあまり眠れなくて6時半に起きた。スマホで ゴブリンスレイヤーⅡをみてから寝た。
プロジェクトの進捗報告 出張したときの月例報告の12回目。前回の進捗報告はこちら 。
開発の中盤を過ぎて、これから追い込みへ入っていく。予定していたバックエンドの機能開発は完了した。私の頭の中ではもう完了までの見通しができていて、あとはフロントエンドの新規画面を構築したり、品質や堅牢性のための小さい改善をしていくといったことを残りの1ヶ月で行う。若いメンバーに経験を積んでもらうことも考慮しているため、サポートを最小限にしながらメンバーの成長を期待したいところ。見た目上の開発スケジュールは順調なのでマネージャーとしスケジュールの懸念はほとんどない。kit/vite アプリケーションの調査 を私が自らやっていて、これを一区切りつけないと次の作業に進めないところが、私の課題でもある。インターネットを検索してもみつからないことを、どのように考え、仮説を立て、調査して、意思決定していくかをメンバーに示したい。マネージャーが一連のワークフローについて業務の参考になるようものをみせることができればいいなと考えている。
以前 コミュニケーションのレベルについて考えたこと をベースにした方法論を社内の wiki にも書いてある。5段階のコミュニケーションのレベルがあり、多くの人たちはレベル4までしか到達しないのだけど、課題管理のスキルを身につけるとレベル5の「聞かなくてもわかる」というエスパーのような状態に達する。メンバーのうちの1人はこのレベルに片足を踏み入れていて、十分にうまく課題管理できているという話題も共有した。一方でレベル5に至るためのプラクティスや施策を、課題管理という文脈でもっとうまくできないか？というのはうちの会社のビジネスの中核でもある。とても難しい。いわば「気付き」を習得するための短期修行コースのようなものを作りたい、業務の中で。この話題を話し始めると、気付きの有無はその人の性格や動機づけにも関連するせいか、賛否両論の多様な議論に発散しやすい。私の立場としては、一定レベルまでは誰でも身につけられるスキルとして扱いたいが「気付き」が本当にスキルなのかどうか、実は確信がない。しかし、諦めることなく継続的に考えていきたい。</description><content>&lt;p>2時に寝てあまり眠れなくて6時半に起きた。スマホで &lt;a href="https://goblinslayer.jp/">ゴブリンスレイヤーⅡ&lt;/a>をみてから寝た。&lt;/p>
&lt;h2 id="プロジェクトの進捗報告">プロジェクトの進捗報告&lt;/h2>
&lt;p>出張したときの月例報告の12回目。&lt;a href="/diary/diary/posts/2023/1101/">前回の進捗報告はこちら&lt;/a> 。&lt;/p>
&lt;p>開発の中盤を過ぎて、これから追い込みへ入っていく。予定していたバックエンドの機能開発は完了した。私の頭の中ではもう完了までの見通しができていて、あとはフロントエンドの新規画面を構築したり、品質や堅牢性のための小さい改善をしていくといったことを残りの1ヶ月で行う。若いメンバーに経験を積んでもらうことも考慮しているため、サポートを最小限にしながらメンバーの成長を期待したいところ。見た目上の開発スケジュールは順調なのでマネージャーとしスケジュールの懸念はほとんどない。&lt;a href="/diary/diary/posts/2023/1127/#kitvite-アプリケーションのデバッグ">kit/vite アプリケーションの調査&lt;/a> を私が自らやっていて、これを一区切りつけないと次の作業に進めないところが、私の課題でもある。インターネットを検索してもみつからないことを、どのように考え、仮説を立て、調査して、意思決定していくかをメンバーに示したい。マネージャーが一連のワークフローについて業務の参考になるようものをみせることができればいいなと考えている。&lt;/p>
&lt;p>以前 &lt;a href="/diary/diary/posts/2022/0107/#情報共有とコミュニケーションコスト">コミュニケーションのレベルについて考えたこと&lt;/a> をベースにした方法論を社内の wiki にも書いてある。5段階のコミュニケーションのレベルがあり、多くの人たちはレベル4までしか到達しないのだけど、課題管理のスキルを身につけるとレベル5の「聞かなくてもわかる」というエスパーのような状態に達する。メンバーのうちの1人はこのレベルに片足を踏み入れていて、十分にうまく課題管理できているという話題も共有した。一方でレベル5に至るためのプラクティスや施策を、課題管理という文脈でもっとうまくできないか？というのはうちの会社のビジネスの中核でもある。とても難しい。いわば「気付き」を習得するための短期修行コースのようなものを作りたい、業務の中で。この話題を話し始めると、気付きの有無はその人の性格や動機づけにも関連するせいか、賛否両論の多様な議論に発散しやすい。私の立場としては、一定レベルまでは誰でも身につけられるスキルとして扱いたいが「気付き」が本当にスキルなのかどうか、実は確信がない。しかし、諦めることなく継続的に考えていきたい。&lt;/p></content></item><item><title>新規メンバーを受け入れないという意思決定</title><link>/diary/posts/2023/1128/</link><pubDate>Tue, 28 Nov 2023 00:09:25 +0900</pubDate><guid>/diary/posts/2023/1128/</guid><description>19時過ぎに帰って晩ご飯食べて、21時から0時過ぎまでオフィスで作業して、また帰ってから一休みして出張準備して、5時前に出掛けた。1ヶ月ぶりの出張。
出張前の朝ご飯 三ノ宮駅のすぐ近くに24時間営業のなか卯がある。うまく眠れなくて時間があるときはここで朝ご飯を食べながら一息つくのがよいのではないかと考えた。今回の実際のタイムスケジュールが次になる。市営地下鉄の駅が5時30分ぐらいにならないと開かないため、あまり早く行ってもやることなくて手持ち無沙汰になる。その隙間時間を埋める場所としてなか卯がよいことに気付いた。
4:56 家を出る 5:10 なか卯に着く 5:11 親子丼を注文する 5:16 親子丼食べ終わる 5:30 なか卯を出る 5:35 市営地下鉄三宮駅のホームに着く 5:41 市営地下鉄の始発に乗って新神戸駅へ マイルストーン定例 隔週の火曜日は開発状況の共有や進捗確認、設計レビューなどを行う定例会議。先月の定例会議 でも確認していたが、新規メンバーの参加がうまく進捗していない。機能開発を3ヶ月と見積もっているうちの、2ヶ月が過ぎた。さすがにここから開発に参加して追いつくのは厳しいので、新規メンバーの今後の兼務状況に関係なく、今回の開発からは外すという意思決定をした。五月雨式に2回遅れたところで私の中では開発運営の構想から外すように徐々に調整してきていたし、2週間のイテレーションの節目でも既存メンバーにタスクを再割当てするようにもしていた。そのため、いまの開発に大きく影響を与えるわけではない。しかし、参加する可能性も残ってはいたのであからさまに除外することもできなかった。3回に渡って「いついつからやります」と言いながら、(兼務の業務が忙しいとしても) 何もやっていないことに、この開発やチームに責任をもつ私の立場としては印象が悪かった。なによりも業務として責任を果たしていない状況を問題であると当事者が自覚しているようにはみえないところにも懸念があった。よくない開発文化の実例の1つに思えた。</description><content>&lt;p>19時過ぎに帰って晩ご飯食べて、21時から0時過ぎまでオフィスで作業して、また帰ってから一休みして出張準備して、5時前に出掛けた。1ヶ月ぶりの出張。&lt;/p>
&lt;h2 id="出張前の朝ご飯">出張前の朝ご飯&lt;/h2>
&lt;p>三ノ宮駅のすぐ近くに24時間営業のなか卯がある。うまく眠れなくて時間があるときはここで朝ご飯を食べながら一息つくのがよいのではないかと考えた。今回の実際のタイムスケジュールが次になる。市営地下鉄の駅が5時30分ぐらいにならないと開かないため、あまり早く行ってもやることなくて手持ち無沙汰になる。その隙間時間を埋める場所としてなか卯がよいことに気付いた。&lt;/p>
&lt;ul>
&lt;li>4:56 家を出る&lt;/li>
&lt;li>5:10 なか卯に着く&lt;/li>
&lt;li>5:11 親子丼を注文する&lt;/li>
&lt;li>5:16 親子丼食べ終わる&lt;/li>
&lt;li>5:30 なか卯を出る&lt;/li>
&lt;li>5:35 市営地下鉄三宮駅のホームに着く&lt;/li>
&lt;li>5:41 市営地下鉄の始発に乗って新神戸駅へ&lt;/li>
&lt;/ul>
&lt;h2 id="マイルストーン定例">マイルストーン定例&lt;/h2>
&lt;p>隔週の火曜日は開発状況の共有や進捗確認、設計レビューなどを行う定例会議。&lt;a href="/diary/diary/posts/2023/1031/#マイルストーン定例">先月の定例会議&lt;/a> でも確認していたが、新規メンバーの参加がうまく進捗していない。機能開発を3ヶ月と見積もっているうちの、2ヶ月が過ぎた。さすがにここから開発に参加して追いつくのは厳しいので、新規メンバーの今後の兼務状況に関係なく、今回の開発からは外すという意思決定をした。五月雨式に2回遅れたところで私の中では開発運営の構想から外すように徐々に調整してきていたし、2週間のイテレーションの節目でも既存メンバーにタスクを再割当てするようにもしていた。そのため、いまの開発に大きく影響を与えるわけではない。しかし、参加する可能性も残ってはいたのであからさまに除外することもできなかった。3回に渡って「いついつからやります」と言いながら、(兼務の業務が忙しいとしても) 何もやっていないことに、この開発やチームに責任をもつ私の立場としては印象が悪かった。なによりも業務として責任を果たしていない状況を問題であると当事者が自覚しているようにはみえないところにも懸念があった。よくない開発文化の実例の1つに思えた。&lt;/p></content></item><item><title>sveltekit/vite アプリケーションの調査を再開</title><link>/diary/posts/2023/1127/</link><pubDate>Mon, 27 Nov 2023 18:50:24 +0900</pubDate><guid>/diary/posts/2023/1127/</guid><description>1時に寝て起きたか起きてないか覚えてない感じで6時に起きた。起きてちょっとゲームして気付いたら7時だった。
kit/vite アプリケーションのデバッグ 先週公開したテックブログ の続き。
vite アプリケーションのバックエンドインテグレーション の詳細を調査している。丸1日デバッグしていていくつか振る舞いがわかってきて、designer アプリケーションを作りたいという要件に対して、こうすればできるんじゃないかという仮説も立てられるようになった。いまやりたい要件は kit の ssr アプリケーションを埋め込みたい。これは要件に満たないが、kit の ssg アプリケーションならば static ディレクトリに置くだけで参照できるし、インポートパスさえ書き換えてやれば別の kit アプリに埋め込むこともできるのを確認した。意図した通りの振る舞い。
vite アプリケーションはビルドオプションで manifest.json を出力し、エントリーポイントやどのファイルがどのファイルをインポートしているかといった情報を管理している。sveltekit はこれらの manifest.json から rollup でバンドルするために manifest.js を生成している。厳密には、sveltekit では production ビルド向けのチューニングをしたビルドツールを adapter と呼び、vite のビルドをフックする場所に1つになっている。node.js サーバー向けに production ビルドするときは adapter-node を使う。この実装を読んでみると、vite がビルドした成果物に対して、再度 rollup でバンドルして成果物を作り直すといったことをしている。そして、vite の成果物 (manifest.json も含む) を抽象化したものが Builder となる。adapter は Builder のインスタンスを使ってビルドの成果物を制御できる。先の manifest.js もこのときに生成していて、rollup でバンドルするためのパラメーターの1つとして使っているようにみえる。しかし、rollup のドキュメントをみても直接的に manifest.js の説明はなく、rollup の拡張の仕組みで manifest.js を作っているというよりは、sveltekit の要件によるもののようにもみえる。ここの背景はまだよくわからない。
私はフロントエンドのことが全然わからないのでライブラリのソースコードを読みながら、ドキュメントとあわせて調べて、1つずつ理解を深めていくというアプローチで進めている。こういった調査のやり方もメンバーへ伝えていければと考えている。
小規模企業共済オンライン手続きポータル 2021年度から小規模企業共済 に加入している。今年から掛け金を7万円/月に変更した。年間で84万円の所得控除となる。ちょうど2023年9月1日からポータルサイトが作成されたらしい。いずれマイナポータルと紐付くのかもしれない。
「オンライン手続きポータル」を公開しました 利用登録しようと思って、メールアドレスを登録しようとしたら会社のメールアドレスはなぜかバリデーションエラーになって gmail のアドレスなら登録できた。その後も氏名の半角カナ入力を強制されたりしながら、マイナンバーカードを読み取って認証チェックして利用登録の申請はできた。しかし、自動で本登録されるわけではなく、おそらく申請内容が先方に届いてなんらかの運用があって本登録されるみたい。オンラインポータルのホームでも半角カナを使っていたり、&amp;lt;title&amp;gt; タグには「マイナ手続きポータル」とあったり、申請しただけでいくつも不備がわかるようなひどいサイトになっている。2023年にまともな開発者が作ったサイトとは思えない。デジタル庁に作り直してもらった方がよいと思う。</description><content>&lt;p>1時に寝て起きたか起きてないか覚えてない感じで6時に起きた。起きてちょっとゲームして気付いたら7時だった。&lt;/p>
&lt;h2 id="kitvite-アプリケーションのデバッグ">kit/vite アプリケーションのデバッグ&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1124/#テックブログ公開">先週公開したテックブログ&lt;/a> の続き。&lt;/p>
&lt;p>&lt;a href="https://ja.vitejs.dev/guide/backend-integration.html">vite アプリケーションのバックエンドインテグレーション&lt;/a> の詳細を調査している。丸1日デバッグしていていくつか振る舞いがわかってきて、designer アプリケーションを作りたいという要件に対して、こうすればできるんじゃないかという仮説も立てられるようになった。いまやりたい要件は kit の ssr アプリケーションを埋め込みたい。これは要件に満たないが、kit の ssg アプリケーションならば static ディレクトリに置くだけで参照できるし、インポートパスさえ書き換えてやれば別の kit アプリに埋め込むこともできるのを確認した。意図した通りの振る舞い。&lt;/p>
&lt;p>vite アプリケーションはビルドオプションで manifest.json を出力し、エントリーポイントやどのファイルがどのファイルをインポートしているかといった情報を管理している。sveltekit はこれらの manifest.json から rollup でバンドルするために manifest.js を生成している。厳密には、sveltekit では production ビルド向けのチューニングをしたビルドツールを &lt;a href="https://kit.svelte.dev/docs/adapters">adapter&lt;/a> と呼び、vite のビルドをフックする場所に1つになっている。node.js サーバー向けに production ビルドするときは &lt;a href="https://kit.svelte.dev/docs/adapter-node">adapter-node&lt;/a> を使う。この実装を読んでみると、vite がビルドした成果物に対して、再度 rollup でバンドルして成果物を作り直すといったことをしている。そして、vite の成果物 (manifest.json も含む) を抽象化したものが &lt;a href="https://kit.svelte.dev/docs/types#public-types-builder">Builder&lt;/a> となる。adapter は Builder のインスタンスを使ってビルドの成果物を制御できる。先の manifest.js もこのときに生成していて、rollup でバンドルするためのパラメーターの1つとして使っているようにみえる。しかし、rollup のドキュメントをみても直接的に manifest.js の説明はなく、rollup の拡張の仕組みで manifest.js を作っているというよりは、sveltekit の要件によるもののようにもみえる。ここの背景はまだよくわからない。&lt;/p>
&lt;p>私はフロントエンドのことが全然わからないのでライブラリのソースコードを読みながら、ドキュメントとあわせて調べて、1つずつ理解を深めていくというアプローチで進めている。こういった調査のやり方もメンバーへ伝えていければと考えている。&lt;/p>
&lt;h2 id="小規模企業共済オンライン手続きポータル">小規模企業共済オンライン手続きポータル&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2022/0206/#2021年度の個人の確定申告">2021年度から小規模企業共済&lt;/a> に加入している。今年から掛け金を7万円/月に変更した。年間で84万円の所得控除となる。ちょうど2023年9月1日からポータルサイトが作成されたらしい。いずれマイナポータルと紐付くのかもしれない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.smrj.go.jp/org/info/press/2023/ool3bn000000kxx5-att/20230901_press01.pdf">「オンライン手続きポータル」を公開しました&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>利用登録しようと思って、メールアドレスを登録しようとしたら会社のメールアドレスはなぜかバリデーションエラーになって gmail のアドレスなら登録できた。その後も氏名の半角カナ入力を強制されたりしながら、マイナンバーカードを読み取って認証チェックして利用登録の申請はできた。しかし、自動で本登録されるわけではなく、おそらく申請内容が先方に届いてなんらかの運用があって本登録されるみたい。オンラインポータルのホームでも半角カナを使っていたり、&lt;code>&amp;lt;title&amp;gt;&lt;/code> タグには「マイナ手続きポータル」とあったり、申請しただけでいくつも不備がわかるようなひどいサイトになっている。2023年にまともな開発者が作ったサイトとは思えない。デジタル庁に作り直してもらった方がよいと思う。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://portal.e-shishobako.ne.jp/dp_apl/pw-usr/#/portal/landing?riyoCd=RGO0226000">小規模企業共済ｵﾝﾗｲﾝ手続きﾎﾟｰﾀﾙ&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>フルリモートとヒトリ</title><link>/diary/posts/2023/1126/</link><pubDate>Sun, 26 Nov 2023 11:49:15 +0900</pubDate><guid>/diary/posts/2023/1126/</guid><description>1時に寝て珍しく夜中起きずに7時ぐらいまで寝ていたかもしれない。午前中は昨日受け取ったスタンディングデスクを仮組みの状態からネジを締め付けて本組みした。ちょうど探していたものにぴったりはまる感じ。
友だちを探しに勉強会へ もくもく会 に参加した。今日の参加者は6人とやや少なかったものの、初めて来られた方が2人いて、どちらもフルリモートで働いているものの、技術の話し相手や相談する場所がなくて、そういうものを求めて来ましたと話されていた。私も5年前に東京から神戸へ引っ越してきたとき、友だちがいないから探そうと思ってこのコミュニティへ来た。みんな同じところで落とし穴にはまるなと思って親近感を覚えた。以前 Python Boot Camp のお手伝い をしたときに知り合った、現地スタッフのにしたにさんが淡路島出身で、三ノ宮.dev にも関心があったようなので来られて挨拶した。そうやってつながりが増えていくのもまた嬉しい。
今後はフリーランスや個人事業主、マイクロ法人といった1人で働くスタイルがより増えていくと私は考えている。以前にも マイクロ法人のススメ を書いたが、1人で働くメリットは大きいものの、デメリットとして相談相手がいなかったり、困ったときに他者へ助けを求められないなどがある。コワーキングや勉強会コミュニティはそういった1人のデメリットを補う形で発展していくのではないかと想像している。そして、そのときのための準備を2年前ぐらいから始めている。
ストレッチ 土曜日に実家へ帰っていたのでストレッチを日曜日の夜に変更していた。昨日、車でジモティーのスタンディングデスクを引き取りに行ったり、実家との往復をしたので腰への負担が大きかった。それ以外は大きな疲労や張りなどはなかったと思う。勉強会後に飲み会へ行って、軽く1杯だけ飲んでやめとくつもりが、ビール2杯とハイボール1杯飲んでしまって、酒臭かったら悪いなぁと思いながらストレッチを受けていた。トレーナーさんはお酒の匂いしないと言ってくれてたけれど、本当のところはどうだったのか。ほろ酔いでストレッチを受けていた。今日の開脚幅は開始前152cmで、ストレッチ後157cmだった。</description><content>&lt;p>1時に寝て珍しく夜中起きずに7時ぐらいまで寝ていたかもしれない。午前中は昨日受け取ったスタンディングデスクを仮組みの状態からネジを締め付けて本組みした。ちょうど探していたものにぴったりはまる感じ。&lt;/p>
&lt;h2 id="友だちを探しに勉強会へ">友だちを探しに勉強会へ&lt;/h2>
&lt;p>&lt;a href="https://kobe-sannomiya-dev.connpass.com/event/299312/">もくもく会&lt;/a> に参加した。今日の参加者は6人とやや少なかったものの、初めて来られた方が2人いて、どちらもフルリモートで働いているものの、技術の話し相手や相談する場所がなくて、そういうものを求めて来ましたと話されていた。私も5年前に東京から神戸へ引っ越してきたとき、友だちがいないから探そうと思ってこのコミュニティへ来た。みんな同じところで落とし穴にはまるなと思って親近感を覚えた。以前 &lt;a href="/diary/diary/posts/2023/1014/">Python Boot Camp のお手伝い&lt;/a> をしたときに知り合った、現地スタッフのにしたにさんが淡路島出身で、三ノ宮.dev にも関心があったようなので来られて挨拶した。そうやってつながりが増えていくのもまた嬉しい。&lt;/p>
&lt;p>今後はフリーランスや個人事業主、マイクロ法人といった1人で働くスタイルがより増えていくと私は考えている。以前にも &lt;a href="/diary/diary/posts/2023/0827/#マイクロ法人のススメ">マイクロ法人のススメ&lt;/a> を書いたが、1人で働くメリットは大きいものの、デメリットとして相談相手がいなかったり、困ったときに他者へ助けを求められないなどがある。コワーキングや勉強会コミュニティはそういった1人のデメリットを補う形で発展していくのではないかと想像している。そして、そのときのための準備を2年前ぐらいから始めている。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>土曜日に実家へ帰っていたのでストレッチを日曜日の夜に変更していた。昨日、車でジモティーのスタンディングデスクを引き取りに行ったり、実家との往復をしたので腰への負担が大きかった。それ以外は大きな疲労や張りなどはなかったと思う。勉強会後に飲み会へ行って、軽く1杯だけ飲んでやめとくつもりが、ビール2杯とハイボール1杯飲んでしまって、酒臭かったら悪いなぁと思いながらストレッチを受けていた。トレーナーさんはお酒の匂いしないと言ってくれてたけれど、本当のところはどうだったのか。ほろ酔いでストレッチを受けていた。今日の開脚幅は開始前152cmで、ストレッチ後157cmだった。&lt;/p></content></item><item><title>他人の言うことを聞かないと気付けない</title><link>/diary/posts/2023/1125/</link><pubDate>Sat, 25 Nov 2023 06:29:31 +0900</pubDate><guid>/diary/posts/2023/1125/</guid><description>23時に寝て1時に起きて4時過ぎに起きた。昨日、打ち合わせに来た親がうちに泊まっている。親がいると4時起きになる。
しくじり先生 たまたま元プロ野球選手の 森本稀哲 選手のしくじり先生をみた。日ハムで新庄選手が活躍していたときにブレークした選手としてしか私は知らなくて、その後、どうなったのかも知らなかったが、キャリアハイを迎えた後は期待された成績を残せず、苦労しながらも野球を続けて引退試合をしてもらえるぐらいには活躍された選手だったようだ。無名のまま引退するプロ野球選手もたくさんいる中で、本人も話していた通り、一時期レギュラーとして活躍して、16年3球団もプロ野球選手で入れたことは間違いなく幸せな選手の側だと思う。
病気のため、小さい頃からコンプレックスを抱えてきた人生の中、それが改善したり悪化したりもしながら、いまふりかえっているのは、人は共通してそういうところに陥ると思えて親近感もわく。いろいろなしくじりもあった中での私にとって気になったのは次の言葉だった。
うまくいっていないときに頑固で他人の言うことを聞かないから自分で悪い状態に気付けなかった。
マイクロ法人やフリーランスの一番の難しさはここにあると私も思う。1人だとキャリアに与える影響に自身の状態がかなり大きい。「無知の無知」への 3ステップ を常に私は意識していて、自分の誤りに自分で気付けていない状態が一番怖い。私にもいくつか成功体験があるから、自信過剰になるとこのやり方ならうまくいくはずと誤った方向に進んでしまう懸念は避けられない。周りにいる人たちに「それ、おかしいよ」とか「何をやっているのか理解できない」とか言ってもらう機会や制度設計に気を配っている。私も他人の言うことをあまり聞かない傾向があるので稀哲さんの頑固で失敗したという体験談は親身に思えた。
スタンディングデスク受け取り ジモティーで引っ越しで処分していた「DEVAISE スタンディングデスク」を2000円で購入した。メーカーのサイトがどこかわからにので amazon のリンクを張っておく。これは実家の離れではなく、うちのマンションでホットクックを置く台として使う。お昼に東灘区まで引き取りに行ってきた。メッセージを送ると相手のレスポンスの早い方で20分以内には返信が届いていた。メッセージのやり取りだけでシステムに慣れた相手だというのがわかる。本当は引き取りも13時の予定だったのだけど、こっちの都合が変わったので11時頃に早くできない？と訪ねたら20分後には11時45分にいけるよと返ってきて早く引き取りした。
実家との往復 親を送るのと、実家コワーキングスペース化のための椅子を運ぶのと、親戚と打ち合わせの3つを兼ねて実家へ車で帰る。道中、姉の職場へ立ち寄り相続関連の書類を渡して、親戚の家にお邪魔して少し打ち合わせして、16時過ぎには実家へ着いた。カフーツのいとうさんから引き取った椅子4脚 をようやく実家の離れまで運んだ。2脚ずつで2回かかった。あとは机を1-2つ探してくればコワーキングスペースとして形は成り立ちそう。
それからまた神戸へ戻る。1日で神戸と実家を往復したのは初めてかもしれない。帰りは途中で眠くなって淡路 SA で休憩した。</description><content>&lt;p>23時に寝て1時に起きて4時過ぎに起きた。昨日、打ち合わせに来た親がうちに泊まっている。親がいると4時起きになる。&lt;/p>
&lt;h2 id="しくじり先生">しくじり先生&lt;/h2>
&lt;p>たまたま元プロ野球選手の &lt;a href="https://ja.wikipedia.org/wiki/%E6%A3%AE%E6%9C%AC%E7%A8%80%E5%93%B2">森本稀哲&lt;/a> 選手のしくじり先生をみた。日ハムで新庄選手が活躍していたときにブレークした選手としてしか私は知らなくて、その後、どうなったのかも知らなかったが、キャリアハイを迎えた後は期待された成績を残せず、苦労しながらも野球を続けて引退試合をしてもらえるぐらいには活躍された選手だったようだ。無名のまま引退するプロ野球選手もたくさんいる中で、本人も話していた通り、一時期レギュラーとして活躍して、16年3球団もプロ野球選手で入れたことは間違いなく幸せな選手の側だと思う。&lt;/p>
&lt;div class="video-container">
&lt;iframe src="https://www.youtube.com/embed/80O0t4uQUKw" allowfullscreen title="神回復活！森本稀哲 新庄剛志先輩に影響を受けすぎてしくじり連発？！">&lt;/iframe>
&lt;/div>
&lt;p>病気のため、小さい頃からコンプレックスを抱えてきた人生の中、それが改善したり悪化したりもしながら、いまふりかえっているのは、人は共通してそういうところに陥ると思えて親近感もわく。いろいろなしくじりもあった中での私にとって気になったのは次の言葉だった。&lt;/p>
&lt;blockquote>
&lt;p>うまくいっていないときに頑固で他人の言うことを聞かないから自分で悪い状態に気付けなかった。&lt;/p>
&lt;/blockquote>
&lt;p>マイクロ法人やフリーランスの一番の難しさはここにあると私も思う。1人だとキャリアに与える影響に自身の状態がかなり大きい。&lt;a href="https://www.gcd.org/blog/2010/04/576/">「無知の無知」への 3ステップ&lt;/a> を常に私は意識していて、自分の誤りに自分で気付けていない状態が一番怖い。私にもいくつか成功体験があるから、自信過剰になるとこのやり方ならうまくいくはずと誤った方向に進んでしまう懸念は避けられない。周りにいる人たちに「それ、おかしいよ」とか「何をやっているのか理解できない」とか言ってもらう機会や制度設計に気を配っている。私も他人の言うことをあまり聞かない傾向があるので稀哲さんの頑固で失敗したという体験談は親身に思えた。&lt;/p>
&lt;h2 id="スタンディングデスク受け取り">スタンディングデスク受け取り&lt;/h2>
&lt;p>ジモティーで引っ越しで処分していた「DEVAISE スタンディングデスク」を2000円で購入した。メーカーのサイトがどこかわからにので amazon のリンクを張っておく。これは実家の離れではなく、うちのマンションでホットクックを置く台として使う。お昼に東灘区まで引き取りに行ってきた。メッセージを送ると相手のレスポンスの早い方で20分以内には返信が届いていた。メッセージのやり取りだけでシステムに慣れた相手だというのがわかる。本当は引き取りも13時の予定だったのだけど、こっちの都合が変わったので11時頃に早くできない？と訪ねたら20分後には11時45分にいけるよと返ってきて早く引き取りした。&lt;/p>
&lt;p>&lt;a href="https://www.amazon.co.jp/DEVAISE-%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%83%87%E3%82%B9%E3%82%AF-%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%89%E3%83%87%E3%82%B9%E3%82%AF-%E4%BE%BF%E5%88%A9%E3%81%AA%E3%82%BF%E3%83%83%E3%83%97%E5%8F%8E%E7%B4%8D%E4%BB%98%E3%81%8D-%E3%81%8D%E3%82%8C%E3%81%84%E3%81%AA%E9%85%8D%E7%B7%9A%E3%81%AE%E6%B5%81%E3%82%8C/dp/B07VSYRRML?&amp;linkCode=li2&amp;tag=t2y-diary-22&amp;linkId=9c97dd7fcf3d819292d32719dbabc9b9&amp;language=ja_JP&amp;ref_=as_li_ss_il" target="_blank">&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=B07VSYRRML&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=t2y-diary-22&amp;language=ja_JP" >&lt;/a>&lt;img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&amp;language=ja_JP&amp;l=li2&amp;o=9&amp;a=B07VSYRRML" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />&lt;/p>
&lt;h2 id="実家との往復">実家との往復&lt;/h2>
&lt;p>親を送るのと、実家コワーキングスペース化のための椅子を運ぶのと、親戚と打ち合わせの3つを兼ねて実家へ車で帰る。道中、姉の職場へ立ち寄り相続関連の書類を渡して、親戚の家にお邪魔して少し打ち合わせして、16時過ぎには実家へ着いた。&lt;a href="/diary/diary/posts/2023/0918/#椅子の引き取り">カフーツのいとうさんから引き取った椅子4脚&lt;/a> をようやく実家の離れまで運んだ。2脚ずつで2回かかった。あとは机を1-2つ探してくればコワーキングスペースとして形は成り立ちそう。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1125_chairs.jpg"/>
&lt;/figure>
&lt;p>それからまた神戸へ戻る。1日で神戸と実家を往復したのは初めてかもしれない。帰りは途中で眠くなって淡路 SA で休憩した。&lt;/p></content></item><item><title>家族信託の打ち合わせ</title><link>/diary/posts/2023/1124/</link><pubDate>Fri, 24 Nov 2023 08:35:27 +0900</pubDate><guid>/diary/posts/2023/1124/</guid><description>1時に寝て4時に起きてもう1度どこかで起きて7時半に起きた。
テックブログ公開 テックブログレビュー を終えて公開した。この機会に 個々の記事に目次 も追加した。はらさんレビューから修正をして2時間後に公開しますよと宣言して勝手に公開した。
SvelteKit はどのようにコンパイルしているのか？ 家族信託の打ち合わせ 15時にお仕事を早退して、親と一緒に明石市にある弁護士さんの事務所へ訪問した。三ノ宮から車で向かって、ナビゲーションに従っていたら京橋から高速道路に入って若宮でおろされて、なんでこんな早く高速道路おりるんやろ？と不思議に思ったけど、須磨からの海岸線はそれほど渋滞せず信号も多くないから下道で行ってもそんなに時間はかからないという判断だったようにみえる。だいたい40-50分ほどで明石市の中心地に着いた。3分ほど遅刻して打ち合わせが始まった。
遺産を相続するとさまざまなリスクがある。大きなお金をもつというだけで詐欺のターゲットにされる。家族信託 (民事信託) という制度を使って、そのとき必要なお金のみを受け取るように運用する。構成要素は次の通り。
委託者: 母 受託者: 私と姉 信託財産: 預金 受託者は最低2人必要で、うちは姉もいるのでよいのではないかと弁護士さんが話されていた。たしかに1人っ子なら誰かにお願いしないといけない。大雑把に言えば、母の貯金を子どもに管理してもらうような制度になる。但し、最初の契約書に記載された内容の範囲内でしか、受託者はお金を引き出せないのでその契約書をしっかり作ることが重要になる。契約書に記載していれば、資産運用もできるらしい。契約書の叩き台として、どういった内容を書いておくかを相談した。弁護士さん曰く、契約書に書いておかないとその用途に使えなくなるため、1%でも可能性があれば、書くだけ書いておいた方がよいとのこと。書いておいて、実際に使わないというのはなんの問題もない。
3人でブレストするような感じで項目を洗い出した。
生活費 冠婚葬祭で払うお金 10万円以内なら生活費として引き出してもよい 例えば30万円いるとして、建替え可能なら10万円/月を3ヶ月かけて引き出すでもよい (お金に困った親戚がいたと仮定して) 親戚への資金援助 生活費の範囲内でやればよいはず 看護、療養といった通院も含めた医療費 老人ホームの入居費用 納税 (一時所得) 太陽光発電で得た収益のうち、所得税をこの口座から引き出して支払うといったこともできる 家の改築、修繕、取り壊しの費用 農業のための費用 農機具の購入や修理など トラクターが一番高い、100万円〜1,000万円ぐらいとピンからキリまである 土地 (田んぼ、宅地) の購入 太陽光発電設備の撤去費用 自家用車の購入費用 生命保険の支払い 死亡保険金は500万円 x 法定相続人数まで非課税なので相続税の節税になるらしい 例) 母の死亡時に姉と私が500万円受け取るような生命保険に入る 相続税の基礎控除が3,000万円 + 600万円 * 法定相続人数 例) うちは私と姉で 3000 + 600 * 2 = 4,200万円が基礎控除となる この金額を超える遺産があれば相続税の課税対象となる 生命保険へ付け替えることで 4200 + 500 * 2 = 5,200万円まで非課税にできる？ 資産運用 投資信託 積み立て系の投資信託がもっとも望ましいのではないか リスクヘッジとして大きなお金を1度に動かすのはなるべく避けたい NISA 口座を開設できるかどうかは調べないとわからない 信託口座とは別に証券口座も開設しないといけない 受託者が預金口座からお金を引き出して証券口座へ振り込むような運用になる？ 具体的にどういった運用にするかは信託銀行と応相談になるかもしれない なんらかの制約が課されるのではないかと推測される 株式投資 可能ではあるが、条件を指定しないといけないため、中長期での実運用は難しいのではないか 私が信託口座からお金を引き出すときに、一定金額以下の生活費 (例えば10万円) ならノーチェックだが、100万円とか大きなお金を引き出すときには銀行員からチェックがかかり、正当な使途なのかどうかを確認されるという。場合によっては見積もり書の提出なども必要かもしれないとのこと。それはとくに問題ない。契約書の作り直し自体は委託者が元気であればできる。しかし、手数料や手間暇もかかるため、実運用としては最初に作った契約書を変更するといったことはそうそう行われない。最初が大事。弁護士さんが契約書を作成するのに2-3週間かかる。その後に三井住友銀行さんで赤ペン先生のチェックが入る。契約内容の修正などのやり取りをしてその後手続きに進む。</description><content>&lt;p>1時に寝て4時に起きてもう1度どこかで起きて7時半に起きた。&lt;/p>
&lt;h2 id="テックブログ公開">テックブログ公開&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1122/">テックブログレビュー&lt;/a> を終えて公開した。この機会に &lt;a href="/diary/diary/posts/2023/1120/#hugo-で書いた記事に目次を生成する">個々の記事に目次&lt;/a> も追加した。はらさんレビューから修正をして2時間後に公開しますよと宣言して勝手に公開した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://blog.osstech.co.jp/posts/2023/11/how-sveltekit-compiles/">SvelteKit はどのようにコンパイルしているのか？&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="家族信託の打ち合わせ">家族信託の打ち合わせ&lt;/h2>
&lt;p>15時にお仕事を早退して、親と一緒に明石市にある弁護士さんの事務所へ訪問した。三ノ宮から車で向かって、ナビゲーションに従っていたら京橋から高速道路に入って若宮でおろされて、なんでこんな早く高速道路おりるんやろ？と不思議に思ったけど、須磨からの海岸線はそれほど渋滞せず信号も多くないから下道で行ってもそんなに時間はかからないという判断だったようにみえる。だいたい40-50分ほどで明石市の中心地に着いた。3分ほど遅刻して打ち合わせが始まった。&lt;/p>
&lt;p>遺産を相続するとさまざまなリスクがある。大きなお金をもつというだけで詐欺のターゲットにされる。家族信託 (民事信託) という制度を使って、そのとき必要なお金のみを受け取るように運用する。構成要素は次の通り。&lt;/p>
&lt;ul>
&lt;li>委託者: 母&lt;/li>
&lt;li>受託者: 私と姉&lt;/li>
&lt;li>信託財産: 預金&lt;/li>
&lt;/ul>
&lt;p>受託者は最低2人必要で、うちは姉もいるのでよいのではないかと弁護士さんが話されていた。たしかに1人っ子なら誰かにお願いしないといけない。大雑把に言えば、母の貯金を子どもに管理してもらうような制度になる。但し、最初の契約書に記載された内容の範囲内でしか、受託者はお金を引き出せないのでその契約書をしっかり作ることが重要になる。契約書に記載していれば、資産運用もできるらしい。契約書の叩き台として、どういった内容を書いておくかを相談した。弁護士さん曰く、契約書に書いておかないとその用途に使えなくなるため、1%でも可能性があれば、書くだけ書いておいた方がよいとのこと。書いておいて、実際に使わないというのはなんの問題もない。&lt;/p>
&lt;p>3人でブレストするような感じで項目を洗い出した。&lt;/p>
&lt;ul>
&lt;li>生活費
&lt;ul>
&lt;li>冠婚葬祭で払うお金
&lt;ul>
&lt;li>10万円以内なら生活費として引き出してもよい&lt;/li>
&lt;li>例えば30万円いるとして、建替え可能なら10万円/月を3ヶ月かけて引き出すでもよい&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>(お金に困った親戚がいたと仮定して) 親戚への資金援助
&lt;ul>
&lt;li>生活費の範囲内でやればよいはず&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>看護、療養といった通院も含めた医療費&lt;/li>
&lt;li>老人ホームの入居費用&lt;/li>
&lt;li>納税 (一時所得)
&lt;ul>
&lt;li>太陽光発電で得た収益のうち、所得税をこの口座から引き出して支払うといったこともできる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>家の改築、修繕、取り壊しの費用&lt;/li>
&lt;li>農業のための費用
&lt;ul>
&lt;li>農機具の購入や修理など&lt;/li>
&lt;li>トラクターが一番高い、100万円〜1,000万円ぐらいとピンからキリまである&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>土地 (田んぼ、宅地) の購入&lt;/li>
&lt;li>太陽光発電設備の撤去費用&lt;/li>
&lt;li>自家用車の購入費用&lt;/li>
&lt;li>生命保険の支払い
&lt;ul>
&lt;li>死亡保険金は500万円 x 法定相続人数まで非課税なので相続税の節税になるらしい
&lt;ul>
&lt;li>例) 母の死亡時に姉と私が500万円受け取るような生命保険に入る&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>相続税の基礎控除が3,000万円 + 600万円 * 法定相続人数
&lt;ul>
&lt;li>例) うちは私と姉で 3000 + 600 * 2 = 4,200万円が基礎控除となる
&lt;ul>
&lt;li>この金額を超える遺産があれば相続税の課税対象となる&lt;/li>
&lt;li>生命保険へ付け替えることで 4200 + 500 * 2 = 5,200万円まで非課税にできる？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>資産運用
&lt;ul>
&lt;li>投資信託
&lt;ul>
&lt;li>積み立て系の投資信託がもっとも望ましいのではないか
&lt;ul>
&lt;li>リスクヘッジとして大きなお金を1度に動かすのはなるべく避けたい&lt;/li>
&lt;li>NISA 口座を開設できるかどうかは調べないとわからない&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>信託口座とは別に証券口座も開設しないといけない
&lt;ul>
&lt;li>受託者が預金口座からお金を引き出して証券口座へ振り込むような運用になる？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>具体的にどういった運用にするかは信託銀行と応相談になるかもしれない
&lt;ul>
&lt;li>なんらかの制約が課されるのではないかと推測される&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>株式投資
&lt;ul>
&lt;li>可能ではあるが、条件を指定しないといけないため、中長期での実運用は難しいのではないか&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>私が信託口座からお金を引き出すときに、一定金額以下の生活費 (例えば10万円) ならノーチェックだが、100万円とか大きなお金を引き出すときには銀行員からチェックがかかり、正当な使途なのかどうかを確認されるという。場合によっては見積もり書の提出なども必要かもしれないとのこと。それはとくに問題ない。契約書の作り直し自体は委託者が元気であればできる。しかし、手数料や手間暇もかかるため、実運用としては最初に作った契約書を変更するといったことはそうそう行われない。最初が大事。弁護士さんが契約書を作成するのに2-3週間かかる。その後に三井住友銀行さんで赤ペン先生のチェックが入る。契約内容の修正などのやり取りをしてその後手続きに進む。&lt;/p>
&lt;p>思考実験として、詐欺にあって借金してしまった、または連帯保証人となって借金してしまった。その場合はどうなるか？というのも考えてみた。信託銀行に確認してみるとのことだったが、弁護士さんが言うには、家族信託の目的は財産を守ることにあるため、本来の使途ではないものへ支払いは抵抗があるかもしれないとのこと。その状況によって銀行員の判断次第かもしれないとのこと。&lt;/p>
&lt;p>受託者は年に1回報告書 (帳簿) を作り、どのように運用したかを委託者へ報告する義務がある。これは家族間だけの話ではある。この手の情報処理 (データ処理) は私が得意とするのでそんなのすぐやりますと回答できた。弁護士さんによると、こういう事務作業を嫌がる受託者もいるという。スプレッドシートでちゃちゃっと作ればよいはず。&lt;/p>
&lt;p>契約書を作成したら、それをもって委託者、受託者、弁護士の3人で &lt;a href="http://kobe-koushou-center.jp/">神戸公証役場&lt;/a> へ一緒に行く。その公正証書をもって三井住友信託銀行へ行って、母が口座を開設して、そこに弁護士さんが遺産を振り込むといった段取りになる。将来、委託者の健康を害して成年後見人がつく状況になったとしても家族信託の口座はそのまま受託者が管理できる。成年後見人に信託口座が移管されるようなことはない。&lt;/p>
&lt;p>最後に契約書の条項をチェックしていて次の内容を教えてもらった。&lt;/p>
&lt;blockquote>
&lt;p>弁護士業務の適正の確保&lt;/p>
&lt;p>甲は、本件事件等の処理の依頼目的が犯罪収益移転に関わるものではないことを、表明し保証する。&lt;/p>
&lt;/blockquote>
&lt;p>「半社チェックのようなもの？」と聞いたらちょっと違っていて、弁護士は大きなお金を動かしても監査を受けないという特権 (信頼) があって、その特権はマネーロンダリングできてしまうという諸刃の剣でもあるらしい。今回のお金は遺産なので半社会的なものに該当しないが、契約書では弁護士が扱う業務がマネーロンダリングではないことをチェックする必要があるみたい。&lt;/p>
&lt;p>帰りに &lt;a href="https://www.go-akashiyaki.com/">明石焼き ゴ&lt;/a> というお店で明石焼きを買った。駐車場の近くにあったお店に立ち寄ってテイクアウトしたのだけど、とてもおいしかった。それで &lt;a href="https://tabelog.com/hyogo/A2804/A280401/28005563/">食べログ&lt;/a> の評価もみたら 3.49 とかなり高い。たまたま買ったところがよいお店だった。18時半頃に店内もほぼ満席だったと思う。また明石へ行く機会があれば寄ってみようと思う。&lt;/p></content></item><item><title>なにも手につかない休日</title><link>/diary/posts/2023/1123/</link><pubDate>Thu, 23 Nov 2023 00:51:07 +0900</pubDate><guid>/diary/posts/2023/1123/</guid><description>1時までオフィスで作業して3時に寝てやや吐き気で起きて9時前に起きた。夕方から「翔んで埼玉」の1作目をみた。想像した雰囲気とはちょっと違っていた。私が関東圏に関心がないからそれほど親近感はなかった。
呪術廻戦のスマホゲーム コロナ禍明けから広告系の会社の株価が落ちている。サイバーの23年9月期、純利益78%減「ウマ娘」失速 にあるように、サイバーエージェントはとくにウマ娘のヒットが落ち着きあるようで、さらに株価が落ちていた。直近の高値2,441円から 半値八掛け二割引 で算出すると781円になる。
2441 * 0.5 * 0.8 * 0.8 ≠ 781 円
1年ぐらい前からサイバーエージェントの株価もたまたま観測していた。この計算式はだいたい1/3ぐらいと覚えていたので800円台が底値かなと目安にみていて、いま計算し直したら781円だった。そろそろ底値付近かなと少しずつ買っていた。直近の約定日の時系列の推移が次になる。
日付 始値 高値 安値 終値 出来高 調整後終値 2023-07-27 959 970 900.4 923.8 33,373,800 923.8 2023-09-08 900 901.9 851.7 854.8 26,553,700 854.8 2023-09-22 790.6 812.1 787.4 802.7 8,628,700 802.7 2023-10-20 782 785.3 775 777.9 3,993,600 777.9 2023-10-27 768.7 774.7 758.2 773.2 5,453,700 773.2 2023-11-10 815.6 815.6 792.4 810.7 6,552,700 810.7 2023-11-16 847 850.3 824.2 831.</description><content>&lt;p>1時までオフィスで作業して3時に寝てやや吐き気で起きて9時前に起きた。夕方から「翔んで埼玉」の1作目をみた。想像した雰囲気とはちょっと違っていた。私が関東圏に関心がないからそれほど親近感はなかった。&lt;/p>
&lt;h2 id="呪術廻戦のスマホゲーム">呪術廻戦のスマホゲーム&lt;/h2>
&lt;p>コロナ禍明けから広告系の会社の株価が落ちている。&lt;a href="https://www.nikkei.com/article/DGXZQOUC319TX0R31C23A0000000/">サイバーの23年9月期、純利益78%減「ウマ娘」失速&lt;/a> にあるように、サイバーエージェントはとくにウマ娘のヒットが落ち着きあるようで、さらに株価が落ちていた。直近の高値2,441円から &lt;a href="https://www.nomura.co.jp/terms/japan/ha/a01849.html">半値八掛け二割引&lt;/a> で算出すると781円になる。&lt;/p>
&lt;blockquote>
&lt;p>2441 * 0.5 * 0.8 * 0.8 ≠ 781 円&lt;/p>
&lt;/blockquote>
&lt;p>1年ぐらい前からサイバーエージェントの株価もたまたま観測していた。この計算式はだいたい1/3ぐらいと覚えていたので800円台が底値かなと目安にみていて、いま計算し直したら781円だった。そろそろ底値付近かなと少しずつ買っていた。直近の約定日の時系列の推移が次になる。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">日付&lt;/th>
&lt;th style="text-align:right">始値&lt;/th>
&lt;th style="text-align:right">高値&lt;/th>
&lt;th style="text-align:right">安値&lt;/th>
&lt;th style="text-align:right">終値&lt;/th>
&lt;th style="text-align:right">出来高&lt;/th>
&lt;th style="text-align:right">調整後終値&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">2023-07-27&lt;/td>
&lt;td style="text-align:right">959&lt;/td>
&lt;td style="text-align:right">970&lt;/td>
&lt;td style="text-align:right">900.4&lt;/td>
&lt;td style="text-align:right">923.8&lt;/td>
&lt;td style="text-align:right">33,373,800&lt;/td>
&lt;td style="text-align:right">923.8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-09-08&lt;/td>
&lt;td style="text-align:right">900&lt;/td>
&lt;td style="text-align:right">901.9&lt;/td>
&lt;td style="text-align:right">851.7&lt;/td>
&lt;td style="text-align:right">854.8&lt;/td>
&lt;td style="text-align:right">26,553,700&lt;/td>
&lt;td style="text-align:right">854.8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-09-22&lt;/td>
&lt;td style="text-align:right">790.6&lt;/td>
&lt;td style="text-align:right">812.1&lt;/td>
&lt;td style="text-align:right">787.4&lt;/td>
&lt;td style="text-align:right">802.7&lt;/td>
&lt;td style="text-align:right">8,628,700&lt;/td>
&lt;td style="text-align:right">802.7&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-10-20&lt;/td>
&lt;td style="text-align:right">782&lt;/td>
&lt;td style="text-align:right">785.3&lt;/td>
&lt;td style="text-align:right">775&lt;/td>
&lt;td style="text-align:right">777.9&lt;/td>
&lt;td style="text-align:right">3,993,600&lt;/td>
&lt;td style="text-align:right">777.9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-10-27&lt;/td>
&lt;td style="text-align:right">768.7&lt;/td>
&lt;td style="text-align:right">774.7&lt;/td>
&lt;td style="text-align:right">758.2&lt;/td>
&lt;td style="text-align:right">773.2&lt;/td>
&lt;td style="text-align:right">5,453,700&lt;/td>
&lt;td style="text-align:right">773.2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-10&lt;/td>
&lt;td style="text-align:right">815.6&lt;/td>
&lt;td style="text-align:right">815.6&lt;/td>
&lt;td style="text-align:right">792.4&lt;/td>
&lt;td style="text-align:right">810.7&lt;/td>
&lt;td style="text-align:right">6,552,700&lt;/td>
&lt;td style="text-align:right">810.7&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-16&lt;/td>
&lt;td style="text-align:right">847&lt;/td>
&lt;td style="text-align:right">850.3&lt;/td>
&lt;td style="text-align:right">824.2&lt;/td>
&lt;td style="text-align:right">831.9&lt;/td>
&lt;td style="text-align:right">6,180,300&lt;/td>
&lt;td style="text-align:right">831.9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-17&lt;/td>
&lt;td style="text-align:right">831.9&lt;/td>
&lt;td style="text-align:right">833.9&lt;/td>
&lt;td style="text-align:right">817.3&lt;/td>
&lt;td style="text-align:right">819.6&lt;/td>
&lt;td style="text-align:right">5,098,200&lt;/td>
&lt;td style="text-align:right">819.6&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ここ2-3日で気付いたら評価益が増えているなと気付いて調べたら &lt;a href="https://jujutsuphanpara.jp/">呪術廻戦 ファントムパレード&lt;/a> というサイバーエージェントのグループ企業がゲームをリリースしてランキングが1位になっているらしい。一応チェックするかと思って、午前中はこのゲームをダウンロードして2-3時間やってみた。現時点ではソーシャル要素はほとんどなく、原作に忠実なキャラクターゲームという構成になっている。ストーリーのムービーはアニメの台詞をそのままをゲームの映像にあわせて流しているようなもの。私は原作をみたことがあるからスキップするけど、知らない人たちはこれをみながらストーリーを進めていくのだろうか。&lt;/p>
&lt;p>全体として原作ファンならそこそこ楽しめると思う。五条悟が最強で領域展開しない限り攻撃が当たらない、しかし最強なので7ターンしたら戦闘離脱 (戦闘不能) するという設定になっている。ある程度、強い敵と連続的に戦闘しないといけないときは途中離脱してしまうのでそれでゲームバランスを調整している。最初のガチャだけ引き直しが出来て、自分の好きなキャラが出るまでやり直せる。それで五条悟が出るまで粘った。20回ぐらい引き直しした。&lt;/p>
&lt;p>戦闘シーンもよく出来ているし、ムービーや声優さんの台詞もあり、大きな欠点のない普通のゲームといった印象。原因はわからないが、タップの操作を受け付けなくなるときがちらほらある。通信でブロックしているのか、イベントを処理できていないのか。プレイヤーだけでなく、アイテムやスキルにレベルを上げる要素があって、完凸を目指すような人は2-3年はやり続けるのかもしれない。ガチャで取得した五条悟の必殺技は術式反転「赫」になる。半年後のガチャでは虚式「茈」も実装されるのだろうと推測がつく。たしかに茈の戦闘シーンをみてみたい。出足からランキング1位でアクティブユーザーが多いなら予算もついて今後もゲームのコンテンツがパワーアップしていく可能性は高い。大ヒットしないまでも、普通のヒット作になって2-3年は続くのではないかと思えた。一方で私のような、ゲームも呪術廻戦の漫画 (アニメ) もにわかファンには、レベルをずっと上げ続けないといけないゲームはしんどいので、課金しないならそのうちに離脱してしまうと思う。時間がないから継続できない。&lt;/p>
&lt;p>たまたまなのか、トレンド転換としてもよいタイミングなので順張りしながら様子をみてみようと思う。&lt;/p></content></item><item><title>テックブログレビュー</title><link>/diary/posts/2023/1122/</link><pubDate>Wed, 22 Nov 2023 08:37:03 +0900</pubDate><guid>/diary/posts/2023/1122/</guid><description>この前の テレ東の番組 に影響をうけて夜にファーストガンダムをみたりしていた。1時に寝て3時半に起きて何をしていたか覚えていないが、気付いたら5時半だった。その後、slack のメッセージに気付いて返信するために6時半に起きた。
テックブログ執筆 昨日の続き 。残り 1/3 の Vite についての調査内容を書いて昼過ぎにはレビュー依頼のマージリクエストを送った。といっても、お手伝い先の社内にはフロントエンドに詳しい開発者はほぼいないと推測される。はらさんにもお願いしていて、このレビューは実質的にはらさんが担当することになると想定される。はらさんの OK が出たらそのまま公開してしまおうと考えている。できれば金曜日中には公開してしまいたい。
学生の頃、物理の先生が言ったかどうか定かではないが「物体が動き出す直前が最も摩擦が大きい」という言葉を気に入っている。先週に大半を調べていた内容を、週末、月・火と4日もまたいで水曜日に記事を書き終えるというのが、私の職務レベルからすると怠慢と指摘されたら認めるしかない。金曜日の夜に能鑑賞して、土曜日はもくもく会へ行って、日曜日は深夜コワーキングをしていた。要は遊んでいた、楽しかったんだけど。加齢でモチベーションコントロールが難しいから土日の両方を遊んでしまうと、やらないといけないことがなにも進まないといった状況に陥ってしまう。そして、やらなくても誰からも怒られないというのが悲しい現実だ。
鶏もも肉 2kg まとめ買い 業務スーパーの買いもの の続き。17時にお仕事を終えて、時間があったので業務スーパーへ買いものへ行った。オフィスから近所の業務スーパーへ行くのは20分ほどかかることから、19時閉店のお店へ平日行くのはやや難しい。今日の目当ては鶏もも肉まとめ買い。2kg を買うと1,780円 (税抜き) で7つの肉片が入っていた。100g あたりに換算すると89円になる。さっそく炒めて食べてみたが、とくに調理や風味に問題はない。
吉備高原どりもも肉 (おそらく) 同じ鶏肉の肉片1枚入りに小分けした真空パックだと 100g 98円になる。通常の肉のパッキングの消費期限は2-3日といったところが、真空パックだと7日に延びる。この9円の差異を真空パック料金だと捉えることもできる。この前 KOHYO で購入した国産鶏もも肉は 100g 138円だった。格段に安い。
2kg も一度に消費できないので肉片の2つを冷蔵庫へ、5つは冷凍保存する。冷凍保存すると2-3週間はもつらしい。冷凍保存するためのラップで包んだり、解凍したりするのが面倒でもある。仮に1日で肉片1つを消費するとして7日分の食材になる。1枚入りの真空パックを3-4個買って冷蔵庫で保存して7日以内に食べるのでもよいかもしれない。</description><content>&lt;p>この前の &lt;a href="/diary/diary/posts/2023/1120/#ガンダムに学ぶ経営学">テレ東の番組&lt;/a> に影響をうけて夜にファーストガンダムをみたりしていた。1時に寝て3時半に起きて何をしていたか覚えていないが、気付いたら5時半だった。その後、slack のメッセージに気付いて返信するために6時半に起きた。&lt;/p>
&lt;h2 id="テックブログ執筆">テックブログ執筆&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1121/#テックブログ執筆">昨日の続き&lt;/a> 。残り 1/3 の &lt;a href="https://ja.vitejs.dev/">Vite&lt;/a> についての調査内容を書いて昼過ぎにはレビュー依頼のマージリクエストを送った。といっても、お手伝い先の社内にはフロントエンドに詳しい開発者はほぼいないと推測される。はらさんにもお願いしていて、このレビューは実質的にはらさんが担当することになると想定される。はらさんの OK が出たらそのまま公開してしまおうと考えている。できれば金曜日中には公開してしまいたい。&lt;/p>
&lt;p>学生の頃、物理の先生が言ったかどうか定かではないが「物体が動き出す直前が最も摩擦が大きい」という言葉を気に入っている。先週に大半を調べていた内容を、週末、月・火と4日もまたいで水曜日に記事を書き終えるというのが、私の職務レベルからすると怠慢と指摘されたら認めるしかない。金曜日の夜に能鑑賞して、土曜日はもくもく会へ行って、日曜日は深夜コワーキングをしていた。要は遊んでいた、楽しかったんだけど。加齢でモチベーションコントロールが難しいから土日の両方を遊んでしまうと、やらないといけないことがなにも進まないといった状況に陥ってしまう。そして、やらなくても誰からも怒られないというのが悲しい現実だ。&lt;/p>
&lt;h2 id="鶏もも肉-2kg-まとめ買い">鶏もも肉 2kg まとめ買い&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1112/#業務スーパー">業務スーパーの買いもの&lt;/a> の続き。17時にお仕事を終えて、時間があったので業務スーパーへ買いものへ行った。オフィスから近所の業務スーパーへ行くのは20分ほどかかることから、19時閉店のお店へ平日行くのはやや難しい。今日の目当ては鶏もも肉まとめ買い。2kg を買うと1,780円 (税抜き) で7つの肉片が入っていた。100g あたりに換算すると89円になる。さっそく炒めて食べてみたが、とくに調理や風味に問題はない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gyomusuper.jp/product/detail.php?go_id=6037">吉備高原どりもも肉&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>(おそらく) 同じ鶏肉の肉片1枚入りに小分けした真空パックだと 100g 98円になる。通常の肉のパッキングの消費期限は2-3日といったところが、真空パックだと7日に延びる。この9円の差異を真空パック料金だと捉えることもできる。この前 KOHYO で購入した国産鶏もも肉は 100g 138円だった。格段に安い。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1122_chicken.jpg"/>
&lt;/figure>
&lt;p>2kg も一度に消費できないので肉片の2つを冷蔵庫へ、5つは冷凍保存する。冷凍保存すると2-3週間はもつらしい。冷凍保存するためのラップで包んだり、解凍したりするのが面倒でもある。仮に1日で肉片1つを消費するとして7日分の食材になる。1枚入りの真空パックを3-4個買って冷蔵庫で保存して7日以内に食べるのでもよいかもしれない。&lt;/p></content></item><item><title>テックブログの書き始め</title><link>/diary/posts/2023/1121/</link><pubDate>Tue, 21 Nov 2023 08:51:59 +0900</pubDate><guid>/diary/posts/2023/1121/</guid><description>昨日は夜にいろいろ作業して、1時に寝て4時に起きて7時に起きた。
テックブログ執筆 先週から調査している内容 についてテックブログを書き始めた。マネジメントや実装をしていると筆が進まなくて書き始めるのが随分と遅くなってしまった。学校の試験前に、試験勉強やらずに部屋の掃除をやってしまったりするような感覚。午前中は昨日 go-ldap に送った pr がまとめてマージされた。その修正を取り込んだライブラリのバージョンで関連するところのコードをリファクタリングしていた。それでもようやく書き始めた。書き始めたら一気に 2/3 は書けた。本当は晩ご飯を食べた後にレビューできるところまで書いてしまおうと思っていたが、そこまで体力 (集中力) が続かなかった。なんとなく張り合いがなくて適当なところで妥協してしまう。
試行錯誤から学ぶ開発スタイル たまたまみかけた記事でひどい内容の記事をみた。一読しただけでもやもやしていたのを知人と議論していて言語化できるようになったので書いてみる。
エンジニアが仕様案を手戻りさせるアンチパターンはもう終わりにしよう もっと前段にエンジニアが議論に参加する、なんなら議論をリードするくらいのことをしていく必要があるでしょう。
こういうこと言い出すマネージャー (PO) 多いし、意見そのものは一理あるんだけど、これをエンジニアがイニシアティブとってやっていたらマネージャーいらないでしょ？ということを自覚していない。もっと言うと、PO という責任のある立場の人が大変という理由で責任放棄しているようにみえてしまう。(翻訳) ビッグテックのプロジェクトマネジメントとスクラム不在の謎 という記事では実際にテックリードまたはエンジニアがプロジェクトのイニシアティブを取っていると書かれている。もしそうするなら、まず自身のスキル不足や未熟さを受け入れないといけない。
マネージャー (PO) にとって大きな役割は意思決定であって、仕様案や計画において技術的なところがわからないのであれば、エンジニアに委譲したり相談して事前にいくらでも調整できるはずだし、その調整作業そのものはマネージャーの仕事の1つと言える。そういった調整をマネージャーがやるからエンジニアは実開発の設計や実装に集中できる。結果的に生産性も上がる。この文章から伺えることはリファインメントや計画に臨んだときにダメ出しされてやり直すことを手戻り、大変、効率が悪いとネガティブに捉えている。逆に言えば、最初から完璧に仕様案を作れるはずだと思い込んでいるふしがある。
そして、誰もが知っていることだが、最初から完璧な仕様案や計画など作れるはずがなく、不確実性を許容しながらスクラムやアジャイル開発といった開発方法論の取り組みで調整していくというのが、モダンな開発のやり方である。その試行錯誤や手戻りは無駄なことではなく、チームやプロジェクトが学ぶべきことの1つだという考えがこの文章からは読み取れない。そして、自分が仕様案を適切に作れなかったのを自分のスキル不足だと認めず、チームのエンジニアが議論に参加していないからだと責任転嫁している。それはマネージャーが技術的に大事なことを理解できていなかったとふりかえり、計画を修正したり、次に計画するときは同じようなことが起こらないよう、努めていくというのがスクラム的なプロジェクトの進め方になるはずだ。手戻りはアンチパターンではなく、学びの過程や必要な試行錯誤であると認めて受け入れるところから始めるべき。</description><content>&lt;p>昨日は夜にいろいろ作業して、1時に寝て4時に起きて7時に起きた。&lt;/p>
&lt;h2 id="テックブログ執筆">テックブログ執筆&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1117/">先週から調査している内容&lt;/a> についてテックブログを書き始めた。マネジメントや実装をしていると筆が進まなくて書き始めるのが随分と遅くなってしまった。学校の試験前に、試験勉強やらずに部屋の掃除をやってしまったりするような感覚。午前中は昨日 go-ldap に送った pr がまとめてマージされた。その修正を取り込んだライブラリのバージョンで関連するところのコードをリファクタリングしていた。それでもようやく書き始めた。書き始めたら一気に 2/3 は書けた。本当は晩ご飯を食べた後にレビューできるところまで書いてしまおうと思っていたが、そこまで体力 (集中力) が続かなかった。なんとなく張り合いがなくて適当なところで妥協してしまう。&lt;/p>
&lt;h2 id="試行錯誤から学ぶ開発スタイル">試行錯誤から学ぶ開発スタイル&lt;/h2>
&lt;p>たまたまみかけた記事でひどい内容の記事をみた。一読しただけでもやもやしていたのを知人と議論していて言語化できるようになったので書いてみる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://yigarashi.hatenablog.com/entry/2023/11/20/093000">エンジニアが仕様案を手戻りさせるアンチパターンはもう終わりにしよう&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>もっと前段にエンジニアが議論に参加する、なんなら議論をリードするくらいのことをしていく必要があるでしょう。&lt;/p>
&lt;/blockquote>
&lt;p>こういうこと言い出すマネージャー (PO) 多いし、意見そのものは一理あるんだけど、これをエンジニアがイニシアティブとってやっていたらマネージャーいらないでしょ？ということを自覚していない。もっと言うと、PO という責任のある立場の人が大変という理由で責任放棄しているようにみえてしまう。&lt;a href="https://t2y.hatenablog.jp/entry/2023/09/03/011023">(翻訳) ビッグテックのプロジェクトマネジメントとスクラム不在の謎&lt;/a> という記事では実際にテックリードまたはエンジニアがプロジェクトのイニシアティブを取っていると書かれている。もしそうするなら、まず自身のスキル不足や未熟さを受け入れないといけない。&lt;/p>
&lt;p>マネージャー (PO) にとって大きな役割は意思決定であって、仕様案や計画において技術的なところがわからないのであれば、エンジニアに委譲したり相談して事前にいくらでも調整できるはずだし、その調整作業そのものはマネージャーの仕事の1つと言える。そういった調整をマネージャーがやるからエンジニアは実開発の設計や実装に集中できる。結果的に生産性も上がる。この文章から伺えることはリファインメントや計画に臨んだときにダメ出しされてやり直すことを手戻り、大変、効率が悪いとネガティブに捉えている。逆に言えば、最初から完璧に仕様案を作れるはずだと思い込んでいるふしがある。&lt;/p>
&lt;p>そして、誰もが知っていることだが、最初から完璧な仕様案や計画など作れるはずがなく、不確実性を許容しながらスクラムやアジャイル開発といった開発方法論の取り組みで調整していくというのが、モダンな開発のやり方である。その試行錯誤や手戻りは無駄なことではなく、チームやプロジェクトが学ぶべきことの1つだという考えがこの文章からは読み取れない。そして、自分が仕様案を適切に作れなかったのを自分のスキル不足だと認めず、チームのエンジニアが議論に参加していないからだと責任転嫁している。それはマネージャーが技術的に大事なことを理解できていなかったとふりかえり、計画を修正したり、次に計画するときは同じようなことが起こらないよう、努めていくというのがスクラム的なプロジェクトの進め方になるはずだ。手戻りはアンチパターンではなく、学びの過程や必要な試行錯誤であると認めて受け入れるところから始めるべき。&lt;/p></content></item><item><title>生活リズムが崩れた月曜日</title><link>/diary/posts/2023/1120/</link><pubDate>Mon, 20 Nov 2023 08:35:29 +0900</pubDate><guid>/diary/posts/2023/1120/</guid><description>1時に寝て2時半に起きて5時に起きて7時に起きた。朝から昼過ぎまで寝てたのでトータルでは睡眠時間をたくさん取っているのになんか疲れている。生活のリズムを崩すのがよくないのかも。
ガンダムに学ぶ経営学 教えてもらって寝る前にみたらおもしろかった。入山先生がガンダム大好きなことが伝わってくる。おもしろいのはそうだけど、まじレスすると、アニメの世界の組織や経済に学ぶというのは誤りで、当時の組織や経済のリアルを参考にして、ガンダムの世界観は作られていると推測する。だから入山先生はユーモアで盛り上げているのだと思うけれど、ガンダムから学ぶのではなく歴史から学べが正解だと思う。でも、ガンダムの世界観を知るよい番組だと思う。
go-ldap へのプルリクエスト 2週間ほど前に送った pr がまだレビューすらしてもらえていない。github actions のテストがいくつか落ちていて、この pr の修正によるものではないところでエラーになっている。メンテナーの1人が再実行してくれたんだけど、たくさんあるマトリックステストのどこかが落ちてまた再実行しないといけない。
IsErrorAnyOf should match the given result code even if the error is wrapped #471 それを待っている間に、テストがエラーになる本当の原因の問題を直そうと2-3日前に issue 登録していた。この issue の対応を本当は昨日やろうと思っていたのに、思いの外、寝てしまって、その後もいろいろ書きものをしていて時間を使ってしまってできていなかった。今朝からそれを片付けた。業務の一環なので日曜日にプルリクエストを送らなくてもよいのだけど、コントリビューションなので空き時間に終わらせて、業務の時間は別のことに使いたいという思いもあったりする。
Fix DATA RACE as a result of changing ber&amp;rsquo;s module global variable for fuzz tests #473 さらに github actions のログに deprecated ワーニングが出ていたのでついでにそれも直した。
Fix deprecated warning on GitHub Actions #474 473, 474, 471 の順番にマージされていくのが望ましい。そろそろコミット権をくれたりしないかな？と思ったりもする。というのは、タイミングの問題で action の job が落ちたり、バージョン上げるだけの pr とか、自分でマージしてしまえばいいと思ったりする。</description><content>&lt;p>1時に寝て2時半に起きて5時に起きて7時に起きた。朝から昼過ぎまで寝てたのでトータルでは睡眠時間をたくさん取っているのになんか疲れている。生活のリズムを崩すのがよくないのかも。&lt;/p>
&lt;h2 id="ガンダムに学ぶ経営学">ガンダムに学ぶ経営学&lt;/h2>
&lt;p>教えてもらって寝る前にみたらおもしろかった。入山先生がガンダム大好きなことが伝わってくる。おもしろいのはそうだけど、まじレスすると、アニメの世界の組織や経済に学ぶというのは誤りで、当時の組織や経済のリアルを参考にして、ガンダムの世界観は作られていると推測する。だから入山先生はユーモアで盛り上げているのだと思うけれど、ガンダムから学ぶのではなく歴史から学べが正解だと思う。でも、ガンダムの世界観を知るよい番組だと思う。&lt;/p>
&lt;div class="video-container">
&lt;iframe src="https://www.youtube.com/embed/w7Hhimmu26c" allowfullscreen title="ガンダムに学ぶ経営学 【まとめ】【テレ東経済ニュースアカデミー　GWセレクション３】">&lt;/iframe>
&lt;/div>
&lt;h2 id="go-ldap-へのプルリクエスト">go-ldap へのプルリクエスト&lt;/h2>
&lt;p>2週間ほど前に送った pr がまだレビューすらしてもらえていない。github actions のテストがいくつか落ちていて、この pr の修正によるものではないところでエラーになっている。メンテナーの1人が再実行してくれたんだけど、たくさんあるマトリックステストのどこかが落ちてまた再実行しないといけない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/go-ldap/ldap/pull/471">IsErrorAnyOf should match the given result code even if the error is wrapped #471&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>それを待っている間に、テストがエラーになる本当の原因の問題を直そうと2-3日前に issue 登録していた。この issue の対応を本当は昨日やろうと思っていたのに、思いの外、寝てしまって、その後もいろいろ書きものをしていて時間を使ってしまってできていなかった。今朝からそれを片付けた。業務の一環なので日曜日にプルリクエストを送らなくてもよいのだけど、コントリビューションなので空き時間に終わらせて、業務の時間は別のことに使いたいという思いもあったりする。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/go-ldap/ldap/pull/473">Fix DATA RACE as a result of changing ber&amp;rsquo;s module global variable for fuzz tests #473&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>さらに github actions のログに deprecated ワーニングが出ていたのでついでにそれも直した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/go-ldap/ldap/pull/474">Fix deprecated warning on GitHub Actions #474&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>473, 474, 471 の順番にマージされていくのが望ましい。そろそろコミット権をくれたりしないかな？と思ったりもする。というのは、タイミングの問題で action の job が落ちたり、バージョン上げるだけの pr とか、自分でマージしてしまえばいいと思ったりする。&lt;/p>
&lt;h2 id="hugo-で書いた記事に目次を生成する">hugo で書いた記事に目次を生成する&lt;/h2>
&lt;p>お手伝い先のテックブログは hugo で運用されている。記事の目次がないなと気付いて追加してみた。hugo v0.60.0 以降のバージョンなら標準で目次生成の機能をもっている。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">aside&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ .TableOfContents }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/&lt;span style="color:#f92672">aside&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/content-management/toc/">Table of contents&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>デフォルトはヘッダー2レベルより下の目次を生成する。レベル1も生成したい場合は config.toml に次の設定を追加する。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#a6e22e">markup&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#a6e22e">markup&lt;/span>.&lt;span style="color:#a6e22e">tableOfContents&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">startLevel&lt;/span> = &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">endLevel&lt;/span> = &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item><item><title>深夜コワーキングという試み</title><link>/diary/posts/2023/1119/</link><pubDate>Sun, 19 Nov 2023 01:21:42 +0900</pubDate><guid>/diary/posts/2023/1119/</guid><description>0時前から出掛けて行って寝ないで深夜コワーキングに参加した。スーパーでよく買う「山元さん家のええたまご」でゆで卵を作って持っていったら好評だった。また今度どこかでもやってみよう。
深夜コワーキングの所感 先日の オンラインイベント で話題に出たアイディアで一度やってみようと 深夜コワーキング Vol.0 が企画されたので参加した。参加者は5人だった。私は0時過ぎにカフーツさんへ行って3時ぐらいまで雑談しながら作業して、それからはお酒を飲んで遊んでいた。ながいさんが3時頃にたこやきを uber eats でを注文して、こんな時間に配達してくれる人がいるんやというのも発見だった。5時過ぎが眠気のピークでいっとき寝てしまいそうだったが、なんとか起きたまま6時まで完走できた。別に寝たらいけないというわけではないが。
総評として、深夜コワーキングで作業に集中するというよりは、作業しながら他のコワーカーの人たちと雑談して、普段とは異なる刺激を受けたり、考えることがないことを考えてみたり、知らないことに気付いたり。そういった体験のすべてがコワーキングの価値であったり、コラボレーションの積み重ねだったりするように思う。そのコワーキングにおける価値の、さらに非日常を演出するという意図では効果があったように思えるし、おもしろい取り組みでもあると思う。また率直に楽しかった。
一方で6時半に帰ってきて、そのまま寝て10時半に神戸マラソンのアナウンスで起きて、2度寝して13時頃に起きて、起きようかと思っているうちに3度寝して結局15時ぐらいまで寝てた。よく眠れたのだけど、普段の生活とは違うことをすると、疲れてしまって可処分時間は余分に消費したようにも思える。毎月やるというよりも、たまにやるぐらいの頻度で非日常の中での価値創造の役割程度に考えるのがよいのではないかと思えた。私の日常はとくに朝型の生活をしているから夜通し起きているのは心身に疲労が大きい気がした。
ながいさんはショートスリーパーで平時も4時ぐらいまで作業していて3時間ぐらいしか寝ないらしい。他のコワーカーも4時まで作業する人、4時から起きて作業する人など、それぞれの人の働き方のスタイルがあるようだ。昔から私は一律9時出社のようなことが嫌いで、その人の働きたい時間に出社して自由に働けばよいと考えていた。労働基準法があるので一概に自由化は難しいと思うが、将来うちの会社でも社員を雇うことになってもコアタイムの概念は柔軟に設計しようと考えている。
サンライズ瀬戸・出雲 神戸から東京へ行くのに サンライズ瀬戸・出雲 という夜行列車という移動手段があることを教えてもらった。のぼりだけ三ノ宮に停車する。いま始発で当日に東京へ行っているが、前日はあまり眠れなくて眠れたとしても4時から起きて準備して出張すると、当日の16時ぐらいから眠くなってしまって集中力が落ちるという課題がある。もしかしたら夜行列車ならよく眠れてその問題を解決できるかもしれない。一度試してみようと思う。夜行バスとの違いとして、夜行列車はベッドで横になれるのでより快適だという。
【夜行列車】神戸から東京への行き方を紹介！料金や所要時間もまとめ 寝台列車「サンライズ瀬戸・出雲」をe5489で予約したいのですが、どうすればよいですか 専用の予約画面 からでないと予約が取れないみたい。予約システムの入り口からして難しい。すでに次の出張はスマート EX で予約済みなので、この次は2月かな。
三ノ宮(00:11発) =&amp;gt; 東京 (07:08着)
特急サンライズ瀬戸 (シングル) 料金券部分 10,660円 乗車券部分 9,460円 ビジネスだとラップトップを盗まられたら困るのでスタンダードな鍵がかかる1人個室を選択する。料金券と乗車券があって合計すると20,120円になる。予約は1ヶ月前から。新幹線 + カプセルホテルに泊まるぐらいの価格帯。高くはない。スマート EX の「EX早特21ワイド」だと12,630円になる。料金券を出張費用としてお手伝い先に請求して、乗車券はうちの会社持ちといった按分でよいかもしれない。
餃子の王将 御影店 阪神御影駅の近くにある餃子の王将がおいしいと有名らしい。食べログで 3.54 という驚異的な評価になっている。王将ですよ。
食べログ: 餃子の王将 御影店 口コミでフランチャイズ最高とか全国一とかよい評価になっている。電車ですぐ行けるので今度行ってみようと思う。
あわじ島バーガーと淡路島バーガー 島内の道の駅で売っていた観光向けの あわじしまバーガー が有名になって、フランチャイズ展開をしているのだと私は思っていた。どうやら運営や成り立ちはまったく違うようだ。全国にフランチャイズ展開している漢字の「淡路島バーガー」はもともと西宮でバーガーショプをやっていた会社が手掛けて大きくなっているものらしい。神戸市に本社がある株式会社なゆたさんが運営しているらしい。
島内にある あわじ島バーガー (サイト内表記は漢字の淡路島バーガーだけど、ここにあるのが本来のあわじ島バーガー) はまた別の運営になっているようにみえる。もともと道の駅で売っていたものが流行って、淡路島産の食材を使っていれば丸ごとそう読んでしまえ的な緩いルールで運営しているようにみえる。加入条件は次になる。こっちがオリジナルの「あわじ島バーガー」になる。
淡路島の食材（畜産・農産・海産）を使用した「ご当地バーガーの提供」をしていること 淡路島バーガーを通じて淡路島を盛り上げていく熱い志があること 淡路島に店舗を構える飲食店であること 1年以上の販売継続と常時提供できる体制であること バーガーは作り置きせず提供していること 柏原の読み方 もう酔っ払いが雑談して遊んでただけなんだが、柏原の読み方が件によって違うらしい。
【ややこしい】兵庫・大阪・京都・滋賀で異なる読み方をする地名「柏原」 兵庫県の丹波市にある柏原は「かいばら」と読む。大阪は「かしわら」、京都は「かせばら」、滋賀は「かしわばら」になる。へーって感じ。
瑞祥 黒松剣菱 先日、飲まなかった瑞祥 黒松剣菱 を飲んでみた。珍しい黄色い日本酒が特徴。サイトの紹介には剣菱のお酒の特徴であるらしい。</description><content>&lt;p>0時前から出掛けて行って寝ないで深夜コワーキングに参加した。スーパーでよく買う「山元さん家のええたまご」でゆで卵を作って持っていったら好評だった。また今度どこかでもやってみよう。&lt;/p>
&lt;h2 id="深夜コワーキングの所感">深夜コワーキングの所感&lt;/h2>
&lt;p>先日の &lt;a href="/diary/diary/posts/2023/1025/#コワーキングのオンラインイベント">オンラインイベント&lt;/a> で話題に出たアイディアで一度やってみようと &lt;a href="https://www.facebook.com/events/174110609105738?ref=newsfeed">深夜コワーキング Vol.0&lt;/a> が企画されたので参加した。参加者は5人だった。私は0時過ぎにカフーツさんへ行って3時ぐらいまで雑談しながら作業して、それからはお酒を飲んで遊んでいた。ながいさんが3時頃にたこやきを uber eats でを注文して、こんな時間に配達してくれる人がいるんやというのも発見だった。5時過ぎが眠気のピークでいっとき寝てしまいそうだったが、なんとか起きたまま6時まで完走できた。別に寝たらいけないというわけではないが。&lt;/p>
&lt;p>総評として、深夜コワーキングで作業に集中するというよりは、作業しながら他のコワーカーの人たちと雑談して、普段とは異なる刺激を受けたり、考えることがないことを考えてみたり、知らないことに気付いたり。そういった体験のすべてがコワーキングの価値であったり、コラボレーションの積み重ねだったりするように思う。そのコワーキングにおける価値の、さらに非日常を演出するという意図では効果があったように思えるし、おもしろい取り組みでもあると思う。また率直に楽しかった。&lt;/p>
&lt;p>一方で6時半に帰ってきて、そのまま寝て10時半に神戸マラソンのアナウンスで起きて、2度寝して13時頃に起きて、起きようかと思っているうちに3度寝して結局15時ぐらいまで寝てた。よく眠れたのだけど、普段の生活とは違うことをすると、疲れてしまって可処分時間は余分に消費したようにも思える。毎月やるというよりも、たまにやるぐらいの頻度で非日常の中での価値創造の役割程度に考えるのがよいのではないかと思えた。私の日常はとくに朝型の生活をしているから夜通し起きているのは心身に疲労が大きい気がした。&lt;/p>
&lt;p>ながいさんはショートスリーパーで平時も4時ぐらいまで作業していて3時間ぐらいしか寝ないらしい。他のコワーカーも4時まで作業する人、4時から起きて作業する人など、それぞれの人の働き方のスタイルがあるようだ。昔から私は一律9時出社のようなことが嫌いで、その人の働きたい時間に出社して自由に働けばよいと考えていた。労働基準法があるので一概に自由化は難しいと思うが、将来うちの会社でも社員を雇うことになってもコアタイムの概念は柔軟に設計しようと考えている。&lt;/p>
&lt;h2 id="サンライズ瀬戸出雲">サンライズ瀬戸・出雲&lt;/h2>
&lt;p>神戸から東京へ行くのに &lt;a href="https://www.jr-odekake.net/train/sunriseseto_izumo/">サンライズ瀬戸・出雲&lt;/a> という夜行列車という移動手段があることを教えてもらった。のぼりだけ三ノ宮に停車する。いま始発で当日に東京へ行っているが、前日はあまり眠れなくて眠れたとしても4時から起きて準備して出張すると、当日の16時ぐらいから眠くなってしまって集中力が落ちるという課題がある。もしかしたら夜行列車ならよく眠れてその問題を解決できるかもしれない。一度試してみようと思う。夜行バスとの違いとして、夜行列車はベッドで横になれるのでより快適だという。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kokyo-kotsu.jp/sunrise-kobe-tokyo/">【夜行列車】神戸から東京への行き方を紹介！料金や所要時間もまとめ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://faq.jr-odekake.net/faq_detail.html?id=10291">寝台列車「サンライズ瀬戸・出雲」をe5489で予約したいのですが、どうすればよいですか&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://www.jr-odekake.net/goyoyaku/campaign/sunriseseto_izumo/form.html">専用の予約画面&lt;/a> からでないと予約が取れないみたい。予約システムの入り口からして難しい。すでに次の出張はスマート EX で予約済みなので、この次は2月かな。&lt;/p>
&lt;p>三ノ宮(00:11発) =&amp;gt; 東京 (07:08着)&lt;/p>
&lt;ul>
&lt;li>特急サンライズ瀬戸 (シングル)
&lt;ul>
&lt;li>料金券部分 10,660円&lt;/li>
&lt;li>乗車券部分 9,460円&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ビジネスだとラップトップを盗まられたら困るのでスタンダードな鍵がかかる1人個室を選択する。料金券と乗車券があって合計すると20,120円になる。予約は1ヶ月前から。新幹線 + カプセルホテルに泊まるぐらいの価格帯。高くはない。スマート EX の「EX早特21ワイド」だと12,630円になる。料金券を出張費用としてお手伝い先に請求して、乗車券はうちの会社持ちといった按分でよいかもしれない。&lt;/p>
&lt;h3 id="餃子の王将-御影店">餃子の王将 御影店&lt;/h3>
&lt;p>阪神御影駅の近くにある餃子の王将がおいしいと有名らしい。食べログで 3.54 という驚異的な評価になっている。王将ですよ。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tabelog.com/hyogo/A2801/A280106/28009407/">食べログ: 餃子の王将 御影店&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>口コミでフランチャイズ最高とか全国一とかよい評価になっている。電車ですぐ行けるので今度行ってみようと思う。&lt;/p>
&lt;h3 id="あわじ島バーガーと淡路島バーガー">あわじ島バーガーと淡路島バーガー&lt;/h3>
&lt;p>島内の道の駅で売っていた観光向けの &lt;a href="https://ja.m.wikipedia.org/wiki/%E6%B7%A1%E8%B7%AF%E5%B3%B6%E3%83%90%E3%83%BC%E3%82%AC%E3%83%BC">あわじしまバーガー&lt;/a> が有名になって、フランチャイズ展開をしているのだと私は思っていた。どうやら運営や成り立ちはまったく違うようだ。全国にフランチャイズ展開している漢字の「淡路島バーガー」はもともと西宮でバーガーショプをやっていた会社が手掛けて大きくなっているものらしい。神戸市に本社がある株式会社なゆたさんが運営しているらしい。&lt;/p>
&lt;p>島内にある &lt;a href="https://awajishima-burger.com/index.html">あわじ島バーガー&lt;/a> (サイト内表記は漢字の淡路島バーガーだけど、ここにあるのが本来のあわじ島バーガー) はまた別の運営になっているようにみえる。もともと道の駅で売っていたものが流行って、淡路島産の食材を使っていれば丸ごとそう読んでしまえ的な緩いルールで運営しているようにみえる。加入条件は次になる。こっちがオリジナルの「あわじ島バーガー」になる。&lt;/p>
&lt;blockquote>
&lt;ol>
&lt;li>淡路島の食材（畜産・農産・海産）を使用した「ご当地バーガーの提供」をしていること&lt;/li>
&lt;li>淡路島バーガーを通じて淡路島を盛り上げていく熱い志があること&lt;/li>
&lt;li>淡路島に店舗を構える飲食店であること&lt;/li>
&lt;li>1年以上の販売継続と常時提供できる体制であること&lt;/li>
&lt;li>バーガーは作り置きせず提供していること&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;h3 id="柏原の読み方">柏原の読み方&lt;/h3>
&lt;p>もう酔っ払いが雑談して遊んでただけなんだが、柏原の読み方が件によって違うらしい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://anna-media.jp/archives/622171">【ややこしい】兵庫・大阪・京都・滋賀で異なる読み方をする地名「柏原」&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>兵庫県の丹波市にある柏原は「かいばら」と読む。大阪は「かしわら」、京都は「かせばら」、滋賀は「かしわばら」になる。へーって感じ。&lt;/p>
&lt;h3 id="瑞祥-黒松剣菱">瑞祥 黒松剣菱&lt;/h3>
&lt;p>&lt;a href="/diary/diary/posts/2023/1104/#カフーツさん訪問">先日、飲まなかった瑞祥 黒松剣菱&lt;/a> を飲んでみた。珍しい黄色い日本酒が特徴。サイトの紹介には剣菱のお酒の特徴であるらしい。&lt;/p>
&lt;blockquote>
&lt;p>また、剣菱の酒は一般的な日本酒のように無色透明ではありません。それは、ろ過をし過ぎて色と一緒に旨みまで抜けてしまわないよう調整しているため。剣菱の色の濃さは、いわば味の濃さの証といえます。&lt;/p>
&lt;/blockquote>
&lt;p>さらに瑞祥の説明には古酒であることが書いてある。&lt;/p>
&lt;blockquote>
&lt;p>5年以上かけてじっくりと長期熟成させた古酒のみを厳選してブレンド。&lt;/p>
&lt;/blockquote>
&lt;p>これまであまり古酒を飲んだことがなかったせいか、私が飲み慣れた日本酒とは違和感を感じるが、不思議と後味はすっきりしていて、上品な風味であることはわかる。他の日本酒と違うことはすぐにわかるが、それが何なのかを表現できない、ややもやもやした気持ちが第一印象だった。好みは分かれるかもしれない。&lt;/p>
&lt;p>剣菱さんは特徴のある日本酒の1つとして印象に残った。&lt;/p>
&lt;h3 id="エチゴビールの背景">エチゴビールの背景&lt;/h3>
&lt;p>法改正によってクラフトビールの製造が中小でもできるようになって &lt;a href="https://echigobeer.com/about.php">全国第一号クラフトビール (地ビール)&lt;/a> を作ったのがエチゴビールさんらしい。知らんかった。たまたまもらったエチゴビールの「華やぎホップのうきうきエール」という IPA のクラフトビールがおいしかった。また今度買ってみよう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.jbja.jp/archives/48466">【飲んでみた】エチゴビール「華やぎホップのうきうきエール」10月20日(金)に新発売！&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>ジョブチェンジのアドバイス</title><link>/diary/posts/2023/1118/</link><pubDate>Sat, 18 Nov 2023 12:38:00 +0900</pubDate><guid>/diary/posts/2023/1118/</guid><description>能をみて帰ってきた後に晩ご飯を食べたらオフィスへ戻ってもよかったんだけど、なんかだらだらしているうちに22時になって、もういっかという感じでさぼってた。それから寝て1時に起きて4時に起きて7時過ぎに起きた。
ストレッチ 今週はのんびりしていた気がする。お昼もずっと自炊していて健康によいような感じがあった。実際ストレッチを受けていて、いつもよりも負荷も疲労もないように感じた。強いて言えば、左ふくらはぎと二の腕の辺りがやや張りがあったぐらい。あとコロナワクチンを接種して2週間以上経って、いまの自分は無敵だと思うストレスの無さもあってか、体調がよい。今日の開脚幅は開始前155cmで、ストレッチ後157cmだった。お尻の筋肉を鍛えるエクササイズを教えてもらった。
もくもく会 神戸でもくもく会 に参加した。ON PAPER というコワーキングスペースで開催された。うちの会社から徒歩2分ぐらいの場所にある。窓際は西日でやや光が気になったが、10階で外を眺めながら作業できるのはそれなりに快適で、広くて設備が新しくて雰囲気のよい施設だった。またイベントがあれば参加してみたいと思う。主催者がこのコワーキングスペースのメンバーまたは関係者なのかな？よく分かっていないけど、とくに参加料は受け取らずにコミュニティイベントを開催されていた。もくもく会のイベントを今後も続けるかどうかはまだ分からないとのこと。
主催者の関係者で異業種からジョブチェンジを考えている方が2人いていくつかやり取りした。1人は26歳でまだ若いので実績がなくても第2新卒枠でいけばいいのではないかと思う。もう1人は30歳でちょっと第2新卒は厳しそうだが、プログラミングスクールに通ってちゃんと勉強していて、自分で cms っぽい web アプリケーションを rails で開発されていた。デモもみせてもらったが、web アプリケーションでよく実装する機能を一通りは実装されていて、パッとみた感じはよさそうにみえた。
RUNTEQ というプログラミングスクールで勉強しているとのこと。話を聞く分には浮ついたスクールではなく、自分で調べて考えて作れというスパルタ的な方でキーワード以外あまり教えてくれないといったことを話していた。それはそれで自分で調べて理解して実装しないといけない。あと chatgpt に聞きながらも実装していると話していて、いまどきの未経験者は chatgpt に頼るのもよいと思う。最初は誰もがコピペで振る舞いを検証しながらそのコードが正しいかどうかを自分で理解して書けるようになればよい。未経験から半年ちょっと学んで、rails でここまで動くものが作れるなら十分に自分で学んで作る能力はあると思う。ポテンシャル採用でよい会社に入れればうまくステップアップできるのではないかと思う。
IT 業界へジョブチェンジしたい人たちも増えたように思う。未経験の方々が最初に経験を積むよいお仕事はないだろうか。前にもこの話題を誰かにしたか、どこかで書いた気がする。お金をもらう以上、発注者がいて、責任をもって成果物の納品を期待している人がいる限り、いくら価格調整をしても未経験者にシステム開発してほしくないだろうし、してもよいけど責任者が品質を担保してほしいと思うのは自然だと思う。普通の会社なら先輩がついて経験の浅い開発者の面倒をしっかりみている (はず) 。私もいま若い開発者を少なくない割合の時間を割いて指導している。経験の浅い開発者を同時に面倒をみることは物理的にできない。せいぜい2-3人といったころだろうか。教えるというドメインは労働集約になるのでスケールしない。実務のシステム開発を教えるビジネスというのはちょっと成り立たないとは思う。</description><content>&lt;p>能をみて帰ってきた後に晩ご飯を食べたらオフィスへ戻ってもよかったんだけど、なんかだらだらしているうちに22時になって、もういっかという感じでさぼってた。それから寝て1時に起きて4時に起きて7時過ぎに起きた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>今週はのんびりしていた気がする。お昼もずっと自炊していて健康によいような感じがあった。実際ストレッチを受けていて、いつもよりも負荷も疲労もないように感じた。強いて言えば、左ふくらはぎと二の腕の辺りがやや張りがあったぐらい。あとコロナワクチンを接種して2週間以上経って、いまの自分は無敵だと思うストレスの無さもあってか、体調がよい。今日の開脚幅は開始前155cmで、ストレッチ後157cmだった。お尻の筋肉を鍛えるエクササイズを教えてもらった。&lt;/p>
&lt;h2 id="もくもく会">もくもく会&lt;/h2>
&lt;p>&lt;a href="https://study-kobe.connpass.com/event/299620/">神戸でもくもく会&lt;/a> に参加した。&lt;a href="https://onpaper.jp/">ON PAPER&lt;/a> というコワーキングスペースで開催された。うちの会社から徒歩2分ぐらいの場所にある。窓際は西日でやや光が気になったが、10階で外を眺めながら作業できるのはそれなりに快適で、広くて設備が新しくて雰囲気のよい施設だった。またイベントがあれば参加してみたいと思う。主催者がこのコワーキングスペースのメンバーまたは関係者なのかな？よく分かっていないけど、とくに参加料は受け取らずにコミュニティイベントを開催されていた。もくもく会のイベントを今後も続けるかどうかはまだ分からないとのこと。&lt;/p>
&lt;p>主催者の関係者で異業種からジョブチェンジを考えている方が2人いていくつかやり取りした。1人は26歳でまだ若いので実績がなくても第2新卒枠でいけばいいのではないかと思う。もう1人は30歳でちょっと第2新卒は厳しそうだが、プログラミングスクールに通ってちゃんと勉強していて、自分で cms っぽい web アプリケーションを rails で開発されていた。デモもみせてもらったが、web アプリケーションでよく実装する機能を一通りは実装されていて、パッとみた感じはよさそうにみえた。&lt;/p>
&lt;p>&lt;a href="https://runteq.jp/curriculum">RUNTEQ&lt;/a> というプログラミングスクールで勉強しているとのこと。話を聞く分には浮ついたスクールではなく、自分で調べて考えて作れというスパルタ的な方でキーワード以外あまり教えてくれないといったことを話していた。それはそれで自分で調べて理解して実装しないといけない。あと chatgpt に聞きながらも実装していると話していて、いまどきの未経験者は chatgpt に頼るのもよいと思う。最初は誰もがコピペで振る舞いを検証しながらそのコードが正しいかどうかを自分で理解して書けるようになればよい。未経験から半年ちょっと学んで、rails でここまで動くものが作れるなら十分に自分で学んで作る能力はあると思う。ポテンシャル採用でよい会社に入れればうまくステップアップできるのではないかと思う。&lt;/p>
&lt;p>IT 業界へジョブチェンジしたい人たちも増えたように思う。未経験の方々が最初に経験を積むよいお仕事はないだろうか。前にもこの話題を誰かにしたか、どこかで書いた気がする。お金をもらう以上、発注者がいて、責任をもって成果物の納品を期待している人がいる限り、いくら価格調整をしても未経験者にシステム開発してほしくないだろうし、してもよいけど責任者が品質を担保してほしいと思うのは自然だと思う。普通の会社なら先輩がついて経験の浅い開発者の面倒をしっかりみている (はず) 。私もいま若い開発者を少なくない割合の時間を割いて指導している。経験の浅い開発者を同時に面倒をみることは物理的にできない。せいぜい2-3人といったころだろうか。教えるというドメインは労働集約になるのでスケールしない。実務のシステム開発を教えるビジネスというのはちょっと成り立たないとは思う。&lt;/p></content></item><item><title>フロントエンドのビルドツールと vite</title><link>/diary/posts/2023/1117/</link><pubDate>Fri, 17 Nov 2023 11:13:20 +0900</pubDate><guid>/diary/posts/2023/1117/</guid><description>22時に寝て0時に起きて2時間ほどネットで遊んで寝て5時に起きて7時に起きた。16時半にお仕事を終えて、雨降りの中、芦屋まで出掛けて能をみてきた。
svelte/kit と vite 水曜日から vite の機能や振る舞いについて調べている。厳密には svelte/kit (svelte と svelte kit の両方を指している) はどうやって .svelte ファイルや他のソースコードをコンパイルしているのかを調べ始めた。kit のコードを調べても svelte のコンパイルをしているようにはみえない。vite.config.ts には次のように kit が提供しているプラグインを使っているようにみえる。
import { sveltekit } from &amp;#39;@sveltejs/kit/vite&amp;#39;; ... export default defineConfig({ plugins: [sveltekit()] }); このコードを追っていくと、次のように vite-plugin-svelte からプラグインを設定するコードがある。
import { svelte } from &amp;#39;@sveltejs/vite-plugin-svelte&amp;#39;; ... export async function sveltekit() { ... return [...svelte(vite_plugin_svelte_options), ...kit({ svelte_config })]; } vite-plugin-svelte のコードを調べていくと、load や transform といったフックポイント に svelte のコンパイラを呼び出すコードがみえてくるようになる。
compileData = await compileSvelte(svelteRequest, code, options); svelte のコンパイルは vite の仕組みを使って vite-plugin-svelte に実装されている。それなら vite はどうやってフレームワークのコンパイルを実現しているのだろうか？という疑問に行き着く。その背景を調べたり、ドキュメントを読んだり、実際にサンプルコードを動かしながら検証したりをこの3日間やっていた。自分なりの仮説はできたけれど、本当にその仮説のような振る舞いをしているかの実証がまだできていない。週末に余裕があれば、それをやっていきたい。</description><content>&lt;p>22時に寝て0時に起きて2時間ほどネットで遊んで寝て5時に起きて7時に起きた。16時半にお仕事を終えて、雨降りの中、芦屋まで出掛けて能をみてきた。&lt;/p>
&lt;h2 id="sveltekit-と-vite">svelte/kit と vite&lt;/h2>
&lt;p>水曜日から &lt;a href="https://vitejs.dev/">vite&lt;/a> の機能や振る舞いについて調べている。厳密には svelte/kit (svelte と svelte kit の両方を指している) はどうやって &lt;code>.svelte&lt;/code> ファイルや他のソースコードをコンパイルしているのかを調べ始めた。kit のコードを調べても svelte のコンパイルをしているようにはみえない。vite.config.ts には次のように kit が提供しているプラグインを使っているようにみえる。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-typescript" data-lang="typescript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> { &lt;span style="color:#a6e22e">sveltekit&lt;/span> } &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#e6db74">&amp;#39;@sveltejs/kit/vite&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">default&lt;/span> &lt;span style="color:#a6e22e">defineConfig&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">plugins&lt;/span>&lt;span style="color:#f92672">:&lt;/span> [&lt;span style="color:#a6e22e">sveltekit&lt;/span>()]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>このコードを追っていくと、次のように &lt;a href="https://github.com/sveltejs/vite-plugin-svelte">vite-plugin-svelte&lt;/a> からプラグインを設定するコードがある。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-typescript" data-lang="typescript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> { &lt;span style="color:#a6e22e">svelte&lt;/span> } &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#e6db74">&amp;#39;@sveltejs/vite-plugin-svelte&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">async&lt;/span> &lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">sveltekit() {&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> [...&lt;span style="color:#a6e22e">svelte&lt;/span>(&lt;span style="color:#a6e22e">vite_plugin_svelte_options&lt;/span>), ...&lt;span style="color:#a6e22e">kit&lt;/span>({ &lt;span style="color:#a6e22e">svelte_config&lt;/span> })];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>vite-plugin-svelte のコードを調べていくと、&lt;a href="https://vitejs.dev/guide/api-plugin.html#universal-hooks">load や transform といったフックポイント&lt;/a> に svelte のコンパイラを呼び出すコードがみえてくるようになる。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">compileData&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">await&lt;/span> &lt;span style="color:#a6e22e">compileSvelte&lt;/span>(&lt;span style="color:#a6e22e">svelteRequest&lt;/span>, &lt;span style="color:#a6e22e">code&lt;/span>, &lt;span style="color:#a6e22e">options&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>svelte のコンパイルは vite の仕組みを使って vite-plugin-svelte に実装されている。それなら vite はどうやってフレームワークのコンパイルを実現しているのだろうか？という疑問に行き着く。その背景を調べたり、ドキュメントを読んだり、実際にサンプルコードを動かしながら検証したりをこの3日間やっていた。自分なりの仮説はできたけれど、本当にその仮説のような振る舞いをしているかの実証がまだできていない。週末に余裕があれば、それをやっていきたい。&lt;/p>
&lt;h2 id="2階席からの能鑑賞">2階席からの能鑑賞&lt;/h2>
&lt;p>行きは三ノ宮から JR で8分、帰りは阪神電車で12分の芦屋駅から徒歩10分ほどで芦屋ルナホールへ着く。&lt;a href="https://yarai-nohgakudo.com/archives/11286">第二十二回芦屋能・狂言鑑賞の会&lt;/a> へ行ってきた。前月に &lt;a href="/diary/diary/posts/2023/1021/#能楽の勉強">蝉丸の予習&lt;/a> をして準備万端で臨んだ。芦屋ルナホールに着いたら17時過ぎで受付をしてエレベーターで4Fまで。ホールの2階席が物理的には4Fにあった。芦屋ルナホールの2階席は見晴らしがよくて、能を斜め上から俯瞰してみるという、これはこれで独特の視点をもってみれておもしろい。ホールは能舞台ではないので、普通の舞台に高座の床を敷いて周りに松をいけて、簡易の能舞台をこしらえていた。&lt;/p>
&lt;p>ちょうど一調の「花月」が終わったところで、2つめの演目の狂言「濯ぎ川」をみて、芦屋市長挨拶して、能の蝉丸という順番だった。芦屋市長と言えば &lt;a href="https://www3.nhk.or.jp/news/html/20230424/k10014047281000.html">歴代最年少26歳で市長になった&lt;/a> 方で挨拶を聞いていても生徒会長が挨拶をしているような雰囲気で若い。こういった若くて優秀な方が若い感性で活躍してほしいと思う。&lt;/p>
&lt;p>蝉丸が始まった。シテは逆髪で、ツレが蝉丸になるという。どちらも能面をしていた。ワキは能面をつけないことは知っていたが、ツレは能面をつけていいんだということを知った。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.the-noh.com/jp/trivia/042.html">Question42 ワキ方はなぜ能面をつけない？&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ストーリーを知っていると謡や詞章が聞き取れるかと期待したが、まだまだそんなことはなくて、紙に書いたものがないと付いていけない。「能のことばを読んでみる会」でもらった詞章をもっていけばよかった。あとイヤホンがあれば朝原さんのスマホ解説を聞けるのだが、それを聞きたいと思いつつ、いつもイヤホンを忘れてしまって聞けない。次回こそイヤホンを忘れないようにしたい。&lt;/p>
&lt;p>それでも所々、記憶に残っている内容と演者が話しているところは理解できて、普段よりも能の物語の展開を理解できたと思う。一方で地謡 (横に座っていて集団で謡う人たち) が能の所々で謡が始まるとき、シテやワキがずっと待っていて時が止まっているかのような感覚になる。いままでもそういう展開だったはずだけど、今回はストーリーが頭も中に入っているので、逆髪、蝉丸、清貫のやり取りが止まってしまって、続きが待ち遠しいように思えた。テレビをみていて CM が入るような感覚。&lt;/p>
&lt;p>囃子は笛・大鼓・小鼓の3人体制だった。これも物語の要所で盛り上がりを演出している。囃子の盛り上がりを聞いていると、ここが見せ場の場面なのだと自然に観客を引き込むことができる。最後の逆髪がじゃあまたねって、あっさり帰るところに蝉丸がもう帰っちゃうの？と嘆くところとか、囃子が盛り上げるのかと思ったらそうでもなかった。途中のどこかの場面が一番盛り上がりを演出していた。&lt;/p>
&lt;p>予習してこんな物語の展開になるのかな？と予想していたものと、実際の能をみているとイメージ通りではなかった。それは地謡の謡いの合間が私の頭の中には入っていなかったから。次に「能のことばを読んでみる会」へ行くと地謡のところがこんな雰囲気なのかとイメージできるようになる。いずれにしても、詞章と能の関係における解像度は少し上がったように思う。まだまだ能をみていて幻視をみるというのはほど遠い。こうやって少しずつ解像度を上げていければと思う。&lt;/p></content></item><item><title>ボラティリティとビジネスの展望</title><link>/diary/posts/2023/1116/</link><pubDate>Thu, 16 Nov 2023 10:13:13 +0900</pubDate><guid>/diary/posts/2023/1116/</guid><description>1時に寝て何度か起きて8時に起きた。朝起きれなくなってきた。
オプトランのボラティリティ オプトラン というオプトナノテクノロジーによる光学薄膜成膜のプロセスソリューション提供を生業にしているメーカーがある。光学薄膜装置という装置がデジカメやスマホを作る上で必要なものらしい。数年前 杉村 富生 さんがラジオの「ザ・マネー」でオプトランという会社がよいと解説していたのをきっかけに株を購入した気がする。いまチャートで調べると2017年の終わり頃だったと思う。
それ以来、ずっとホルダーというわけではないが、チャート をみながら、買ったり売ったりをしながらかなりの期間をホルダーとして会社の成長を期待している株主の1人でもある。チャートをみてもらえばわかるが、全体としてはいまは右肩下がりであまり評価されていないようにみえるが、売り買いの波がはっきりしている会社でもある。もしかしたら他の会社もそんなものかもしれないが、私はこの会社を上場直後からずっと観測してきているので、ボラティリティの波が推測できるようになってきたかもしれない。
11月13日に第3四半期の決算発表があった。内容は 決算説明会資料 をみてほしい。私の所感は決算自体は普通の内容で良くも悪くもない。しかし、株価は大きく下がるだろうと予測して、1731円のところに窓が空いていたのでそれを埋めるような1600円台まで下がると予想した。もともと下がった価格で買い増しするつもりだった。
実際の今週の時系列の株価が次になる。
日付 始値 高値 安値 終値 出来高 調整後終値 2023-11-13 1,826 1,840 1,791 1,797 347,100 1,797 2023-11-14 1,570 1,579 1,420 1,548 1,330,800 1,548 2023-11-15 1,575 1,636 1,544 1,631 555,100 1,631 2023-11-16 1,671 1,674 1,636 1,668 377,800 1,668 2023-11-17 1,658 1,668 1,631 1,647 272,400 1,647 翌日の株価は1,791円から1,570円寄り付き、ストップ安手前の1,420円まで下落した。5年以上観測している私にとってはたまに見慣れた現象で、オプトランの株価は仕手筋で操作されるようなことが起きる。よい決算でもトレンドで大きく売り込まれることがある。オプトランの経営陣もそれがわかっているのか、予算を保守的に見積もって終わってみれば超絶よい決算に終わることもある。そのせいか、コンセンサスもとんでもないハードルをあげて、決算資料だけをみたらよい決算なのに、コンセンサスに届かずで悪い決算であるかのように売り込まれたりする。その波が明らかなボラティリティになっていて、もう数年それをみてきたので決算の数字にあまり関係なく、決算後の株価の推移の予測がしやすくなってきている。もちろん、たまに超絶によい決算が出て、非のうちどころのない状況に仕手筋を打ち負かすときもある。しかし、超絶によい決算が出るのは稀なので大抵は予定調和のような推移になる。
今回の1,420円というのは上場来最安値になる。決算説明会資料 を自分の目で見直してほしい。赤字でもなく、ビジネスも好調で、過去と比べて受注残が減っていることからたしかに昔ほどの勢いは失われつつあるのは否めないが、ストップ安に近い評価を受けるような決算ではない。それをみて、今回はいつもより多めに買い増しした。1,420円をつけた後に今週だけでもどれだけ買い戻されているか分かるだろう。
今後の推移について予測してみる。この四半期がトレンド転換する時期だと私は考えていて、1ヶ月ほど1,600-1,500円を行ったり来たりしながら、次の決算へ向けて少しずつ上げていくだろう。次は本決算になるが、おそらく少しよい決算が出てそれが大きな上昇トレンドに変わるのではないかと予測している。但し、もし普通の決算だと1,420円以下に売り込まれる可能性も2割ぐらいはある。いまこの株を買うとしても、目論見が外れてさらに株価が下がってもまだ買い足せるぐらいの余裕をもって買う方が良い。そして、2年後ぐらいには30%程度は収益を期待できるのではないかと予測している。
戦争やインフレなどによって世界経済の動向はまだまだ混迷している。中国の2大不動産大手が倒産したことがどんな影響を及ぼすのかも未だよくわかっていない。生きているだけでリスクはたくさんある。現時点ではオプトランの株は買いだと私は考えているが、また本決算が終わったときに予測が当たったか外れたかをふりかえる。そのときのためにこの記事を残しておく。</description><content>&lt;p>1時に寝て何度か起きて8時に起きた。朝起きれなくなってきた。&lt;/p>
&lt;h2 id="オプトランのボラティリティ">オプトランのボラティリティ&lt;/h2>
&lt;p>&lt;a href="https://www.optorun.co.jp/">オプトラン&lt;/a> というオプトナノテクノロジーによる光学薄膜成膜のプロセスソリューション提供を生業にしているメーカーがある。光学薄膜装置という装置がデジカメやスマホを作る上で必要なものらしい。数年前 &lt;a href="https://www.radionikkei.jp/personality/personality/tomiosugimura.html">杉村 富生&lt;/a> さんがラジオの「ザ・マネー」でオプトランという会社がよいと解説していたのをきっかけに株を購入した気がする。いまチャートで調べると2017年の終わり頃だったと思う。&lt;/p>
&lt;p>それ以来、ずっとホルダーというわけではないが、&lt;a href="https://finance.yahoo.co.jp/quote/6235.T/chart?styl=cndl&amp;amp;frm=mnthly&amp;amp;scl=stndrd&amp;amp;trm=10y&amp;amp;evnts=volume&amp;amp;ovrIndctr=sma%2Cmma%2Clma&amp;amp;addIndctr=">チャート&lt;/a> をみながら、買ったり売ったりをしながらかなりの期間をホルダーとして会社の成長を期待している株主の1人でもある。チャートをみてもらえばわかるが、全体としてはいまは右肩下がりであまり評価されていないようにみえるが、売り買いの波がはっきりしている会社でもある。もしかしたら他の会社もそんなものかもしれないが、私はこの会社を上場直後からずっと観測してきているので、ボラティリティの波が推測できるようになってきたかもしれない。&lt;/p>
&lt;p>11月13日に第3四半期の決算発表があった。内容は &lt;a href="https://www.optorun.co.jp/ir/library/library_12.html">決算説明会資料&lt;/a> をみてほしい。私の所感は決算自体は普通の内容で良くも悪くもない。しかし、株価は大きく下がるだろうと予測して、1731円のところに窓が空いていたのでそれを埋めるような1600円台まで下がると予想した。もともと下がった価格で買い増しするつもりだった。&lt;/p>
&lt;p>実際の今週の時系列の株価が次になる。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">日付&lt;/th>
&lt;th style="text-align:right">始値&lt;/th>
&lt;th style="text-align:right">高値&lt;/th>
&lt;th style="text-align:right">安値&lt;/th>
&lt;th style="text-align:right">終値&lt;/th>
&lt;th style="text-align:right">出来高&lt;/th>
&lt;th style="text-align:right">調整後終値&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">2023-11-13&lt;/td>
&lt;td style="text-align:right">1,826&lt;/td>
&lt;td style="text-align:right">1,840&lt;/td>
&lt;td style="text-align:right">1,791&lt;/td>
&lt;td style="text-align:right">1,797&lt;/td>
&lt;td style="text-align:right">347,100&lt;/td>
&lt;td style="text-align:right">1,797&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-14&lt;/td>
&lt;td style="text-align:right">1,570&lt;/td>
&lt;td style="text-align:right">1,579&lt;/td>
&lt;td style="text-align:right">1,420&lt;/td>
&lt;td style="text-align:right">1,548&lt;/td>
&lt;td style="text-align:right">1,330,800&lt;/td>
&lt;td style="text-align:right">1,548&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-15&lt;/td>
&lt;td style="text-align:right">1,575&lt;/td>
&lt;td style="text-align:right">1,636&lt;/td>
&lt;td style="text-align:right">1,544&lt;/td>
&lt;td style="text-align:right">1,631&lt;/td>
&lt;td style="text-align:right">555,100&lt;/td>
&lt;td style="text-align:right">1,631&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-16&lt;/td>
&lt;td style="text-align:right">1,671&lt;/td>
&lt;td style="text-align:right">1,674&lt;/td>
&lt;td style="text-align:right">1,636&lt;/td>
&lt;td style="text-align:right">1,668&lt;/td>
&lt;td style="text-align:right">377,800&lt;/td>
&lt;td style="text-align:right">1,668&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-17&lt;/td>
&lt;td style="text-align:right">1,658&lt;/td>
&lt;td style="text-align:right">1,668&lt;/td>
&lt;td style="text-align:right">1,631&lt;/td>
&lt;td style="text-align:right">1,647&lt;/td>
&lt;td style="text-align:right">272,400&lt;/td>
&lt;td style="text-align:right">1,647&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>翌日の株価は1,791円から1,570円寄り付き、ストップ安手前の1,420円まで下落した。5年以上観測している私にとってはたまに見慣れた現象で、オプトランの株価は仕手筋で操作されるようなことが起きる。よい決算でもトレンドで大きく売り込まれることがある。オプトランの経営陣もそれがわかっているのか、予算を保守的に見積もって終わってみれば超絶よい決算に終わることもある。そのせいか、コンセンサスもとんでもないハードルをあげて、決算資料だけをみたらよい決算なのに、コンセンサスに届かずで悪い決算であるかのように売り込まれたりする。その波が明らかなボラティリティになっていて、もう数年それをみてきたので決算の数字にあまり関係なく、決算後の株価の推移の予測がしやすくなってきている。もちろん、たまに超絶によい決算が出て、非のうちどころのない状況に仕手筋を打ち負かすときもある。しかし、超絶によい決算が出るのは稀なので大抵は予定調和のような推移になる。&lt;/p>
&lt;p>今回の1,420円というのは上場来最安値になる。&lt;a href="https://www.optorun.co.jp/ir/library/library_12.html">決算説明会資料&lt;/a> を自分の目で見直してほしい。赤字でもなく、ビジネスも好調で、過去と比べて受注残が減っていることからたしかに昔ほどの勢いは失われつつあるのは否めないが、ストップ安に近い評価を受けるような決算ではない。それをみて、今回はいつもより多めに買い増しした。1,420円をつけた後に今週だけでもどれだけ買い戻されているか分かるだろう。&lt;/p>
&lt;p>今後の推移について予測してみる。この四半期がトレンド転換する時期だと私は考えていて、1ヶ月ほど1,600-1,500円を行ったり来たりしながら、次の決算へ向けて少しずつ上げていくだろう。次は本決算になるが、おそらく少しよい決算が出てそれが大きな上昇トレンドに変わるのではないかと予測している。但し、もし普通の決算だと1,420円以下に売り込まれる可能性も2割ぐらいはある。いまこの株を買うとしても、目論見が外れてさらに株価が下がってもまだ買い足せるぐらいの余裕をもって買う方が良い。そして、2年後ぐらいには30%程度は収益を期待できるのではないかと予測している。&lt;/p>
&lt;p>戦争やインフレなどによって世界経済の動向はまだまだ混迷している。中国の2大不動産大手が倒産したことがどんな影響を及ぼすのかも未だよくわかっていない。生きているだけでリスクはたくさんある。現時点ではオプトランの株は買いだと私は考えているが、また本決算が終わったときに予測が当たったか外れたかをふりかえる。そのときのためにこの記事を残しておく。&lt;/p></content></item><item><title>銀行のサービス</title><link>/diary/posts/2023/1115/</link><pubDate>Wed, 15 Nov 2023 08:57:44 +0900</pubDate><guid>/diary/posts/2023/1115/</guid><description>22時に寝落ちして0時頃に起きて1-2時間ネットをみながらだらだらしているうちに眠れなくなって5時に寝て8時に起きた。生活のリズムがおかしい。
paypay 銀行の設定機能 先日 paypay 証券でつみたて をやってみようと書いた。その入金のための銀行口座を登録しておこうと思って調べてみた。
振込先口座の登録（4月27日～）
振込先口座の登録はご利用いただけません。
【振り込み・カードローン】一部機能の変更・一時停止について
なんと！振込先口座の登録機能が一時停止されていることに気付いた。「フィッシング等被害防止の観点から」ということらしい。振込先口座の登録を停止することがフィッシング被害の防止にどう役立つのかはよく分からないが、なにかしらその機能が利用されて犯罪が行われているのだと推測する。こんな一般的な機能が一時停止になるんやなと驚いた。
その際に、昔調べたときになくてがっかりした機能が追加されていることにも気付いた。
自動振込サービス 自動送金でも自動引き落としでもない、自動振り込みサービス。おそらくイメージとして cron のようなもので毎月の振り込み処理を登録するだけなんだろうと推測する。そのせいか、サービス利用料も無料と気前がよい。これまで家賃を毎月1ヶ月前に振り込み予約するというのを手作業でやっていたのを移行した。ついでに paypay 証券への入金もこのサービスで毎月振込することにした。つみたてなのでそれで構わない。
同種のサービスを調べてみると、ufj 銀行でも 定額自動送金サービス というのがあり、これは取扱手数料という形で100円ほど徴収している。しかし、他行あての振込手数料がやたら高いので、なにか作為的なものを感じて印象がよくないが、数百円の手数料を取っているというのは同じ。家賃の自動引き落としの手数料はいくら？ufjやみずほを比較 によると、「自動引き落とし」と「定額自動送金」は似て非なるものにみえる。自動引き落としもやはり数百円の手数料が必要になる。paypay 銀行が提供している自動振込サービスは無料なので良心的だと思う。顧客の「そうそう。こういうのでいいんだよ」をサービス化した感じ。ネットバンクは既存の銀行との差別化に、システム上の簡単なことを無料で提供して、古い銀行システムから顧客を奪えばいいと思う。
コワーキングのオンラインイベント 月例のカフーツさんのオンラインイベントに参加した。前回の所感はここ 。マイスタ加古川 というコワーキングスペースを運営しているなかたさんという方がいる。そのなかたさんがレンタルキッチンのようなサービスをコワーキングスペースで提供するにあたって、行政の許可をとるときの背景やコワーカーからの採用についてお話しをされた。
レンタルキッチンをするときは飲食店の許可をとる必要があるらしい。保健所的にはレンタルキッチンという業態を許可する制度が現時点ではなく、飲食店において実業務を委託された誰かがやっているとみなすことで飲食店として許可を出すという理屈になるみたい。食品衛生責任者は1つの店舗において1人という制度設計なので、レンタルキッチンのような不特定多数の調理人がいるような業態を想定していない。この場合はなかたさんが責任者としてそのリスクを引き受けて、コワーカーがレンタルキッチンでお菓子や軽食を作って販売するといった体制になるらしい。
また飲食店向けの共済保険がめっちゃ安いことに気付いた。
あんしんフード君・スーパーあんしんフード君 普通に運営していたら食中毒なんか起こらんでしょ？という話しなんだと思うけれど、年間売上3,000万円以下で1口8,500円/年の保険料で、食中毒があっても最大1億円まで保証してくれる。委託する業者ごとにこの保険に加入してもらうといった仕組みにしてもよいのかもしれない。飲食店向けの保険は想像以上に安いものみたい。日本人の衛生意識が高いせいかもしれない。</description><content>&lt;p>22時に寝落ちして0時頃に起きて1-2時間ネットをみながらだらだらしているうちに眠れなくなって5時に寝て8時に起きた。生活のリズムがおかしい。&lt;/p>
&lt;h2 id="paypay-銀行の設定機能">paypay 銀行の設定機能&lt;/h2>
&lt;p>先日 &lt;a href="/diary/diary/posts/2023/1110/#paypay-証券のつみたて">paypay 証券でつみたて&lt;/a> をやってみようと書いた。その入金のための銀行口座を登録しておこうと思って調べてみた。&lt;/p>
&lt;blockquote>
&lt;p>振込先口座の登録（4月27日～）&lt;/p>
&lt;p>振込先口座の登録はご利用いただけません。&lt;/p>
&lt;p>&lt;a href="https://help.paypay-bank.co.jp/hc/ja/articles/900001941843--%E6%8C%AF%E3%82%8A%E8%BE%BC%E3%81%BF-%E3%82%AB%E3%83%BC%E3%83%89%E3%83%AD%E3%83%BC%E3%83%B3-%E4%B8%80%E9%83%A8%E6%A9%9F%E8%83%BD%E3%81%AE%E5%A4%89%E6%9B%B4-%E4%B8%80%E6%99%82%E5%81%9C%E6%AD%A2%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6-9%E6%9C%8819%E6%97%A5%E6%9B%B4%E6%96%B0-">【振り込み・カードローン】一部機能の変更・一時停止について&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>なんと！振込先口座の登録機能が一時停止されていることに気付いた。「フィッシング等被害防止の観点から」ということらしい。振込先口座の登録を停止することがフィッシング被害の防止にどう役立つのかはよく分からないが、なにかしらその機能が利用されて犯罪が行われているのだと推測する。こんな一般的な機能が一時停止になるんやなと驚いた。&lt;/p>
&lt;p>その際に、昔調べたときになくてがっかりした機能が追加されていることにも気付いた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.paypay-bank.co.jp/payment/auto-transfer.html">自動振込サービス&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>自動送金でも自動引き落としでもない、自動振り込みサービス。おそらくイメージとして cron のようなもので毎月の振り込み処理を登録するだけなんだろうと推測する。そのせいか、サービス利用料も無料と気前がよい。これまで家賃を毎月1ヶ月前に振り込み予約するというのを手作業でやっていたのを移行した。ついでに paypay 証券への入金もこのサービスで毎月振込することにした。つみたてなのでそれで構わない。&lt;/p>
&lt;p>同種のサービスを調べてみると、ufj 銀行でも &lt;a href="https://www.bk.mufg.jp/tsukau/furikomi/teigakujidosoukin/index.html">定額自動送金サービス&lt;/a> というのがあり、これは取扱手数料という形で100円ほど徴収している。しかし、他行あての振込手数料がやたら高いので、なにか作為的なものを感じて印象がよくないが、数百円の手数料を取っているというのは同じ。&lt;a href="https://a-i-u.jp/aiu0000712-post/">家賃の自動引き落としの手数料はいくら？ufjやみずほを比較&lt;/a> によると、「自動引き落とし」と「定額自動送金」は似て非なるものにみえる。自動引き落としもやはり数百円の手数料が必要になる。paypay 銀行が提供している自動振込サービスは無料なので良心的だと思う。顧客の「そうそう。こういうのでいいんだよ」をサービス化した感じ。ネットバンクは既存の銀行との差別化に、システム上の簡単なことを無料で提供して、古い銀行システムから顧客を奪えばいいと思う。&lt;/p>
&lt;h2 id="コワーキングのオンラインイベント">コワーキングのオンラインイベント&lt;/h2>
&lt;p>月例のカフーツさんのオンラインイベントに参加した。&lt;a href="/diary/diary/posts/2023/1025/#コワーキングのオンラインイベント">前回の所感はここ&lt;/a> 。&lt;a href="https://my-st.fun/">マイスタ加古川&lt;/a> というコワーキングスペースを運営しているなかたさんという方がいる。そのなかたさんがレンタルキッチンのようなサービスをコワーキングスペースで提供するにあたって、行政の許可をとるときの背景やコワーカーからの採用についてお話しをされた。&lt;/p>
&lt;p>レンタルキッチンをするときは飲食店の許可をとる必要があるらしい。保健所的にはレンタルキッチンという業態を許可する制度が現時点ではなく、飲食店において実業務を委託された誰かがやっているとみなすことで飲食店として許可を出すという理屈になるみたい。食品衛生責任者は1つの店舗において1人という制度設計なので、レンタルキッチンのような不特定多数の調理人がいるような業態を想定していない。この場合はなかたさんが責任者としてそのリスクを引き受けて、コワーカーがレンタルキッチンでお菓子や軽食を作って販売するといった体制になるらしい。&lt;/p>
&lt;p>また飲食店向けの共済保険がめっちゃ安いことに気付いた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.n-shokuei.jp/kyousai/anshin_food.html">あんしんフード君・スーパーあんしんフード君&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>普通に運営していたら食中毒なんか起こらんでしょ？という話しなんだと思うけれど、年間売上3,000万円以下で1口8,500円/年の保険料で、食中毒があっても最大1億円まで保証してくれる。委託する業者ごとにこの保険に加入してもらうといった仕組みにしてもよいのかもしれない。飲食店向けの保険は想像以上に安いものみたい。日本人の衛生意識が高いせいかもしれない。&lt;/p></content></item><item><title>エッセイと世界観</title><link>/diary/posts/2023/1114/</link><pubDate>Tue, 14 Nov 2023 08:29:13 +0900</pubDate><guid>/diary/posts/2023/1114/</guid><description>0時に寝て2時半に起きて4時に起きて7時に起きた。昨日は本を読みながらいろいろ考えていた。
頁をめくる音で息をする 先日の オンラインイベント でいとうさんに教えてもらった 頁をめくる音で息をする を読んでいる。ジャンルで言えばエッセイになる。著者の日常や日々の所感などを綴っている。Paul Graham 以外であまり読んだ記憶がないぐらい、私にとってエッセイという読みものは珍しい組み合わせになる。私がいま日々書いている日記も、ちょっと技巧を凝らしたり、お洒落な文章に変えてみたらエッセイにならないだろうか？と考えてみる。
この日記は「書くこと」を目的としているものの、ここで書き溜めたものは将来の自分を助けるコンテンツになることを確信している。それは過去の私が書いたコンテンツがいまの私を助けているし、書き溜めたコンテンツを評価してくれるサイト、例えば LAPRAS スコア をみると、高い評価値になっていたりする。いまのところ、このスコアを何かに使っているわけではないが、15年以上も書いてきたコンテンツはそう簡単に真似できるものではないし、一朝一夕で身につくスキルでもない。
過去にある会社のトライアルを受けたとき、ある技術の調査結果を wiki にまとめたところ「長文がちゃんと書ける」という評価をその会社の CTO から受けたことがあった。私はきょとんとして「そんなの開発者なら誰でも書けるでしょ？」と感想を述べたところ「いや、そうでもない。」と返ってきて、それから私もちゃんと考えてみたところ、言語能力を高めやすいプログラマーであってもちゃんとした文章を書けるのは全体の半分ぐらいしかいないことに気付いた。文章を書く練習をしない生活を何年も続けていると、驚くほど文章を書くスキルを退化させてしまうことに意識的に気付いていない人も多い。「本気出せば書ける」と思っている人ほど、その自信以上に文章を書けないことに気付いていない。
閑話休題。本書を読んでいると、日々のたわいもないエッセイがまったく無駄ではないことを伺える。それは本書そのものが売りもののコンテンツとして値段がついていて、私がそれを買っていて、ふわっと読み進めながら自分なりに消化して思うことがいくつかあるからだ。いくつか思いついたことをアイディアそのままに書く。
中原中也がいい いま 山羊の歌 をぱっと眺めるだけでもその天性を伺える。詩の冒頭を読むだけでもなにか違うと思わせる。著者は学生時代に中原中也を研究していたらしく、中也の作品には死を歌ったものが多くあるという。本書でもいくつか詩の引用がある。中也は ダダイズム と呼ばれる思想に影響を受けているらしい。
トタンがセンベイ食べて 春の日の夕暮は穏かです 幾時代かがありまして 茶色い戦争ありました 丘々は、胸に手を当て 退けり。 私の聖母 (サンタ・マリヤ)！ とにかく私は血を吐いた！ …… 汚れつちまつた悲しみに 今日も小雪の降りかかる よく技術書などで章節の初めに著名人の言葉を引用していたりする。日本人なら過去の文学者の詩を引用するというのもよさそうな気がした。
エッセイを配布する 一昔前は本という成果物をつくるのが大変な労力を伴うものだった。しかし、現代は文章は電子データでインターネット経由でダウンロードできる。日記を書き溜め、お気に入りの内容を脚色して、メッセージや想いをのせたものをエッセイ本としてつくってみるのもおもしろいかもしれないと、本書を読んで思うようになった。それはエッセイの中で著者の人となりや考えを知るきっかけになる。それを誰かに読んでもらうためというよりは、自分がどういった考えで日々の創作をしているかというのを歴史のように残すという意味合いが強い。例えば、年単位で整理して残しておく。おそらくはそれがまた将来の自分を助ける日がくるような気がする。もしうちの会社に関心をもつ人が出てくれば、電子データは自由にダウンロードして読めばいいし、何冊か紙の本に装丁してノベリティにしてもよい。
エッセイがその人の世界観を表す 本書を読んでいて著者の世界観が本書から伝わってくる。いや、ちょっとそれは言い過ぎでそんな大層なものでもない。著者は仕入元やお客さんとやり取りしながら本を扱うというスタイルを好んでいるようにみえる。ただ本を売り買いしてお金を稼ぐことをよしとしていない。もちろん生活費は必要だから売れてもらわないと困るという文章もちらほらあるが、それ以上に本に関わる人たちとのエピソードを紹介してこんなやり取りがあって嬉しかったということが綴られている。なんとなく私も共感することだが、大きいプロダクトの、大多数の利用者がいるプロジェクトほど、個々の利用者と接する機会や意見をやり取りする機会は少ない。多くの人に影響を与えているはずなのにその実感の乏しい労働体験になる。ただの数字でしかない。少ない関係者が関わるお仕事の方が世の中の役に立っている実感は大きい。
イスラエルとハマスの戦争 以来、ずっと考えていた (というほどでもないが) ことの1つに世界観を共有することの難しさがある。おそらく人類のうち戦争を望む人はほとんどいないはずだが、自分たちと住んでいる世界とは異なる世界の思想、価値観、秩序、経済、宗教といった世界観を共有できないばかりに争うことが絶えない。こんな大きな話しをしなくても、身近な周りの人たちとでも自分とは違う価値観をどうやって知り、どのような理解を示すことができるだろうか。エッセイは他者の世界観を表す1つの手段になりそうに思えた。</description><content>&lt;p>0時に寝て2時半に起きて4時に起きて7時に起きた。昨日は本を読みながらいろいろ考えていた。&lt;/p>
&lt;h2 id="頁をめくる音で息をする">頁をめくる音で息をする&lt;/h2>
&lt;p>先日の &lt;a href="/diary/diary/posts/2023/1025/#コワーキングのオンラインイベント">オンラインイベント&lt;/a> でいとうさんに教えてもらった &lt;a href="https://20db.stores.jp/items/61869c960548e03fb98a95ac">頁をめくる音で息をする&lt;/a> を読んでいる。ジャンルで言えばエッセイになる。著者の日常や日々の所感などを綴っている。&lt;a href="https://en.wikipedia.org/wiki/Paul_Graham_(programmer)">Paul Graham&lt;/a> 以外であまり読んだ記憶がないぐらい、私にとってエッセイという読みものは珍しい組み合わせになる。私がいま日々書いている日記も、ちょっと技巧を凝らしたり、お洒落な文章に変えてみたらエッセイにならないだろうか？と考えてみる。&lt;/p>
&lt;p>この日記は「書くこと」を目的としているものの、ここで書き溜めたものは将来の自分を助けるコンテンツになることを確信している。それは過去の私が書いたコンテンツがいまの私を助けているし、書き溜めたコンテンツを評価してくれるサイト、例えば &lt;a href="https://lapras.com/public/t2y">LAPRAS スコア&lt;/a> をみると、高い評価値になっていたりする。いまのところ、このスコアを何かに使っているわけではないが、15年以上も書いてきたコンテンツはそう簡単に真似できるものではないし、一朝一夕で身につくスキルでもない。&lt;/p>
&lt;p>過去にある会社のトライアルを受けたとき、ある技術の調査結果を wiki にまとめたところ「長文がちゃんと書ける」という評価をその会社の CTO から受けたことがあった。私はきょとんとして「そんなの開発者なら誰でも書けるでしょ？」と感想を述べたところ「いや、そうでもない。」と返ってきて、それから私もちゃんと考えてみたところ、言語能力を高めやすいプログラマーであってもちゃんとした文章を書けるのは全体の半分ぐらいしかいないことに気付いた。文章を書く練習をしない生活を何年も続けていると、驚くほど文章を書くスキルを退化させてしまうことに意識的に気付いていない人も多い。「本気出せば書ける」と思っている人ほど、その自信以上に文章を書けないことに気付いていない。&lt;/p>
&lt;p>閑話休題。本書を読んでいると、日々のたわいもないエッセイがまったく無駄ではないことを伺える。それは本書そのものが売りもののコンテンツとして値段がついていて、私がそれを買っていて、ふわっと読み進めながら自分なりに消化して思うことがいくつかあるからだ。いくつか思いついたことをアイディアそのままに書く。&lt;/p>
&lt;h3 id="中原中也がいい">中原中也がいい&lt;/h3>
&lt;p>いま &lt;a href="https://www.aozora.gr.jp/cards/000026/files/894_28272.html">山羊の歌&lt;/a> をぱっと眺めるだけでもその天性を伺える。詩の冒頭を読むだけでもなにか違うと思わせる。著者は学生時代に中原中也を研究していたらしく、中也の作品には死を歌ったものが多くあるという。本書でもいくつか詩の引用がある。中也は &lt;a href="https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%80%E3%82%A4%E3%82%B9%E3%83%A0">ダダイズム&lt;/a> と呼ばれる思想に影響を受けているらしい。&lt;/p>
&lt;pre tabindex="0">&lt;code>トタンがセンベイ食べて
春の日の夕暮は穏かです
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>幾時代かがありまして
　　茶色い戦争ありました
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>丘々は、胸に手を当て
退けり。
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>私の聖母 (サンタ・マリヤ)！
　　とにかく私は血を吐いた！ ……
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>汚れつちまつた悲しみに
今日も小雪の降りかかる
&lt;/code>&lt;/pre>&lt;p>よく技術書などで章節の初めに著名人の言葉を引用していたりする。日本人なら過去の文学者の詩を引用するというのもよさそうな気がした。&lt;/p>
&lt;h3 id="エッセイを配布する">エッセイを配布する&lt;/h3>
&lt;p>一昔前は本という成果物をつくるのが大変な労力を伴うものだった。しかし、現代は文章は電子データでインターネット経由でダウンロードできる。日記を書き溜め、お気に入りの内容を脚色して、メッセージや想いをのせたものをエッセイ本としてつくってみるのもおもしろいかもしれないと、本書を読んで思うようになった。それはエッセイの中で著者の人となりや考えを知るきっかけになる。それを誰かに読んでもらうためというよりは、自分がどういった考えで日々の創作をしているかというのを歴史のように残すという意味合いが強い。例えば、年単位で整理して残しておく。おそらくはそれがまた将来の自分を助ける日がくるような気がする。もしうちの会社に関心をもつ人が出てくれば、電子データは自由にダウンロードして読めばいいし、何冊か紙の本に装丁してノベリティにしてもよい。&lt;/p>
&lt;h3 id="エッセイがその人の世界観を表す">エッセイがその人の世界観を表す&lt;/h3>
&lt;p>本書を読んでいて著者の世界観が本書から伝わってくる。いや、ちょっとそれは言い過ぎでそんな大層なものでもない。著者は仕入元やお客さんとやり取りしながら本を扱うというスタイルを好んでいるようにみえる。ただ本を売り買いしてお金を稼ぐことをよしとしていない。もちろん生活費は必要だから売れてもらわないと困るという文章もちらほらあるが、それ以上に本に関わる人たちとのエピソードを紹介してこんなやり取りがあって嬉しかったということが綴られている。なんとなく私も共感することだが、大きいプロダクトの、大多数の利用者がいるプロジェクトほど、個々の利用者と接する機会や意見をやり取りする機会は少ない。多くの人に影響を与えているはずなのにその実感の乏しい労働体験になる。ただの数字でしかない。少ない関係者が関わるお仕事の方が世の中の役に立っている実感は大きい。&lt;/p>
&lt;p>&lt;a href="/diary/diary/posts/2023/1008/#イスラエルとハマスの戦争">イスラエルとハマスの戦争&lt;/a> 以来、ずっと考えていた (というほどでもないが) ことの1つに世界観を共有することの難しさがある。おそらく人類のうち戦争を望む人はほとんどいないはずだが、自分たちと住んでいる世界とは異なる世界の思想、価値観、秩序、経済、宗教といった世界観を共有できないばかりに争うことが絶えない。こんな大きな話しをしなくても、身近な周りの人たちとでも自分とは違う価値観をどうやって知り、どのような理解を示すことができるだろうか。エッセイは他者の世界観を表す1つの手段になりそうに思えた。&lt;/p></content></item><item><title>経済的且つ健康</title><link>/diary/posts/2023/1113/</link><pubDate>Mon, 13 Nov 2023 17:05:35 +0900</pubDate><guid>/diary/posts/2023/1113/</guid><description>22時頃から寝てしまって24時に起きて2時間ほどネットみたりしてまた寝て4時に起きて7時に起きた。
健康によさそうな紅生姜 昨日の続き 。業務スーパーの紅生姜は 1kg 338円、賞味期限も9ヶ月、とお得ではあるものの、中国産且つ合成保存料／着色料を使っているところに懸念がある。日常的に食べるものならもう少し健康に注意を払いたい。amazon で購入できる商品で 坂田信夫商店 という生姜専門店をみつけた。「合成着色料・保存料 不使用」なのがよい。この紅生姜も色はついているものの、野菜色素で色付けしているらしい。この商品は 1kg 1,800円、賞味期限は製造日から4ヶ月になる。健康に気を遣うと割高になるが、普段食べるものはそれで構わない。amazon の定期便で食べる量にあわせて送ってもらうのがよさそう。
お昼ご飯の行方 週末にスーパーのポイントカードの振る舞いをチェックするためにいつもより食材をたくさん買い込んでしまった。冷蔵庫が膨らんでいるので土日の両日とも自炊して、今日のランチも外食ではなく、お昼に帰って自炊した。オフィスと家の距離が徒歩3分なのですぐ帰れる。家で自炊してお昼ご飯を作るメリット・デメリットを考えてみる。
メリット
外食するよりも自炊した方が安い 物価が上がっているので外食すると1,000円前後になる 自炊なら高めに見積もっても500円もあれば済む 野菜を多く採れる 基本的に外食のランチは野菜が足りない 野菜は値段が高いのでランチやお弁当ではしばしば省略される デメリット
自炊するのが面倒くさい 家だと仕事の合間の気分転換にならない？ 基本的に私が労力さえ払えば、経済的にも健康的にもメリットしかない。自炊すればするほどスーパーのポイントも多く貯まる。毎日じゃなくても、たまに多めに買い込んでお昼も自炊してみようと思う。
go の set 型の導入予測 コードレビューをしていて、ある処理の実装を集合演算でやった方がよいとアドバイスした。go の型システムや標準ライブラリには set 型に相当するものがない。しかし、map を使って簡単に実装できるので実際の開発で問題になることはほとんどない。いまは generics と comparable があるので、汎用の set 型を map で実装することもできるはず、と思って調べたら次の記事をみつけた。
A generic Set type in Go 私のイメージとも合致して、こういったものをユーザー定義型で実装すればよいと reviewee とやり取りしていた。generics で汎用の set 型を実装できるなら、当然、それを標準ライブラリに導入しようという話しも出ているはずで軽く調べてみた。次の issue がその議論らしい。
proposal: container/set: new package to provide a generic set type (discussion) #47331 で、私は issue を読んでいないのだけど、どうやらユーザー定義の iterator 機能に依存しているらしい。従って iterator 機能が導入された後に set 型が導入されるといった流れになるだろう。</description><content>&lt;p>22時頃から寝てしまって24時に起きて2時間ほどネットみたりしてまた寝て4時に起きて7時に起きた。&lt;/p>
&lt;h2 id="健康によさそうな紅生姜">健康によさそうな紅生姜&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1112/">昨日の続き&lt;/a> 。業務スーパーの紅生姜は 1kg 338円、賞味期限も9ヶ月、とお得ではあるものの、中国産且つ合成保存料／着色料を使っているところに懸念がある。日常的に食べるものならもう少し健康に注意を払いたい。amazon で購入できる商品で &lt;a href="https://sakatashop.jp/pages/company">坂田信夫商店&lt;/a> という生姜専門店をみつけた。「合成着色料・保存料 不使用」なのがよい。この紅生姜も色はついているものの、野菜色素で色付けしているらしい。この商品は 1kg 1,800円、賞味期限は製造日から4ヶ月になる。健康に気を遣うと割高になるが、普段食べるものはそれで構わない。amazon の定期便で食べる量にあわせて送ってもらうのがよさそう。&lt;/p>
&lt;p>&lt;a href="https://amzn.to/47r3HVA" target="_blank">&lt;img src="https://m.media-amazon.com/images/I/51dzpO1MqVL._AC_.jpg" width="320">&lt;/a>&lt;/p>
&lt;h2 id="お昼ご飯の行方">お昼ご飯の行方&lt;/h2>
&lt;p>週末にスーパーのポイントカードの振る舞いをチェックするためにいつもより食材をたくさん買い込んでしまった。冷蔵庫が膨らんでいるので土日の両日とも自炊して、今日のランチも外食ではなく、お昼に帰って自炊した。オフィスと家の距離が徒歩3分なのですぐ帰れる。家で自炊してお昼ご飯を作るメリット・デメリットを考えてみる。&lt;/p>
&lt;p>メリット&lt;/p>
&lt;ul>
&lt;li>外食するよりも自炊した方が安い
&lt;ul>
&lt;li>物価が上がっているので外食すると1,000円前後になる&lt;/li>
&lt;li>自炊なら高めに見積もっても500円もあれば済む&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>野菜を多く採れる
&lt;ul>
&lt;li>基本的に外食のランチは野菜が足りない&lt;/li>
&lt;li>野菜は値段が高いのでランチやお弁当ではしばしば省略される&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>デメリット&lt;/p>
&lt;ul>
&lt;li>自炊するのが面倒くさい&lt;/li>
&lt;li>家だと仕事の合間の気分転換にならない？&lt;/li>
&lt;/ul>
&lt;p>基本的に私が労力さえ払えば、経済的にも健康的にもメリットしかない。自炊すればするほどスーパーのポイントも多く貯まる。毎日じゃなくても、たまに多めに買い込んでお昼も自炊してみようと思う。&lt;/p>
&lt;h2 id="go-の-set-型の導入予測">go の set 型の導入予測&lt;/h2>
&lt;p>コードレビューをしていて、ある処理の実装を集合演算でやった方がよいとアドバイスした。go の型システムや標準ライブラリには set 型に相当するものがない。しかし、map を使って簡単に実装できるので実際の開発で問題になることはほとんどない。いまは generics と comparable があるので、汎用の set 型を map で実装することもできるはず、と思って調べたら次の記事をみつけた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://bitfieldconsulting.com/golang/generic-set">A generic Set type in Go&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>私のイメージとも合致して、こういったものをユーザー定義型で実装すればよいと reviewee とやり取りしていた。generics で汎用の set 型を実装できるなら、当然、それを標準ライブラリに導入しようという話しも出ているはずで軽く調べてみた。次の issue がその議論らしい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/golang/go/discussions/47331">proposal: container/set: new package to provide a generic set type (discussion) #47331&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>で、私は issue を読んでいないのだけど、どうやらユーザー定義の iterator 機能に依存しているらしい。従って iterator 機能が導入された後に set 型が導入されるといった流れになるだろう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/golang/go/issues/61405">spec: add range over int, range over func #61405&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>iterator 機能は早ければ次の 1.22 ともみられているが、まだマイルストーンがついていないので開発状況によっては見送られるかもしれない。これから1-2年後あたりには go 本体が提供する set 型が支えるようになっているのではないかと推測する。&lt;/p></content></item><item><title>紅生姜とポテトサラダ</title><link>/diary/posts/2023/1112/</link><pubDate>Sun, 12 Nov 2023 14:41:49 +0900</pubDate><guid>/diary/posts/2023/1112/</guid><description>1時に寝て4時ぐらいに吐き気で起きてしばらく休んで寝たら12時に起きた。変な寝方した。
業務スーパー 昨日 よく行くスーパー について書いたが、もう1つ補足しておく。日常的に行くスーパーではないが、隔週に1回ぐらい行くところに 業務スーパー がある。年末に帰省したときになにかの番組で業務スーパーの創業者が地熱発電に取り組んでいて、そのための学校も自前で作り、エネルギー問題という難しい課題に対して政府に頼らず、自分たちで課題解決しようとしている姿勢に共感した。
業務スーパー創業者が描く日本の地熱発電の未来－スピード感が鍵 それ以来、業務スーパーでちょくちょく買いものをするようになった。運営会社の 神戸物産 は加古川市の総合商社らしい。神戸市じゃなかったのか (´・ω・`) 兵庫県という括りで地元支援の意図もあって買いものをしている。アプリの電子マネーにチャージするときに0.5%のポイントが付き、購入時にもいくらかポイントが付くらしい (店舗によって異なるみたい) 。イオン系列スーパーの買いものを最適化したタイミングで業務スーパーもそうしようと思ってアプリをダウンロードしてアカウントを作った。100ポイント溜まったら100円として使える。
現時点ではアプリであっても店舗の専用ハードウェアでチャージしないといけない。ちょっと不便。なんでこんな機械がいるのだろう？と疑問に思ったけど、おそらく物理カードのチャージのためかなと推測する。アプリなら、いずれはオンラインでチャージできるようになるのだろうと思う。
昨日、千切り紅生姜 1kg を買ってみた。
紅千切生姜 業務スーパーの紅生姜は高コスパ！料理のアクセントにおすすめ！ よく行くお店に紅生姜が置いてあって、紅生姜っていろんな食材にあう味変のトッピングだと思う。お昼によく食べに行くお店に紅生姜のポットが置いてあって、ナポリタンや鶏チーズ丼にもかけてよく食べている。食べ過ぎると塩分と添加物の懸念があるものの、生姜なので基本的には健康によい。家でももっと食べようと思い始めた。
紅しょうがに栄養はある？効果・効能や栄養素、カロリーまでご紹介！ 赤102という合成着色料は少量では発がん性はないと認められているものの、アレルギー症状を引き起こす懸念から国によっては規制している国もあるみたい。
添加物は危険？食べすぎ注意の食品添加物一覧をご紹介 買ってから気付いたが、業務スーパーの千切り紅生姜は中国産、且つ赤102という合成着色料を使っている。日常的に食べるものなら赤色である必要はない。無着色な生姜の梅酢漬けを探した方が健康によさそう。
ポテトサラダ専門店 私はポテトサラダが好きだ。居酒屋へ行くと、ほぼ必ずポテトサラダを注文する。どこの居酒屋のポテトサラダもオリジナルなものでおもしろい。ポテトサラダにこだわりのある居酒屋でもそうでないお店でも、まったく同じポテトサラダに出会うことはほぼない。それはポテトサラダが日持ちする料理ではないため、既製品を使うよりも、それぞれの店舗で手作りしているからではないかと推測する。手作りするため、それぞれのお店のアレンジが加わる。ポテトサラダはじゃがいもだけであれば、冷蔵庫で3-5日ほどもつ。しかし、具材を入れると、とくに水分が出る野菜を入れてしまうと痛みやすくなり、2-3日程度の賞味期限になってしまう。これは在庫リスクが高くて専門店には向かない商品だと思う。ググると ポテトサラダ専門店「ポテトクリーム」 というのが1件だけみつかった。皆無ではないが、メディアで珍しく取り上げられる程度には成り立つビジネスではない。
食べログ: Potato Cream ふと、お金あったらポテトサラダ専門店を作って、いろんなポテトサラダの味見がしたいと思った。居酒屋で食べられるポテトサラダは基本は1-2種類しかない。ポテトサラダをたくさん集めていろいろ味見ができればいいなと思えた。主成分がじゃがいもという性質上、ポテトサラダはたくさん食べられない。少量を5種類とか、食べながらお酒が飲めれば、私のようなポテトサラダ大好き人間にはそれだけで嬉しい。そんなお店があったらいいなと思えた。別にポテトサラダすべてがオリジナルではなくても、その辺のコンビニやスーパー、居酒屋さんで売っているポテトサラダでも構わない。違う種類のポテトサラダをいろいろ試してみたい、もしくは日替わりでポテトサラダの種類が変わるようなものでもよい。常時50種類ぐらいのポテトサラダがあって、いろいろ試して食べられれば嬉しい。
扱う種類が増えると在庫リスクが高くなる。飲食店とサブスクリプション的に提携して賞味期限が切れる前にポテトサラダを配ったり、廃棄するのはもったいないから捨てるぐらいなら無料で突き出しやサラダの添えものに出してもよいかもしれない。1,000円ぐらい払って、ポテトサラダをおつまみにビールを飲んで、それからオフィスへ戻ってお仕事するようなスタイルにあうポテトサラダ専門店がほしい。
ポテトサラダは日持ちしない？賞味期限の目安は？冷凍・冷蔵庫など別に！</description><content>&lt;p>1時に寝て4時ぐらいに吐き気で起きてしばらく休んで寝たら12時に起きた。変な寝方した。&lt;/p>
&lt;h2 id="業務スーパー">業務スーパー&lt;/h2>
&lt;p>昨日 &lt;a href="/diary/diary/posts/2023/1111/#イオン-オーナーズカード">よく行くスーパー&lt;/a> について書いたが、もう1つ補足しておく。日常的に行くスーパーではないが、隔週に1回ぐらい行くところに &lt;a href="https://www.gyomusuper.jp/">業務スーパー&lt;/a> がある。年末に帰省したときになにかの番組で業務スーパーの創業者が地熱発電に取り組んでいて、そのための学校も自前で作り、エネルギー問題という難しい課題に対して政府に頼らず、自分たちで課題解決しようとしている姿勢に共感した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.bloomberg.co.jp/news/articles/2023-07-27/RY9XYDT0G1KW01">業務スーパー創業者が描く日本の地熱発電の未来－スピード感が鍵&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>それ以来、業務スーパーでちょくちょく買いものをするようになった。運営会社の &lt;a href="https://www.kobebussan.co.jp/">神戸物産&lt;/a> は加古川市の総合商社らしい。神戸市じゃなかったのか (´・ω・`) 兵庫県という括りで地元支援の意図もあって買いものをしている。アプリの電子マネーにチャージするときに0.5%のポイントが付き、購入時にもいくらかポイントが付くらしい (店舗によって異なるみたい) 。イオン系列スーパーの買いものを最適化したタイミングで業務スーパーもそうしようと思ってアプリをダウンロードしてアカウントを作った。100ポイント溜まったら100円として使える。&lt;/p>
&lt;p>現時点ではアプリであっても店舗の専用ハードウェアでチャージしないといけない。ちょっと不便。なんでこんな機械がいるのだろう？と疑問に思ったけど、おそらく物理カードのチャージのためかなと推測する。アプリなら、いずれはオンラインでチャージできるようになるのだろうと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1112_gyoumuca.jpg"/>
&lt;/figure>
&lt;p>昨日、千切り紅生姜 1kg を買ってみた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gyomusuper.jp/product/detail.php?go_id=4464">紅千切生姜&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gyousu.love/shredded-red-pickled-ginger/">業務スーパーの紅生姜は高コスパ！料理のアクセントにおすすめ！&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>よく行くお店に紅生姜が置いてあって、紅生姜っていろんな食材にあう味変のトッピングだと思う。お昼によく食べに行くお店に紅生姜のポットが置いてあって、ナポリタンや鶏チーズ丼にもかけてよく食べている。食べ過ぎると塩分と添加物の懸念があるものの、生姜なので基本的には健康によい。家でももっと食べようと思い始めた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://botanica-media.jp/4715">紅しょうがに栄養はある？効果・効能や栄養素、カロリーまでご紹介！&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>赤102という合成着色料は少量では発がん性はないと認められているものの、アレルギー症状を引き起こす懸念から国によっては規制している国もあるみたい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://wacoms.jp/media/column/food_additive/">添加物は危険？食べすぎ注意の食品添加物一覧をご紹介&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>買ってから気付いたが、業務スーパーの千切り紅生姜は中国産、且つ赤102という合成着色料を使っている。日常的に食べるものなら赤色である必要はない。無着色な生姜の梅酢漬けを探した方が健康によさそう。&lt;/p>
&lt;h2 id="ポテトサラダ専門店">ポテトサラダ専門店&lt;/h2>
&lt;p>私はポテトサラダが好きだ。居酒屋へ行くと、ほぼ必ずポテトサラダを注文する。どこの居酒屋のポテトサラダもオリジナルなものでおもしろい。ポテトサラダにこだわりのある居酒屋でもそうでないお店でも、まったく同じポテトサラダに出会うことはほぼない。それはポテトサラダが日持ちする料理ではないため、既製品を使うよりも、それぞれの店舗で手作りしているからではないかと推測する。手作りするため、それぞれのお店のアレンジが加わる。ポテトサラダはじゃがいもだけであれば、冷蔵庫で3-5日ほどもつ。しかし、具材を入れると、とくに水分が出る野菜を入れてしまうと痛みやすくなり、2-3日程度の賞味期限になってしまう。これは在庫リスクが高くて専門店には向かない商品だと思う。ググると &lt;a href="https://icotto.jp/presses/3051">ポテトサラダ専門店「ポテトクリーム」&lt;/a> というのが1件だけみつかった。皆無ではないが、メディアで珍しく取り上げられる程度には成り立つビジネスではない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tabelog.com/tokyo/A1317/A131703/13164350/">食べログ: Potato Cream&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ふと、お金あったらポテトサラダ専門店を作って、いろんなポテトサラダの味見がしたいと思った。居酒屋で食べられるポテトサラダは基本は1-2種類しかない。ポテトサラダをたくさん集めていろいろ味見ができればいいなと思えた。主成分がじゃがいもという性質上、ポテトサラダはたくさん食べられない。少量を5種類とか、食べながらお酒が飲めれば、私のようなポテトサラダ大好き人間にはそれだけで嬉しい。そんなお店があったらいいなと思えた。別にポテトサラダすべてがオリジナルではなくても、その辺のコンビニやスーパー、居酒屋さんで売っているポテトサラダでも構わない。違う種類のポテトサラダをいろいろ試してみたい、もしくは日替わりでポテトサラダの種類が変わるようなものでもよい。常時50種類ぐらいのポテトサラダがあって、いろいろ試して食べられれば嬉しい。&lt;/p>
&lt;p>扱う種類が増えると在庫リスクが高くなる。飲食店とサブスクリプション的に提携して賞味期限が切れる前にポテトサラダを配ったり、廃棄するのはもったいないから捨てるぐらいなら無料で突き出しやサラダの添えものに出してもよいかもしれない。1,000円ぐらい払って、ポテトサラダをおつまみにビールを飲んで、それからオフィスへ戻ってお仕事するようなスタイルにあうポテトサラダ専門店がほしい。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://chisou-media.jp/posts/1089">ポテトサラダは日持ちしない？賞味期限の目安は？冷凍・冷蔵庫など別に！&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>ポッキーの日</title><link>/diary/posts/2023/1111/</link><pubDate>Sat, 11 Nov 2023 00:53:50 +0900</pubDate><guid>/diary/posts/2023/1111/</guid><description>なんか深夜にお腹空いて2時から冷凍食品の横綱ラーメン作って食べた。深夜に食べるラーメンはおいしかった。それから寝て6時に起きて8時に起きた。
ストレッチ 先週は筋肉痛で大変な状態だったが、今週は十分に休養して元に戻った。今日の開脚幅は開始前156cmで、ストレッチ後157cmだった。いつも通り。とくにどこかの部位が極端に疲労したり張りがあったりする感じはなかったが、左ふとももの後ろと左腰がやや張りが強かったように感じた。私のお気に入りのストレッチの部位としてふとももの後ろの筋を伸ばすのが痛気持ちいい。これは自分では伸ばせない筋なのでトレーナーさんにお願いしないといけない。張りがあっても痛気持ちよい。トレーナーさんと話していて今日が「ポッキーの日」だと教えてもらった。スーパーのクーポンでポッキーお奨めされているなと思っていたけど、そういうことだったのか。
イオン オーナーズカード イオンの株主優待制度 としてオーナーズカードがある。イオン系列のスーパーなどで買いものしたときに半年後にキャッシュバックを受けられる。持ち株数に応じて 3, 4, 5, 7% のキャッシュバックになる。6月末に四国旅行 へ行ったときに同室に泊まった方と話していて、イオンのオーナーズカードがお得だよと教えてもらった。私が普段買いものしているスーパーは3つある。
KOHYO 阪急オアシス ライフ このうち、もっともよく行くスーパーが KOHYO である。その理由はもっとも家から近いから。KOHYO はイオン系列になる。オーナーズカードをもつとお得になることに気付いてイオンの株を購入してみた。8月末と2月末の年2回、権利確定が行われる。私の場合、8月末に権利確定され、いろいろ手続きをして、オーナーズカードが10月末に届いた。
カードを持ち運ぶのは面倒なので調べてみると iAEON アプリ でオーナーズカードを連携すれば代用できることに気付いた。iAEON アプリの会員証にオーナーズカードを連携できる。スーパーで買いものするときにスマホでオーナーズカードの認証ができる。このアプリでオーナーズカードを連携するには waon ポイントカードが必要にある。これも名前がおかしいのだけど、カードを作るという手続きをするが、物理カードを作らなくてもよくて、アプリ上で waon ポイントを管理できる。
waon とはイオンが提供している電子マネーのことで waon で書いものしたときに貯まるポイントが waon ポイントである。しかし、オーナーズカードで購入しても waon ポイントを貯めることができる、現金で支払ったとしても。これも名前が混乱してしまうが waon ポイントは waon 以外の決済でもポイントが貯まるのである。waon とは別に AEON Pay もある。iAEON アプリ上で AEON Pay が使える。AEON Pay は paypay のようなバーコード決済で、イオンカード以外にも銀行口座からもチャージできる。paypay 銀行は選択できなかったが、都市銀行や地方銀行などを選択して銀行口座から直接チャージできた。AEON Pay には waon ポイントを貯めるという仕組みはなく、AEON Pay の支払いをイオンカードにすることでイオンカードの利用によって waon ポイントが還元されるという仕組みになるため、銀行口座からチャージすると本来は waon ポイントが貯まらない。しかし、オーナーズカードの支払いは waon ポイントが貯まるので、オーナーズカードの認証をした上で AEON Pay をする分には waon ポイントが貯まっているようだ。</description><content>&lt;p>なんか深夜にお腹空いて2時から冷凍食品の横綱ラーメン作って食べた。深夜に食べるラーメンはおいしかった。それから寝て6時に起きて8時に起きた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>先週は筋肉痛で大変な状態だったが、今週は十分に休養して元に戻った。今日の開脚幅は開始前156cmで、ストレッチ後157cmだった。いつも通り。とくにどこかの部位が極端に疲労したり張りがあったりする感じはなかったが、左ふとももの後ろと左腰がやや張りが強かったように感じた。私のお気に入りのストレッチの部位としてふとももの後ろの筋を伸ばすのが痛気持ちいい。これは自分では伸ばせない筋なのでトレーナーさんにお願いしないといけない。張りがあっても痛気持ちよい。トレーナーさんと話していて今日が「ポッキーの日」だと教えてもらった。スーパーのクーポンでポッキーお奨めされているなと思っていたけど、そういうことだったのか。&lt;/p>
&lt;h2 id="イオン-オーナーズカード">イオン オーナーズカード&lt;/h2>
&lt;p>&lt;a href="https://www.aeon.info/ir/stock/benefit/">イオンの株主優待制度&lt;/a> としてオーナーズカードがある。イオン系列のスーパーなどで買いものしたときに半年後にキャッシュバックを受けられる。持ち株数に応じて 3, 4, 5, 7% のキャッシュバックになる。&lt;a href="/diary/diary/tags/sightseeing/">6月末に四国旅行&lt;/a> へ行ったときに同室に泊まった方と話していて、イオンのオーナーズカードがお得だよと教えてもらった。私が普段買いものしているスーパーは3つある。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.kohyo.co.jp/">KOHYO&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.hankyu-oasis.com/">阪急オアシス&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.lifecorp.jp/">ライフ&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>このうち、もっともよく行くスーパーが KOHYO である。その理由はもっとも家から近いから。KOHYO はイオン系列になる。オーナーズカードをもつとお得になることに気付いてイオンの株を購入してみた。8月末と2月末の年2回、権利確定が行われる。私の場合、8月末に権利確定され、いろいろ手続きをして、オーナーズカードが10月末に届いた。&lt;/p>
&lt;p>カードを持ち運ぶのは面倒なので調べてみると &lt;a href="https://www.aeon.com/aeonapp/">iAEON アプリ&lt;/a> でオーナーズカードを連携すれば代用できることに気付いた。iAEON アプリの会員証にオーナーズカードを連携できる。スーパーで買いものするときにスマホでオーナーズカードの認証ができる。このアプリでオーナーズカードを連携するには waon ポイントカードが必要にある。これも名前がおかしいのだけど、カードを作るという手続きをするが、物理カードを作らなくてもよくて、アプリ上で waon ポイントを管理できる。&lt;/p>
&lt;p>waon とはイオンが提供している電子マネーのことで waon で書いものしたときに貯まるポイントが waon ポイントである。しかし、オーナーズカードで購入しても waon ポイントを貯めることができる、現金で支払ったとしても。これも名前が混乱してしまうが waon ポイントは waon 以外の決済でもポイントが貯まるのである。waon とは別に &lt;a href="https://aeon.co.jp/service/lp/aeonpay/">AEON Pay&lt;/a> もある。iAEON アプリ上で AEON Pay が使える。AEON Pay は paypay のようなバーコード決済で、イオンカード以外にも銀行口座からもチャージできる。paypay 銀行は選択できなかったが、都市銀行や地方銀行などを選択して銀行口座から直接チャージできた。AEON Pay には waon ポイントを貯めるという仕組みはなく、AEON Pay の支払いをイオンカードにすることでイオンカードの利用によって waon ポイントが還元されるという仕組みになるため、銀行口座からチャージすると本来は waon ポイントが貯まらない。しかし、オーナーズカードの支払いは waon ポイントが貯まるので、オーナーズカードの認証をした上で AEON Pay をする分には waon ポイントが貯まっているようだ。&lt;/p>
&lt;p>たまたま iAEON アプリで近所の KOHYO を登録すると、その店舗で使えるクーポンが発行されていることに気付く。なぜかクーポンを選択という手作業の登録をする必要がある。クーポンは商品ごとにたくさんあって、1つずつ選択して登録するのが面倒なので「一括選択」というボタンがある。このボタンをタップするとすべてのクーポンが選択済みになって登録される。いま選択済みのクーポンが46個ある。この次は「一括選択」をタップしなくても自動的にクーポンを選択済みの状態にしてほしい。クーポンを選択済みの状態で iAEON アプリで会員証の認証をしてから決済をするとクーポンが適用されて割引を受けられる。クーポンには何度も使える装備タイプと1回使うとなくなる道具タイプがある。そして、KOHYO のクーポンに何度でも使える全品3%引きの装備タイプのクーポンがある。さらに土曜日はそれが5%引きクーポンにクラスチェンジする。つまり、土曜日に KOHYO で買いものすれば、オーナーズカードで3%キャッシュバック、装備タイプのクーポンで5%引き、その上で waon ポイントがつくという、おそらく一番よい装備が整ったという雰囲気だ。&lt;/p>
&lt;p>試しにポッキーのクーポンを使ってみようと、夜にスーパーへ行ったらすべて売り切れていた。仕方なく同じクーポンが適用されるプリッツを買ってきた。トマトプリッツ118円が、5%割引で112円になって、さらに別クーポンのバフがかかって10円引きで102円になる。この時点で 102/118 ≒ 86% なので14%引きになっている。さらにオーナーズカードで3%キャッシュバックになるので17%引きになる。なるほど、物価の上昇を吹き飛ばすような効果がありそうだ。&lt;/p>
&lt;p>今週はここまでの設定をするのにいろいろ調べていた。waon なにそれ？みたいな人間がアプリダウンロードして、アカウント作ったり、waon ポイントカードを作ったり、オーナーズカードを連携したり、あれこれやって理解できた。&lt;/p>
&lt;h2 id="ふるさと納税">ふるさと納税&lt;/h2>
&lt;p>いつも年末に購入している。このぐらいの時期になると急に思い出して、思い出したときに購入しないと忘れてしまうので一気に買いものした。私は2019年から毎年ふるさと納税をしている。いつも食べものをいくつか、工芸品を1つぐらい選択している。気に入るものがなかったら食べものしか買わないときもある。とくに深い意図はなくて、適当に検索して今年は次の4つに決めた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=3163482">[北海道清水町] 十勝スロウフード 牛とろ丼セット&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1368233">[長崎県壱岐市]クラフトビール 6本詰め合わせ(3種類×2本)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1320793">[大阪府泉佐野市]コンパクトバスタオル6枚&amp;lt;シックグレー&amp;gt; 速乾中厚の泉州タオル 010B962&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.satofull.jp/products/detail.php?product_id=1053132">[滋賀県甲賀市]信楽焼・明山のとなりのトトロ totoro-01&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>普通にサラリーマンとして働いている人はふるさと納税のメリットがある。寄付金控除の限度額まで、実質2,000円で好きな返礼品をもらうことができる。私は毎年確定申告をしているのでワンストップ特例制度を利用する必要もなく、手続き上の手間暇もほぼないと言っていい。ふるさと納税の問題点としては次のようなことが指摘されている。&lt;/p>
&lt;ul>
&lt;li>(一般的に) 都市から地方へ税金が流出するので都市の自治体の税収が減る&lt;/li>
&lt;li>収入の高い人ほど寄付金控除の限度額が高いために得をする傾向がある&lt;/li>
&lt;li>寄付金 (税金) の3割以下 (返戻率と呼ぶ) のお金が本来の使途ではなく返礼品として流出する&lt;/li>
&lt;/ul>
&lt;p>問題や懸念があることは私も知っているが、私のような人間は、こういう機会がないと本来使わないお金を使っていたりするので購買意欲を換気するという側面もある。どのみち、都市に住む人が納めた税金を地方交付税という形で国が地方自治体へ分配している。ふるさと納税が地方交付税の割合に影響を与えているかどうかは知らないが、都市に住む人が納めた税金が地方へ分配されるのはそう変わらないのではないかと思ったりもする。都市に住んでいる人の大半は地方出身者であり、私もそうだが、地方出身者が都市で働いて税金を納めることで都市を支えているとみなすこともできる。都市も地方から働きに来てもらわないと都市を維持できなない。地方と都市は共依存の関係でもある。そして、返礼品を購入してもそのお金は地方の地元企業の経済活動に使われる。それ自体に問題があるわけでもないのではないか。本来の税金の使途が返礼品という、どちらかと言えば、嗜好品に使われているのがやや懸念ではあるが、地方の経済をまわすことに役立っていれば、それはそれで別の意義も出てくるのではないかと思う。&lt;/p></content></item><item><title>資産運用の新たなツール</title><link>/diary/posts/2023/1110/</link><pubDate>Fri, 10 Nov 2023 07:38:17 +0900</pubDate><guid>/diary/posts/2023/1110/</guid><description>3時に寝て6時半に起きた。晩ごはん食べて、夜の作業して、寝る前に paypay 証券の積立の仕組みを調べて設定したりしていた。昨日あまり寝ていなかったせいか、今日は17時でお仕事を終えて、帰ってきて晩ごはんを食べて、すぐ1-2時間寝落ちした。あまりこういう居眠りは少ない。21時過ぎに起きてまたオフィスへ戻って作業していた。
決算後の評価 昨日の続き 。おそらくネガティブな評価になるだろうという予測通り、寄り付きの価格は大きく下落して場中もどんどん下がって次のような結果になった。
日付 始値 高値 安値 終値 出来高 調整後終値 2023-11-09 6,152 6,333 6,098 6,305 7,250,900 6,305 2023-11-10 6,000 6,016 5,721 5,790 27,804,300 5,790 寄り付きの成り行き、指値、前場引け、後場引けと段階的に空売りの返済が進んで1日で約 77% を返済した。今月中には完済してしまおうとは考えているものの、今日1日で思ったより捌けたのは予想以上にザラ場でも価格が落ちていったから。十分な収益にはなったので来週中には適当なタイミングで完済してしまう。
paypay 証券の「つみたて」 口座を開設していたものの、ずっと放置していた paypay 証券のアプリを久しぶりにたまたま開いてみた。だいぶアプリも改善されたようで機能が増えているようにみえる。適当に触っていて、投信や外国株の購入オプションに「つみたて」があることに気付いた。定期的に決められた金額を購入できる。paypay 証券のよいところは最低1,000円から購入できるところ。これなら財形貯蓄のような用途に使える。
PayPay証券アプリに機能追加！ 〜米国株式つみたてができる！さらに見やすく・使いやすく！～ 私は2016年ぐらいから株式投資を始め、もう5年以上は継続している。そのぐらいやって気付いたことはたった1つで、私には投資運用のスキルもなく、そのモチベーションも高くない。資産運用の効率を考慮して貯金に懸念があるから株式投資をしているに過ぎない。あとは経営の勉強の延長で投資や経済の先行きを自分なりに組み立てて予想したりするのにも応用している。それはともかく、これまであまりうまく投資運用してこれなかった経験から、私にとっての株式投資の最適解は ドル・コスト平均法 になる。中二病の1つだと思うが、自分ならもっとうまく資産運用できると思ってあれこれやった結果、普遍的なドル・コスト平均法の凄さを理解しただけだった。一番よくない投資は一度に大きなお金を動かすことだと思う。一方で、自分の好きな会社に投資したいという思いはあって paypay 証券のような、会社を指定して「つみたて」というドル・コスト平均法のようなオプションはもっとも望ましいとずっと考えていて、これまで手動でやっていた方法だった。
試しに毎週1,000円ずつ購入する「つみたて」をいくつか設定してみた。どうやら外国株もすべてが選択できるわけではなさそう。アトラシアンやアームは検索結果に出てこなかった。
ファイザー クラウドフレア アマゾン・ドットコム あと投信も1つぐらい設定しておこうと思って、これも同じように「つみたて」してみた。
ひふみプラス とりあえず1,000円から始めて、世の中の状況をみながら期間や金額を調整するぐらいの、その程度のカスタマイズで十分。いままでも証券会社のアプリケーションでそういったことができたのかどうか、私はよく知らないけど、スマホアプリだと、ちゃちゃっと触って操作できるのでお手軽でよい。自分が詳しくないものを扱うのはスマホアプリが便利でよい。</description><content>&lt;p>3時に寝て6時半に起きた。晩ごはん食べて、夜の作業して、寝る前に paypay 証券の積立の仕組みを調べて設定したりしていた。昨日あまり寝ていなかったせいか、今日は17時でお仕事を終えて、帰ってきて晩ごはんを食べて、すぐ1-2時間寝落ちした。あまりこういう居眠りは少ない。21時過ぎに起きてまたオフィスへ戻って作業していた。&lt;/p>
&lt;h2 id="決算後の評価">決算後の評価&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1109/#ソフトバンクグループ-第2四半期-決算">昨日の続き&lt;/a> 。おそらくネガティブな評価になるだろうという予測通り、寄り付きの価格は大きく下落して場中もどんどん下がって次のような結果になった。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">日付&lt;/th>
&lt;th style="text-align:right">始値&lt;/th>
&lt;th style="text-align:right">高値&lt;/th>
&lt;th style="text-align:right">安値&lt;/th>
&lt;th style="text-align:right">終値&lt;/th>
&lt;th style="text-align:right">出来高&lt;/th>
&lt;th style="text-align:right">調整後終値&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">2023-11-09&lt;/td>
&lt;td style="text-align:right">6,152&lt;/td>
&lt;td style="text-align:right">6,333&lt;/td>
&lt;td style="text-align:right">6,098&lt;/td>
&lt;td style="text-align:right">6,305&lt;/td>
&lt;td style="text-align:right">7,250,900&lt;/td>
&lt;td style="text-align:right">6,305&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2023-11-10&lt;/td>
&lt;td style="text-align:right">6,000&lt;/td>
&lt;td style="text-align:right">6,016&lt;/td>
&lt;td style="text-align:right">5,721&lt;/td>
&lt;td style="text-align:right">5,790&lt;/td>
&lt;td style="text-align:right">27,804,300&lt;/td>
&lt;td style="text-align:right">5,790&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>寄り付きの成り行き、指値、前場引け、後場引けと段階的に空売りの返済が進んで1日で約 77% を返済した。今月中には完済してしまおうとは考えているものの、今日1日で思ったより捌けたのは予想以上にザラ場でも価格が落ちていったから。十分な収益にはなったので来週中には適当なタイミングで完済してしまう。&lt;/p>
&lt;h1 id="paypay-証券のつみたて">paypay 証券の「つみたて」&lt;/h1>
&lt;p>口座を開設していたものの、ずっと放置していた paypay 証券のアプリを久しぶりにたまたま開いてみた。だいぶアプリも改善されたようで機能が増えているようにみえる。適当に触っていて、投信や外国株の購入オプションに「つみたて」があることに気付いた。定期的に決められた金額を購入できる。paypay 証券のよいところは最低1,000円から購入できるところ。これなら財形貯蓄のような用途に使える。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.paypay-sec.co.jp/news/20230403_2.html">PayPay証券アプリに機能追加！ 〜米国株式つみたてができる！さらに見やすく・使いやすく！～&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>私は2016年ぐらいから株式投資を始め、もう5年以上は継続している。そのぐらいやって気付いたことはたった1つで、私には投資運用のスキルもなく、そのモチベーションも高くない。資産運用の効率を考慮して貯金に懸念があるから株式投資をしているに過ぎない。あとは経営の勉強の延長で投資や経済の先行きを自分なりに組み立てて予想したりするのにも応用している。それはともかく、これまであまりうまく投資運用してこれなかった経験から、私にとっての株式投資の最適解は &lt;a href="https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%AB%E3%83%BB%E3%82%B3%E3%82%B9%E3%83%88%E5%B9%B3%E5%9D%87%E6%B3%95">ドル・コスト平均法&lt;/a> になる。中二病の1つだと思うが、自分ならもっとうまく資産運用できると思ってあれこれやった結果、普遍的なドル・コスト平均法の凄さを理解しただけだった。一番よくない投資は一度に大きなお金を動かすことだと思う。一方で、自分の好きな会社に投資したいという思いはあって paypay 証券のような、会社を指定して「つみたて」というドル・コスト平均法のようなオプションはもっとも望ましいとずっと考えていて、これまで手動でやっていた方法だった。&lt;/p>
&lt;p>試しに毎週1,000円ずつ購入する「つみたて」をいくつか設定してみた。どうやら外国株もすべてが選択できるわけではなさそう。アトラシアンやアームは検索結果に出てこなかった。&lt;/p>
&lt;ul>
&lt;li>ファイザー&lt;/li>
&lt;li>クラウドフレア&lt;/li>
&lt;li>アマゾン・ドットコム&lt;/li>
&lt;/ul>
&lt;p>あと投信も1つぐらい設定しておこうと思って、これも同じように「つみたて」してみた。&lt;/p>
&lt;ul>
&lt;li>ひふみプラス&lt;/li>
&lt;/ul>
&lt;p>とりあえず1,000円から始めて、世の中の状況をみながら期間や金額を調整するぐらいの、その程度のカスタマイズで十分。いままでも証券会社のアプリケーションでそういったことができたのかどうか、私はよく知らないけど、スマホアプリだと、ちゃちゃっと触って操作できるのでお手軽でよい。自分が詳しくないものを扱うのはスマホアプリが便利でよい。&lt;/p></content></item><item><title>儲かっていない会社に中間申告はない</title><link>/diary/posts/2023/1109/</link><pubDate>Thu, 09 Nov 2023 08:48:38 +0900</pubDate><guid>/diary/posts/2023/1109/</guid><description>0時に寝て何度か起きて7時過ぎに起きた。髭を剃っていて唇を切った。
ソフトバンクグループ 第2四半期 決算 孫さんが決算発表の場に出てこなくなってまったく関心がなくなっている。ここ数ヶ月ほどタイミングを見計らって少しずつ空売りしてきた。ちょうど年の暮れだしこのタイミングで空売りの返済をしてしまおうと考えている。昨今の雰囲気からまだまだ投資の時期ではなく、なんとなくソフトバンクグループの決算は悪いのだろうと予測していた。虎の子の ARM も上場してしまって他に材料もないだろうと。
ソフトバンクグループ 2024年3月期 第2四半期 決算 とくにみるつもりはなかったけれど、作業しながら CFO の説明を聞いていて、「守り」がうんたら、財務が健全だと何度か話していることに気付いた。周りから財務を不安視されて懸念を持たれていることの裏返しように聞こえた。普通、投資会社なら投資の成果をもっとアピールすればいいと思えるが、財務の健全性をアピールするというのがおもしろおかしく聞こえた。arm が上場したにも関わらず、現在の株価と 1株当たりNAV情報 の差も前回の決算時よりも開いてしまったと説明していた気がする。それが市場の答えにも思えた。
おそらく明日の寄り付きの価格は下がると推測するけれど、明日はマイナー SQ だし、この決算でどのぐらい下がるのか、やや楽しみ。11月中には空売りを返済してしまうつもり。
中間申告 前期は黒字決算だったので自動的に中間申告が必要なのだと思い込んでいた。しかし、例年ならすでに納税のための通知やデータが届いているはずが一向に来ない。
昨日、消費税の中間申告の通知が届いた。2年前から消費税を支払っているはずだけど、昨年は中間申告の通知が来てないような？まぁいいや。e-tax のメッセージボックスには中間申告のデータも届いていて、それを使って申告書を作成して pay-easy でそのまま納付した。作業時間は15分といったところ。中間申告はめっちゃ簡単。
本題の法人税などの中間申告の通知が来ないので厳密な中間申告の条件について調べてみた。
中間申告が必要なのは、前事業年度の法人税額が20万円を超える場合です。中間申告が必要となったとき、その提出期限と税金の納期限は、事業年度開始後6月を経過した日から2月以内です。なお、法人税の中間申告の対象となる人は、地方税（都道府県税、市町村民税、事業税等）についての申告も必要です。
法人税の中間申告とは？目的や申告方法を基礎から解説！ | 経理・会計業務を効率化「経理プラス」
法人税が20万円を超えないと中間申告は不要だという。前期の法人税を調べたら 187,800 円だった。これで法人税と地方法人税の中間申告は不要であることがわかった。
また、事業年度が6カ月を超える法人で法人税の中間申告義務のある法人は、その事業年度開始の日から6カ月を経過した日から2カ月以内に原則として前事業年度の税額の半分の額を予定（中間）申告して納めます。
法人県民税・事業税、特別法人事業税・地方法人特別税
次に法人県民税も「法人税の中間申告義務のある法人」とあるので法人税の判定基準と同じになる。
予定申告は、法人税において前事業年度の確定法人税額に前事業年度の月数で除し6を乗じて計算した金額が10万円以下の場合はその年度の申告の必要はありません。
神戸市：法人市民税に関するQ&amp;amp;A
実際に計算してみると、187,800 / 12 * 6 = 93,900 円となって10万円以下なので中間申告は必要ないとのこと。
要約すると、あまり納税していない会社は中間申告しなくてよいってことだと理解できた。前期は iphone 14 pro, m2 macbook, 社用車、デスクトップマシンといろいろお金を使ったので納税額が少なかったみたい。</description><content>&lt;p>0時に寝て何度か起きて7時過ぎに起きた。髭を剃っていて唇を切った。&lt;/p>
&lt;h2 id="ソフトバンクグループ-第2四半期-決算">ソフトバンクグループ 第2四半期 決算&lt;/h2>
&lt;p>孫さんが決算発表の場に出てこなくなってまったく関心がなくなっている。ここ数ヶ月ほどタイミングを見計らって少しずつ空売りしてきた。ちょうど年の暮れだしこのタイミングで空売りの返済をしてしまおうと考えている。昨今の雰囲気からまだまだ投資の時期ではなく、なんとなくソフトバンクグループの決算は悪いのだろうと予測していた。虎の子の ARM も上場してしまって他に材料もないだろうと。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://group.softbank/event/earnings_2023q2">ソフトバンクグループ 2024年3月期 第2四半期 決算&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>とくにみるつもりはなかったけれど、作業しながら CFO の説明を聞いていて、「守り」がうんたら、財務が健全だと何度か話していることに気付いた。周りから財務を不安視されて懸念を持たれていることの裏返しように聞こえた。普通、投資会社なら投資の成果をもっとアピールすればいいと思えるが、財務の健全性をアピールするというのがおもしろおかしく聞こえた。arm が上場したにも関わらず、現在の株価と &lt;a href="https://group.softbank/ir/stock/sotp">1株当たりNAV情報&lt;/a> の差も前回の決算時よりも開いてしまったと説明していた気がする。それが市場の答えにも思えた。&lt;/p>
&lt;p>おそらく明日の寄り付きの価格は下がると推測するけれど、明日はマイナー SQ だし、この決算でどのぐらい下がるのか、やや楽しみ。11月中には空売りを返済してしまうつもり。&lt;/p>
&lt;h2 id="中間申告">中間申告&lt;/h2>
&lt;p>前期は黒字決算だったので自動的に中間申告が必要なのだと思い込んでいた。しかし、例年ならすでに納税のための通知やデータが届いているはずが一向に来ない。&lt;/p>
&lt;p>昨日、消費税の中間申告の通知が届いた。2年前から消費税を支払っているはずだけど、昨年は中間申告の通知が来てないような？まぁいいや。e-tax のメッセージボックスには中間申告のデータも届いていて、それを使って申告書を作成して pay-easy でそのまま納付した。作業時間は15分といったところ。中間申告はめっちゃ簡単。&lt;/p>
&lt;p>本題の法人税などの中間申告の通知が来ないので厳密な中間申告の条件について調べてみた。&lt;/p>
&lt;blockquote>
&lt;p>中間申告が必要なのは、前事業年度の法人税額が20万円を超える場合です。中間申告が必要となったとき、その提出期限と税金の納期限は、事業年度開始後6月を経過した日から2月以内です。なお、法人税の中間申告の対象となる人は、地方税（都道府県税、市町村民税、事業税等）についての申告も必要です。&lt;/p>
&lt;p>&lt;a href="https://keiriplus.jp/tips/houjinzei_cyukansinkoku/">法人税の中間申告とは？目的や申告方法を基礎から解説！ | 経理・会計業務を効率化「経理プラス」&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>法人税が20万円を超えないと中間申告は不要だという。前期の法人税を調べたら 187,800 円だった。これで法人税と地方法人税の中間申告は不要であることがわかった。&lt;/p>
&lt;blockquote>
&lt;p>また、事業年度が6カ月を超える法人で法人税の中間申告義務のある法人は、その事業年度開始の日から6カ月を経過した日から2カ月以内に原則として前事業年度の税額の半分の額を予定（中間）申告して納めます。&lt;/p>
&lt;p>&lt;a href="https://web.pref.hyogo.lg.jp/kk22/pa04_000000008.html">法人県民税・事業税、特別法人事業税・地方法人特別税&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>次に法人県民税も「法人税の中間申告義務のある法人」とあるので法人税の判定基準と同じになる。&lt;/p>
&lt;blockquote>
&lt;p>予定申告は、法人税において前事業年度の確定法人税額に前事業年度の月数で除し6を乗じて計算した金額が10万円以下の場合はその年度の申告の必要はありません。&lt;/p>
&lt;p>&lt;a href="https://www.city.kobe.lg.jp/a35984/kurashi/tax/houjin/200.html#unker6">神戸市：法人市民税に関するQ&amp;amp;A&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>実際に計算してみると、187,800 / 12 * 6 = 93,900 円となって10万円以下なので中間申告は必要ないとのこと。&lt;/p>
&lt;p>要約すると、あまり納税していない会社は中間申告しなくてよいってことだと理解できた。前期は iphone 14 pro, m2 macbook, 社用車、デスクトップマシンといろいろお金を使ったので納税額が少なかったみたい。&lt;/p></content></item><item><title>rbac なロールでの動的な権限チェック</title><link>/diary/posts/2023/1108/</link><pubDate>Wed, 08 Nov 2023 08:26:25 +0900</pubDate><guid>/diary/posts/2023/1108/</guid><description>23時に寝て何度か起きて7時に起きた。夜に作業するつもりが、メイドインアビス を見ながら寝落ちした。
ldap で認証したユーザーの権限管理 rbac なロール管理 の仕組みを api サーバーに実装した。初期実装したときは静的にリソース (url) に対して acl から権限が許可されているかどうかのみをチェックするだけでよかった。ldap で認証したユーザーは自分の情報は更新できるが、他人の情報は更新できないといったリクエスト単位に権限が許可されているかどうかをミドルウェアで判別したい。いわば、リクエスト時に動的にリソースの情報をチェックしないといけない。
いくつか試行錯誤して、あーでもないこーどもないとやった結果、次のように落ち着いた。
リソースは動的な権限チェックのために AuthorizeFunc を取得するための AuthorizeKey をもつ AuthorizeFunc は Context から取得する AuthorizeFunc が true を返す場合は権限を付与する func (r *Role) CanAccess(ctx context.Context, resourceName, target string) bool { for _, ac := range r.ACL { if ac.Resource.Match(resourceName) { for _, perm := range ac.Permissions { if perm.IsGranted(target) { return true } } if authorize, ok := ctx.Value(ac.Resource.Key).(AuthorizeFunc); ok { if authorize(ctx, resourceName, target) { return true } } } } return false } ロールに渡す Context にはあらかじめ、AuthorizeKey と AuthorizeFunc を登録しておく。</description><content>&lt;p>23時に寝て何度か起きて7時に起きた。夜に作業するつもりが、&lt;a href="http://miabyss.com/">メイドインアビス&lt;/a> を見ながら寝落ちした。&lt;/p>
&lt;h2 id="ldap-で認証したユーザーの権限管理">ldap で認証したユーザーの権限管理&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1026/">rbac なロール管理&lt;/a> の仕組みを api サーバーに実装した。初期実装したときは静的にリソース (url) に対して acl から権限が許可されているかどうかのみをチェックするだけでよかった。ldap で認証したユーザーは自分の情報は更新できるが、他人の情報は更新できないといったリクエスト単位に権限が許可されているかどうかをミドルウェアで判別したい。いわば、リクエスト時に動的にリソースの情報をチェックしないといけない。&lt;/p>
&lt;p>いくつか試行錯誤して、あーでもないこーどもないとやった結果、次のように落ち着いた。&lt;/p>
&lt;ul>
&lt;li>リソースは動的な権限チェックのために AuthorizeFunc を取得するための AuthorizeKey をもつ&lt;/li>
&lt;li>AuthorizeFunc は Context から取得する&lt;/li>
&lt;li>AuthorizeFunc が true を返す場合は権限を付与する&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">r&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">Role&lt;/span>) &lt;span style="color:#a6e22e">CanAccess&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>, &lt;span style="color:#a6e22e">resourceName&lt;/span>, &lt;span style="color:#a6e22e">target&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>) &lt;span style="color:#66d9ef">bool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">ac&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">r&lt;/span>.&lt;span style="color:#a6e22e">ACL&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Resource&lt;/span>.&lt;span style="color:#a6e22e">Match&lt;/span>(&lt;span style="color:#a6e22e">resourceName&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">perm&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Permissions&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">perm&lt;/span>.&lt;span style="color:#a6e22e">IsGranted&lt;/span>(&lt;span style="color:#a6e22e">target&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">authorize&lt;/span>, &lt;span style="color:#a6e22e">ok&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">ctx&lt;/span>.&lt;span style="color:#a6e22e">Value&lt;/span>(&lt;span style="color:#a6e22e">ac&lt;/span>.&lt;span style="color:#a6e22e">Resource&lt;/span>.&lt;span style="color:#a6e22e">Key&lt;/span>).(&lt;span style="color:#a6e22e">AuthorizeFunc&lt;/span>); &lt;span style="color:#a6e22e">ok&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">authorize&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">resourceName&lt;/span>, &lt;span style="color:#a6e22e">target&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ロールに渡す Context にはあらかじめ、AuthorizeKey と AuthorizeFunc を登録しておく。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ctx&lt;/span> = &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">WithValue&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">role&lt;/span>.&lt;span style="color:#a6e22e">LDAPResource&lt;/span>, &lt;span style="color:#a6e22e">role&lt;/span>.&lt;span style="color:#a6e22e">IsLDAPResourceOwner&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>リソースを生成するときに AuthorizeKey をセットしておく。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ldapUserResource&lt;/span> = &lt;span style="color:#a6e22e">rbac&lt;/span>.&lt;span style="color:#a6e22e">NewResource&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ldap-user-specific-operation&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;(/api/ldap/entry|/api/ldap/entry/.*)&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">LDAPResource&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ちょっと設定は煩雑になるが、ひとまずこれで要件を満たせた。&lt;/p></content></item><item><title>葛藤も逡巡もしない</title><link>/diary/posts/2023/1107/</link><pubDate>Tue, 07 Nov 2023 10:54:56 +0900</pubDate><guid>/diary/posts/2023/1107/</guid><description>2時に寝て4時に起きて6時に起きて7時半に起きた。意味なくあまりよく眠れなかった。自分の pr のレビュー待ちやリファクタリングと他人のデザインレビュー／コードレビューなど、いろいろ雑多なことをやって隙間の1日になった。
メイドインアビス 烈日の黄金郷 ちょっと時期は遅れていると思うけど、メイドインアビス の新しい作品が配信されているのに気付いた。晩ごはんを食べてから見始めたらおもしろくて、夜に別作業をするつもりが寝落ちするまで見続けてしまった。
劇場版「メイドインアビス」-深き魂の黎明- も何度もみた。好きな作品の1つだ。敵としてボンボルドというキャラクターが出てくるが、ボンボルドの在り方は一概に悪とか非道とか、サイコパスと断じられるものでもなく、なにか強い印象に残っていた。
今回の「烈日の黄金郷」においても敵でないが、ワズキャンというリーダーキャラクターが出てくる。メイドインアビスは、その世界観として死が身近な状況における強いリーダーシップを描いているようにみえる。それが世界観のせいなのか、作者の独特の感性なのか、その両方なのかはわからないが、とても特異なリーダーシップにみえてしまう。現代の生活や価値観から言えばサイコパスのようにみえるが、作品の世界観から言えば、強いリーダーシップと解釈できる。そのリーダーの選択、決断、思考、信念、潔さのどれもが淡々としたストーリーの展開をミステリアスなものにしている。
なぜか私はこの作品のちょっと特異なリーダーに共感するところがあっておもしろくみることができる。共感するところの1つに、メイドインアビスに出てくるリーダーは葛藤や逡巡をしない。括弧とした信念があるから仲間を犠牲にしても自責しない。それがある種の潔さや偽善を感じない爽快さにつながっていて私の価値観にあっているように思える。そう、失敗しても潔いのが私は好きなのだ。誰かの責任にもしないし、その結果で自暴自棄になったりもしない。なにが起きてもそれは自分の人生で受け入れていくしかない。メイドインアビスに出てくるリーダー像はまさにそれを体現しているように思う。</description><content>&lt;p>2時に寝て4時に起きて6時に起きて7時半に起きた。意味なくあまりよく眠れなかった。自分の pr のレビュー待ちやリファクタリングと他人のデザインレビュー／コードレビューなど、いろいろ雑多なことをやって隙間の1日になった。&lt;/p>
&lt;h2 id="メイドインアビス-烈日の黄金郷">メイドインアビス 烈日の黄金郷&lt;/h2>
&lt;p>ちょっと時期は遅れていると思うけど、&lt;a href="http://miabyss.com/index.html">メイドインアビス&lt;/a> の新しい作品が配信されているのに気付いた。晩ごはんを食べてから見始めたらおもしろくて、夜に別作業をするつもりが寝落ちするまで見続けてしまった。&lt;/p>
&lt;p>&lt;a href="http://miabyss.com/movie/">劇場版「メイドインアビス」-深き魂の黎明-&lt;/a> も何度もみた。好きな作品の1つだ。敵としてボンボルドというキャラクターが出てくるが、ボンボルドの在り方は一概に悪とか非道とか、サイコパスと断じられるものでもなく、なにか強い印象に残っていた。&lt;/p>
&lt;p>今回の「烈日の黄金郷」においても敵でないが、ワズキャンというリーダーキャラクターが出てくる。メイドインアビスは、その世界観として死が身近な状況における強いリーダーシップを描いているようにみえる。それが世界観のせいなのか、作者の独特の感性なのか、その両方なのかはわからないが、とても特異なリーダーシップにみえてしまう。現代の生活や価値観から言えばサイコパスのようにみえるが、作品の世界観から言えば、強いリーダーシップと解釈できる。そのリーダーの選択、決断、思考、信念、潔さのどれもが淡々としたストーリーの展開をミステリアスなものにしている。&lt;/p>
&lt;p>なぜか私はこの作品のちょっと特異なリーダーに共感するところがあっておもしろくみることができる。共感するところの1つに、メイドインアビスに出てくるリーダーは葛藤や逡巡をしない。括弧とした信念があるから仲間を犠牲にしても自責しない。それがある種の潔さや偽善を感じない爽快さにつながっていて私の価値観にあっているように思える。そう、失敗しても潔いのが私は好きなのだ。誰かの責任にもしないし、その結果で自暴自棄になったりもしない。なにが起きてもそれは自分の人生で受け入れていくしかない。メイドインアビスに出てくるリーダー像はまさにそれを体現しているように思う。&lt;/p></content></item><item><title>考えないという傷のある現場</title><link>/diary/posts/2023/1106/</link><pubDate>Mon, 06 Nov 2023 08:32:47 +0900</pubDate><guid>/diary/posts/2023/1106/</guid><description>2時に寝て7時半に起きた。昨日からよく寝た。また心機一転。
ldap エントリーの crud api 先週から ldap クライアントや そのプール を実装して結合テストも一通り書いていた。今日はそれらを使った crud な web api を一通り実装した。クライアント実装もテストもしっかり出来ているので後は時間の問題で1つずつ確認しながらコードを書いていくだけだった。こういう作業になると、まとまった時間があればすぐに終わる。他のメンバーのコードレビューをみたり、設計の話しをしたり、他に意識を取られてあまり自分の作業に集中できなかった。
言葉が通じないもどかしさ 先週「参考にして」と指示したものが「全コピー」で驚いてしまった。私がいくつか指摘したらすぐに削除し始めてさらに落胆した。自分の頭で考えて作業していないようにみえる。
開発というお仕事は自分で考えて、コードの1つ1つに明確な意図や根拠をもって書くものだ。もちろん、情報不足や設計に自信がもてなくて一時的に曖昧な実装にするときもあるけれど、それは懸念事項として把握しておくことで将来対応すればよい。基本的に追加するコードにはすべて意味がある。
他人が分からなくても自分が理解できているのなら、自分の考えを説明し、それが論理的であったり筋が通っていれば、私は自分の考えと違っていても構わない。説明できないコードを追加して、ツッコミを受けてなにも説明できない状況をみているのは本当に悲しい。
山田ズーニーさんの著書に書いてあった「考えないという傷」を思い出した。
「働きたくない」というあなたへ ７</description><content>&lt;p>2時に寝て7時半に起きた。昨日からよく寝た。また心機一転。&lt;/p>
&lt;h2 id="ldap-エントリーの-crud-api">ldap エントリーの crud api&lt;/h2>
&lt;p>先週から ldap クライアントや &lt;a href="/diary/diary/posts/2023/1102/#コネクションを共有しないプール">そのプール&lt;/a> を実装して結合テストも一通り書いていた。今日はそれらを使った crud な web api を一通り実装した。クライアント実装もテストもしっかり出来ているので後は時間の問題で1つずつ確認しながらコードを書いていくだけだった。こういう作業になると、まとまった時間があればすぐに終わる。他のメンバーのコードレビューをみたり、設計の話しをしたり、他に意識を取られてあまり自分の作業に集中できなかった。&lt;/p>
&lt;h2 id="言葉が通じないもどかしさ">言葉が通じないもどかしさ&lt;/h2>
&lt;p>先週「参考にして」と指示したものが「全コピー」で驚いてしまった。私がいくつか指摘したらすぐに削除し始めてさらに落胆した。自分の頭で考えて作業していないようにみえる。&lt;/p>
&lt;p>開発というお仕事は自分で考えて、コードの1つ1つに明確な意図や根拠をもって書くものだ。もちろん、情報不足や設計に自信がもてなくて一時的に曖昧な実装にするときもあるけれど、それは懸念事項として把握しておくことで将来対応すればよい。基本的に追加するコードにはすべて意味がある。&lt;/p>
&lt;p>他人が分からなくても自分が理解できているのなら、自分の考えを説明し、それが論理的であったり筋が通っていれば、私は自分の考えと違っていても構わない。説明できないコードを追加して、ツッコミを受けてなにも説明できない状況をみているのは本当に悲しい。&lt;/p>
&lt;p>山田ズーニーさんの著書に書いてあった「考えないという傷」を思い出した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.1101.com/essay/2010-03-17.html">「働きたくない」というあなたへ ７&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>秋休み3</title><link>/diary/posts/2023/1105/</link><pubDate>Sun, 05 Nov 2023 08:32:45 +0900</pubDate><guid>/diary/posts/2023/1105/</guid><description>2時に寝て何度か起きて8時に起きた。休むつもりはなかったのだけれども、お昼までゆっくりしていたら、今日はもういっかと思ってそのままお休みすることにした。疲れていたのかもしれない。1日のんびりしていた。</description><content>&lt;p>2時に寝て何度か起きて8時に起きた。休むつもりはなかったのだけれども、お昼までゆっくりしていたら、今日はもういっかと思ってそのままお休みすることにした。疲れていたのかもしれない。1日のんびりしていた。&lt;/p></content></item><item><title>筋肉痛の翌日</title><link>/diary/posts/2023/1104/</link><pubDate>Sat, 04 Nov 2023 12:50:02 +0900</pubDate><guid>/diary/posts/2023/1104/</guid><description>昨日は山登りで筋肉痛になって夕方からずっと寝ていて7時に起きて8時半に起きた。それでも寝たら筋肉痛はある程度は直った。寝ると回復するもんや。
ストレッチ 昨日から全身筋肉痛になっている。それでも夕方からずっと安静にしていたせいか、昨日の一番ひどかった頃よりずっと回復していた。さらにストレッチでそういった話しをしたら、トレーナーさんも筋肉痛を気遣った形でストレッチをしてくれた。筋肉痛の状態だと筋肉は伸びないらしい。あまり筋を押さず、ほぐすようなストレッチにしてくれたという。筋肉痛にも関わらず、いつもよりも関節や筋肉の負荷が小さかったように思える。今日の開脚幅は開始前153cmで、ストレッチ後155cmだった。
カフーツさん訪問 たまたま見かけたので ブログJelly Vol.135 に参加してきた。瑞祥 黒松剣菱 というお酒をもっていった。こういうイベントで灘のお酒を飲む機会にしようと思ったものの、今回は周りの人たちにあわせてワインとビールを飲むだけで終わってしまった。次回のイベントのときに飲みましょうとお酒を置いてきた。私自身、家で日本酒を飲まない。カジュアルに日本酒を飲もうという空気や雰囲気がない。入り口を変えるため、日本酒にあう食事やつまみも用意していくのがよいと気付いた。次回は日本酒向けの食べものをもっていこうと思う。
昨日の山登りの下山中もマネジメントや気付きについて2時間ほど一緒に行った人たちと話していた。ここでもお酒が入ったらその延長の話しをだらだらやってしまった。気付きがないという事象に対して、どうやれば気付きを得られるようになるか、その背景や変化、人の特性・性格・成長などについて、私はいま関心をもっている。人に依るというのも多分にあると思う。教えてできることなのかどうかすら、私はわかっていない。私の立場としては、仕組みとプラクティスで気付きを与えて、教育によって成長することを願いたい。
いとうさんに note のオンラインコンテンツの領収書にインボイスの登録番号を設定してほしいとお願いした。さらにコワーキングスペースのサービス料がいま1,000円になっている。よくみると、90円の消費税を含んで税込み価格になっている。こういうとき、1,000円をサービス料、100円を消費税、税込みで1,100円にすればいいとアドバイスした。次回からそうするといとうさんも話されていた。免税事業者が課税事業者になっても事業者の損益には影響を与えない状態を支持したい。
インボイスの少額特例 freee の「修正待ちリスト一覧」にインボイスの少額特例に該当する明細があるという通知が出ている。次の条件に当てはまる事業者は少額特例の対象になるという。
「前々年度の課税売上高が1億円以下」または「前年度の開始から6ヶ月間の課税売上高が5,000万円以下」のどちらかに当てはまる事業者で、税込1万円未満の仕入や経費は、インボイス（適格請求書）があるかどうかにかかわらず仕入税額を控除できます。
少額特例（一定規模以下の事業者に対する事務負担の軽減措置の概要）の概要 うちは消費税の申告に 簡易課税制度 を選択しているため、事実上、インボイスの有無で消費税の仕入れ控除に影響はない。実際の消費税の納税には影響を与えないが、税制の理解を深めるために取引明細や税区分の処理などをちゃんと記帳しようとは考えている。将来的に簡易課税制度が廃止されたり、その条件を満たさないようになる可能性もある。消費税のようなシンプルな税金にも関わらず、事業者は本質的に損益に影響を与えないものにも関わらず、取引先との関係、政治や社会的な事情によって税制が混乱している。
消費税の逆進性についての問題も見聞きはする。次の記事では生活必需品に低い税率を適用することで緩和するという対策を述べている。さまざまな条件で時限的な特例を多重に発令するよりも、すでに軽減税率があるのだから食品は5%にするとか、そういったシンプルな税制で対策を取れないのだろうかと考えてしまう。
消費税の逆進性は大問題か？</description><content>&lt;p>昨日は山登りで筋肉痛になって夕方からずっと寝ていて7時に起きて8時半に起きた。それでも寝たら筋肉痛はある程度は直った。寝ると回復するもんや。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>昨日から全身筋肉痛になっている。それでも夕方からずっと安静にしていたせいか、昨日の一番ひどかった頃よりずっと回復していた。さらにストレッチでそういった話しをしたら、トレーナーさんも筋肉痛を気遣った形でストレッチをしてくれた。筋肉痛の状態だと筋肉は伸びないらしい。あまり筋を押さず、ほぐすようなストレッチにしてくれたという。筋肉痛にも関わらず、いつもよりも関節や筋肉の負荷が小さかったように思える。今日の開脚幅は開始前153cmで、ストレッチ後155cmだった。&lt;/p>
&lt;h2 id="カフーツさん訪問">カフーツさん訪問&lt;/h2>
&lt;p>たまたま見かけたので &lt;a href="https://www.facebook.com/events/302759626024469">ブログJelly Vol.135&lt;/a> に参加してきた。&lt;a href="https://www.kenbishi.co.jp/product/sake5/">瑞祥 黒松剣菱&lt;/a> というお酒をもっていった。こういうイベントで灘のお酒を飲む機会にしようと思ったものの、今回は周りの人たちにあわせてワインとビールを飲むだけで終わってしまった。次回のイベントのときに飲みましょうとお酒を置いてきた。私自身、家で日本酒を飲まない。カジュアルに日本酒を飲もうという空気や雰囲気がない。入り口を変えるため、日本酒にあう食事やつまみも用意していくのがよいと気付いた。次回は日本酒向けの食べものをもっていこうと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1104_sake.jpg"/>
&lt;/figure>
&lt;p>昨日の山登りの下山中もマネジメントや気付きについて2時間ほど一緒に行った人たちと話していた。ここでもお酒が入ったらその延長の話しをだらだらやってしまった。気付きがないという事象に対して、どうやれば気付きを得られるようになるか、その背景や変化、人の特性・性格・成長などについて、私はいま関心をもっている。人に依るというのも多分にあると思う。教えてできることなのかどうかすら、私はわかっていない。私の立場としては、仕組みとプラクティスで気付きを与えて、教育によって成長することを願いたい。&lt;/p>
&lt;p>いとうさんに note のオンラインコンテンツの領収書にインボイスの登録番号を設定してほしいとお願いした。さらにコワーキングスペースのサービス料がいま1,000円になっている。よくみると、90円の消費税を含んで税込み価格になっている。こういうとき、1,000円をサービス料、100円を消費税、税込みで1,100円にすればいいとアドバイスした。次回からそうするといとうさんも話されていた。免税事業者が課税事業者になっても事業者の損益には影響を与えない状態を支持したい。&lt;/p>
&lt;h2 id="インボイスの少額特例">インボイスの少額特例&lt;/h2>
&lt;p>freee の「修正待ちリスト一覧」にインボイスの少額特例に該当する明細があるという通知が出ている。次の条件に当てはまる事業者は少額特例の対象になるという。&lt;/p>
&lt;blockquote>
&lt;p>「前々年度の課税売上高が1億円以下」または「前年度の開始から6ヶ月間の課税売上高が5,000万円以下」のどちらかに当てはまる事業者で、税込1万円未満の仕入や経費は、インボイス（適格請求書）があるかどうかにかかわらず仕入税額を控除できます。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://www.nta.go.jp/publication/pamph/shohi/kaisei/202304/02.htm">少額特例（一定規模以下の事業者に対する事務負担の軽減措置の概要）の概要&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>うちは消費税の申告に &lt;a href="https://www.nta.go.jp/taxes/shiraberu/taxanswer/shohi/6505.htm">簡易課税制度&lt;/a> を選択しているため、事実上、インボイスの有無で消費税の仕入れ控除に影響はない。実際の消費税の納税には影響を与えないが、税制の理解を深めるために取引明細や税区分の処理などをちゃんと記帳しようとは考えている。将来的に簡易課税制度が廃止されたり、その条件を満たさないようになる可能性もある。消費税のようなシンプルな税金にも関わらず、事業者は本質的に損益に影響を与えないものにも関わらず、取引先との関係、政治や社会的な事情によって税制が混乱している。&lt;/p>
&lt;p>消費税の逆進性についての問題も見聞きはする。次の記事では生活必需品に低い税率を適用することで緩和するという対策を述べている。さまざまな条件で時限的な特例を多重に発令するよりも、すでに軽減税率があるのだから食品は5%にするとか、そういったシンプルな税制で対策を取れないのだろうかと考えてしまう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.nli-research.co.jp/report/detail/id=39892?site=nli">消費税の逆進性は大問題か？&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>ハイキング山登り</title><link>/diary/posts/2023/1103/</link><pubDate>Fri, 03 Nov 2023 08:50:00 +0900</pubDate><guid>/diary/posts/2023/1103/</guid><description>4時に寝て8時に起きた。久しぶりに深夜過ぎまでコードを書いて、あと文章を書いて、気付いたら3時をまわっていた。
新神戸駅からのハイキング 新神戸駅に10時集合、遅刻もあって少し出発は遅れたが、10時半には駅を出発した。駅を出たらすぐに登山道に入れる。これはすごい立地だと思う。通常、登山道までは市街地から1-2時間かけて移動することが多いと思う。新神戸駅という市街地からすぐに山登りできるというのは神戸観光の1つとして十分によいと思えた。11月としては高めの最高気温23℃とやや暑いぐらいだったが、山登りにはちょうどいい気候だった。寒い時期や暑い時期を避けるという意味で11月はよい時期の選択にみえる。まだ暖かいせいか、紅葉は始まったばかりで、もう少し遅い時期だと紅葉も楽しめてよいかもしれない。
トレイルステーション 布引の滝 (雄滝) ハイキングマップの B 布引ゾーンは、山道もコンクリートで舗装されていて歩きやすい。布引の滝は雌と雄の2つがあり、雄滝は整備されているのもあって観光向けになっている。
布引五本松堰堤 ダムの1つ。周囲をぐるっと回りながらハイキングを続ける。この辺りも舗装された道路が続くので初心者向けコースの延長にある。紅葉はほとんどなかった。
再度山 (ふたたびやま) 山頂 大龍寺から30分ぐらいかな？ここは初心者向けではなく、やや険しい山道を登っていく必要がある。道路は整備されなくて、かろうじて1人が歩けるような狭い山道を、所々、よじ登るような感覚でやや体力がいる。体力のない人や子どもはちょっと難しいと思う。私がいっぱいいっぱいだったので (山登りに慣れていない) 高齢な人には無理だと思う。山頂には 470m という置きものがあって神戸の町並みを展望できる。ここまでは舗装された道路のハイキングなので山登りが好きな人はこのぐらいの負荷をかけた方が楽しめるかもしれない。
山頂から下って再度山公園へ到着した。上るのが山道だったから下るのも山道で、下手すると崖から滑ってしまうので降りるのも注意が必要になる。
再度山公園 ここは車でも来れるそうで、のどかな公園になっていた。紅葉もちらほらみえて、あと2-3週間したらよい時期かもしれない。また車でも行ってみようかと思う。ここで休憩しているときに13時をまわっていたと思う。登りは所々でうちらは休憩をとってゆっくり進んでいたので一般よりは遅いペースだったと思う。
下山 ここからは一気に下山してきた。なだらかな下りがずっと続くコースだったので体力的にはそうしんどくなく一気に降りてきた。だいたい2時間ぐらいで県庁駅まで来れた。そこで15時ぐらいになっていた。これはこれで山道を眺めながら歩くのも気持ちがよいし、登る方が好きな人はもっと登ってロープウェイで降りてくるというのもよいかもしれない。私は太ももの負荷が限界なぐらい体力的にしんどかったのでこのぐらいの行程が限界だというのもわかってよかった。歩ける距離としては3時間程度を目安に、なだらかなハイキングコースを探すとよさそうに思う。</description><content>&lt;p>4時に寝て8時に起きた。久しぶりに深夜過ぎまでコードを書いて、あと文章を書いて、気付いたら3時をまわっていた。&lt;/p>
&lt;h2 id="新神戸駅からのハイキング">新神戸駅からのハイキング&lt;/h2>
&lt;p>新神戸駅に10時集合、遅刻もあって少し出発は遅れたが、10時半には駅を出発した。駅を出たらすぐに登山道に入れる。これはすごい立地だと思う。通常、登山道までは市街地から1-2時間かけて移動することが多いと思う。新神戸駅という市街地からすぐに山登りできるというのは神戸観光の1つとして十分によいと思えた。11月としては高めの最高気温23℃とやや暑いぐらいだったが、山登りにはちょうどいい気候だった。寒い時期や暑い時期を避けるという意味で11月はよい時期の選択にみえる。まだ暖かいせいか、紅葉は始まったばかりで、もう少し遅い時期だと紅葉も楽しめてよいかもしれない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kobe-rokko.jp/toreko/">トレイルステーション&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="布引の滝-雄滝">布引の滝 (雄滝)&lt;/h4>
&lt;p>ハイキングマップの B 布引ゾーンは、山道もコンクリートで舗装されていて歩きやすい。布引の滝は雌と雄の2つがあり、雄滝は整備されているのもあって観光向けになっている。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_waterfall.jpg"/>
&lt;/figure>
&lt;h4 id="布引五本松堰堤">布引五本松堰堤&lt;/h4>
&lt;p>ダムの1つ。周囲をぐるっと回りながらハイキングを続ける。この辺りも舗装された道路が続くので初心者向けコースの延長にある。紅葉はほとんどなかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_dam.jpg"/>
&lt;/figure>
&lt;h4 id="再度山-ふたたびやま-山頂">再度山 (ふたたびやま) 山頂&lt;/h4>
&lt;p>大龍寺から30分ぐらいかな？ここは初心者向けではなく、やや険しい山道を登っていく必要がある。道路は整備されなくて、かろうじて1人が歩けるような狭い山道を、所々、よじ登るような感覚でやや体力がいる。体力のない人や子どもはちょっと難しいと思う。私がいっぱいいっぱいだったので (山登りに慣れていない) 高齢な人には無理だと思う。山頂には 470m という置きものがあって神戸の町並みを展望できる。ここまでは舗装された道路のハイキングなので山登りが好きな人はこのぐらいの負荷をかけた方が楽しめるかもしれない。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_mountain.jpg"/>
&lt;/figure>
&lt;p>山頂から下って再度山公園へ到着した。上るのが山道だったから下るのも山道で、下手すると崖から滑ってしまうので降りるのも注意が必要になる。&lt;/p>
&lt;h4 id="再度山公園">再度山公園&lt;/h4>
&lt;p>ここは車でも来れるそうで、のどかな公園になっていた。紅葉もちらほらみえて、あと2-3週間したらよい時期かもしれない。また車でも行ってみようかと思う。ここで休憩しているときに13時をまわっていたと思う。登りは所々でうちらは休憩をとってゆっくり進んでいたので一般よりは遅いペースだったと思う。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1103_park.jpg"/>
&lt;/figure>
&lt;h4 id="下山">下山&lt;/h4>
&lt;p>ここからは一気に下山してきた。なだらかな下りがずっと続くコースだったので体力的にはそうしんどくなく一気に降りてきた。だいたい2時間ぐらいで県庁駅まで来れた。そこで15時ぐらいになっていた。これはこれで山道を眺めながら歩くのも気持ちがよいし、登る方が好きな人はもっと登ってロープウェイで降りてくるというのもよいかもしれない。私は太ももの負荷が限界なぐらい体力的にしんどかったのでこのぐらいの行程が限界だというのもわかってよかった。歩ける距離としては3時間程度を目安に、なだらかなハイキングコースを探すとよさそうに思う。&lt;/p></content></item><item><title>論理の通じない人たち</title><link>/diary/posts/2023/1102/</link><pubDate>Thu, 02 Nov 2023 12:59:43 +0900</pubDate><guid>/diary/posts/2023/1102/</guid><description>23時に寝て何度か起きて8時に起きた。ホテルの部屋が暗いと朝になった気がしなくて2度寝したら寝坊した。
組織の対応と sns の議論 先日の sns 騒ぎ の続き。公式からの声明も出たので軽くまとめておく。
PyCon APAC 2023におけるNOCコンテンツに関するご指摘について 簡潔な文章に事実の記述、責任の所在、関係者への配慮が含まれていて十分な内容にみえる。法律なども関係するため、弁護士チェックが必要なことを考慮すると、こんな短期間で組織の見解を出せたことは運営側の体制を鑑みることができる。それが適正かどうかは人によって判断は異なるかもしれないが、私はコミュニティ運営というボランティア主体の組織であれば十分なものだと思えた。その後のネット上の議論も、ちゃんと終えてはいないが、様々な見解で議論は進んでいるようにみえる。
今回みていて感じたことの1つに、コミュニケーションが成り立たない人が世の中にはたくさんいるということ。議論の前提や論理の出発点が異なる人たちは、一定の論理を含む全体や大局を理解できず、細部や詳細のところだけを拠り所に自身の論理を組み立てる。意見の差異があることはなんら問題はないが、論理が通じないのは議論の余地すらないようにみえた。そういう人たちを会話するときは前提条件を同じにしたり、思想の背景を共有したり、もっと時間をかけて丁寧にすり合わせていく作業が必要になる。そして sns のような、流れが速い不特定多数の議論はそういった丁寧な作業にまったく向いていない。だから sns で議論することは時間の無駄である。
コネクションを共有しないプール go の非同期処理であまり使われることはないが、semaphore が準公式ライブラリとして提供されている。私はセマフォを気に入っていてたまに使う。
ldap プロトコルではコネクションの確立とログインに相当する bind の操作が分かれている。コネクションを確立したまま、ログアウトに相当する処理ができればプールを設けることでコネクションの再利用ができる。
The LDAP Unbind Operation しかし、このドキュメントの説明によると、unbind という操作は用意されているものの、ログアウトに相当する機能ではなく、クローズする前に通知するといった用途だと書いてある。unbind のリクエストをした後にはクローズするしかないといったものになる。それを踏まえて、プールはセマフォで同時接続数のみを制御するのでよいのではないかと思う。そんなワーカープールを実装してみた。
type ClientPool struct { config *config.LDAP sem *semaphore.Weighted } func (p *ClientPool) Get( ctx context.Context, ) (*LDAPClient, error) { if !p.sem.TryAcquire(1) { return nil, fmt.Errorf(&amp;#34;failed to acquire, wait and get later&amp;#34;) } client := NewLDAPClient(p.config) if err := client.</description><content>&lt;p>23時に寝て何度か起きて8時に起きた。ホテルの部屋が暗いと朝になった気がしなくて2度寝したら寝坊した。&lt;/p>
&lt;h2 id="組織の対応と-sns-の議論">組織の対応と sns の議論&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/1030/">先日の sns 騒ぎ&lt;/a> の続き。公式からの声明も出たので軽くまとめておく。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://pyconjp.blogspot.com/2023/11/pyconapac2023-statement.html">PyCon APAC 2023におけるNOCコンテンツに関するご指摘について&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>簡潔な文章に事実の記述、責任の所在、関係者への配慮が含まれていて十分な内容にみえる。法律なども関係するため、弁護士チェックが必要なことを考慮すると、こんな短期間で組織の見解を出せたことは運営側の体制を鑑みることができる。それが適正かどうかは人によって判断は異なるかもしれないが、私はコミュニティ運営というボランティア主体の組織であれば十分なものだと思えた。その後のネット上の議論も、ちゃんと終えてはいないが、様々な見解で議論は進んでいるようにみえる。&lt;/p>
&lt;p>今回みていて感じたことの1つに、コミュニケーションが成り立たない人が世の中にはたくさんいるということ。議論の前提や論理の出発点が異なる人たちは、一定の論理を含む全体や大局を理解できず、細部や詳細のところだけを拠り所に自身の論理を組み立てる。意見の差異があることはなんら問題はないが、論理が通じないのは議論の余地すらないようにみえた。そういう人たちを会話するときは前提条件を同じにしたり、思想の背景を共有したり、もっと時間をかけて丁寧にすり合わせていく作業が必要になる。そして sns のような、流れが速い不特定多数の議論はそういった丁寧な作業にまったく向いていない。だから sns で議論することは時間の無駄である。&lt;/p>
&lt;h2 id="コネクションを共有しないプール">コネクションを共有しないプール&lt;/h2>
&lt;p>go の非同期処理であまり使われることはないが、&lt;a href="https://pkg.go.dev/golang.org/x/sync/semaphore">semaphore&lt;/a> が準公式ライブラリとして提供されている。私はセマフォを気に入っていてたまに使う。&lt;/p>
&lt;p>ldap プロトコルではコネクションの確立とログインに相当する bind の操作が分かれている。コネクションを確立したまま、ログアウトに相当する処理ができればプールを設けることでコネクションの再利用ができる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ldap.com/the-ldap-unbind-operation/">The LDAP Unbind Operation&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>しかし、このドキュメントの説明によると、unbind という操作は用意されているものの、ログアウトに相当する機能ではなく、クローズする前に通知するといった用途だと書いてある。unbind のリクエストをした後にはクローズするしかないといったものになる。それを踏まえて、プールはセマフォで同時接続数のみを制御するのでよいのではないかと思う。そんなワーカープールを実装してみた。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">ClientPool&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">config&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">LDAP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sem&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">semaphore&lt;/span>.&lt;span style="color:#a6e22e">Weighted&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">Get&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) (&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> !&lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">TryAcquire&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to acquire, wait and get later&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">client&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">NewLDAPClient&lt;/span>(&lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Connect&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to connect: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">GetAuthenticated&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) (&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">Get&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to get: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dn&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">BindDN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">passwd&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">BindPasswd&lt;/span>.&lt;span style="color:#a6e22e">String&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Bind&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span>, &lt;span style="color:#a6e22e">dn&lt;/span>, &lt;span style="color:#a6e22e">passwd&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to bind: %w&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">p&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>) &lt;span style="color:#a6e22e">Close&lt;/span>(&lt;span style="color:#a6e22e">client&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">LDAPClient&lt;/span>) &lt;span style="color:#66d9ef">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">p&lt;/span>.&lt;span style="color:#a6e22e">sem&lt;/span>.&lt;span style="color:#a6e22e">Release&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">NewClientPool&lt;/span>(&lt;span style="color:#a6e22e">cfg&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">LDAP&lt;/span>) &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">ClientPool&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">config&lt;/span>: &lt;span style="color:#a6e22e">cfg&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sem&lt;/span>: &lt;span style="color:#a6e22e">semaphore&lt;/span>.&lt;span style="color:#a6e22e">NewWeighted&lt;/span>(&lt;span style="color:#a6e22e">cfg&lt;/span>.&lt;span style="color:#a6e22e">ClientPoolSize&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item><item><title>穴場のビアバー</title><link>/diary/posts/2023/1101/</link><pubDate>Wed, 01 Nov 2023 08:44:08 +0900</pubDate><guid>/diary/posts/2023/1101/</guid><description>0時に寝て何度か起きて6時半に起きた。移動日の疲れもあってか、いつもよりよく眠れた気がする。
朝食バイキング 先々月から大崎探索 をしていて ニューオータニイン東京 に泊まってみた。川沿いの道を歩きながら朝食バイキングもおいしい。食品の品数があると満足度が高い。
プロジェクトの進捗報告 出張したときの月例報告の11回目。前回の進捗報告はこちら 。
まだ開発の序盤なので 事前に準備した資料 の内容を一通り終えて雑談の時間も多かったように思う。3回目の開発フェーズになるのもあり、メンバーの練度も上がって、開発の手際はかなりよくなっているように私からはみえている。それらも含めて、メンバーが自律的に issue を作ったり、タスクを自分に割り当てたりしながら開発が進むようになっていると報告した。プロジェクトオーナーからも、最近のマイルストーン定例をみていて、メンバーが気付きが増えている、自律的によくないところを改善しようという意思がみえるといった話題も出ていた。課題管理のプラクティスを実践してきて、着実によい開発者の習慣を身につけて、よい開発チームに育ってきているように、私からもみえている。あとは課題管理についてのコンテンツを私が書かないといけないのを、バーンナウトの影響もあってか、先月はさぼってしまっていたので、今月こそなんか書きますと、自分を追い込む意図でもその場で話題にした。
mongo とトランザクションとレプリカセット mongo には トランザクション の機能が提供されている。しかし、トランザクションを使うためには レプリケーション を有効にしないといけない。レプリケーションは通常は複数台のマシンでクラスタリングを構築するものになる。うちらはシングルノードの mongo を扱っているのでレプリケーションを必要としていない。それでも、ドキュメントを読んでいると、スタンドアローンでも本番環境ではレプリカセットを使う方がよいといった説明もみつかる。
Convert a Standalone mongod to a Replica Set ちょうど開発の要件としてトランザクションを必要とする状況も出てきた。mongo のレプリケーションやトランザクションの仕組みを理解するよい機会かもしれない。11月中には調査したいというところ。
エビスバー 大崎探検の2日目。YEBISU BAR 大崎店 へ行ってみた。大崎駅横の駅ビルの2階にある。アクセスもよい。水曜日なのに20-21時半ぐらいまでいて、お客さんは3組ぐらしかいなかった。よい意味で空いてて静かにゆっくり飲めてよかった。穴場のバーをみつけた。ビール2杯とつまみ2品でちょうど3000円程度。ちょっと割高かもしれないけど、場所とお店の雰囲気とゆっくりできたことを考慮するとちょうどよい価格帯にも思える。またゆっくり軽く飲みたいときに行こうと思う。</description><content>&lt;p>0時に寝て何度か起きて6時半に起きた。移動日の疲れもあってか、いつもよりよく眠れた気がする。&lt;/p>
&lt;h2 id="朝食バイキング">朝食バイキング&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0919/#大崎に泊まる">先々月から大崎探索&lt;/a> をしていて &lt;a href="https://www.newotani-inntokyo.jp/">ニューオータニイン東京&lt;/a> に泊まってみた。川沿いの道を歩きながら朝食バイキングもおいしい。食品の品数があると満足度が高い。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_breakfast.jpg"/>
&lt;/figure>
&lt;h2 id="プロジェクトの進捗報告">プロジェクトの進捗報告&lt;/h2>
&lt;p>出張したときの月例報告の11回目。&lt;a href="/diary/diary/posts/2023/0920/">前回の進捗報告はこちら&lt;/a> 。&lt;/p>
&lt;p>まだ開発の序盤なので &lt;a href="/diary/diary/posts/2023/1028/#近況報告の資料作り">事前に準備した資料&lt;/a> の内容を一通り終えて雑談の時間も多かったように思う。3回目の開発フェーズになるのもあり、メンバーの練度も上がって、開発の手際はかなりよくなっているように私からはみえている。それらも含めて、メンバーが自律的に issue を作ったり、タスクを自分に割り当てたりしながら開発が進むようになっていると報告した。プロジェクトオーナーからも、最近のマイルストーン定例をみていて、メンバーが気付きが増えている、自律的によくないところを改善しようという意思がみえるといった話題も出ていた。課題管理のプラクティスを実践してきて、着実によい開発者の習慣を身につけて、よい開発チームに育ってきているように、私からもみえている。あとは課題管理についてのコンテンツを私が書かないといけないのを、バーンナウトの影響もあってか、先月はさぼってしまっていたので、今月こそなんか書きますと、自分を追い込む意図でもその場で話題にした。&lt;/p>
&lt;h2 id="mongo-とトランザクションとレプリカセット">mongo とトランザクションとレプリカセット&lt;/h2>
&lt;p>mongo には &lt;a href="https://www.mongodb.com/docs/manual/core/transactions/">トランザクション&lt;/a> の機能が提供されている。しかし、トランザクションを使うためには &lt;a href="https://www.mongodb.com/docs/v7.0/replication/">レプリケーション&lt;/a> を有効にしないといけない。レプリケーションは通常は複数台のマシンでクラスタリングを構築するものになる。うちらはシングルノードの mongo を扱っているのでレプリケーションを必要としていない。それでも、ドキュメントを読んでいると、スタンドアローンでも本番環境ではレプリカセットを使う方がよいといった説明もみつかる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.mongodb.com/docs/manual/tutorial/convert-standalone-to-replica-set/">Convert a Standalone mongod to a Replica Set&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ちょうど開発の要件としてトランザクションを必要とする状況も出てきた。mongo のレプリケーションやトランザクションの仕組みを理解するよい機会かもしれない。11月中には調査したいというところ。&lt;/p>
&lt;h2 id="エビスバー">エビスバー&lt;/h2>
&lt;p>大崎探検の2日目。&lt;a href="https://www.ginzalion.jp/shop/brand/yebisubar/shop60.html">YEBISU BAR 大崎店&lt;/a> へ行ってみた。大崎駅横の駅ビルの2階にある。アクセスもよい。水曜日なのに20-21時半ぐらいまでいて、お客さんは3組ぐらしかいなかった。よい意味で空いてて静かにゆっくり飲めてよかった。穴場のバーをみつけた。ビール2杯とつまみ2品でちょうど3000円程度。ちょっと割高かもしれないけど、場所とお店の雰囲気とゆっくりできたことを考慮するとちょうどよい価格帯にも思える。またゆっくり軽く飲みたいときに行こうと思う。&lt;/p>
&lt;p>&lt;figure>&lt;img src="/diary/diary/img/2023/1101_beer.jpg"/>
&lt;/figure>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_salad.jpg"/>
&lt;/figure>
&lt;figure>&lt;img src="/diary/diary/img/2023/1101_potate.jpg"/>
&lt;/figure>
&lt;/p></content></item></channel></rss>