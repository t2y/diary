<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2023/06 on forest nook</title><link>/diary/dates/2023/06/</link><description>Recent content in 2023/06 on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/dates/2023/06/index.xml" rel="self" type="application/rss+xml"/><item><title>クラウド経由で tapo を制御する方法がわからない</title><link>/diary/posts/2023/0618/</link><pubDate>Sun, 18 Jun 2023 12:35:35 +0900</pubDate><guid>/diary/posts/2023/0618/</guid><description>0時に寝て7時に起きて8時過ぎまでだらだらしてた。オフィスのエアコンの効き具合がよくなくて昼間暑くてやる気にならなかった。
tp-link cloud api で tapo の制御を調べる 先日 ifttt で tapo p105 の制御 を行った。これが動くということはなんらかのクラウドの api 経由で tapo p105 を制御できている。次の記事をみながらやってみようと試してみた。結論から言ってクラウドの api 経由ではできなかった。
TP-Link cloud APIを使ってみる アクセストークンを取得する。terminalUUID は適当に生成すればよい。
$ curl -s -X POST -H &amp;#34;Content-Type: application/json&amp;#34; -d &amp;#39;{&amp;#34;method&amp;#34;: &amp;#34;login&amp;#34;, &amp;#34;params&amp;#34;: {&amp;#34;appType&amp;#34;: &amp;#34;iphone&amp;#34;, &amp;#34;cloudUserName&amp;#34;: &amp;#34;register@kazamori.jp&amp;#34;, &amp;#34;cloudPassword&amp;#34;: &amp;#34;***&amp;#34;, &amp;#34;terminalUUID&amp;#34;: &amp;#34;bf63e1d0-d5dc-4636-abf1-7eeada585935&amp;#34;}}&amp;#39; https://wap.tplinkcloud.com/ | jq . { &amp;#34;error_code&amp;#34;: 0, &amp;#34;result&amp;#34;: { &amp;#34;accountId&amp;#34;: &amp;#34;142785160&amp;#34;, &amp;#34;regTime&amp;#34;: &amp;#34;2023-06-11 04:59:43&amp;#34;, &amp;#34;countryCode&amp;#34;: &amp;#34;JP&amp;#34;, &amp;#34;riskDetected&amp;#34;: 0, &amp;#34;email&amp;#34;: &amp;#34;register@kazamori.jp&amp;#34;, &amp;#34;token&amp;#34;: &amp;#34;***-***&amp;#34; } } ここで取得したアクセストークンを使ってデバイスの一覧を取得する。</description><content>&lt;p>0時に寝て7時に起きて8時過ぎまでだらだらしてた。オフィスのエアコンの効き具合がよくなくて昼間暑くてやる気にならなかった。&lt;/p>
&lt;h2 id="tp-link-cloud-api-で-tapo-の制御を調べる">tp-link cloud api で tapo の制御を調べる&lt;/h2>
&lt;p>先日 &lt;a href="/diary/diary/posts/2023/0612/">ifttt で tapo p105 の制御&lt;/a> を行った。これが動くということはなんらかのクラウドの api 経由で tapo p105 を制御できている。次の記事をみながらやってみようと試してみた。結論から言ってクラウドの api 経由ではできなかった。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://zenn.dev/book000/articles/tp-link-cloud-api">TP-Link cloud APIを使ってみる&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>アクセストークンを取得する。terminalUUID は適当に生成すればよい。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ curl -s -X POST -H &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> -d &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;method&amp;#34;: &amp;#34;login&amp;#34;, &amp;#34;params&amp;#34;: {&amp;#34;appType&amp;#34;: &amp;#34;iphone&amp;#34;, &amp;#34;cloudUserName&amp;#34;: &amp;#34;register@kazamori.jp&amp;#34;, &amp;#34;cloudPassword&amp;#34;: &amp;#34;***&amp;#34;, &amp;#34;terminalUUID&amp;#34;: &amp;#34;bf63e1d0-d5dc-4636-abf1-7eeada585935&amp;#34;}}&amp;#39;&lt;/span> https://wap.tplinkcloud.com/ | jq .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;error_code&amp;#34;&lt;/span>: 0,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;result&amp;#34;&lt;/span>: &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;accountId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;142785160&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;regTime&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2023-06-11 04:59:43&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;countryCode&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;JP&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;riskDetected&amp;#34;&lt;/span>: 0,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;email&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;register@kazamori.jp&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;token&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;***-***&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ここで取得したアクセストークンを使ってデバイスの一覧を取得する。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ curl -s -X POST -H &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> -d &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;method&amp;#34;: &amp;#34;getDeviceList&amp;#34;}&amp;#39;&lt;/span> https://wap.tplinkcloud.com/?token&lt;span style="color:#f92672">=&lt;/span>***-*** | jq .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;error_code&amp;#34;&lt;/span>: 0,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;result&amp;#34;&lt;/span>: &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceList&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceType&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;SMART.TAPOPLUG&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: 0,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fwVer&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1.3.6 Build 20230308 Rel. 52591&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;appServerUrl&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://aps1-wap.tplinkcloud.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceRegion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ap-southeast-1&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;802241DA5175CF114E567DE8D72A3094210CB12D&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceName&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;P105&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceHwVer&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1.0.0&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;alias&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;U21hcnQgUGx1ZyAoS2F6YW1vcmkgT2ZmaWNlKQ==&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceMac&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;482254AC1D25&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;oemId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;495AC9D888EB711C42A28BECF62071CF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;deviceModel&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;P105&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hwId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;58070BD9D8ECC915CD3D6F20A2172712&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fwId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1D18AD293A25ABDE41405B20C6F98816&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;isSameRegion&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;status&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ここまでは従来のスマートプラグと同様に動く。ここから先の手順は従来の hs105 と tapo p105 では手順が異なるみたい。&lt;code>passthrough&lt;/code> というメソッドを呼び出してみてもエラーが返ってくる。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ curl -s -X POST -H &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> -d &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;method&amp;#34;:&amp;#34;passthrough&amp;#34;, &amp;#34;params&amp;#34;: {&amp;#34;deviceId&amp;#34;: &amp;#34;802241DA5175CF114E567DE8D72A3094210CB12D&amp;#34;, &amp;#34;requestData&amp;#34;: &amp;#34;{\&amp;#34;system\&amp;#34;:{\&amp;#34;get_sysinfo\&amp;#34;:null},\&amp;#34;emeter\&amp;#34;:{\&amp;#34;get_realtime\&amp;#34;:null}}&amp;#34;}}&amp;#39;&lt;/span> https://wap.tplinkcloud.com/?token&lt;span style="color:#f92672">=&lt;/span>***-*** | jq .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;error_code&amp;#34;&lt;/span>: -20571,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;msg&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Device is offline&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>どうやら tapo シリーズはスマートプラグ自体が web api のエンドポイントを提供していて、ローカルからデバイスの web api を呼び出して制御できるらしい。例えば、次の記事でその手順が書いてあって、同様のやり方で実装した野生のライブラリもたくさんみつかる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://guminote.sakura.ne.jp/archives/911">ESP8266 で Tp-Link のスマートプラグ『Tapo P105』を直接操作する&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>うちのシェアオフィスのネットワークはローカルの ip アドレスへの通信をすべて拒否しているようなのでこのやり方はうちのオフィスでは検証できない。しかし、tp-link 社のスマホアプリと ifttt の webhook 経由で p105 の制御ができているため、おそらくローカルのエンドポイントに接続する以外の別の手段があるのだと推測する。それをインターネット上で数時間探してみたものの、発見できなかった。この前 interop の展示で聞いた話しだと ifttt は非公開 api を使ってインテグレーションを実装しているという話しだったけど、どうやってクラウド経由で通信しているのだろう？と不思議に思った。&lt;/p></content></item><item><title>課題管理の雑談会の準備</title><link>/diary/posts/2023/0617/</link><pubDate>Sat, 17 Jun 2023 13:15:22 +0900</pubDate><guid>/diary/posts/2023/0617/</guid><description>疲れて18時過ぎに帰ってきて軽く野菜サラダを食べてそのまま寝てた。22時に起きたのでそれからオフィスへ行って2時過ぎまで作業してた。3時から寝て6時半に起きてそのまま8時半まで寝てた。
ストレッチ 出張から戻ってきた後の大事な体調管理の1つ。今回の出張はいつもより離れた場所にホテルをとってあちこち歩いたし、interop の展示会にも参加してたくさん歩いた。昨日はバテて早めにお仕事を終えて寝てたりもした。ストレッチを受けてみると、足の張りはいつもより大きかった。とくに右足すね・ふくらはぎの張りがひどかった。関節周りの痛みも気持ち分大きかったかもしれない。腰の張りは思ったよりひどくなかったのでそこまで歩き過ぎたというわけでもないみたい。ちょっと負荷の高い運動をしたぐらいかな。今日の開脚幅は開始前155cmで、ストレッチ後158cmだった。数値はほぼいつもとあまり変わらない。
課題管理の雑談会へ向けての準備 来月、東京出張したときに コパイロツトさんと雑談会 を予定している。課題管理の雑談をしたいといっても一般の人にはなんのことか理解できないので事前に資料を送るために過去の資料を見返していた。過去に勉強会で使った資料と、直近のお仕事の内容も踏まえての課題管理についての資料をいくつか整理し直した。選択した3つの資料でスライド数は100を超えている。
スクラムと課題管理+イテレーション開発の比較 ビッグテックのマネジメント 直近の話しも含めての課題管理の概要 気付けばコンテンツは十分に蓄積しつつある。これからそれらのコンテンツを体系化したり整理したり、うちの会社がどういう切り口でビジネスしていくかのコンテキストを構成していかないといけない。これがとても難しいと私は考えていて、時間がかかる作業だし、もしかしたら実際にやってみてうまくできないということもあるかもしれない。来月はどんな雑談会になるのかまだわからないけど、課題管理の話しをできる人は少ないので新たな視点が出てくればいいな。</description><content>&lt;p>疲れて18時過ぎに帰ってきて軽く野菜サラダを食べてそのまま寝てた。22時に起きたのでそれからオフィスへ行って2時過ぎまで作業してた。3時から寝て6時半に起きてそのまま8時半まで寝てた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>出張から戻ってきた後の大事な体調管理の1つ。今回の出張はいつもより離れた場所にホテルをとってあちこち歩いたし、interop の展示会にも参加してたくさん歩いた。昨日はバテて早めにお仕事を終えて寝てたりもした。ストレッチを受けてみると、足の張りはいつもより大きかった。とくに右足すね・ふくらはぎの張りがひどかった。関節周りの痛みも気持ち分大きかったかもしれない。腰の張りは思ったよりひどくなかったのでそこまで歩き過ぎたというわけでもないみたい。ちょっと負荷の高い運動をしたぐらいかな。今日の開脚幅は開始前155cmで、ストレッチ後158cmだった。数値はほぼいつもとあまり変わらない。&lt;/p>
&lt;h2 id="課題管理の雑談会へ向けての準備">課題管理の雑談会へ向けての準備&lt;/h2>
&lt;p>来月、東京出張したときに &lt;a href="/diary/diary/posts/2023/0106/#隔週の雑談">コパイロツトさんと雑談会&lt;/a> を予定している。課題管理の雑談をしたいといっても一般の人にはなんのことか理解できないので事前に資料を送るために過去の資料を見返していた。過去に勉強会で使った資料と、直近のお仕事の内容も踏まえての課題管理についての資料をいくつか整理し直した。選択した3つの資料でスライド数は100を超えている。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="/diary/diary/posts/2022/1202/">スクラムと課題管理+イテレーション開発の比較&lt;/a>&lt;/li>
&lt;li>&lt;a href="/diary/diary/posts/2023/0113/">ビッグテックのマネジメント&lt;/a>&lt;/li>
&lt;li>直近の話しも含めての課題管理の概要&lt;/li>
&lt;/ul>
&lt;p>気付けばコンテンツは十分に蓄積しつつある。これからそれらのコンテンツを体系化したり整理したり、うちの会社がどういう切り口でビジネスしていくかのコンテキストを構成していかないといけない。これがとても難しいと私は考えていて、時間がかかる作業だし、もしかしたら実際にやってみてうまくできないということもあるかもしれない。来月はどんな雑談会になるのかまだわからないけど、課題管理の話しをできる人は少ないので新たな視点が出てくればいいな。&lt;/p></content></item><item><title>アイディアのコラボレーション</title><link>/diary/posts/2023/0616/</link><pubDate>Fri, 16 Jun 2023 09:57:15 +0900</pubDate><guid>/diary/posts/2023/0616/</guid><description>2時に寝て何度か起きて7時に起きた。今日は勉強会の登板なのになにも準備できてなくてどうしようとか思いながら寝た。
パッケージングとリリースのドキュメント 5月の落ち穂拾いの時期にプロジェクトの開発ドキュメントを刷新していろいろな要項を書き残している。最後に残ったまだ書いていないドキュメントに次の2つがある。水曜日から課題管理やコードレビューの隙間時間に書き出していって3日ほどかけて一通り書き終えた。私は文章を書くのが遅いのと、1回ですべての内容を網羅できなくて、書いているうちに思い出して追記したり、寝かした文章をあとで見返して推敲したりすることが多い。そのため、ドキュメントを1週間ぐらいかけて書いたりする。
パッケージング リリース たまたまメンバーにあるモジュールをリファクタリングのために再実装してもらっている。その開発を完了したら古いモジュールと入れ替える必要があるので、開発だけではなく、パッケージングやリリース周りの作業を把握してもらう、よい機会と言える。これまでパッケージングやリリース周りのインフラはほとんど私が作って運用をまわしてきたので徐々にそれらを引き継ぐタイミングとも言える。開発者はインフラのことを気にせず、アプリケーションを開発してコミットすれば後はすべて ci/cd が自動的にいろいろやってくれて便利ぐらいの感覚で扱えるようにするのが、外資系などではプラットフォームに投資しろと言われたりするものだと推測する。うちらが開発しているプロダクトはコンテナ、RPM、Windows インストーラーとパッケージングする種類が多い。その要項に加えて QA 責任の考え方などについても書いておいた。主には私がいなくなった後に役に立つドキュメントとなるだろう。
チーム勉強会 本当は go の generics の勉強会をやりますと先週宣言していた。しかし、私が遊んでいて全然準備できなかったので代わりに決済とスマートプラグの話しをした。先週末と月曜日 に作った決済とスマートプラグを組み合わせたもの。サービスや仕組みを簡単に説明して、実際にデモを動かして電球を灯す。
参加者からスマートプラグをラズベリーパイに置き換えてパワーリレーというモジュールを使えばもっとスマートにできるんじゃないかという意見が出た。たしかにラズベリーパイなら stripe の決済イベントを受け取るサーバーをデバイス内に同梱させることもできるかもしれない。そうすると、スマートプラグのような電源の on/off だけではなく、ラズベリーパイが扱えるセンサーとインテグレーションすることもできそう。また時間のあるときにやってみたい。コラボレーションって正にこういうことを言うとわかってきた。私が1人でこの仕組みを実装していたときにはラズベリーパイというキーワードはまったく頭の中になかった。他者の視点が加わるから新しいアイディアが広がる。</description><content>&lt;p>2時に寝て何度か起きて7時に起きた。今日は勉強会の登板なのになにも準備できてなくてどうしようとか思いながら寝た。&lt;/p>
&lt;h2 id="パッケージングとリリースのドキュメント">パッケージングとリリースのドキュメント&lt;/h2>
&lt;p>5月の落ち穂拾いの時期にプロジェクトの開発ドキュメントを刷新していろいろな要項を書き残している。最後に残ったまだ書いていないドキュメントに次の2つがある。水曜日から課題管理やコードレビューの隙間時間に書き出していって3日ほどかけて一通り書き終えた。私は文章を書くのが遅いのと、1回ですべての内容を網羅できなくて、書いているうちに思い出して追記したり、寝かした文章をあとで見返して推敲したりすることが多い。そのため、ドキュメントを1週間ぐらいかけて書いたりする。&lt;/p>
&lt;ul>
&lt;li>パッケージング&lt;/li>
&lt;li>リリース&lt;/li>
&lt;/ul>
&lt;p>たまたまメンバーにあるモジュールをリファクタリングのために再実装してもらっている。その開発を完了したら古いモジュールと入れ替える必要があるので、開発だけではなく、パッケージングやリリース周りの作業を把握してもらう、よい機会と言える。これまでパッケージングやリリース周りのインフラはほとんど私が作って運用をまわしてきたので徐々にそれらを引き継ぐタイミングとも言える。開発者はインフラのことを気にせず、アプリケーションを開発してコミットすれば後はすべて ci/cd が自動的にいろいろやってくれて便利ぐらいの感覚で扱えるようにするのが、外資系などではプラットフォームに投資しろと言われたりするものだと推測する。うちらが開発しているプロダクトはコンテナ、RPM、Windows インストーラーとパッケージングする種類が多い。その要項に加えて QA 責任の考え方などについても書いておいた。主には私がいなくなった後に役に立つドキュメントとなるだろう。&lt;/p>
&lt;h2 id="チーム勉強会">チーム勉強会&lt;/h2>
&lt;p>本当は go の generics の勉強会をやりますと先週宣言していた。しかし、私が遊んでいて全然準備できなかったので代わりに決済とスマートプラグの話しをした。&lt;a href="/diary/diary/posts/2023/0612/">先週末と月曜日&lt;/a> に作った決済とスマートプラグを組み合わせたもの。サービスや仕組みを簡単に説明して、実際にデモを動かして電球を灯す。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0616_payment-and-smartplug.png"/>
&lt;/figure>
&lt;p>参加者からスマートプラグをラズベリーパイに置き換えてパワーリレーというモジュールを使えばもっとスマートにできるんじゃないかという意見が出た。たしかにラズベリーパイなら stripe の決済イベントを受け取るサーバーをデバイス内に同梱させることもできるかもしれない。そうすると、スマートプラグのような電源の on/off だけではなく、ラズベリーパイが扱えるセンサーとインテグレーションすることもできそう。また時間のあるときにやってみたい。コラボレーションって正にこういうことを言うとわかってきた。私が1人でこの仕組みを実装していたときにはラズベリーパイというキーワードはまったく頭の中になかった。他者の視点が加わるから新しいアイディアが広がる。&lt;/p></content></item><item><title>初 interop と初幕張メッセ</title><link>/diary/posts/2023/0615/</link><pubDate>Thu, 15 Jun 2023 08:11:53 +0900</pubDate><guid>/diary/posts/2023/0615/</guid><description>23時頃から寝て何度か起きて7時に起きた。最近は家でもあまりうまく眠れないけれど、ホテルだともっとうまく眠れない感じで睡眠不足な感じ。
初めての interop 午前中は ci/cd の修正をしたり、ドキュメントを書いたりして、午後から Interop Tokyo 2023 に参加してきた。いつかうちの会社も出展したい。将来のために所感を残しておく。幕張メッセの会場に着いたのが14時過ぎで、あらかじめマーキングしておいた10社弱のブースをまわって、8社ぐらいのブースでスタッフさんに製品や技術の説明を聞いて情報収集してきた。そんなもんと言えばそれまでだが、interop は過去に参加したことのある it 系の展示会の雰囲気とよく似ていた。
幕張メッセまでの移動 初めて幕張メッセへ行ってきた。
東京駅の在来線から京葉線のホームが遠い 京葉線のホーム近くのコインロッカーが空いてた 京葉線の車両は空いてて座れるから楽だった、寝てた 海浜幕張駅から幕張メッセまでちょっと歩く、荷物多いとしんどそう 電車の移動時間に加え、駅と会場間の歩く時間も考慮して予定を立てないといけない 会場の雰囲気はビッグサイトとよく似ていた 4-6 ホールの3つを使っていたけど、ビッグサイトの展示会イベントもそんな感じだった気がする 混雑はしていないけど、そこそこ人がいて都心から遠いデメリットを考慮すると集客力はあるように思えた 会場/イベントの所感 4-6の3つのホールを使って展示されていた。
interop パビリオンというエリアに出展していた 出入り口に近くて中心にあったのでパビリオンそのもののの立地はよいと思う interop パビリオンには37社がひしめいていることのメリット・デメリットはありそう メリット 多くの会社の展示が狭いスペース内に集合しているので来場者からみて多種多様な展示をみれておもしろい 意図的に (？) 立地がよいので会場のどこからでもアクセスしやすい (また後で寄ろうといったモチベーションになりやすい) デメリット 狭いので1社が応対できる相手は1人か2人程度 通路兼応対スペースになるので個々の展示を立ち止まってみるよりも歩きながら眺める感じ、関心がないと立ち止まってみられない 地図からどんな会社が出展しているかわからないので社名をみかけて行くといった導線にはならない？ そういう人は社名で検索してからエリアを調べてから行くかも？ 一通りぐるっとまわって、ブースのスタッフさんと話したのは8社ぐらいで1時間40分ほどかかった あらかじめ展示をみにいく企業を決めておけば1-2時間もあれば十分にまわれる 地図をあらじかめ印刷しておいて蛍光ペンなどで印を付けてまわればもっと効率よくできた エリア番号から展示場所を探すのはわりと面倒くさかった ユニークな技術の紹介 1つおもしろかったのを紹介すると、フォスター電機さんの ヒアラブルデバイス の展示。nec さんと一緒に 耳音響認証 という技術のデバイスを作っているらしい。耳穴に音を送って反射した音で個人を認証するというもので指紋認証と変わらない精度だという。さらに人間の内部の情報を用いるので静脈認証のように詐称が困難という特性がある。あと耳に装着しておけば常時認証状態をチェックできる。一般用途で使うデバイスではないかもしれないけど、特定の業務や業種向けの応用例がありそうだなとか思って聞いていた。サーバーサイドのアプリケーションはすべて nec さんがやっているという話しでフォスター電機さん自体はハードウェア屋さんでアプリケーションに関心がないようにもみえた。</description><content>&lt;p>23時頃から寝て何度か起きて7時に起きた。最近は家でもあまりうまく眠れないけれど、ホテルだともっとうまく眠れない感じで睡眠不足な感じ。&lt;/p>
&lt;h2 id="初めての-interop">初めての interop&lt;/h2>
&lt;p>午前中は ci/cd の修正をしたり、ドキュメントを書いたりして、午後から &lt;a href="https://www.interop.jp/2023/">Interop Tokyo 2023&lt;/a> に参加してきた。いつかうちの会社も出展したい。将来のために所感を残しておく。幕張メッセの会場に着いたのが14時過ぎで、あらかじめマーキングしておいた10社弱のブースをまわって、8社ぐらいのブースでスタッフさんに製品や技術の説明を聞いて情報収集してきた。そんなもんと言えばそれまでだが、interop は過去に参加したことのある it 系の展示会の雰囲気とよく似ていた。&lt;/p>
&lt;h3 id="幕張メッセまでの移動">幕張メッセまでの移動&lt;/h3>
&lt;p>初めて幕張メッセへ行ってきた。&lt;/p>
&lt;ul>
&lt;li>東京駅の在来線から京葉線のホームが遠い
&lt;ul>
&lt;li>京葉線のホーム近くのコインロッカーが空いてた&lt;/li>
&lt;li>京葉線の車両は空いてて座れるから楽だった、寝てた&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>海浜幕張駅から幕張メッセまでちょっと歩く、荷物多いとしんどそう
&lt;ul>
&lt;li>電車の移動時間に加え、駅と会場間の歩く時間も考慮して予定を立てないといけない&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>会場の雰囲気はビッグサイトとよく似ていた
&lt;ul>
&lt;li>4-6 ホールの3つを使っていたけど、ビッグサイトの展示会イベントもそんな感じだった気がする&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>混雑はしていないけど、そこそこ人がいて都心から遠いデメリットを考慮すると集客力はあるように思えた&lt;/li>
&lt;/ul>
&lt;h3 id="会場イベントの所感">会場/イベントの所感&lt;/h3>
&lt;p>4-6の3つのホールを使って展示されていた。&lt;/p>
&lt;ul>
&lt;li>interop パビリオンというエリアに出展していた
&lt;ul>
&lt;li>出入り口に近くて中心にあったのでパビリオンそのもののの立地はよいと思う&lt;/li>
&lt;li>interop パビリオンには37社がひしめいていることのメリット・デメリットはありそう
&lt;ul>
&lt;li>メリット
&lt;ul>
&lt;li>多くの会社の展示が狭いスペース内に集合しているので来場者からみて多種多様な展示をみれておもしろい&lt;/li>
&lt;li>意図的に (？) 立地がよいので会場のどこからでもアクセスしやすい (また後で寄ろうといったモチベーションになりやすい)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>デメリット
&lt;ul>
&lt;li>狭いので1社が応対できる相手は1人か2人程度&lt;/li>
&lt;li>通路兼応対スペースになるので個々の展示を立ち止まってみるよりも歩きながら眺める感じ、関心がないと立ち止まってみられない&lt;/li>
&lt;li>地図からどんな会社が出展しているかわからないので社名をみかけて行くといった導線にはならない？
&lt;ul>
&lt;li>そういう人は社名で検索してからエリアを調べてから行くかも？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>一通りぐるっとまわって、ブースのスタッフさんと話したのは8社ぐらいで1時間40分ほどかかった
&lt;ul>
&lt;li>あらかじめ展示をみにいく企業を決めておけば1-2時間もあれば十分にまわれる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>地図をあらじかめ印刷しておいて蛍光ペンなどで印を付けてまわればもっと効率よくできた
&lt;ul>
&lt;li>エリア番号から展示場所を探すのはわりと面倒くさかった&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;figure>&lt;img src="/diary/diary/img/2023/0615_map.png"/>
&lt;/figure>
&lt;h3 id="ユニークな技術の紹介">ユニークな技術の紹介&lt;/h3>
&lt;p>1つおもしろかったのを紹介すると、フォスター電機さんの &lt;a href="https://www.foster.co.jp/products/productdata/foster_hearabledevice.pdf">ヒアラブルデバイス&lt;/a> の展示。nec さんと一緒に &lt;a href="https://jpn.nec.com/biometrics/ear-acoustic/index.html">耳音響認証&lt;/a> という技術のデバイスを作っているらしい。耳穴に音を送って反射した音で個人を認証するというもので指紋認証と変わらない精度だという。さらに人間の内部の情報を用いるので静脈認証のように詐称が困難という特性がある。あと耳に装着しておけば常時認証状態をチェックできる。一般用途で使うデバイスではないかもしれないけど、特定の業務や業種向けの応用例がありそうだなとか思って聞いていた。サーバーサイドのアプリケーションはすべて nec さんがやっているという話しでフォスター電機さん自体はハードウェア屋さんでアプリケーションに関心がないようにもみえた。&lt;/p></content></item><item><title>予定調和な会議</title><link>/diary/posts/2023/0614/</link><pubDate>Wed, 14 Jun 2023 14:21:57 +0900</pubDate><guid>/diary/posts/2023/0614/</guid><description>2時過ぎに起きて、3時過ぎにおきて、5時台に起きて、6時半に起きた。なんか1時間おきにトイレに起きるみたいな空気で寝てた。
大門近くのホテル いつもは五反田のホテルに泊まっているが、今回はたまたま系列ホテルの全国旅行支援適用の部屋が大門近くのホテルにしかなかったのでそちらに泊まってみた。五反田-大門間は都営浅草線で9分なので近い。過去に東京で働いていた頃、その近くに住んでいて、勤めていた会社もあったので、街そのものが懐かしくて、大門、浜松町、新橋のエリアをあちこち散策した。それでいつもの出張よりめっちゃ歩いた。15年前と変わらず残っているお店やビルもあれば、まったく違う店舗に変わってしまったお店もある。新橋とか、コロナ禍も過ぎたせいか、めっちゃ飲み歩いている人たちで活気があった。
プロジェクトの進捗報告 出張したときの月例報告の7回目。前々回の進捗報告はこちら 。5月の報告は書いてないな。そのときは他の会議がたくさんあったから省略してしまっている。他の会議と出席者も重複しているしな。
今回はわりとしっかり資料も作っていって、特異なネタもいれて、コンテンツとしては手応えをもって臨んだ。しかし、会議をしてみてそれほど盛り上がらなかったので私の自己満足だったのかもしれない。もう半年以上やっているからそんなものなのかもしれないが、肯定も否定もなくて、淡々と準備した資料の内容を説明して、ちょっと雑談して終わるといった、予定調和な会議になってきた。「本気でそんなことやるの？ちょっと待って！」みたいなツッコミが入るような取り組みをしないといけないのか？内容は悪くなかったと思うんだけど、会議が退屈だったら申し訳ないなとか思った。
課題管理ができると働き方がどう変わるかを示す GitLab のアクティビティ図があって、その図の利用許可をもらった。また後日、会社のコンテンツを作るときに活用する。</description><content>&lt;p>2時過ぎに起きて、3時過ぎにおきて、5時台に起きて、6時半に起きた。なんか1時間おきにトイレに起きるみたいな空気で寝てた。&lt;/p>
&lt;h2 id="大門近くのホテル">大門近くのホテル&lt;/h2>
&lt;p>いつもは五反田のホテルに泊まっているが、今回はたまたま系列ホテルの全国旅行支援適用の部屋が大門近くのホテルにしかなかったのでそちらに泊まってみた。五反田-大門間は都営浅草線で9分なので近い。過去に東京で働いていた頃、その近くに住んでいて、勤めていた会社もあったので、街そのものが懐かしくて、大門、浜松町、新橋のエリアをあちこち散策した。それでいつもの出張よりめっちゃ歩いた。15年前と変わらず残っているお店やビルもあれば、まったく違う店舗に変わってしまったお店もある。新橋とか、コロナ禍も過ぎたせいか、めっちゃ飲み歩いている人たちで活気があった。&lt;/p>
&lt;h2 id="プロジェクトの進捗報告">プロジェクトの進捗報告&lt;/h2>
&lt;p>出張したときの月例報告の7回目。&lt;a href="/diary/diary/posts/2023/0406/">前々回の進捗報告はこちら&lt;/a> 。5月の報告は書いてないな。そのときは他の会議がたくさんあったから省略してしまっている。他の会議と出席者も重複しているしな。&lt;/p>
&lt;p>今回はわりとしっかり資料も作っていって、特異なネタもいれて、コンテンツとしては手応えをもって臨んだ。しかし、会議をしてみてそれほど盛り上がらなかったので私の自己満足だったのかもしれない。もう半年以上やっているからそんなものなのかもしれないが、肯定も否定もなくて、淡々と準備した資料の内容を説明して、ちょっと雑談して終わるといった、予定調和な会議になってきた。「本気でそんなことやるの？ちょっと待って！」みたいなツッコミが入るような取り組みをしないといけないのか？内容は悪くなかったと思うんだけど、会議が退屈だったら申し訳ないなとか思った。&lt;/p>
&lt;p>課題管理ができると働き方がどう変わるかを示す GitLab のアクティビティ図があって、その図の利用許可をもらった。また後日、会社のコンテンツを作るときに活用する。&lt;/p></content></item><item><title>メリハリの付け直し</title><link>/diary/posts/2023/0613/</link><pubDate>Tue, 13 Jun 2023 04:21:59 +0900</pubDate><guid>/diary/posts/2023/0613/</guid><description>23時ぐらいまで作業して、1時から2時ぐらいまで仮眠した。いつも通り普通に寝ないで始発の新幹線に乗って寝てた。寝ていて体があちこち痛くて、月に1回ではあるけどこの生活を続けるのもよくないかもなと思い始めた。
新しい定例会議の初日 6月から新しい開発がスタートして 新しい定例会議の進め方 に変更した。ふりかえりと情報共有の定例を1時間に詰め込むので時間が足りないかも？と時間を意識しながら進めた。その甲斐もあってか、ちょうどぴったり1時間におさまった。これも一種のパーキンソンの法則のようなものが働いているのかもしれない。
仕事は、完成までに利用可能な時間を使い果たすように拡大していく
パーキンソンの法則
メンバーが2人なので機能開発が2つずつ並行に進む。1つは開発が完了し、もう1つも大半は完了している。完了できなかったことは残念だが、私からみても着実にステップアップしているのでそれほど問題視していない。ドッグフードテスト の導入も完了こそしなかったが、これも社内インフラの都合や管理者の工数を調整してもらったりするので着実に進捗しているのであれば、それほど厳密にスケジュール管理しなくてよいのかもしれない。
イテレーション開発のルール的には優先度を付けた issue はそのイテレーション内でやり切るという目標をもつように促している。但し、まだ開発の序盤であるので現時点ではそれほど重要ではない。これも1つのメリハリだとみなすこともできる。また様々な状況の変化や調整をしながら期限を意識して働くのは一定のスキルと自律的な行動を取れる開発者に限られる。
なんのために働くかの答えを見い出せていない若い人にそれを求めるのもまた違うなと思えて、この状況を作り出しているのは、働く目的そのものを導くようなリーダーシップを取れていない私自身の責任だと実感した。つまり私が自身の規律を緩めているのがメンバーに伝わって、結果的にスケジュールを守ろうとする最後の底力を支えられていないと思えた。開発の仕切り直しに私自身も切り替えていかないといけない。
厄介なインフラの問題 x 2 ちょうどインフラに関する、特定の状況においてパフォーマンスが劇的に劣化したり、意図しない振る舞いをしたりする事象を2つ確認している。これこそ私が面倒をみる issue だなと思って着手した。m2 macbook はこういったインフラの再現環境を作るのに向いていない。2022年に virtualbox 7.0 で m1/m2 に対応したという changelog があるけど、少し前にインストールしようとするとエラーになって動かなくて諦めた。
macOS host: Providing a Developer Preview package for systems with an Apple silicon CPU. This is unsupported work in progress, and is known to have very modest performance.
Changelog for VirtualBox 7.0
アプリケーションのコンテナイメージも、現時点では amd64 向けにしか提供していないため、どのみちコンテナでの検証が必要になったら m2 macbook では動作させられない。そういう厄介な issue を抱えた。帰ったらオフィスのデスクトップマシンで再現環境を作るところから始める。</description><content>&lt;p>23時ぐらいまで作業して、1時から2時ぐらいまで仮眠した。いつも通り普通に寝ないで始発の新幹線に乗って寝てた。寝ていて体があちこち痛くて、月に1回ではあるけどこの生活を続けるのもよくないかもなと思い始めた。&lt;/p>
&lt;h2 id="新しい定例会議の初日">新しい定例会議の初日&lt;/h2>
&lt;p>6月から新しい開発がスタートして &lt;a href="/diary/diary/posts/2023/0607/">新しい定例会議の進め方&lt;/a> に変更した。ふりかえりと情報共有の定例を1時間に詰め込むので時間が足りないかも？と時間を意識しながら進めた。その甲斐もあってか、ちょうどぴったり1時間におさまった。これも一種のパーキンソンの法則のようなものが働いているのかもしれない。&lt;/p>
&lt;blockquote>
&lt;p>仕事は、完成までに利用可能な時間を使い果たすように拡大していく&lt;/p>
&lt;p>&lt;a href="https://asana.com/ja/resources/parkinsons-law">パーキンソンの法則&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>メンバーが2人なので機能開発が2つずつ並行に進む。1つは開発が完了し、もう1つも大半は完了している。完了できなかったことは残念だが、私からみても着実にステップアップしているのでそれほど問題視していない。&lt;a href="/diary/diary/posts/2023/0526/#ドッグフードテストと運用談義">ドッグフードテスト&lt;/a> の導入も完了こそしなかったが、これも社内インフラの都合や管理者の工数を調整してもらったりするので着実に進捗しているのであれば、それほど厳密にスケジュール管理しなくてよいのかもしれない。&lt;/p>
&lt;p>イテレーション開発のルール的には優先度を付けた issue はそのイテレーション内でやり切るという目標をもつように促している。但し、まだ開発の序盤であるので現時点ではそれほど重要ではない。これも1つのメリハリだとみなすこともできる。また様々な状況の変化や調整をしながら期限を意識して働くのは一定のスキルと自律的な行動を取れる開発者に限られる。&lt;/p>
&lt;p>なんのために働くかの答えを見い出せていない若い人にそれを求めるのもまた違うなと思えて、この状況を作り出しているのは、働く目的そのものを導くようなリーダーシップを取れていない私自身の責任だと実感した。つまり私が自身の規律を緩めているのがメンバーに伝わって、結果的にスケジュールを守ろうとする最後の底力を支えられていないと思えた。開発の仕切り直しに私自身も切り替えていかないといけない。&lt;/p>
&lt;h2 id="厄介なインフラの問題-x-2">厄介なインフラの問題 x 2&lt;/h2>
&lt;p>ちょうどインフラに関する、特定の状況においてパフォーマンスが劇的に劣化したり、意図しない振る舞いをしたりする事象を2つ確認している。これこそ私が面倒をみる issue だなと思って着手した。m2 macbook はこういったインフラの再現環境を作るのに向いていない。2022年に virtualbox 7.0 で m1/m2 に対応したという changelog があるけど、少し前にインストールしようとするとエラーになって動かなくて諦めた。&lt;/p>
&lt;blockquote>
&lt;p>macOS host: Providing a Developer Preview package for systems with an Apple silicon CPU. This is unsupported work in progress, and is known to have very modest performance.&lt;/p>
&lt;p>&lt;a href="https://www.virtualbox.org/wiki/Changelog-7.0">Changelog for VirtualBox 7.0&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>アプリケーションのコンテナイメージも、現時点では amd64 向けにしか提供していないため、どのみちコンテナでの検証が必要になったら m2 macbook では動作させられない。そういう厄介な issue を抱えた。帰ったらオフィスのデスクトップマシンで再現環境を作るところから始める。&lt;/p></content></item><item><title>ネットワークからスマートプラグの制御</title><link>/diary/posts/2023/0612/</link><pubDate>Mon, 12 Jun 2023 09:15:47 +0900</pubDate><guid>/diary/posts/2023/0612/</guid><description>昨日は夕方に親が立ち寄るかもしれないというから待機していたのに空振りに終わった。0時に寝ようとしてあまり眠れなくて7時に起きた。ここ最近寝ているのか寝てないのかよく分からない眠り方になる。
決済してスマートプラグを ON にしろ 昨日の続き 。夕方に Tapo P105 が届いたので業務を終えてからさっそく使ってみた。
オフィスの wifi に接続して、tp-link 社のスマホアプリからデバイス登録する。スマホアプリからはすぐに on/off できた。スマホで電源の on/off を制御できてあまり嬉しいことはパッと思いつかないけど、プログラムから制御できるならなにか遊べそうな気もしてくる。ifttt というインテグレーションサービスがあって、それを使うと tp-link 社のデバイスと ifttt 社の web api 経由で制御できる。おそらくなんらかの web api が tp-link 社からも提供されているはず。それが公開されていれば ifttt を使う必要はないし、すでにハックされているものを使うのでもよいかもしれない。ひとまず動かすことを目的とするので ifttt を使う。スマートプラグに電球をつなげて、決済したら電球が灯って3秒後に消えるようなサンプルアプリを作った。一通り最後まで動かすことができておもしろかった。
https://github.com/kazamori/stripe-webhook-sample</description><content>&lt;p>昨日は夕方に親が立ち寄るかもしれないというから待機していたのに空振りに終わった。0時に寝ようとしてあまり眠れなくて7時に起きた。ここ最近寝ているのか寝てないのかよく分からない眠り方になる。&lt;/p>
&lt;h2 id="決済してスマートプラグを-on-にしろ">決済してスマートプラグを ON にしろ&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0611/">昨日の続き&lt;/a> 。夕方に &lt;a href="https://www.tp-link.com/jp/home-networking/smart-plug/tapo-p105/">Tapo P105&lt;/a> が届いたので業務を終えてからさっそく使ってみた。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0612_smartplug.jpeg"/>
&lt;/figure>
&lt;p>オフィスの wifi に接続して、tp-link 社のスマホアプリからデバイス登録する。スマホアプリからはすぐに on/off できた。スマホで電源の on/off を制御できてあまり嬉しいことはパッと思いつかないけど、プログラムから制御できるならなにか遊べそうな気もしてくる。&lt;a href="https://ifttt.com">ifttt&lt;/a> というインテグレーションサービスがあって、それを使うと tp-link 社のデバイスと ifttt 社の web api 経由で制御できる。おそらくなんらかの web api が tp-link 社からも提供されているはず。それが公開されていれば ifttt を使う必要はないし、すでにハックされているものを使うのでもよいかもしれない。ひとまず動かすことを目的とするので ifttt を使う。スマートプラグに電球をつなげて、決済したら電球が灯って3秒後に消えるようなサンプルアプリを作った。一通り最後まで動かすことができておもしろかった。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kazamori/stripe-webhook-sample">https://github.com/kazamori/stripe-webhook-sample&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>スマートプラグ制御の調査</title><link>/diary/posts/2023/0611/</link><pubDate>Sun, 11 Jun 2023 15:44:47 +0900</pubDate><guid>/diary/posts/2023/0611/</guid><description>23時に寝てうまく眠れなくて5時に起きた。そのまま10時ぐらいまでだらだらしてた。
スマートプラグの通電テスター 昨日の続き 。スマートプラグを検索すると TP-Link 社の製品がよく出てくるのでミニスマート wi-fi プラグの Tapo P105 を購入してみた。この製品だとネットワーク経由で電源の on/off ができそう。ifttt というサービスが TP-Link Tapo インテグレーションを公開している。TP-Link 社も自前で TP-LINK Cloud というサービスを提供していて、どうやらその web api は公開されていないようだけど、おそらくそこで使っている web api を調べてライブラリにしたのが tplink-cloud-api のようにみえる。サイトをみる限りはカメラしかサポートしていないようにもみえる。スマートプラグのようなデバイスがハックしやすい性質のせいか、書いてある情報が曖昧で実際にどうやってデバイスを制御したらよいのかネット上の記事からよくわからない。実際に購入したもので試してみるのが早そう。明日届く予定。
このスマートプラグによる電源 on/off のテスターに、ダイソーで電球を購入してきた。電源ソケットアダプタが100円、電球は100円、200円、300円とそれぞれあったんだけど、100円の差異でどうせ買うなら精度のよいものをと考えて300円のものを購入した。LED で電力消費も少ない。
試しにオフィスにあった amazon 純正スマートプラグ経由で接続して alexa アプリで on/off したら意図したように電球が灯ってテスターの代替にできた。デモのために使うのでそれぐらいわかりやすいのがよい。
モロゾフ 昨日参加したもくもく会を借りていた 中央区文化センター には2フロアに渡って大小いくつかの会議室がある。それぞれの会議室には張り紙をしていて借り主の名前が外からわかる。たまたま通ったところに「モロゾフ労働組合」と書いてあって、どこかの会社の労組が会議しているんだなと覚えていた。今日になって来週の東京出張のお土産を探していたらモロゾフというお店があることに気付いた。モロゾフの歩み によると1931年創業の神戸本店の洋菓子の会社らしい。これもなにかの縁だと思って今回はモロゾフさんの神戸本店へ行って ブロードランド 15個入 をお土産用に購入した。
自分用にアーモンドケーキを買って食べてみた。しっとり食感で控え目にアーモンドの風味がして甘過ぎなくて後味のよいケーキでおいしかった。</description><content>&lt;p>23時に寝てうまく眠れなくて5時に起きた。そのまま10時ぐらいまでだらだらしてた。&lt;/p>
&lt;h2 id="スマートプラグの通電テスター">スマートプラグの通電テスター&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0610/">昨日の続き&lt;/a> 。スマートプラグを検索すると TP-Link 社の製品がよく出てくるのでミニスマート wi-fi プラグの &lt;a href="https://www.tp-link.com/jp/home-networking/smart-plug/tapo-p105/">Tapo P105&lt;/a> を購入してみた。この製品だとネットワーク経由で電源の on/off ができそう。ifttt というサービスが &lt;a href="https://ifttt.com/tplink_tapo">TP-Link Tapo&lt;/a> インテグレーションを公開している。TP-Link 社も自前で &lt;a href="https://www.tplinkcloud.com/">TP-LINK Cloud&lt;/a> というサービスを提供していて、どうやらその web api は公開されていないようだけど、おそらくそこで使っている web api を調べてライブラリにしたのが &lt;a href="https://www.npmjs.com/package/tplink-cloud-api">tplink-cloud-api&lt;/a> のようにみえる。サイトをみる限りはカメラしかサポートしていないようにもみえる。スマートプラグのようなデバイスがハックしやすい性質のせいか、書いてある情報が曖昧で実際にどうやってデバイスを制御したらよいのかネット上の記事からよくわからない。実際に購入したもので試してみるのが早そう。明日届く予定。&lt;/p>
&lt;p>このスマートプラグによる電源 on/off のテスターに、ダイソーで電球を購入してきた。電源ソケットアダプタが100円、電球は100円、200円、300円とそれぞれあったんだけど、100円の差異でどうせ買うなら精度のよいものをと考えて300円のものを購入した。LED で電力消費も少ない。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0611_light.jpeg"/>
&lt;/figure>
&lt;p>試しにオフィスにあった amazon 純正スマートプラグ経由で接続して alexa アプリで on/off したら意図したように電球が灯ってテスターの代替にできた。デモのために使うのでそれぐらいわかりやすいのがよい。&lt;/p>
&lt;h2 id="モロゾフ">モロゾフ&lt;/h2>
&lt;p>昨日参加したもくもく会を借りていた &lt;a href="https://www.kobe-bunka.jp/facilities/chuo/">中央区文化センター&lt;/a> には2フロアに渡って大小いくつかの会議室がある。それぞれの会議室には張り紙をしていて借り主の名前が外からわかる。たまたま通ったところに「モロゾフ労働組合」と書いてあって、どこかの会社の労組が会議しているんだなと覚えていた。今日になって来週の東京出張のお土産を探していたらモロゾフというお店があることに気付いた。&lt;a href="https://www.morozoff.co.jp/company_ir/history_index.html">モロゾフの歩み&lt;/a> によると1931年創業の神戸本店の洋菓子の会社らしい。これもなにかの縁だと思って今回はモロゾフさんの神戸本店へ行って &lt;a href="https://www.morozoff.co.jp/products/baked_sweets/15_3/">ブロードランド 15個入&lt;/a> をお土産用に購入した。&lt;/p>
&lt;p>自分用にアーモンドケーキを買って食べてみた。しっとり食感で控え目にアーモンドの風味がして甘過ぎなくて後味のよいケーキでおいしかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0611_armond-cake.png"/>
&lt;/figure></content></item><item><title>stripe の決済プラットフォームを触ってみた</title><link>/diary/posts/2023/0610/</link><pubDate>Sat, 10 Jun 2023 13:24:28 +0900</pubDate><guid>/diary/posts/2023/0610/</guid><description>1時に寝て何度か起きて7時に起きた。帰る途中でライフに寄って淡路島牛乳を買って帰った。
ストレッチ 先週に引き続き、同じぐらいの負荷でおなぐらいの疲労度のストレッチだったような気がする。座っている時間が長いわけでもないが、右腰の張りがなかなか解消しないような気もする。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。ここ最近は下限が156cmになったような気がする。
stripe の webhook ハンドラーを試してみる カフーツさんで雑談していたのをきっかけに電子決済とスマートプラグを組み合わせた poc のためのアプリケーションを作ろうと思い立った。
stripe はメジャーなだけあって、プラットフォームもドキュメントもよく出来ていると思う。アカウント作成もすぐできたし、ドキュメントも充実しているようにみえる。【オフライン】もくもく会 の参加前からコードを書いて、イベントに参加してからも継続してコードを書き終えた。stripe で作った支払いの qr コードを読み込んで決済すると任意の webhook のエンドポイントにイベントを通知してログ出力するサンプルコードを作った。stripe-go を使ってすぐに実装できた。
https://github.com/kazamori/stripe-webhook-sample アカウント登録からサンプルコードを動かすのも丸1日ぐらいあれば出来てしまうぐらいの簡単さ。</description><content>&lt;p>1時に寝て何度か起きて7時に起きた。帰る途中でライフに寄って淡路島牛乳を買って帰った。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>先週に引き続き、同じぐらいの負荷でおなぐらいの疲労度のストレッチだったような気がする。座っている時間が長いわけでもないが、右腰の張りがなかなか解消しないような気もする。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。ここ最近は下限が156cmになったような気がする。&lt;/p>
&lt;h2 id="stripe-の-webhook-ハンドラーを試してみる">stripe の webhook ハンドラーを試してみる&lt;/h2>
&lt;p>カフーツさんで雑談していたのをきっかけに電子決済とスマートプラグを組み合わせた poc のためのアプリケーションを作ろうと思い立った。&lt;/p>
&lt;p>&lt;a href="https://stripe.com">stripe&lt;/a> はメジャーなだけあって、プラットフォームもドキュメントもよく出来ていると思う。アカウント作成もすぐできたし、ドキュメントも充実しているようにみえる。&lt;a href="https://kobe-sannomiya-dev.connpass.com/event/277976/">【オフライン】もくもく会&lt;/a> の参加前からコードを書いて、イベントに参加してからも継続してコードを書き終えた。stripe で作った支払いの qr コードを読み込んで決済すると任意の webhook のエンドポイントにイベントを通知してログ出力するサンプルコードを作った。&lt;a href="https://github.com/stripe/stripe-go">stripe-go&lt;/a> を使ってすぐに実装できた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kazamori/stripe-webhook-sample">https://github.com/kazamori/stripe-webhook-sample&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>アカウント登録からサンプルコードを動かすのも丸1日ぐらいあれば出来てしまうぐらいの簡単さ。&lt;/p></content></item><item><title>気付けば週末</title><link>/diary/posts/2023/0609/</link><pubDate>Fri, 09 Jun 2023 08:03:56 +0900</pubDate><guid>/diary/posts/2023/0609/</guid><description>1時に寝て何度か起きて6時に起きた。あまりうまく寝付けなかった。
隔週の雑談 顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。いつもより盛り沢山。
新しい定例会議の進め方 の共有 電子決済とスマートプラグを組み合わせた poc の実装について コパイロツトさんと雑談会の調整 淡路島で農業体験のコンテンツを作ることについて 能をみてきた話し 農業体験のコンテンツ作りは 人生の楽園 という番組が参考になるんじゃないかといった話題が出た。うちにはテレビがないのでみれない。オンラインでみれるなら視聴するんやけどな。
amqp091-go の context 制御のセマンティクス 先日送った amqp091-go の pr でメンテナーから api の振る舞いのセマンティクスが変わってしまっているという指摘をいただいた。
https://github.com/rabbitmq/amqp091-go/pull/192#pullrequestreview-1468035062 それはその通りなんだけど、一般の go プログラマーからするとそう動いてくれた方が便利でよいんじゃない？と返してみた。
ニトリ商品受け取り オフィスで使うスマートフックをオンラインで購入した。最寄りの店舗で受け取ると送料が無料になるというのでやってみたら2週間ほどかかった。急ぎではないので受け取りが遅いこと自体は構わない。受け取るときに店舗のスタッフに「このお店にもスマートフックの在庫あったりしますか？」と聞いて調べてもらったら、いまの時点では在庫があるという。もしかして発注時にも店舗に在庫があったとしたらそれを転用すればわざわざどこかの倉庫から2週間もかけて送る必要はなかったんじゃないか？とか考えた。こういうのをみかけると在庫システムを改善したいと思ってしまう。
【購入日】　2023年05月26日 (金)
【お渡し予定日】　2023年06月10日 (土)
【保管期限】　2023年06月24日 (土)
敦盛 第四回《真花演能会》能『敦盛』 のチケットの申し込みをした。問い合わせフォームでチケット申し込みの旨を連絡するとメールが返ってきて、銀行振込して、先方が確認したら住所にチケットを送ってくれるという。職人が参加者1人1人にメールを手書きで返す運用になっている。メールに記載された振込先の口座番号が全角文字で paypay 銀行の振り込み画面では全角文字をコピペできなかった。申し込み者も口座番号を1文字ずつ手打ちしなさいと言われた気分だった。こういうのをみかけると決済システムを自動化したいと思ってしまう。</description><content>&lt;p>1時に寝て何度か起きて6時に起きた。あまりうまく寝付けなかった。&lt;/p>
&lt;h2 id="隔週の雑談">隔週の雑談&lt;/h2>
&lt;p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。いつもより盛り沢山。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="/diary/diary/posts/2023/0607/">新しい定例会議の進め方&lt;/a> の共有&lt;/li>
&lt;li>電子決済とスマートプラグを組み合わせた poc の実装について&lt;/li>
&lt;li>&lt;a href="/diary/diary/posts/2023/0106/#隔週の雑談">コパイロツトさんと雑談会の調整&lt;/a>&lt;/li>
&lt;li>淡路島で農業体験のコンテンツを作ることについて&lt;/li>
&lt;li>&lt;a href="/diary/diary/posts/2023/0603/">能をみてきた話し&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>農業体験のコンテンツ作りは &lt;a href="https://www.tv-asahi.co.jp/rakuen/">人生の楽園&lt;/a> という番組が参考になるんじゃないかといった話題が出た。うちにはテレビがないのでみれない。オンラインでみれるなら視聴するんやけどな。&lt;/p>
&lt;h2 id="amqp091-go-の-context-制御のセマンティクス">amqp091-go の context 制御のセマンティクス&lt;/h2>
&lt;p>先日送った &lt;a href="/diary/diary/posts/2023/0515/#amqp091-go-の-context-制御">amqp091-go の pr&lt;/a> でメンテナーから api の振る舞いのセマンティクスが変わってしまっているという指摘をいただいた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/rabbitmq/amqp091-go/pull/192#pullrequestreview-1468035062">https://github.com/rabbitmq/amqp091-go/pull/192#pullrequestreview-1468035062&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>それはその通りなんだけど、一般の go プログラマーからするとそう動いてくれた方が便利でよいんじゃない？と返してみた。&lt;/p>
&lt;h2 id="ニトリ商品受け取り">ニトリ商品受け取り&lt;/h2>
&lt;p>オフィスで使うスマートフックをオンラインで購入した。最寄りの店舗で受け取ると送料が無料になるというのでやってみたら2週間ほどかかった。急ぎではないので受け取りが遅いこと自体は構わない。受け取るときに店舗のスタッフに「このお店にもスマートフックの在庫あったりしますか？」と聞いて調べてもらったら、いまの時点では在庫があるという。もしかして発注時にも店舗に在庫があったとしたらそれを転用すればわざわざどこかの倉庫から2週間もかけて送る必要はなかったんじゃないか？とか考えた。こういうのをみかけると在庫システムを改善したいと思ってしまう。&lt;/p>
&lt;blockquote>
&lt;p>【購入日】　　　　　2023年05月26日 (金)&lt;br />
【お渡し予定日】　　2023年06月10日 (土)&lt;br />
【保管期限】　　　　2023年06月24日 (土)&lt;/p>
&lt;/blockquote>
&lt;h2 id="敦盛">敦盛&lt;/h2>
&lt;p>&lt;a href="https://shin-flower.jp/events/2023/0419143830.html">第四回《真花演能会》能『敦盛』&lt;/a> のチケットの申し込みをした。問い合わせフォームでチケット申し込みの旨を連絡するとメールが返ってきて、銀行振込して、先方が確認したら住所にチケットを送ってくれるという。職人が参加者1人1人にメールを手書きで返す運用になっている。メールに記載された振込先の口座番号が全角文字で paypay 銀行の振り込み画面では全角文字をコピペできなかった。申し込み者も口座番号を1文字ずつ手打ちしなさいと言われた気分だった。こういうのをみかけると決済システムを自動化したいと思ってしまう。&lt;/p></content></item><item><title>一期一会</title><link>/diary/posts/2023/0608/</link><pubDate>Thu, 08 Jun 2023 08:24:16 +0900</pubDate><guid>/diary/posts/2023/0608/</guid><description>1時に寝て何度か起きて6時に起きた。鬼滅の刃を読みながら寝落ちした。
近況報告の資料作り 来週また東京出張することになり、あわてて資料作りしていた。5月に落ち穂拾いして6月は開発始まりだし、経費削減の意図もあって出張しなくてもよいんじゃないか？と緩く考えていた。しかし、先方は全然そんなつもりなくて「当然出張してくるよね」的なノリだった。毎月の顔合わせというリズムもあるし、新しい定例会議の進め方 を初めて実践する上でもオフラインでやるのが大事かもしれない。
能は一回限りの公演 武田宗典さんという能楽師が1分25秒頃から次のように話している。
能は全部一回限りの公演なんですよね。
すべてそのときだけに集まる人たちなので、
そのときにしかできない空間の作品が出来上がる。
観世流 能楽師シテ方・武田宗典
プロジェクトマネジメントも同じところがあるなと親近感をもって聞いていて印象に残った。プロジェクトマネジメントの目的はプロジェクトの再現性にあるわけだけど、実際には、あるプロジェクトでうまくいったもの (いかなかったもの) を完全には再現できない。それはまったく同じ状況、同じ要件、同じ開発メンバーでプロジェクトに取り組めないことが大半だろうし、仮に同じ開発メンバーであっても、人は時間とともに成長するので成長前に戻ることはできない。「歴史に if はない」という言葉と同様に過去のプロジェクトマネジメントや、よそのプロジェクトマネジメントになにかを言っても意味のない行為である。</description><content>&lt;p>1時に寝て何度か起きて6時に起きた。鬼滅の刃を読みながら寝落ちした。&lt;/p>
&lt;h2 id="近況報告の資料作り">近況報告の資料作り&lt;/h2>
&lt;p>来週また東京出張することになり、あわてて資料作りしていた。5月に落ち穂拾いして6月は開発始まりだし、経費削減の意図もあって出張しなくてもよいんじゃないか？と緩く考えていた。しかし、先方は全然そんなつもりなくて「当然出張してくるよね」的なノリだった。毎月の顔合わせというリズムもあるし、&lt;a href="/diary/diary/posts/2023/0607/">新しい定例会議の進め方&lt;/a> を初めて実践する上でもオフラインでやるのが大事かもしれない。&lt;/p>
&lt;h2 id="能は一回限りの公演">能は一回限りの公演&lt;/h2>
&lt;div class="video-container">
&lt;iframe src="https://www.youtube.com/embed/RU-svIQGYIo" allowfullscreen title="能楽師 観世流 武田宗典">&lt;/iframe>
&lt;/div>
&lt;p>武田宗典さんという能楽師が1分25秒頃から次のように話している。&lt;/p>
&lt;blockquote>
&lt;p>能は全部一回限りの公演なんですよね。&lt;br />
すべてそのときだけに集まる人たちなので、&lt;br />
そのときにしかできない空間の作品が出来上がる。&lt;/p>
&lt;p>観世流 能楽師シテ方・武田宗典&lt;/p>
&lt;/blockquote>
&lt;p>プロジェクトマネジメントも同じところがあるなと親近感をもって聞いていて印象に残った。プロジェクトマネジメントの目的はプロジェクトの再現性にあるわけだけど、実際には、あるプロジェクトでうまくいったもの (いかなかったもの) を完全には再現できない。それはまったく同じ状況、同じ要件、同じ開発メンバーでプロジェクトに取り組めないことが大半だろうし、仮に同じ開発メンバーであっても、人は時間とともに成長するので成長前に戻ることはできない。「歴史に if はない」という言葉と同様に過去のプロジェクトマネジメントや、よそのプロジェクトマネジメントになにかを言っても意味のない行為である。&lt;/p></content></item><item><title>ぼくのかんがえたさいきょうの定例会議</title><link>/diary/posts/2023/0607/</link><pubDate>Wed, 07 Jun 2023 18:48:14 +0900</pubDate><guid>/diary/posts/2023/0607/</guid><description>1時に寝て何度か起きて8時に起きた。昨日ブログを書き終えてほっとしたのか、珍しく寝坊した。
課題管理の定例会議の進め方 5月31日から 新しい開発がスタート していてイテレーションを2週間に、そして定例会議も同様に隔週とした。その狙いは先日の日記に書いてあるが、これまで毎週やっていた定例会議の進め方はあわないので新規に会議の進め方を刷新した。これまでふりかえりと定例会議を別にやっていたのを1つにした。またふりかえりの会議のときに、ふりかえり作業そのものもやっていたのを、定例までに事前にメンバーがそれぞれやってきて、結果を定例のときに共有しようというやり方に改めた。ネガティブなふりかえりは発生時点で課題管理システムに登録してフィルター可能というのがアピールポイント。いまチームのメンバーが3人なのでこれでも会議は1時間でおさまる見積もり。メンバーが増えたらふりかえりと定例は別の時間にわけてやるかな？会議時間が長くなるとダレるので1つの会議は1時間以内で締めるというのは徹底したい。
現マイルストーンのふりかえり (目安時間: 25分) fun/done/learn を使ったポジティブなふりかえり で共有 ネガティブなふりかえりは課題管理システムに Postmortem ラベルを付与して issue 登録したものを共有 次マイルストーンでやることの確認 (目安時間: 25分) 課題管理システムにある次マイルストーンでフィルターした issue を共有 issue になっていないもので聞きたいことや分からないことを聞く (目安時間: 10分) メンバーが自由に意見を表明 雑談 (余り時間) メンバーが自由に雑談 事前準備を済ましてから、スクラムでいうところの、レトロスペクティブとプランニングを同時にやるといったもの。実践としてうまくいくかどうか、今回の開発で試してみる。</description><content>&lt;p>1時に寝て何度か起きて8時に起きた。昨日ブログを書き終えてほっとしたのか、珍しく寝坊した。&lt;/p>
&lt;h2 id="課題管理の定例会議の進め方">課題管理の定例会議の進め方&lt;/h2>
&lt;p>5月31日から &lt;a href="/diary/diary/posts/2023/0530/#落ち穂拾いの終了">新しい開発がスタート&lt;/a> していてイテレーションを2週間に、そして定例会議も同様に隔週とした。その狙いは先日の日記に書いてあるが、これまで毎週やっていた定例会議の進め方はあわないので新規に会議の進め方を刷新した。これまでふりかえりと定例会議を別にやっていたのを1つにした。またふりかえりの会議のときに、ふりかえり作業そのものもやっていたのを、定例までに事前にメンバーがそれぞれやってきて、結果を定例のときに共有しようというやり方に改めた。ネガティブなふりかえりは発生時点で課題管理システムに登録してフィルター可能というのがアピールポイント。いまチームのメンバーが3人なのでこれでも会議は1時間でおさまる見積もり。メンバーが増えたらふりかえりと定例は別の時間にわけてやるかな？会議時間が長くなるとダレるので1つの会議は1時間以内で締めるというのは徹底したい。&lt;/p>
&lt;ol>
&lt;li>現マイルストーンのふりかえり (目安時間: 25分)
&lt;ol>
&lt;li>&lt;a href="/diary/diary/posts/2022/1129/">fun/done/learn を使ったポジティブなふりかえり&lt;/a> で共有&lt;/li>
&lt;li>ネガティブなふりかえりは課題管理システムに &lt;code>Postmortem&lt;/code> ラベルを付与して issue 登録したものを共有&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>次マイルストーンでやることの確認 (目安時間: 25分)
&lt;ol>
&lt;li>課題管理システムにある次マイルストーンでフィルターした issue を共有&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>issue になっていないもので聞きたいことや分からないことを聞く (目安時間: 10分)
&lt;ol>
&lt;li>メンバーが自由に意見を表明&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>雑談 (余り時間)
&lt;ol>
&lt;li>メンバーが自由に雑談&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>事前準備を済ましてから、スクラムでいうところの、レトロスペクティブとプランニングを同時にやるといったもの。実践としてうまくいくかどうか、今回の開発で試してみる。&lt;/p></content></item><item><title>久しぶりの書評</title><link>/diary/posts/2023/0606/</link><pubDate>Tue, 06 Jun 2023 09:21:08 +0900</pubDate><guid>/diary/posts/2023/0606/</guid><description>1時に寝て夜に起きて吐いてあまりうまく眠れなかった。たまにそういうことある。今日はコードレビュー対応とコードレビューと会議の進め方のルールを作ったりしていた。
能―650年続いた仕掛けとは― 日曜日の夜から書き始め、月曜日はレイオフのニュースを読んでだらだらして、ようやく 能―650年続いた仕掛けとは― の書評を書き終えた。ほとんど本からの引用なのに時間がかかったのは私が内容を深く理解できていないのでなんども本を読み返しながら間違いのないように注意して書いていたから。前に書いてから約5ヶ月経っていた。</description><content>&lt;p>1時に寝て夜に起きて吐いてあまりうまく眠れなかった。たまにそういうことある。今日はコードレビュー対応とコードレビューと会議の進め方のルールを作ったりしていた。&lt;/p>
&lt;h2 id="能650年続いた仕掛けとは">能―650年続いた仕掛けとは―&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0604/">日曜日の夜から書き始め&lt;/a>、月曜日はレイオフのニュースを読んでだらだらして、ようやく &lt;a href="https://note.com/t2y1979/n/n1c1fd0a5e3e1">能―650年続いた仕掛けとは―&lt;/a> の書評を書き終えた。ほとんど本からの引用なのに時間がかかったのは私が内容を深く理解できていないのでなんども本を読み返しながら間違いのないように注意して書いていたから。前に書いてから約5ヶ月経っていた。&lt;/p></content></item><item><title>レイオフ</title><link>/diary/posts/2023/0605/</link><pubDate>Mon, 05 Jun 2023 09:06:07 +0900</pubDate><guid>/diary/posts/2023/0605/</guid><description>4時から寝てあまり眠れなくて8時半に起きた。2時過ぎまでオフィスでブログを書いてた。
レビュー対応 昨日の go-ldap のレビュー対応 の続き。標準ライブラリの sql パッケージのソースを読みながらレビューアが提案した api を サンプル実装 してみた。実際に実装して動かしてみるとコードからのフィードバックが働き、より実践的な感覚で設計の議論できる。他のレビューアもその方がわかりやすいだろうと思ってやってみたが、はたして伝わるかどうか。
クックパッド社のレイオフ 社内 slack で知人から教えてもらって気付いた。
クックパッドが人員削減の合理化と営業損失計上を発表　対象人員数は110名 ちょうど晩ご飯の買い出しを終えた頃に一報があってそれからあちこちのタイムラインやニュースや掲示板などを追いかけてだいたいの雰囲気を掴んだ。私は昔からクックパッドさんを応援していて、いまも応援してはいるのだけど、さすがにもうこれは昔のような栄華を取り戻すことはないのだろうと、応援している私自身にも思えるぐらいのインパクトがあった。
この先に起こることは社長が交代する10月までに経営にとってネガティブなことをやり尽くしてその後 mbo して上場廃止にするのではないかと思う。まだまだキャッシュはあるし、右肩下がりとはいえ、現状の有償会員の売上もそれなりにあるので最低限の人員で保守していく分には十分に収益力のあるプラットフォームだと思う。2017年からの10年投資でなにか隠し玉のサービスがあるわけではなく、いろいろやって失敗したのでサービス終了して人員も整理して赤字の出ない程度で継続していくのではないかと思う。</description><content>&lt;p>4時から寝てあまり眠れなくて8時半に起きた。2時過ぎまでオフィスでブログを書いてた。&lt;/p>
&lt;h2 id="レビュー対応">レビュー対応&lt;/h2>
&lt;p>昨日の &lt;a href="/diary/diary/posts/2023/0604/">go-ldap のレビュー対応&lt;/a> の続き。標準ライブラリの sql パッケージのソースを読みながらレビューアが提案した api を &lt;a href="https://github.com/go-ldap/ldap/commit/a9daeebe787c8b355e1522e764fc436e78cc98ab">サンプル実装&lt;/a> してみた。実際に実装して動かしてみるとコードからのフィードバックが働き、より実践的な感覚で設計の議論できる。他のレビューアもその方がわかりやすいだろうと思ってやってみたが、はたして伝わるかどうか。&lt;/p>
&lt;h2 id="クックパッド社のレイオフ">クックパッド社のレイオフ&lt;/h2>
&lt;p>社内 slack で知人から教えてもらって気付いた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kanpo-kanpo.blog.jp/archives/40112471.htmls">クックパッドが人員削減の合理化と営業損失計上を発表　対象人員数は110名&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ちょうど晩ご飯の買い出しを終えた頃に一報があってそれからあちこちのタイムラインやニュースや掲示板などを追いかけてだいたいの雰囲気を掴んだ。私は昔からクックパッドさんを応援していて、いまも応援してはいるのだけど、さすがにもうこれは昔のような栄華を取り戻すことはないのだろうと、応援している私自身にも思えるぐらいのインパクトがあった。&lt;/p>
&lt;p>この先に起こることは社長が交代する10月までに経営にとってネガティブなことをやり尽くしてその後 mbo して上場廃止にするのではないかと思う。まだまだキャッシュはあるし、右肩下がりとはいえ、現状の有償会員の売上もそれなりにあるので最低限の人員で保守していく分には十分に収益力のあるプラットフォームだと思う。2017年からの10年投資でなにか隠し玉のサービスがあるわけではなく、いろいろやって失敗したのでサービス終了して人員も整理して赤字の出ない程度で継続していくのではないかと思う。&lt;/p></content></item><item><title>早起きは三文の徳</title><link>/diary/posts/2023/0604/</link><pubDate>Sun, 04 Jun 2023 17:02:38 +0900</pubDate><guid>/diary/posts/2023/0604/</guid><description>昨日は飲んだくれで帰ってきて1時に寝て何度か起きて7時に起きたものの、二日酔いではないけど、10時頃までだらだらしていた。それ以降はオフィスで作業していたのだけど、朝起きるのが遅れた分の進捗がいまいちになってしまった。翌2時過ぎまでやってもやりたかったことを完了できなかった。
レビュー対応 先日送った go-ldap の pr のレビューが付いていたので指摘されたところの修正をしたり、バグに気付いてリファクタリングしたりしていた。昨日の夜にコメントが付いていることに気付いたが、飲んだくれだったので対応が遅れた。レビューコメントの1つを除いて他はすべて対応した。残りの1つは api の設計をもっと堅牢、且つ拡張性に富んだものにしてはどうか？という提案。提案内容自体は悪くないと思う。他のレビューアのコメントも確認するためにまたしばし待つ。いまのところはよい感じ。
stripe アカウント あるアイディアの poc を作ろうと思って stripe のアカウントを作った。当初は決済手段として paypay でやろうと思ったものの、サポートに電話して聞いてみると paypay は実店舗向けにしかサービスを提供していないらしい。テスト環境もなければ、開発会社が検証用途で使うといったことも想定していないらしい。それで stripe のアカウントを作成した。即時でアカウントを発行できて使えるようになった。さすがって感じ。</description><content>&lt;p>昨日は飲んだくれで帰ってきて1時に寝て何度か起きて7時に起きたものの、二日酔いではないけど、10時頃までだらだらしていた。それ以降はオフィスで作業していたのだけど、朝起きるのが遅れた分の進捗がいまいちになってしまった。翌2時過ぎまでやってもやりたかったことを完了できなかった。&lt;/p>
&lt;h2 id="レビュー対応">レビュー対応&lt;/h2>
&lt;p>先日送った &lt;a href="/diary/diary/posts/2023/0601/#チャンネルを用いた-ldap-検索の-api">go-ldap の pr&lt;/a> のレビューが付いていたので指摘されたところの修正をしたり、バグに気付いてリファクタリングしたりしていた。昨日の夜にコメントが付いていることに気付いたが、飲んだくれだったので対応が遅れた。レビューコメントの1つを除いて他はすべて対応した。残りの1つは api の設計をもっと堅牢、且つ拡張性に富んだものにしてはどうか？という提案。提案内容自体は悪くないと思う。他のレビューアのコメントも確認するためにまたしばし待つ。いまのところはよい感じ。&lt;/p>
&lt;h2 id="stripe-アカウント">stripe アカウント&lt;/h2>
&lt;p>あるアイディアの poc を作ろうと思って &lt;a href="https://stripe.com/">stripe&lt;/a> のアカウントを作った。当初は決済手段として paypay でやろうと思ったものの、サポートに電話して聞いてみると paypay は実店舗向けにしかサービスを提供していないらしい。テスト環境もなければ、開発会社が検証用途で使うといったことも想定していないらしい。それで stripe のアカウントを作成した。即時でアカウントを発行できて使えるようになった。さすがって感じ。&lt;/p></content></item><item><title>能を観に行く</title><link>/diary/posts/2023/0603/</link><pubDate>Sat, 03 Jun 2023 13:57:49 +0900</pubDate><guid>/diary/posts/2023/0603/</guid><description>1時に寝て何度か置きて7時に起きた。
ストレッチ 今週も負荷の高い週ではなかったため、いつも通りのストレッチだった。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。やや右腰の張りが強かった気もした。
能をみにいく ストレッチを終えてから 松華会定期能 を見に行った。事前に会場となる神能殿に電話したところ、そのタイミングで前売り券を予約できてチケットを取り置きしてもらえた。事前に神能殿の事務所へ立ち寄って料金を支払う。神能殿 はとても立派な舞台だった。
12時半から解説とあった。あらすじはパンフレットに書いてあるので、それらの背景や歴史などの予備知識を解説していた。だいたい13時から始まって16時頃に終わった。1つの能の上演時間はだいたい1時間から1時間半といったところか。能の特徴の1つとして、いきなり始まっていきなり終わる。演劇のような幕の開け締めがないし、演者が観客に挨拶したりもしない。おもしろい。
座席は1/3から半分ぐらい埋まっていた。観客は年配者の方が多かったが、若い人もいた。話し声を聞いているとおそらく能を稽古しているような人たちもいたのではないかと思う。自由席だったので私は正面の一番前の席に座ってみた。これも能の特徴の1つだと思うが、能の舞台は正方形なので横からもみれる。この横からみる座席をワキ正面と呼ぶ。いつか試してみたい。
能: 菊慈童 (枕慈童) 狂言: 水掛聟 (みずかけむこ) (休憩 十分) 仕舞 能: 野宮 (ののみや) 事前に能の本を読んで入門して、著者の安田登氏の提案のようにあらすじを読んで妄想を働かせながら観るように努めてみた。初めてちゃんと能を鑑賞してみて、私は所々寝落ちしたりしているのだけど、思いの外、おもしろかった。菊慈童と野宮の2つの能を観たことで相対的にそれぞれの能の違いも実感することができた。私にとっては菊慈童の方がおもしろかった。その理由は野宮よりも状況や場面を容易に想像できたからではないかと思う。形式知としてはなんもわからないのだけど、暗黙知としては (野宮より) なんかわかった気がした。慈童が舞って喜んでいる様が伝わってきた気がした。囃子方と舞と謡の盛り上がりは素人でも楽しめた。野宮の方は動きが少なかったのと、私が源氏物語に詳しくなかったり、女性の怨霊の気持ちや背景など妄想できなかった。初心者は知っている物語やあらすじから妄想しやすそうな物語を安田登氏が推奨していた理由が理解できた。
能の bgm 的な音の影響も大きく受けた。おそらく今回は次の3つで演奏されていたと思う。これに太鼓を加えるとフルオーケストラらしい。
笛 小鼓 (こつづみ) 大鼓 (おおつづみ) 奏者が「よぉー」と掛け声をしながら鼓を叩く。その掛け声にも種類があることに気付いた。囃子方のかけ声は何のため？ によると次の4種類になる。
ヤ ハ ヨーイ イヤー 奏者の掛け声と謡と舞が協調して盛り上がりの強弱を表現していることも楽しめた。後で調べると囃子方はそれぞれの楽器ごとに専門職なようだ。奏者の掛け声の違いや強弱、音の高低などもおもしろいなと聞いていた。ポンと鼓を叩いた瞬間にカクっと寝落ちから我に返ったりして、そういう拍子も楽しんでいた。これは間違った観賞方法だろうが。見た目から年配の方が奏者をされていた。巧かったのでおそらく経験のある方だったんだろうと推測する。
能はそもそもがよくわからないのでわかるようになるとハマっていくのだろうという雰囲気は理解できた。納豆を食べるようなものだと思う。納豆のなにがおいしいかはあまり説明できないが、食べられるようになると当たり前のように日常的に食べてしまう。
林能楽会の菊慈童の公演が youtube にあったので貼っておく。雰囲気は味わえるが、生で観た印象とは異なる。舞台とはそういうものかもしれないが、能は映像だと伝わりにくい気がする。
狂言の水掛聟も楽しめた。狂言は演者が台詞を話すので能よりもずっとわかりやすい。日本版の演劇といったところか。水掛聟は隣の田んぼから水をお互いに取り合うといった物語になる。高低差があれば一方向に水を引くことはできるが、双方向に田んぼの水を引き合うって物理的にどんな田んぼの構造になっているんだ？というのが想像できなくて、頭の中が混乱しながらみていた。妄想力が足りない。あと婿と舅で水の取り合いをして、途中で婿の妻 (舅の娘) が乱入して、最後はどういう落ちだったのかよくわからず終わってしまった。「オチないんかい！」って心の中でツッコミいれてみた。
カフーツさん訪問 帰りに寄り道してカフーツさんに能をみた感想を伝えにいく。寄り道どころか、そのまま24時まで飲んだくれになってた。ここにふらっと立ち寄ると帰れなくなる。ヤバい。能をみた所感や読んだ本の話しをしていたら、いとうさんものってきて、次は 第４回 真花演能会 能のみちを伝えたい の敦盛を見に行こうという話しになった。敦盛なら物語も知っていて想像しやすそうなのでいいのではないかと意気投合した。
いとうさんが スパイシーカレーチキンレッグ をおいしいと食べてたのをみかけて今度探しに行ってみようと思った。</description><content>&lt;p>1時に寝て何度か置きて7時に起きた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>今週も負荷の高い週ではなかったため、いつも通りのストレッチだった。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。やや右腰の張りが強かった気もした。&lt;/p>
&lt;h2 id="能をみにいく">能をみにいく&lt;/h2>
&lt;p>ストレッチを終えてから &lt;a href="https://www.minatogawajinja.or.jp/shinnouden/event/8151/">松華会定期能&lt;/a> を見に行った。事前に会場となる神能殿に電話したところ、そのタイミングで前売り券を予約できてチケットを取り置きしてもらえた。事前に神能殿の事務所へ立ち寄って料金を支払う。&lt;a href="https://www.minatogawajinja.or.jp/shinnouden/">神能殿&lt;/a> はとても立派な舞台だった。&lt;/p>
&lt;p>12時半から解説とあった。あらすじはパンフレットに書いてあるので、それらの背景や歴史などの予備知識を解説していた。だいたい13時から始まって16時頃に終わった。1つの能の上演時間はだいたい1時間から1時間半といったところか。能の特徴の1つとして、いきなり始まっていきなり終わる。演劇のような幕の開け締めがないし、演者が観客に挨拶したりもしない。おもしろい。&lt;/p>
&lt;p>座席は1/3から半分ぐらい埋まっていた。観客は年配者の方が多かったが、若い人もいた。話し声を聞いているとおそらく能を稽古しているような人たちもいたのではないかと思う。自由席だったので私は正面の一番前の席に座ってみた。これも能の特徴の1つだと思うが、能の舞台は正方形なので横からもみれる。この横からみる座席をワキ正面と呼ぶ。いつか試してみたい。&lt;/p>
&lt;ul>
&lt;li>能: &lt;a href="https://www.the-noh.com/jp/plays/data/program_085.html">菊慈童 (枕慈童)&lt;/a>&lt;/li>
&lt;li>狂言: &lt;a href="https://kyotokyogen.com/guide/mizukakemuko/">水掛聟 (みずかけむこ)&lt;/a>&lt;/li>
&lt;li>(休憩 十分)&lt;/li>
&lt;li>仕舞&lt;/li>
&lt;li>能: &lt;a href="https://www.the-noh.com/jp/plays/data/program_018.html">野宮 (ののみや)&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>事前に能の本を読んで入門して、著者の安田登氏の提案のようにあらすじを読んで妄想を働かせながら観るように努めてみた。初めてちゃんと能を鑑賞してみて、私は所々寝落ちしたりしているのだけど、思いの外、おもしろかった。菊慈童と野宮の2つの能を観たことで相対的にそれぞれの能の違いも実感することができた。私にとっては菊慈童の方がおもしろかった。その理由は野宮よりも状況や場面を容易に想像できたからではないかと思う。形式知としてはなんもわからないのだけど、暗黙知としては (野宮より) なんかわかった気がした。慈童が舞って喜んでいる様が伝わってきた気がした。囃子方と舞と謡の盛り上がりは素人でも楽しめた。野宮の方は動きが少なかったのと、私が源氏物語に詳しくなかったり、女性の怨霊の気持ちや背景など妄想できなかった。初心者は知っている物語やあらすじから妄想しやすそうな物語を安田登氏が推奨していた理由が理解できた。&lt;/p>
&lt;p>能の bgm 的な音の影響も大きく受けた。おそらく今回は次の3つで演奏されていたと思う。これに太鼓を加えるとフルオーケストラらしい。&lt;/p>
&lt;ul>
&lt;li>笛&lt;/li>
&lt;li>小鼓 (こつづみ)&lt;/li>
&lt;li>大鼓 (おおつづみ)&lt;/li>
&lt;/ul>
&lt;p>奏者が「よぉー」と掛け声をしながら鼓を叩く。その掛け声にも種類があることに気付いた。&lt;a href="https://www.the-noh.com/jp/trivia/073.html">囃子方のかけ声は何のため？&lt;/a> によると次の4種類になる。&lt;/p>
&lt;ul>
&lt;li>ヤ&lt;/li>
&lt;li>ハ&lt;/li>
&lt;li>ヨーイ&lt;/li>
&lt;li>イヤー&lt;/li>
&lt;/ul>
&lt;p>奏者の掛け声と謡と舞が協調して盛り上がりの強弱を表現していることも楽しめた。後で調べると囃子方はそれぞれの楽器ごとに専門職なようだ。奏者の掛け声の違いや強弱、音の高低などもおもしろいなと聞いていた。ポンと鼓を叩いた瞬間にカクっと寝落ちから我に返ったりして、そういう拍子も楽しんでいた。これは間違った観賞方法だろうが。見た目から年配の方が奏者をされていた。巧かったのでおそらく経験のある方だったんだろうと推測する。&lt;/p>
&lt;p>能はそもそもがよくわからないのでわかるようになるとハマっていくのだろうという雰囲気は理解できた。納豆を食べるようなものだと思う。納豆のなにがおいしいかはあまり説明できないが、食べられるようになると当たり前のように日常的に食べてしまう。&lt;/p>
&lt;p>林能楽会の菊慈童の公演が youtube にあったので貼っておく。雰囲気は味わえるが、生で観た印象とは異なる。舞台とはそういうものかもしれないが、能は映像だと伝わりにくい気がする。&lt;/p>
&lt;div class="video-container">
&lt;iframe src="https://www.youtube.com/embed/CTBFwkWf3uI" allowfullscreen title="菊慈童">&lt;/iframe>
&lt;/div>
&lt;p>狂言の水掛聟も楽しめた。狂言は演者が台詞を話すので能よりもずっとわかりやすい。日本版の演劇といったところか。水掛聟は隣の田んぼから水をお互いに取り合うといった物語になる。高低差があれば一方向に水を引くことはできるが、双方向に田んぼの水を引き合うって物理的にどんな田んぼの構造になっているんだ？というのが想像できなくて、頭の中が混乱しながらみていた。妄想力が足りない。あと婿と舅で水の取り合いをして、途中で婿の妻 (舅の娘) が乱入して、最後はどういう落ちだったのかよくわからず終わってしまった。「オチないんかい！」って心の中でツッコミいれてみた。&lt;/p>
&lt;h2 id="カフーツさん訪問">カフーツさん訪問&lt;/h2>
&lt;p>帰りに寄り道してカフーツさんに能をみた感想を伝えにいく。寄り道どころか、そのまま24時まで飲んだくれになってた。ここにふらっと立ち寄ると帰れなくなる。ヤバい。能をみた所感や読んだ本の話しをしていたら、いとうさんものってきて、次は &lt;a href="https://www.minatogawajinja.or.jp/shinnouden/event/8387/">第４回 真花演能会 能のみちを伝えたい&lt;/a> の敦盛を見に行こうという話しになった。敦盛なら物語も知っていて想像しやすそうなのでいいのではないかと意気投合した。&lt;/p>
&lt;p>いとうさんが &lt;a href="http://www.miyagiseifun.jp/item/detail.php?item_id=currychicken">スパイシーカレーチキンレッグ&lt;/a> をおいしいと食べてたのをみかけて今度探しに行ってみようと思った。&lt;/p></content></item><item><title>能と妄想力</title><link>/diary/posts/2023/0602/</link><pubDate>Fri, 02 Jun 2023 14:33:38 +0900</pubDate><guid>/diary/posts/2023/0602/</guid><description>22時に寝て何度か起きて7時に起きた。朝から雨降りで、お昼頃に緊急警報で高齢者は避難しろとか防災通知がたくさん来ていた。お昼は雨が強かったのでお昼ご飯を食べずにお仕事していた。前日の続きで go-ldap の調査とコードレビュー対応とコードレビューをして勉強会に参加したらいい時間帯になって業務を終了した。
能―650年続いた仕掛けとは― 能―650年続いた仕掛けとは― を読んでいる続き。一通り読み終えた。著者の見解に100%同意できるわけではないが、能を知るための入門本として読みやすく、歴史の流れも学べておもしろい構成になっていると思う。後日、総括する。
第六章 能は漱石と芭蕉をこんなに変えた 松尾芭蕉が能の謡から大きな影響を受けていることは 別の本 も購入しているのでそちらで触れる。著者は芭蕉が旅に出た目的の1つとして鎮魂をあげている。能が江戸幕府を始め、それまでの室町幕府や戦国武将にも庇護をうけた背景として死者の、とくに敗者の鎮魂をあげている。というのは、当時の権力者は死者の怨霊が祟るということを怖れていたと考えられる。
夏目漱石やその周辺の交友関係において能に造詣が深かったという。漱石自身も能の稽古を積んでいたという。著者によると、草枕 の冒頭に出てくるこの文章には能の影響がみられ、草枕全体が夢幻能の構造になっており、ワキがみる夢の世界さながらだという。
智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。
草枕
著者は草枕が、晩年に漱石が残した則天去私という言葉の原型ではないかと考察している。
第七章 能は妄想力をつくってきた 能はそのシンプルさゆえに観る人の妄想力を必要とする。それが人によって様々な見方をもたらし、観る人を楽しませているという。したがって能を楽しむには一定の教養を必要とし、和歌、能、俳句、地理といった知識を要求する。その妄想力を象徴しているのが能の舞台であるという。能の舞台は背景に松の絵があるだけ。みえないものをみるには背景は単純なものがいい。そして、謡の存在も妄想力を促進する上で大きいという。
能にハマる人は幻視や幻聴を体験するという。著者は能を脳内で行う AR/VR のようなものだと書いている。能は消費の対象には適していないと著者も述べている。能を深く味わうには、能を観るだけでなく、能と共に生きる心構えを提案している。つまり、謡や仕舞などの能を稽古をして能を鑑賞するのがもっとも能を楽しむ方法だという。
第八章 能を知るとこんなにいいことがある この章は著者の経験による、能をしているとこんなよいことがあるよと説いている。
健康になる 集中力を養う ストレスをはね返す 無言で相手に気持ちを伝える 陰陽を整えられる いい声を出せるようになる 能を大成した世阿弥の考え方には禅に通じるものもあり、能そのものが体を無理なく動かす運動でもあり、それを継続することで身体や精神によい影響が出ることは理にも適っている。これらの効果の真偽はともかく、好きなことを無理なく継続していることは人生においてよさそうに私にも思えた。</description><content>&lt;p>22時に寝て何度か起きて7時に起きた。朝から雨降りで、お昼頃に緊急警報で高齢者は避難しろとか防災通知がたくさん来ていた。お昼は雨が強かったのでお昼ご飯を食べずにお仕事していた。前日の続きで go-ldap の調査とコードレビュー対応とコードレビューをして勉強会に参加したらいい時間帯になって業務を終了した。&lt;/p>
&lt;h2 id="能650年続いた仕掛けとは">能―650年続いた仕掛けとは―&lt;/h2>
&lt;p>&lt;a href="https://www.shinchosha.co.jp/book/610732/">能―650年続いた仕掛けとは―&lt;/a> を読んでいる続き。一通り読み終えた。著者の見解に100%同意できるわけではないが、能を知るための入門本として読みやすく、歴史の流れも学べておもしろい構成になっていると思う。後日、総括する。&lt;/p>
&lt;h3 id="第六章-能は漱石と芭蕉をこんなに変えた">第六章 能は漱石と芭蕉をこんなに変えた&lt;/h3>
&lt;p>松尾芭蕉が能の謡から大きな影響を受けていることは &lt;a href="/diary/diary/posts/2023/0517/#コワーキングのオンラインイベント">別の本&lt;/a> も購入しているのでそちらで触れる。著者は芭蕉が旅に出た目的の1つとして鎮魂をあげている。能が江戸幕府を始め、それまでの室町幕府や戦国武将にも庇護をうけた背景として死者の、とくに敗者の鎮魂をあげている。というのは、当時の権力者は死者の怨霊が祟るということを怖れていたと考えられる。&lt;/p>
&lt;p>夏目漱石やその周辺の交友関係において能に造詣が深かったという。漱石自身も能の稽古を積んでいたという。著者によると、&lt;a href="https://www.aozora.gr.jp/cards/000148/files/776_14941.html">草枕&lt;/a> の冒頭に出てくるこの文章には能の影響がみられ、草枕全体が夢幻能の構造になっており、ワキがみる夢の世界さながらだという。&lt;/p>
&lt;blockquote>
&lt;p>智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。&lt;/p>
&lt;p>&lt;a href="https://www.aozora.gr.jp/cards/000148/files/776_14941.html">草枕&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>著者は草枕が、晩年に漱石が残した則天去私という言葉の原型ではないかと考察している。&lt;/p>
&lt;h3 id="第七章-能は妄想力をつくってきた">第七章 能は妄想力をつくってきた&lt;/h3>
&lt;p>能はそのシンプルさゆえに観る人の妄想力を必要とする。それが人によって様々な見方をもたらし、観る人を楽しませているという。したがって能を楽しむには一定の教養を必要とし、和歌、能、俳句、地理といった知識を要求する。その妄想力を象徴しているのが能の舞台であるという。能の舞台は背景に松の絵があるだけ。みえないものをみるには背景は単純なものがいい。そして、謡の存在も妄想力を促進する上で大きいという。&lt;/p>
&lt;p>能にハマる人は幻視や幻聴を体験するという。著者は能を脳内で行う AR/VR のようなものだと書いている。能は消費の対象には適していないと著者も述べている。能を深く味わうには、能を観るだけでなく、能と共に生きる心構えを提案している。つまり、謡や仕舞などの能を稽古をして能を鑑賞するのがもっとも能を楽しむ方法だという。&lt;/p>
&lt;h3 id="第八章-能を知るとこんなにいいことがある">第八章 能を知るとこんなにいいことがある&lt;/h3>
&lt;p>この章は著者の経験による、能をしているとこんなよいことがあるよと説いている。&lt;/p>
&lt;ul>
&lt;li>健康になる&lt;/li>
&lt;li>集中力を養う&lt;/li>
&lt;li>ストレスをはね返す&lt;/li>
&lt;li>無言で相手に気持ちを伝える&lt;/li>
&lt;li>陰陽を整えられる&lt;/li>
&lt;li>いい声を出せるようになる&lt;/li>
&lt;/ul>
&lt;p>能を大成した世阿弥の考え方には禅に通じるものもあり、能そのものが体を無理なく動かす運動でもあり、それを継続することで身体や精神によい影響が出ることは理にも適っている。これらの効果の真偽はともかく、好きなことを無理なく継続していることは人生においてよさそうに私にも思えた。&lt;/p></content></item><item><title>わかりにくさと能動的</title><link>/diary/posts/2023/0601/</link><pubDate>Thu, 01 Jun 2023 08:34:31 +0900</pubDate><guid>/diary/posts/2023/0601/</guid><description>22時に寝て何度か起きて7時に起きた。たまには早く寝てみた。
チャンネルを用いた ldap 検索の api うちらの要件に足りない機能が go-ldap にある。私が機能拡張についての issue を作ったときにある開発者が先にこの機能が必要だとコメントしてくれた。もともと draft pr で実装されたコードがあったのでそれをベースに検証したら普通に動いた。あとは go のエンジニアリングとして開発者が使いやすいように、私の経験からのアレンジを加えて pr とした。テストも実装した。なにか問題があればレビューで指摘さえしてくれれば私がすぐ修正してマージできるはずと考えている。はてさて、どうなることやら。
Add search with channels with context #440 能―650年続いた仕掛けとは― 能―650年続いた仕掛けとは― を読んでいる続き。世阿弥の紹介をしている第五章に感化された。
第四章 能にはこんな仕掛けが隠されていた 能はシテ (主役) の役柄や内容で5種類にわけられる。
初番目物 神: 神様が登場して颯爽 (さっそう) と舞う 二番目物 男: 修羅物とも呼ばれ、武将が修羅道に落ちた苦しみを描く 三番目物 女: 鬘物 (かずらもの) とも呼ばれ、優雅な美しいものが多い 四番目物 狂: 雑能とも呼ばれ、他の4つに分類されないもの 五番目物 鬼: 切能 (きりのう) とも呼ばれ、鬼や妖怪、精霊、霊獣などがシテになる さらにこの5つの分類に入らない翁という演目もある。翁を最初に置き、この順番に上演しながら、能と能の間に狂言を演じ、最後に祝言の短い能を演じるのがかつての正式な上演だったらしい。これだけ演じると朝から晩までかかってしまうので忙しい現代ではなかなかみれなくなってしまっているという。
ひと昔前は結婚式で仲人さんや親戚が謡を謡っていたという。たしかに古風な結婚式ではそうだったような、、、と私もうっすらとそういう記憶があるような気もする。
能の身体的な特徴の1つに摺り足がある。摺り足には重い二本の刀を腰に差して腰痛にならないという効能があるらしい。ほんとかな？
世阿弥が能の構造は序破急にせよと書いている。序はワキの登場、破はシテが登場して話をして去る、急は再びシテが姿を変えて登場するといった構造になる。水戸黄門や暴れん坊将軍のような時代劇の最後の展開が急に相当する。水戸黄門で例えると次になる。
序: 現状把握と善人の窮状 破: 善人が騙される／襲われる 急: 印籠を出す そして、この後に書いてあることが個人的におもしろかった。水戸黄門は番組開始時点では印籠を出すようなシーンはなくて、当初は助さん角さんが敵をたたき斬っていただけだったという。そもそも印籠を出したぐらいで本物の水戸黄門かどうか分かるわけもなく悪人がひれ伏すはずがないw あるときから印籠を出すという急を作って、序破急が安定したことで人気が出て長寿番組となったと書いてある。ほんとかな？
第五章 世阿弥はこんなにすごかった 能の大成に大きな影響を及ぼした世阿弥についていろいろ書いてある。
夢幻能 という能のジャンルを完成させた。念が残る、思いが残っているといった残念を昇華させる物語の構造になっている。世阿弥は特に敗者の無念をみせる舞台構造を作ることに成功したという。もともと日本人は死者を尊ぶ習慣があったことも要因としてあげている。</description><content>&lt;p>22時に寝て何度か起きて7時に起きた。たまには早く寝てみた。&lt;/p>
&lt;h2 id="チャンネルを用いた-ldap-検索の-api">チャンネルを用いた ldap 検索の api&lt;/h2>
&lt;p>うちらの要件に足りない機能が go-ldap にある。私が機能拡張についての issue を作ったときにある開発者が先にこの機能が必要だとコメントしてくれた。もともと draft pr で実装されたコードがあったのでそれをベースに検証したら普通に動いた。あとは go のエンジニアリングとして開発者が使いやすいように、私の経験からのアレンジを加えて pr とした。テストも実装した。なにか問題があればレビューで指摘さえしてくれれば私がすぐ修正してマージできるはずと考えている。はてさて、どうなることやら。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/go-ldap/ldap/pull/440">Add search with channels with context #440&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="能650年続いた仕掛けとは">能―650年続いた仕掛けとは―&lt;/h2>
&lt;p>&lt;a href="https://www.shinchosha.co.jp/book/610732/">能―650年続いた仕掛けとは―&lt;/a> を読んでいる続き。世阿弥の紹介をしている第五章に感化された。&lt;/p>
&lt;h3 id="第四章-能にはこんな仕掛けが隠されていた">第四章 能にはこんな仕掛けが隠されていた&lt;/h3>
&lt;p>能はシテ (主役) の役柄や内容で5種類にわけられる。&lt;/p>
&lt;ol>
&lt;li>初番目物 神: 神様が登場して颯爽 (さっそう) と舞う&lt;/li>
&lt;li>二番目物 男: 修羅物とも呼ばれ、武将が修羅道に落ちた苦しみを描く&lt;/li>
&lt;li>三番目物 女: 鬘物 (かずらもの) とも呼ばれ、優雅な美しいものが多い&lt;/li>
&lt;li>四番目物 狂: 雑能とも呼ばれ、他の4つに分類されないもの&lt;/li>
&lt;li>五番目物 鬼: 切能 (きりのう) とも呼ばれ、鬼や妖怪、精霊、霊獣などがシテになる&lt;/li>
&lt;/ol>
&lt;p>さらにこの5つの分類に入らない翁という演目もある。翁を最初に置き、この順番に上演しながら、能と能の間に狂言を演じ、最後に祝言の短い能を演じるのがかつての正式な上演だったらしい。これだけ演じると朝から晩までかかってしまうので忙しい現代ではなかなかみれなくなってしまっているという。&lt;/p>
&lt;p>ひと昔前は結婚式で仲人さんや親戚が謡を謡っていたという。たしかに古風な結婚式ではそうだったような、、、と私もうっすらとそういう記憶があるような気もする。&lt;/p>
&lt;p>能の身体的な特徴の1つに摺り足がある。摺り足には重い二本の刀を腰に差して腰痛にならないという効能があるらしい。ほんとかな？&lt;/p>
&lt;p>世阿弥が能の構造は序破急にせよと書いている。序はワキの登場、破はシテが登場して話をして去る、急は再びシテが姿を変えて登場するといった構造になる。水戸黄門や暴れん坊将軍のような時代劇の最後の展開が急に相当する。水戸黄門で例えると次になる。&lt;/p>
&lt;ul>
&lt;li>序: 現状把握と善人の窮状&lt;/li>
&lt;li>破: 善人が騙される／襲われる&lt;/li>
&lt;li>急: 印籠を出す&lt;/li>
&lt;/ul>
&lt;p>そして、この後に書いてあることが個人的におもしろかった。水戸黄門は番組開始時点では印籠を出すようなシーンはなくて、当初は助さん角さんが敵をたたき斬っていただけだったという。そもそも印籠を出したぐらいで本物の水戸黄門かどうか分かるわけもなく悪人がひれ伏すはずがないw あるときから印籠を出すという急を作って、序破急が安定したことで人気が出て長寿番組となったと書いてある。ほんとかな？&lt;/p>
&lt;h3 id="第五章-世阿弥はこんなにすごかった">第五章 世阿弥はこんなにすごかった&lt;/h3>
&lt;p>能の大成に大きな影響を及ぼした世阿弥についていろいろ書いてある。&lt;/p>
&lt;p>&lt;a href="https://db2.the-noh.com/jdic/2010/02/post_172.html">夢幻能&lt;/a> という能のジャンルを完成させた。念が残る、思いが残っているといった残念を昇華させる物語の構造になっている。世阿弥は特に敗者の無念をみせる舞台構造を作ることに成功したという。もともと日本人は死者を尊ぶ習慣があったことも要因としてあげている。&lt;/p>
&lt;p>世阿弥は世襲で継いでいくという家元制度を作った。これは後世に必ず継ぐシステムを作ったと言える。現代まで能が継続されている背景の1つに家元制度はたしかにあげられると私も思う。しかし、現代では基本的人権 (職業選択の自由) に反することから家元制度の批判もあるようだ。著者はこの仕組みを称賛しているが、私は現代の感覚からすると個人の自由を制限して成り立っている古い制度のように感じてあまり著者の意見に同意できなかった。&lt;/p>
&lt;blockquote>
&lt;p>陰陽の和するところの境を成就とは知るべし&lt;/p>
&lt;/blockquote>
&lt;p>昼や晴れた日には観客の気分が盛り上がり過ぎているので控え目に演じなさい。曇りや雨の日には逆に観客の気持ちが萎えているので派手目に演じなさいといったことを言っている。要は客の状態を見て演じ方を変えなさいと言っている。これは言うは易し、行うは難しだという。能ではこれを楽器の構造から音の力で解決していると説明がある。&lt;/p>
&lt;blockquote>
&lt;p>時に用ゆるをもて花と知るべし&lt;/p>
&lt;/blockquote>
&lt;p>ともすれば絶対的な善し悪しがあるように思い込み、そのようなものを追求しがちであるが、実際はそのようなものはない。あるのは時との関係性だけだという。易経の時中も引用している。いまがどのような「時」であるかを知り、それがもっとも適合した時期であるか、行動できるか、それこそが「花」であるという。&lt;/p>
&lt;blockquote>
&lt;p>花と面白きと珍しきと、これ三つは同じ心なり&lt;/p>
&lt;/blockquote>
&lt;p>現代の言葉とはちょっと意味が異なる。&lt;/p>
&lt;ul>
&lt;li>面白き: 目の前がパッと明るくなること&lt;/li>
&lt;li>珍しき (愛ず): 愛らしいこと、まったく普通のことに感嘆を抱かせる工夫など&lt;/li>
&lt;li>花: 秘すれば花、秘密にすることで偉大な働きをすること&lt;/li>
&lt;/ul>
&lt;p>能では、演者はあまり観客に働きかけない。よくわからないことで、逆に観る人が能動的になり、見えないものが見え、聞こえない音が聞こえるようになる。これも秘することによって咲く花だという。師匠が弟子に教えないというのも、簡単なことでも秘することで、弟子が散々苦しみ抜いた上でその助言の価値に気付くこともあるという。&lt;/p>
&lt;p>「老後の初心」という考え方。どの歳になっても初心はあるが、歳をとって体力が劣っていくからこそやることも変えていく。第一章にも出てきた能における「初心」という言葉の概念は本当におもしろい。能では体が動かなくなっていくのだから「しないというやり方も方法としてありえる」と考える。演じないことで演じる、歳を取ったときの表現方法がある。高齢な能楽師でしか演じられない境地があるから能楽師は歳を取ることを楽しみにする。この考え方はいまの時代にとてもあうように私は思えた。&lt;/p></content></item></channel></rss>