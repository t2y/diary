<!doctype html><html lang=en><head><title>2022/10 :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/dates/2022/10/><link rel=stylesheet href=/diary/assets/style.css><link rel=stylesheet href=/diary/assets/green.css><link rel=stylesheet href=/diary/style.css><link rel=apple-touch-icon href=/diary/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="2022/10"><meta property="og:description" content><meta property="og:url" content="/diary/dates/2022/10/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><link href=/diary/dates/2022/10/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1027/>sql の group concat という組み込み関数</a></h1><div class=post-meta><span class=post-date>2022-10-27</span></div><span class=post-tags>#<a href=/diary/tags/postgresql/>postgresql</a>&nbsp;
#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>2時に寝て7時に起きた。昨日の hannali dao が盛り上がった影響で夜更ししてた。</p><h2 id=本番リリース後の緊急対応>本番リリース後の緊急対応</h2><p>昨日あるバッチ処理の本番リリースを行った。そのバッチ処理は本番環境のデータがないとテスト環境ではあまり有効な検証ができない。昨日は別のバグがあって実行できていなかったのを今日直して再実行したらまた別のバグを発見した。sql である集合を取得するときのグルーピングの条件が適切ではなかった。postgresql で <a href=https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html#function_group-concat>mysql でいうところの group_concat</a> に相当することをやりたい。<a href=https://bipp.io/sql-tutorial/postgresql/string_agg/>How to Use string_agg()</a> のチュートリアルをちょっとカスタマイズして引用する。次のようなデータがあると仮定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> teams ;
</span></span><span style=display:flex><span>  team_name  <span style=color:#f92672>|</span> team_member <span style=color:#f92672>|</span> num
</span></span><span style=display:flex><span><span style=color:#75715e>-------------+-------------+-----
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> Barcelona   <span style=color:#f92672>|</span> Messi       <span style=color:#f92672>|</span>   <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> Piquet      <span style=color:#f92672>|</span>   <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> (<span style=color:#66d9ef>null</span>)      <span style=color:#f92672>|</span>   <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Ronaldo     <span style=color:#f92672>|</span>   <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Benzema     <span style=color:#f92672>|</span>   <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Ramos       <span style=color:#f92672>|</span>   <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>6</span> <span style=color:#960050;background-color:#1e0010>行</span>)
</span></span></code></pre></div><p>このときに team_name に対して team_member も集約して数値の合計を取りたいときがある。<code>string_agg</code> という組み込み関数を使うとできる。null があっても無視して数値の合計はしてくれる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> team_name, string_agg(team_member, <span style=color:#e6db74>&#39;,&#39;</span>), <span style=color:#66d9ef>sum</span>(num) <span style=color:#66d9ef>from</span> teams <span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> team_name;
</span></span><span style=display:flex><span>  team_name  <span style=color:#f92672>|</span>      string_agg       <span style=color:#f92672>|</span> <span style=color:#66d9ef>sum</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-------------+-----------------------+-----
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> Real Madrid <span style=color:#f92672>|</span> Ronaldo,Benzema,Ramos <span style=color:#f92672>|</span>   <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> Messi,Piquet          <span style=color:#f92672>|</span>   <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>2</span> <span style=color:#960050;background-color:#1e0010>行</span>)
</span></span></code></pre></div><h2 id=送別会>送別会</h2><p>プロジェクトの区切りの打ち上げと、私が今週末で契約終了となるので送別会を兼ねて催してくれた。感謝。実はこれまでプロジェクトの打ち上げに私は参加してこなかった。それは複数の意図があった。オンライン飲み会だと人数が多いほど話しにくいし、若い人たちだけの方が年長者に配慮しなくてたくさん話せていいんじゃないかと考えていた。私のような老い先短いメンバーがチームに馴染んでなくても日々の業務に変わりはないし、業務で発言しにくいといったこともないし、他に山ほど仕事の積み上げがあって他のことに時間を使えるならそれに越したこともない。過去に2-3回打ち上げしていたと思うけど、私は今回が最初で最後の参加となった。</p><p>都合のある人はばらばら抜けたりもしていたけど、9人ほどずっと参加していて20時から始めて23時過ぎまでやっていた。この人数だと、みんなが話せるというわけでもなくて、本当に2つのグループに分けて雑談した方がよかったのかもしれない。私は1-2割ぐらいの時間を話していたと思うけど、ほとんど聞いているだけで話さないメンバーも半分ぐらいはいたと思う。それは年長者がたくさん話せるように配慮して若い人たちが話しにくいというのは実際にあるのではないかなとも思えた。終わりの時間を決めておかないと延々話しが続いてしまう。チキンレースみたいになってしまって誰かが抜けると言わないと終わらない雰囲気になってしまった。それが23時過ぎで、ある人がそろそろ抜けますと宣言して「私も」「僕も」と続いて、じゃあお開きにしましょみたいなノリで解散となった。いろいろな話しができて楽しかった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1026/>hannali dao に参加した</a></h1><div class=post-meta><span class=post-date>2022-10-26</span></div><span class=post-tags>#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/information-exchange/>information exchange</a>&nbsp;
#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/dao/>dao</a>&nbsp;</span><div class=post-content><p>23時に寝て1時に起きて2時間ほどだらだらしてて6時に起きた。</p><h2 id=最後のふりかえりイベント>最後のふりかえりイベント</h2><p>最終週なのでこのチームでのスプリントのふりかえりは今日が最後になる。メンバーが気を遣ってくれてこれまでの活動に感謝を伝えてくれた。いくつか出たコメントをあげる。</p><ul><li>インフラを整備した</li><li>チケット駆動開発の基礎を伝えた<ul><li>課題管理のよさもわかってきた</li><li>メンバーが課題管理を行う習慣化につながった</li></ul></li><li>社内でもっとも backlog を使いこなしているチームになった</li></ul><p>1年に渡って開発に参加して課題管理を見守ってきたので課題管理とは何ぞやの基礎をメンバーの大半は理解できるようになったと思う。(私からみて) ワークフローを洗練させるという視点で現状の運用は入門レベルではあるけれど、根っこの部分をちゃんと理解できているメンバーもちらほらみえてきたのであとは時間とともに上達していくのではないかと思う。このままもう2-3年取り組めばスクラムに頼らなくても高い生産性と迅速な情報共有ができるチームになるかもしれない。1年前はチームで課題管理がほとんどできていなかったのに、いまは大半のメンバーがやろうとするようになった。他のメンバーの行動を変えられたのが私としても嬉しい。いくつかの組織やチームで何度もやってきたことなので半年から1年あればできるというのは一定の信頼がおけて自信ももっている。今後の私の課題としてはこれを3ヶ月で達成する、1ヶ月で達成するための体系化やリーダーシップを作り上げていくことが考えられる。</p><h2 id=hannali-dao-始動>hannali dao 始動</h2><p><a href=https://hannari-python.connpass.com/event/262428/>Hannali DAO</a> に参加した。<a href=https://www.meta.com/ja-jp/help/quest/articles/horizon/getting-started-in-horizon-workrooms/migrate-to-meta-account-workrooms/>Metaアカウントへの移行(Workrooms向け)</a> によると、2022年8月30日以降は meta アカウントではないと workrooms にアクセスできないらしい。ここ2-3ヶ月 workrooms を使っていなかったのでまとめてシステムのアップグレードや meta アカウントの移行なども行った。まったく難しくなくて手順通り作業を進めればアップグレード作業も含めて1時間もあれば完了するぐらいの作業量。当初は workrooms で開催する予定だったが、諸事情あって zoom 開催になった。とはいえ metamask の設定などをいろいろやっていたので結果的に zoom でよかった。</p><p>おがわさんが作った dao で利用できる PROG という名前のカスタムトークンをメンバーに配って受け取る。受け取る方も metamask で <a href=https://wallet.polygon.technology/>wallet</a> と接続しないと受け取れない。polygonscan というサイトで自分のアドレスへの polygon ネットワークのトランザクションを次の uri で確認できる。PROG というカスタムトークンを 50 受領しているのがわかる。</p><ul><li><a href="https://polygonscan.com/token/0x14e1bd8689c150509a14db70b2d8c8cd33747cdf?a=0xe1688b4b017ae362261f14415cc0db72b8b53e10">https://polygonscan.com/token/0x14e1bd8689c150509a14db70b2d8c8cd33747cdf?a=0xe1688b4b017ae362261f14415cc0db72b8b53e10</a></li></ul><p>これだけのことをやるのにまったく作業の勘どころが働かなくてみんな四苦八苦していた。たったこれだけを2時間ぐらい。その後、dao や世の中の事例について雑談。お互いの情報共有になっておもしろかった。私は web3 関連に技術体系には否定的なスタンスを取る方だけど、技術そのものを否定しているわけではなく、なにかしら価値はあると考えているのでどういった用途に使うのがよいのかを探りたいという思いがある。最後にそれぞれのメンバーがもっている PROG トークンの比率に応じて投票権をもつ。みんなの投票結果を使って次の開催日を決めてみた。本当の投票は手数料がかかるトークンを使ったアプリになるのだろうけど、このアプリは手数料なしで使えるらしい。</p><ul><li><a href=https://snapshot.org/#/hannalidao.eth/proposal/0x2a0d62d602edc7b34e230e6cab4c63f0965e10b972aa78bc02ab6aa67e877dd8>次のDAO イベントいつやる？</a></li></ul></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1025/>引っ越しタスクの計画に着手</a></h1><div class=post-meta><span class=post-date>2022-10-25</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=post-content><p>2時過ぎに寝て7時半に起きた。眠れなくて夜更しした。</p><h2 id=バッチ処理移行のリファクタリング>バッチ処理移行のリファクタリング</h2><p>昨日の時点でスプリントのタスクを完了していたので空き時間に適当なリファクタリングを行う。k8s の cronjob を使い始める以前 <a href=/diary/posts/2022/0810/#アプリケーションからジョブへの移行>spring の Scheduled アノテーションを用いた定期処理</a> を使っていた処理のうち、優先度が低くて残っていた最後の1つを対応することにした。その処理を作ったのが私だったので私が移行した方が効率がよいだろうという話し。サーバーアプリケーション、バッチ処理 CLI、手動実行のためのフロント画面の修正と3箇所直す必要があったけれど、私がやれば半日もかからず移行できた。</p><h2 id=オフィスの引っ越し計画>オフィスの引っ越し計画</h2><p><a href=/diary/posts/2022/1020/#窓付きオフィスの契約>オフィスの引っ越し</a> が決まったので引っ越しタスクを整理していた。次の5つのタスクになる。契約はすでに完了しているので残りは4つ。</p><ul><li><del>引越し先オフィスの契約</del></li><li>引っ越し業者の手配</li><li>本店移転の行政手続き</li><li>現オフィスの退去の手続き</li><li>名刺の再作成</li></ul><p>オフィスを引っ越しすると、いくつか行政手続きにおける住所変更が必要になる。うちは就業規則を扱っていないので労働基準監督署とは関わりがない。たぶん3つだけ。</p><ul><li>法務局</li><li>税務署/都道府県税務所</li><li>年金事務所</li></ul><p>登記事項証明書を変更するとまた手数料に3万円かかる。それはともかくオンラインでできないかも調べてみた。<a href=https://www.moj.go.jp/MINJI/minji60.html>商業・法人登記のオンライン申請について</a> に手続きの方法が書いてあったけれど、この文章を読んで理解するよりも法務局行って書類に記入した方が速いように感じた。自転車で10分の場所に法務局があるので法務局のオンライン申請とか考えないことにする。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1024/>最終週の初日</a></h1><div class=post-meta><span class=post-date>2022-10-24</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て6時に起きた。週末に田んぼ作業で普段より体を動かしたせいか、久しぶりによく眠れた。</p><h2 id=開発お手伝いの最終週>開発お手伝いの最終週</h2><p>今週いっぱいで1年に渡った開発のお手伝いを終了する。金曜日に働いて月曜日は休暇をとる。1年働いて初めての休暇が業務最終日となる。契約上は稼働時間しか制約がないので日数は関係ないんだけど。すでに引き継ぎは完了しているし、私が担当している機能開発もほぼ終わっていて、細かいリファクタリングやバグ修正をするだけ。今週は余った時間に余剰な小さいタスクをいくつか取りながら業務を調整する感じかな。暇だったら開発ドキュメントを追加で書いてもいいかもしれない。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前156cmで、ストレッチ後160cmだった。前回と一緒かな。月曜日の夜に仕事終わりで行っている割にはまずまずの数字かな。土日の田んぼ作業でやや腰に張りがあった程度で体調は悪くなさそう。土日と比べて月曜日の夜のお店は閑散としていることに気付いた。ストレッチはトレーナーさんと1対1で行うから閑散としている施設のメリットがとくにない。これがジムならトレーニング器具が有限であることから待ち時間がなかったり、いろいろなトレーニング器具を使いやすいとかあったりするだろうし、単純に混雑しているジムで筋トレするのが嫌な人もいるだろう。経営視点から施設の稼働率をどうやって上げるかという思考になって、暇な時間にストレッチのお店にくるメリットはないのかな？とか考えてた。オチはないんだけど。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1023/>田んぼ作業 2日目</a></h1><div class=post-meta><span class=post-date>2022-10-23</span></div><span class=post-tags>#<a href=/diary/tags/agriculture/>agriculture</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=post-content><p>気付いたら22時には寝てて夜に何度か起きたけど5時ぐらいまで寝てた。普段よりは長く眠れていたと思う。5時頃に親が雨降ってきたと言ってて、一日雨だったらどうしようと思ってヤフー天気で今日の天気を確認して晴れだったので通り雨であるのを確認して安心してまた寝て6時半頃に起きた。</p><h2 id=田んぼ作業-2日目>田んぼ作業 2日目</h2><p>昨日の続き。もう1つの田んぼの草場になっているスペースをトラクターで耕した。前日に半分ほど耕してあったし、早朝に雨が降っていたので9時ぐらいから始めた。一部の日当たりのよくないところは土が乾いてなくてきれいに耕せなかった。この時期の1週間程度の晴天だとこの田んぼの日当たりの悪い一部が耕せない。どうせ作物を作るわけではないのできれいに耕せなくても実運用で困るわけではないけど、耕す作業の効率が悪くなったりはする。12時半ぐらいには終わった。</p><p><figure><img src=/diary/img/2022/1023_field-before.jpg></figure><figure><img src=/diary/img/2022/1023_field-after.jpg></figure></p><p>この田んぼに小屋と柵を作って山羊を飼いたいとずっと考えている。山羊の世話をしないといけないから私が実家に帰ってからでないと難しい。できるだけ実家に戻りたくないという思いはありつつも、なんらかの理由で数年帰らないといけない状況になったら山羊を飼うことに挑戦してみたいと思う。</p><p>お昼過ぎまで田んぼ作業して、親がアルバイト終わるまでテレビみて、18時前には神戸に戻ってきた。いつもならそれからオフィス行って調べものとかするんやけど、家で水星の魔女をみて、今日は休もうってノリでのほほんしてた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1022/>田んぼ作業 1日目</a></h1><div class=post-meta><span class=post-date>2022-10-22</span></div><span class=post-tags>#<a href=/diary/tags/agriculture/>agriculture</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span>
<img src=/diary/img/2022/1022_field-before.jpg class=post-cover alt="田んぼ作業 1日目"><div class=post-content><p>親が4時に起きてくるので一緒に起きて、なんか話して、6時ぐらいまでだらだらしてた。10月だと6時とか外も暗いしね。7時ぐらいから田んぼに出掛けていった。</p><h2 id=田んぼ作業-1日目>田んぼ作業 1日目</h2><p>雨降りで2週流れて3度目の正直。草場になっていた田んぼをトラクターで耕した。中途半端に作物を植えたりしているので空きスペースの草場になっているところだけを耕した。12時前には終えてたかな。朝早くから始めると涼しいので作業が捗る。</p><p><figure><img src=/diary/img/2022/1022_field-after1.jpg></figure><figure><img src=/diary/img/2022/1022_field-after2.jpg></figure></p><p>田んぼを耕したときはいつも facebook にも写真をアップしている。なぜか今回はいつもよりいいねが多かったように思う。たまたまみた人もいるのかもしれないけど、お昼ご飯にこんなもの食べたという料理の写真より、見栄えのない田んぼの写真の方が多くのいいねを集めるのはまったく理解できない。田んぼの写真のどこに関心があるのだろうか？</p><h2 id=お見舞い>お見舞い</h2><p>15時頃に戻ってきて16時から父のお見舞い。通常はタブレットでリモート面会を行う。前週にたまたまリモート面会する部屋が空いてなくて母がリアル面会できたそうで、私が来ているから同じようにできないか？と看護師さんに頼んだらそうしてくれた。もうコロナも落ち着きつつあるから病院側の壁も低くなりつつある。但し、リアル面会は1人10分 (リモート面会は20分) という決まりがあるそうで、私を優先したので母は面会できなかった。5分ずつ交代はできないか？と聞いたけど、それは不可とのこと。素人考えでは合理的な理由はなく決まりだからというようにみえた。もしかしたら1年以上、父とリアル面会してなかったかもしれない。意思疎通はできないけれど、顔色もよく元気そうにはみえた。少し前に床ズレで細胞が壊死してその部位を手術で切断したという話しを聞いていた。経過も良好ということでぱっと見た感じでは不具合があるようにはみえなかった。10分近況を話してお見舞いを終えた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1021/>夕方から実家帰り</a></h1><div class=post-meta><span class=post-date>2022-10-21</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/movie/>movie</a>&nbsp;</span><div class=post-content><p>21時に寝て何度か起きながらも睡眠をとって6時に起きた。眠れなくなってなんか疲れが溜まっている気がする。いつも通り淡々と開発してた。</p><h2 id=早退け>早退け</h2><p>翌日に朝から田んぼ作業をするため、17時にはオフィスを出て帰り支度をして高速バスで実家に帰る。平日の18時40分発という帰宅時間だったせいか、わりとバスは混雑していてほぼ満席だった。こんな時間に淡路島行きのバスに乗ったことがなかったので通勤で使っている人もいるんやろなと思う。20時ぐらいに最寄りのバス停に着いて20時半には実家に帰れた。</p><h2 id=るろうに剣心-最終章-the-beginning>るろうに剣心 最終章 The Beginning</h2><p>たまたま金曜ロードショーで <a href=https://wwws.warnerbros.co.jp/rurouni-kenshin2020/home_entertainment/beginning.php>るろうに剣心 最終章 The Beginning</a> をやっていた。実写版の他のるろうに剣心をみたことないけど、漫画から実写になっているものは大抵つまらないだろうという先入観があった。しかし、この作品はおもしろかった。言うても、るろうに剣心の原作ファンがみないとぼそぼそ喋るお侍が殺し合いする訳の分からない映画にしかみえないとは思う。おそらく原作ファン向けの映画なんだとは思うけれど、その世界観を知っている人向けに、超人的な技とかなくて達人の域での殺し合いにおける緊張感と原作のストーリーがマッチしてて映画としてよかったと思う。あと斉藤一の牙突もかっこよかった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1020/>オフィスの引っ越しが確定</a></h1><div class=post-meta><span class=post-date>2022-10-20</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=post-content><p>2時に寝て5時前に起きて7時に起きた。いつも通り淡々と開発してた。</p><h2 id=窓付きオフィスの契約>窓付きオフィスの契約</h2><p><a href=/diary/posts/2022/1014/#窓付きのオフィスの連絡>窓付きのオフィスを法人契約に切り替える</a> 手続きを進めていた。登記事項証明書を写真に撮って必要書類をまとめて申請していた。無事に審査も通過して契約書が送られてきたので内容を精査して、クラウドサインだったので契約締結も円滑に進められた。いま風に言えば DX だろうけれど、契約を紙の書類でやらなくてよいのは手間暇が少なくて嬉しい。すぐに契約金も支払って引っ越しの日程を12月3-4日と定めた。取引先に迷惑がかからないよう、土日にこっそりと引っ越しする。なにもしていないのに自分の希望が叶うといった事象が起きると生きていてよかったなと思うことが多い (大袈裟過ぎるが) 。そんなこと人生で稀にしかないと思うんだけど、長生きしているとたまにそういうことがある。オフィスの引っ越しできるのが嬉しくて多くの人に話してしまった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1019/>イベントはしご</a></h1><div class=post-meta><span class=post-date>2022-10-19</span></div><span class=post-tags>#<a href=/diary/tags/java/>java</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;</span><div class=post-content><p>1時に寝て4時に起きて6時に起きた。</p><h2 id=jackson-の-tips>jackson の tips</h2><p>jackson で調べているとググったときに stackoverflow に書いてある内容が、機能的には正しいけれど、deprecated になっているアノテーションが多々ある。そのときに新しいやり方はどう設定していいか分からないということがある。今日たまたま実装した処理に2つアノテーションが出てきたので備忘録として書いておく。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@JsonNaming</span><span style=color:#f92672>(</span>PropertyNamingStrategies<span style=color:#f92672>.</span><span style=color:#a6e22e>SnakeCaseStrategy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><ul><li>デシリアライズするときに <code>my_field</code> のようなスネークケースのフィールド名を <code>myField</code> のメンバーにマッピングする</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@JsonIgnoreProperties</span><span style=color:#f92672>(</span>ignoreUnknown <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><ul><li>デシリアライズするときに json に存在してクラスに存在しないフィールドを無視する</li><li>データ構造の移行時にエラーを出さないとか、不要なフィールドがあるときに設定するとよい</li></ul><h2 id=上司道-リーダーはレジリエンスを高める自己肯定感を学ぼう>上司道 リーダーはレジリエンスを高める自己肯定感を学ぼう</h2><p>以前 <a href=/diary/posts/2022/1005/#SECI-モデルのワークショップ>SECI モデルのワークショップ</a> に参加して、同じチームにおられた方が <a href=https://tomoaki2222ok.wixsite.com/mysite>上司道</a> という勉強会コミュニティを運営しているのでお誘いを受けた。せっかくの縁だと思ったのでコミュニティに参加した。その勉強会で <a href=https://self-esteem.or.jp/>日本セルフエスティーム普及協会</a> の工藤氏による自己肯定感の紹介イベントがあったので試しに参加してみた。</p><p>軽く私の自己肯定感をチェックしてみると普通。低くも高くもない。私はどこかのタイミングで他人と比較するのをやめた。それは自己肯定感を高めるためにはよい慣習らしい。そのおかげで私は自己肯定感が低くはないようにみえる。自己肯定感には社会的と絶対的の2つの構成概念がある。</p><ul><li>社会的自己肯定感</li><li>絶対的自己肯定感</li></ul><p>重要なのは絶対的の方になるらしいが、多くの人は社会的の方が割合として大きいらしい。社会的に頼っていると、キャリア戦略に失敗したり、会社でリストラされたりすると自尊心が傷つきやすくなる。私もこのタイプだと思う。近い将来リストラされることを想定して自分の会社を作ったという背景もある。自分の会社があると、自分で自分をリストラしない限りは集団に帰属しているという社会的欲求を満たせる。それが社会的自己肯定感と関係があるように思える。いまの私の環境は自尊心が傷つきやすい状況ではないため、あまりセミナーの内容には関心をもてなかった。それよりも参加者が共有していた自尊心を脅かされる状況の経験談にひどいものが多くて、それらと比べると私の環境は恵まれていて世の中に感謝する気持ちになった。</p><h2 id=後藤達也さんのオンラインミーティング>後藤達也さんのオンラインミーティング</h2><p>たまたま21時半からコアメンバー向けの zoom ミーティングを行うという投稿をみかけたので参加してみた。2時間ぐらいやってたのかな？軽く聞いて帰ろうと思っていたものの、なんだかんだで最後まで参加していた。</p><ul><li><a href=https://note.com/goto_finance/n/nc4140548387a>【募集停止します】月980円プラン</a></li></ul><p>軽く計算すると note のメンバーシップだけで約774万円/月の売上になる。すごい。</p><blockquote><p>(500 * 9577) + (3016 * 980) = 7,744,180</p></blockquote><p>こんな儲かっているサブスクリプションの新規募集を停止する背景として、これ以上コアメンバーが増えてもコミュニティとしての運営が難しくなるからやりたくないのだという。例えば、すでに3000人いるが、この人数でオフ会を開催することはできない。月々の料金を高くしてメンバー数を減らすというのが経済学的な解であることは理解しているが、後藤さん1人で提供しているようなサービスに月980円を超える料金をとることに抵抗感があるから値段をあげたくないと話されていた。とても謙虚な人だと思う。コミュニティ運営を難しくせず料金もあげないという戦略からコアメンバーをこれ以上増やさないという判断をしたそうだ。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1018/>dapr のアップグレード準備</a></h1><div class=post-meta><span class=post-date>2022-10-18</span></div><span class=post-tags>#<a href=/diary/tags/dapr/>dapr</a>&nbsp;
#<a href=/diary/tags/rabbitmq/>rabbitmq</a>&nbsp;</span><div class=post-content><p>1時に寝て7時に起きた。寝る前に閃光のハサウェイを見始めたら夜更ししてしまった。</p><h2 id=dapr-の-highly-available-モードの検証>dapr の Highly-available モードの検証</h2><p>先週からテスト環境で dapr の <a href=https://docs.dapr.io/operations/hosting/kubernetes/kubernetes-production#highly-available-mode>Highly-available mode</a> を試している。ついでに dapr の 1.8.x へのアップグレードも行う。<a href=https://blog.dapr.io/posts/2022/07/08/dapr-v1.8-is-now-available/>Dapr v1.8 is now available</a> をみると、一番上に書いてあるのだから pubsub サービスの Dead letter topics がもっとも注目すべき新機能と言えるのだろう。これは pubsub のミドルウェアすべての Dead letter topics の機能が実装されたことを言っている。うちは rabbitmq を使っていて、それは次の pr で v1.5 で追加されていて、うちの環境では v1.7 から実運用していた。rabbitmq は Dead letter topics 対応が始まった初期のうちに実装されたと言える。</p><ul><li><a href=https://github.com/dapr/components-contrib/pull/883>Add dead letter support in RabbitMQ pubsub #883</a></li></ul><p>現時点での dapr の最新の安定版は 1.8.5 になる。</p><ul><li><a href=https://github.com/dapr/dapr/releases/tag/v1.8.5>https://github.com/dapr/dapr/releases/tag/v1.8.5</a></li></ul><p>Highly-available を有効にする設定ファイル values.yml の書き方は次になる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>global</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ha</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>来週には本番環境への適用&アップグレード作業を行うので wiki の作業手順のドキュメントを書いてた。</p><p>helm リポジトリ設定の更新。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ helm repo add dapr https://dapr.github.io/helm-charts/
</span></span><span style=display:flex><span>$ helm repo update
</span></span><span style=display:flex><span>$ helm search repo dapr --versions | grep 1.8.5
</span></span><span style=display:flex><span>dapr/dapr	1.8.5        	1.8.5      	A Helm chart <span style=color:#66d9ef>for</span> Dapr on Kubernetes
</span></span></code></pre></div><p>任意の設定を施した values.yml を指定して dapr をアップグレードする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ helm upgrade dapr dapr/dapr --version 1.8.5 --namespace dapr-system --values ./values.yml --wait
</span></span></code></pre></div><p>dapr はデフォルトで <code>dapr-system</code> という名前空間を使う。アップグレードした helm のパッケージ情報を確認する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ helm list -n dapr-system
</span></span></code></pre></div></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1017/>副反応終わり</a></h1><div class=post-meta><span class=post-date>2022-10-17</span></div><span class=post-tags>#<a href=/diary/tags/cdk/>cdk</a>&nbsp;
#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;</span><div class=post-content><p>0時に寝て7時半に起きた。久しぶりによく寝た。ワクチン接種の副反応はおさまり体調は回復した。昼間は UI 改善やバグ修正をしていた。</p><h2 id=インフラ勉強会>インフラ勉強会</h2><p>引き継ぎを兼ねて cdk の使い方、簡単な本番環境向けのデプロイ作業を共有した。wiki に一通りの説明は書いてあって、実際に cdk アプリケーションのソースや設定をみたり、cloud formation のドリフトを検出して解消するのを実践したりしてた。そんな中、別の不具合もみつけた。rds のデータベースのバージョン情報が次のように差分として出力される。</p><pre tabindex=0><code>Resources
[~] AWS::RDS::DBInstance GodPostgreSQL/Instance1 GodPostgreSQLInstance1857D2683
 └─ [-] EngineVersion
     └─ 13.6
</code></pre><p>少し前にたまたま cdk のバージョンを 2.44.0 にアップグレードしてあったのだけど、この差分は 2.44.0 以降で発生する。次の issue の説明によると、メジャーバージョンをまたぐ rds のアップグレードを cdk で実行すると、Stack が回復不能な状態になるのでそのワークアラウンドとしてバージョン情報をみえなくしてしまって、誤って cdk で rds のアップグレードできないようにしているとのこと。この差分はとくに気にする必要なく、一度デプロイしてしまえば次回からは出力されなくなる。インフラにも影響は与えないとのこと。</p><ul><li><a href=https://github.com/aws/aws-cdk/issues/21758>(rds): AWS::RDS::DBInstance should not have EngineVersion property set for Aurora clusters #21758</a></li></ul><p>過去にマイナーバージョンアップは試したことがあって、やはりエラーにはなるのだけど、実際のインフラはアップグレードされて、それで運用上は問題なかったようにみえる。但し、cdk 正しく rds のアップグレードを扱えないというのは確かであるようにみえる。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>試しに今日 aurora postgresql のバージョンを 13.4 から 13.6 にアップグレードしたらデプロイは失敗してるのに実際のインフラはアップグレードして、cf のテンプレートが実際のインフラと不整合になった。手動でテンプレートを更新して cdk のコードと同期する必要がある。</p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1517831237997838336?ref_src=twsrc%5Etfw">April 23, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1016/>安静状態</a></h1><div class=post-meta><span class=post-date>2022-10-16</span></div><span class=post-tags>#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=post-content><p>2時に寝て8時に起きた。前日遅くまで飲み歩いてたのと、ワクチン接種後の発熱もあったから安静にしようと思って基本的に一日中寝てた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1015/>はっくばー再訪</a></h1><div class=post-meta><span class=post-date>2022-10-15</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;</span><div class=post-content><p>0時に寝て2時に起きて眠れなくて4時過ぎまでだらだらして7時に起きた。お昼に勉強会を終えて (ワクチンによる37.1℃の発熱で) 軽くしんどかったので2時間ほど寝てた。</p><h2 id=ストレッチ>ストレッチ</h2><p>ワクチン接種翌日だったけれど、問題なくストレッチへ行くことができた。行く前にオフィスで体温を計測したら36.9℃だった。Dr.stretchの店頭で計測したら36.1℃だった。腕で簡易的に測る計測器の精度はそんなもんかなとか思ったりした。今日の開脚幅は開始前156cmで、ストレッチ後160cmだった。左腕は注射したばかりなので気を遣ってもらいながらストレッチをしてもらった。右足の太ももとふくらはぎに張りがあって疲労が溜まっているようにも思えた。毎週ストレッチしているから体調を維持できている側面は大きいと思う。</p><h2 id=vr-空間での勉強会>VR 空間での勉強会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/261476/>【三宮.dev オンライン】VR開催！4周年記念LT大会</a> に参加した。<a href=https://hubs.mozilla.com/>Mozilla Hubs</a> というサービスを使って vr 空間での部屋で勉強会を行った。<a href=/diary/posts/2021/1016/#VR-イベント参加>1年前は cluster というサービス</a> で開催していた。hubs というサービスを使うのが私は初めてだったのだけど、まだ不安定なところがあるのか、マイクがうまく接続できなくて参加者間で聞こえる・聞こえないといった状況が何度か発生していた。</p><p>参加者が使い慣れていないツールで勉強会を開くと、操作がわからなかったりマイク・スピーカー接続トラブルによるコミュニケーションが取りにくかったりしてなかなか難しいなと周りをみながら思った。ブラウザで vr 空間を自由に移動したり、アバターの位置関係を考慮して声の聞こえ方が変わったりするのは付加価値としておもしろいのだけど、移動することにそもそも意味がないとか、話者から遠いと声が聞こえにくくて近くに移動しないといけないとか、実務的な勉強会の運営としてはあまり意味がない。hubs の vr 空間で遊んでみて、vr の付加価値とイベントとしての付加価値をどうつなげるかといったことが今後の課題になってくるように思えた。</p><h2 id=はっくばー再訪>はっくばー再訪</h2><p><a href=/diary/posts/2022/0521/#はっくばー>近所にあるはっくばー</a> に再訪してきた。2回目。プレオープンから3ヶ月以上経過してどんな雰囲気になっているのか興味本位で見に行ってきた。三宮.dev の slack で募ったら3人参加表明してくれて、勉強会後に2人さらに増えて、私を含めて6人で行ってきた。はっくばー行く前に軽く串カツ屋さんで晩ご飯を食べてから訪問した。勉強会を終えてから参加者で晩ご飯食べに行くというのが、コロナ前は普通のことだったのが随分と久しぶりのイベントのように感じた。はっくばーではオーナーの学生さんが1人で営んでいた。ここ3ヶ月ぐらいはずっと1人でまわしているらしい。プレオープンのときにその場でアルバイトになった人たちや手伝うとか威勢のよいことを言っていた人たちは半年も経たないうちにいなくなったんだというのが伺えた。</p><p>うちらが行ったときにもう1組グループがいた。そこに3年前ぐらいに神戸の勉強会コミュニティを作りたいと言っていたのにたった2回の勉強会でやめた人もいて、相手もこちらを覚えていたみたいで3年ぶりに話しをした。オーナーの意向でもう一組のメンバーとうちらのグループと半々で雑談しようということになった。そうしているうちにさらに8人ぐらいのグループがやってきた。<a href=https://www.kikagaku.ai/>キカガク</a> という会社の会長さんが、起業家育成のサービスをやっていて、そのサービスの受講生と一緒に来られた。たまたま私がいる席にその会長さんが来られたのでサービスの内容や起業についての雑談をしていた。その会長さんはしっかりした考えをもっていて、全くスタートアップではないけれど、スモールビジネスの起業家を育てるためのビジネスをやりたいという話しだった。共感できるところもいくつかあった。</p><p>うちらは21時頃に訪問して、その後は3組のグループがいたことになる。オーナー曰く、過去一番の大盛況だったらしい。グループが3組いて雑談している (20人ぐらい) のが過去一番と言っているぐらいなので三ノ宮という場所ならそんなものだろうとは思えた。あとはっくばーで久しぶりに会った知人について、一緒に働いたことのある人たちからの評判がかなり悪かった。うまく言えないけど、私も信頼できない人だと感じていた。そういう人は普段の行動や態度に表れているのだろうと思えた。たまたま行ったときが過去一番の盛況ぶりだったのでオーナーの学生さんと雑談する時間を取れなかった。またもう1回、暇そうなときに行ってみてオーナーさんの話しも聞いてみたいと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1014/>オフィスとワクチン</a></h1><div class=post-meta><span class=post-date>2022-10-14</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て悪夢で3時にうなされて7時に起きた。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。話題が多くて予定していた時間に終わりきらなくて1つの話題は次回に持ち越した。今日話した内容は次の通り。</p><ul><li>新しいお仕事の業務内容についての共有</li><li>旅費規定と就業規則についての話題</li><li>知人の社内ツールのフィードバックに向けての情報共有</li></ul><p>知人が社内で使っているタスク管理ツールに招待してくれたので軽く触ってみた。想定していたよりもずっと作り込みされててすごいなぁと感心しつつ、知人の役に立つかどうかはわからないけど、課題管理の専門家としていくつかフィードバックをまとめて送付した。はらさんがその社内ツールは <a href=https://tailwindcss.com/>tailwind css</a> を使って開発しているのではないかと予想していた。実際に当たっているかどうかは知人に確認しないとわからないが、tailwind css というフレームワークはユーティリティファーストな考え方で css は何も書かずスタイルの class だけを書けばよいので開発が早く、全体の統一感のようなものも作りやすいとのこと。私が使う機会があるのかどうかはわからないけど、そういうフレームワークがあるんだなと知って学びになった。</p><h2 id=窓付きのオフィスの連絡>窓付きのオフィスの連絡</h2><p>先日みつけた <a href=/diary/posts/2022/0728/#内覧前に…>窓付きオフィスの内覧前に</a> 契約が決まってしまって断念したことを書いた。<a href=https://bizcomfort.jp/hyogo/kobekyuukyoryuchi.html>神戸旧居留地オフィス</a> にはもう1つ窓付きの部屋があるのだけど、そこに空きが出たら連絡してくださいとダメ元でお願いしていた。なんでもお願いするものだとか、世の中親切な人がいるとか、そういう類の話しで本当に11月末で部屋が空くので引っ越しますか？といった連絡がきた。感謝。</p><blockquote><p>7F-14 11月末空き予定・申込あり ￥62,700 ￥11,000 2名 6.08㎡ 完全個室/棚・窓あり</p></blockquote><p>前回に内覧済みなのでその返信で申し込みもした。すでにサイトの情報が更新されていて「申込あり」とは私のことだ。既存の契約移行のやり取りをしていたら、いまのオフィスは個人名義で借りていることに気付いた。ちょうど会社を作るには会社の住所が必要で会社ができる前に契約する必要があったから個人名義での契約になっている。この機に法人契約に変えようと決めた。法人契約の手続きのために登記事項証明書を取り寄せる必要がある。<a href=https://www.touki-kyoutaku-online.moj.go.jp/whats/kantan/what_kantan.html>登記ねっと</a> からオンラインで申請したので水曜日までには郵送で届くはず。その書類を写真に撮って電子データに変換して手続きをしないといけない。法人の身分証明の用途で使うだけなので登記事項証明書そのものが紙である必要性はまったくないが、どうやらこの書類は電子データは提供されていないようだ。会社の手続きでよく使う書類の1つなので電子データとして扱うニーズは高いと思うのだけど、悪用とかセキュリティの側面から意図的に紙の運用にしているのかな？</p><h2 id=ワクチン4回目接種>ワクチン4回目接種</h2><p><a href=/diary/posts/2022/0414/#ワクチン3回目接種>3回目は4月14日</a> に接種したのでちょうど6ヶ月が経過した。11月に東京出張するのでその保険の意味もあっていま接種するしかないと慌てて予約した。4回目のワクチンはオミクロン対応らしい。3回目と同じクリニックを予約して前回は待ち人おらずだったのだけど、今回は20分早く行ったら前に2人並んでいて予定の10分前ぐらいに注射してもらうことができた。いまこの日記を書いていて、接種直後は36.0℃だったのがその後5時間経って36.9℃になった。まったくしんどくないので平気だけど、そろそろワクチンも本気を出してきた感じか。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1013/>サイトコントローラーの障害は大変そう</a></h1><div class=post-meta><span class=post-date>2022-10-13</span></div><span class=post-tags>#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;
#<a href=/diary/tags/java/>java</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て3時に起きて6時半に起きた。だいぶよく眠れるようになってきた。</p><h2 id=サイトコントローラーの障害>サイトコントローラーの障害</h2><p>お手伝いしている宿泊業のシステムでトラブルが発生している。厳密には外部サービスになるのだが、複数のオンライン予約サイトの違いを吸収して単一のインターフェースを提供する宿泊業のハブシステムのような存在をサイトコントローラーと呼ぶらしい。週明けから全国旅行支援という新しいGoToトラベルが開始されて、その予約が想定以上のトラフィックになっていてサイトコントローラーがダウンしてしまった。web 開発者向けに例えれば aws の s3 が落ちて大半のサービスに影響が出てなんもできないみたいな状況かな。</p><ul><li><a href=https://www.traicy.com/posts/20221012252499/>宿泊施設向け予約・販売管理システム「TL-リンカーン」、復旧目処立たず　約5,100施設に影響</a></li></ul><p>全国レベルのニュースになるぐらいの障害規模が大きいらしい。それだけユーザーが多いシステム／事業者なんだろうとは思う。システムと向き合う上で障害が発生するのは仕方ないが、フォールトトレランスは常に意識して設計・運用しないといけないことを、今回の障害を傍からみていて感じた。</p><h2 id=java-のちょっとした小技>java のちょっとした小技</h2><p>java で1つのリストを複数のリストに分割したいときに <a href=https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#subList(int,int)>List.subList</a> というメソッドがある。複数の値を並行処理するときなど入力を分割するのに便利そう。使い方は次の通り。toIndex を超えると IndexOutOfBoundsException が投げられるのでそこだけ注意かな。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>var total <span style=color:#f92672>=</span> myList<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>var step <span style=color:#f92672>=</span> 20<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> total<span style=color:#f92672>;</span> i <span style=color:#f92672>+=</span> step<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    var toIndex <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> step<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>toIndex <span style=color:#f92672>&gt;</span> total<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        toIndex <span style=color:#f92672>=</span> total<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    var subList <span style=color:#f92672>=</span> myList<span style=color:#f92672>.</span><span style=color:#a6e22e>subList</span><span style=color:#f92672>(</span>i<span style=color:#f92672>,</span> toIndex<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// do something
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=シャンプー>シャンプー</h2><p>散髪屋さんのマスターからシャンプーを変えた方がいいんじゃないかとアドバイスされた。髪は油分と水分のバランスが大事らしく、シャンプーによって変わることもあるらしい。いつからか記憶にないけど、少なくとも学生時代から私はずっと <a href=https://www.kao.co.jp/merit/products/norinse/>メリット リンスのいらないシャンプー</a> を使っている。20年ぐらい？こだわりがあるわけでもないし、このシャンプーを使っていて懸念があったことは一度もない。マスターから <a href=https://hscare.jp/shop-products/men/all-collections>h&s scalp</a> がよいとお勧めされた。せっかくの機会だから試してみようかなと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1012/>踊龍を学ぶ</a></h1><div class=post-meta><span class=post-date>2022-10-12</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;</span><div class=post-content><p>0時に寝て3時に起きて6時に起きた。わりとよく眠れた。朝一でバグに気付いて慌てて修正したりしていた。</p><h2 id=リーダーとしての易経>リーダーとしての易経</h2><p>「第四段階 踊龍 龍が飛躍する時」を読んだ。</p><p>龍の成長過程を年齢に当てはめると、潜龍は10代、見龍が20代、君子終日乾乾すが30代とある。実際には第3段階は量から質を磨く時なので相対的に長くなる。20代後半から40代ぐらいとみてもよい。そうやって40代には実力が十分に備わっていると言える。踊龍から飛龍になれるかどうかは実力だけではなれない。ここで時、つまりは好機をとらえる必要がある。ここでいう時とは時・処・位の3つを指している。飛龍になるには早すぎても遅すぎてもダメだという。機と期と気を観ないといけない。観るというのは洞察力を指している。</p><ul><li>機: 機会</li><li>期: 期日</li><li>気: 気運と兆し</li></ul><p>志は変容したり、しぼんでいく。世の中の流れに押し流され、埋没してしまうこともある。志を失うと乾乾することも放棄して、やがて亢龍となり衰退していく。潜龍のときに抱いた志を持ち続けられていれば、龍の変遷過程を経てイメージが実際に実現できていて、踊龍で最終段階になっている。1つ1つのパーツが適所にはまり、描いてきた志のビジョンが明確になる。機が熟し時が満ちる。</p><p>いくつか分かるような分からないようなキーワードもあるし「兆しを観て適切な時に動け」と言われてもプラクティスというより精神論に近い。易経とは時の変化の法則性を理解して、人間が然るべき時を理解できるようにする学問ではあるが、一朝一夕ではないことが文章からわかる。それでもいくつか共感するところはあって、志とまで昇華しなくても思い付きでよいアイディアだと思ったことが1週間も経つとそう思わなくなったり、1ヶ月もするとやる気をなくしたりすることが私は多々ある。別の観点では、初期の挑戦というのは得てしてうまくいかない、いや大半が失敗する。余談だが本書の中に「潜龍用うるなかれ。」という言葉が出てくる。重用したり責任をもたせてはいけないとある。自分が潜龍だとしたら焦って早成を求めてはいけない。経験も実力もないこの時期にすべきことは志を抱くこと。</p><p>会社を始めて最初の2年で大きな失敗をしたときに課題管理を自社のビジネスにできないかと思い付いた。その後、3ヶ月間調べたり話したりして、その後1年間スクラム開発に勤しみ、そしてこれからプロダクトマネージャーとして実践する。決して順風満帆ではないが、たしかに時が変わり、やっていることも変わり続けている。そして、課題管理という分野における解像度は1年前よりも高くなった。易経の乾為天をフラクタルに考えるのは正しくないのかもしれないけど、製品開発のサイクルとみなしても理は通りそうな気もする。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1011/>自分史を易経から読み解く</a></h1><div class=post-meta><span class=post-date>2022-10-11</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;</span><div class=post-content><p>0時に寝て3時に起きて5時に起きて7時半に起きた。夜に紅茶を飲むのをやめて少し眠れるようになった。QA レビュー待ちのタスクが溜まっていて、リリース前でやることないから軽微なバグ修正してた。</p><h2 id=リーダーとしての易経>リーダーとしての易経</h2><p>週末に三ノ宮.devの勉強会がある。発表者が少なかったら私もなにかしら発表しようかと考えている。</p><blockquote><p>テーマは「継続」でみなさんが継続していることについて色々教えてください！</p></blockquote><p>継続と聞いて思い浮かべるのは過去に menta に書いた記事とかも見返していた。</p><ul><li><a href=https://menta.work/post/detail/12952/LzRIJkovXazr4cqpzgg7>プログラミングと書くこと</a></li></ul><p>いまになって <a href=/diary/posts/2022/0904/#40代は改革と革命>易経の本</a> も軽く読み直してみたいと考えている。もう10年以上プログラミングを学び続けてきたし、転職や起業など自分がやってきた歴史からふりかえるとなにか発見があるかもしれない。</p><h3 id=易の三義>易の三義</h3><ul><li>変易: 森羅万象、すべてひと時たりとも変化しないものはない</li><li>不易: 変化には必ず一定不変の法則性がある</li><li>易簡: その変化の法則性を理解すれば、わかりやすいものになる</li></ul><p>時は必ず変化するので、良い時は悪い時へ向かい、また悪い時は良い時へ向かう。変化するから成長と発展がある。</p><h3 id=時の三要素>時の三要素</h3><p>易経のいう時には時間だけでなく空間も含む。次の3つの要素で成り立つ。</p><ul><li>時: 時間、期、タイミング、兆し</li><li>処: 環境、状況、場</li><li>位: 位置、立場、社会的地位、人間関係</li></ul><p>時・処・位を踏まえた判断と行動がリーダーには必要。</p><h3 id=時の変遷過程の原則>時の変遷過程の原則</h3><p>易経の64の時の中でもっとも原則的な時の変遷をたどる龍の話しが乾為天 (けんいてん) という卦になる。次の6段階で力を蓄え、師に仰ぎ、繰り返し、試みて、変化を為し、衰退する。</p><ol><li>潜龍: 変化の始まり</li><li>見龍: 目が開かれる時</li><li>君子終日乾乾す: 道を反復する</li><li>踊龍: 自ら試みる時</li><li>飛龍: 変化を起こす</li><li>亢龍: 平らかなものは必ず傾く</li></ol></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1010/>出張もくもく会を催す</a></h1><div class=post-meta><span class=post-date>2022-10-10</span></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;</span><div class=post-content><p>0時に寝て8時に起きた。本当は休日なんだけど、運用に影響を与える変更の pr を金曜日に送っていて、その approve が出たのでマージ処理とデプロイをしてテストのお願いをしようと考えていたら、要件漏れがあることに気付いてその修正を行って再度 pr を出した。この変更はちゃんと検証しないといけない修正なのでできれば今日中にはテスト環境にデプロイしておきたかった。</p><h2 id=出張もくもく会>出張もくもく会</h2><p>出張中の隙間に当たる11月3日(木)は祝日でやることがない。普段の土日祝日は元気ならオフィスで調べものや自社のお仕事をしている。出張中だからコワーキングスペースに出掛けて作業しようという延長上で、いまシェアオフィスを借りている業者さんは全国展開しているので東京のコワーキングスペースの会議室も借りられるのであれば、会議室を1日借りてしまってもくもく会にしてしまおうと思い付いた。</p><p>会議室の予約システムからは東京のコワーキングスペースの会議室も予約できた。どうやって入室すればいいかわからないなと思ってサポートに電話してみた。そしたら、シェアオフィスの借り主が全国の施設を利用できるかどうかは契約次第らしい。最近の契約はそうなっているらしいが、私が契約したとき (約3年前) はどうだったかを忘れてしまった。たしか契約するときに関西は使い放題プランがサービスで付いていたのは契約書で確認できたが、関東はどうなるのかよく覚えていなかった。うちの施設に常駐しているコンシェルジュさんにどういう契約になっているのかを聞いてみた。すぐに調べてくれて問題ないと確認できた。せっかくなので connpass にイベントページを作ってみた。会議室なので8席しかない。この人数なら知り合い限定でよいとも考えている。とはいえ人が集まらなかったら寂しいので一応は一般枠も設けておく。一般枠は参加しにくいように金額設定しているが、様子をみてからあとで無料にする予定。</p><ul><li><a href=https://kazamori.connpass.com/event/262898/>出張もくもく会</a></li></ul><h2 id=m2-macbook-air-が届いた>m2 macbook air が届いた</h2><p>先日購入した <a href=/diary/posts/2022/1004/#m2-macbook-air-購入>macbook air</a> が届いた。ひとまず起動してマシンの初期設定を行う。デスクトップまで起動して、最初にやることとして思い付いたのが google chrome をインストールして <a href=https://1password.com/jp/>1password</a> のインストールと初期設定だった。すべての認証は 1password で管理しているのでこのサービスが使えないと業務できなくなる。また空き時間に少しずつ設定していく。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1009/>iphone のデータ移行が簡単になってた</a></h1><div class=post-meta><span class=post-date>2022-10-09</span></div><span class=post-tags>#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/migration/>migration</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て7時に起きた。オフィスで荷物を受け取る必要があったので8時にはオフィスに行って普通に作業してた。午前中は金曜日の作業で途中になってた単体テストを仕上げた。</p><h2 id=iphone-移行>iphone 移行</h2><p>iphone 11 から <a href=https://www.apple.com/jp/iphone-14-pro/>14 pro</a> に移行した。色はディープパープルにした。本当は 11 のグリーンが気に入っていたのでグリーンしたかったけどないから仕方なく。先月の上旬ぐらいから iphone のスクリーンの一部が操作を受け付けなくなった。タッチしても反応しないといった状態になる。最初はドラクエタクトをする上であるボタンが押せない程度だったのだけど、その後も使い続けているうちにその反応しない領域が少しずつ拡大していった。文字入力のパネルなら「や」と「ら」の領域が反応しない、paypay で支払うときに8や9が入力できない、電話が掛かってきてもスワイプで着話できないとか。一部の領域が反応しなくなってから1ヶ月ぐらいで普段使いに支障がでるようになっていた。</p><p>幸いにも9月半ばにはらさんとも相談しながら 14 pro を購入する決断をしていた。9月16日に注文したものが本日届いた。注文時の予定では10月20-27日の予定になっていたのがかなり前倒しになったみたい。朝から古い端末の ios を最新の 16.0.2 にアップグレードしたり、icloud へのバックアップを取ったりしていた。私はとくに icloud のストレージ容量を契約していないので無料の5GiBしかない。それなのにバックアップは成功して、なぜだろう？と調べたら機種変更時の icloud へのバックアップは容量無制限で使えるらしい。とても助かった。</p><ul><li><a href=https://www.itmedia.co.jp/news/articles/2109/21/news113.html>iPhone機種変時のiCloudバックアップ、容量無制限で無料に　iOS 15の新機能、その手順を解説</a></li></ul><p>iphone のデータ移行は <a href=https://support.apple.com/ja-jp/HT210216>クイックスタート</a> という仕組みが3年前から提供されていて、基本的にはこの機能を使えばとくに労力なく移行できた。もちろんアプリによっては個別の移行作業が必要になるけれど、クイックスタートのおかげで基本的には古い端末と新しい端末を並べて移行の承認のような作業をするだけで済む。クイックスタートは iphone 同士を bluetooth 接続で繋ぐ。bluetooth 通信でもデータ移行できるそうだけど、wifi に比べると速度が遅いので256GiBなら3時間ぐらいかかる見通しらしい。icloud経由にするとwifiなので速度も速く15分程度で復元処理を完了できた。私の場合、電話、line、認証系アプリといったコアな機能の移行を1時間ほどで完了できた。一昔前に比べてかなり簡単になっているように感じた。</p><h2 id=ストレッチ>ストレッチ</h2><p>本当は田んぼに実家に帰っている予定だったので日曜日の夜からストレッチ。今日の開脚幅は開始前157cmで、ストレッチ後161cmだった。最近はまったくストレッチしないようになりつつあるのだけど、腰の張りのアンバランスさは解消されていて、トレーナーさん曰くそれはよい状態だと言えるらしい。ストレッチを受ける前から雨降りでストレッチを終えてから何をしようかふらふらとアーケードを散歩して、結局のところ、やることがなくて雨に振られながら帰ってきた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1008/>議論の前提条件としての悪意の排除</a></h1><div class=post-meta><span class=post-date>2022-10-08</span></div><span class=post-tags>#<a href=/diary/tags/facilitation/>facilitation</a>&nbsp;</span><div class=post-content><p>20時ぐらいに寝て0時に起きてだらだらしてまた寝てお昼ぐらいまで寝てた。寝不足が深刻になってきて生活が乱れてきた。昨日の夜から実家に帰って田んぼする予定が雨降りでまたキャンセルになった。秋の天候は難しい。</p><h2 id=建設的な議論のためのファシリテーション>建設的な議論のためのファシリテーション</h2><blockquote><p>しかしながら本当に素晴らしいなと思ったのは司会のアナウンサー平石さんで、恐らく途中で「これは反ひろゆき側の分が悪い」と思ったのか、現地のひろゆきさんの態度を責めたり、ひろゆきさんに「揚げ足取りはやめてください」ってバッサリやったりであのゴチャゴチャした話をバランス取りながらよくまとめたなぁと思いました。あれがなかったら「番組ぐるみでひろゆきの肩持った！沖縄をバカにした！偏向報道だ！」みたいな批判が絶対産まれてたはず。</p><p>ほんと、動画を見れば良くわかるんですが、平石さんはかなり上手に、でも時には強引にバランス取りに行ってるのがわかると思います。朝生、田原さんが引退したら後任は平石さんしか居ないんじゃないかな～～。</p></blockquote><p><a href=https://www.facebook.com/yoppymodel/posts/pfbid0vyY3ViRsTPdVAgPzQDcq4mx1H1jkqkxPfCQ2M4Jetp7DqBMo4NjHgiXhESwgd7TEl>ヨッピーさんの投稿</a> をみかけて関心をもったので abema prime の動画をみた。たぶん1週間ぐらいしか youtube ではみれないはず。</p><div class=video-container><iframe src=https://www.youtube.com/embed/vnD3MHD3ccE allowfullscreen title=「抗議の声をどう発信？ひろゆき＆せやろがいおじさん」></iframe></div><p>論理的な正しさだけで言えば、ひろゆきの方が分があるように私も思う。一方でひろゆきの姿勢のなにが悪いかもこの番組のファシリテーションの過程で明らかになっていくのが私には受け取れた。というのは、ひろゆきは言葉の定義を大事にしているわけでもなく、沖縄問題に関心があるわけでもなく、ひろゆき自身が現状を想定できないわけでもなく、論理的に正しくなかったとしても活動している団体や人々を嘲笑する悪意があることは明白だと思える。世の中をよりよくしようという想いから主張しているわけではないことは、ひろゆきと大空さんの対話の姿勢の違いをみれば明らかだと私も思う。一方でひろゆきは一般人の代表という意味ではそうだろうと思う。ほとんどの人は自分の身の回りことや生活以外のことに関心がない。</p><p>平石さんのファシリテーションが素晴らしいというのは私からもそうみえた。とくに論理的にひろゆきが正しかったとしても、ひろゆきの悪意が垣間見えたときは平石さんが議論を中断させて軌道修正していたようにみえた。あの場で悪意をもっていたのはひろゆきだけで、他の参加者は現状の問題や虐げられた人たちへの配慮をもった上での発言や議論を進めようとしていた。平石さんは悪意を断ち切ったファシリテーションをしたと言えるかもしれない。悪意があることは珍しく熱くなってひろゆきも「きたない文字」と失言したことからも明らか。ひろゆきも人間なんだなとみえた瞬間でもあった。建設的な議論をするためには、現状の課題を共有し、少なくとも現状よりもよくしようという想いがあることを前提にしないといけないのを今回の議論をみていて感じた。</p><p>平石さんのファシリテーションのよかったところをまとめる。</p><ul><li>悪意を断ち切るように議論を促した</li><li>平行線の議論を仕切り直した</li><li>論理的ではなかったとしてもメンバー全員に配慮をした</li></ul><p>余談だけど、大空さんが本来の座り込みという言葉は、例えば刑務所や入国管理局にいる人たち、自分の体以外に抗議活動ができない人たちの、もっと自由が制限された人たちの特別な抗議活動であったものが、くだんの抗議活動も本来の座り込みとは大きく異なるものだという主張には関心がもてた。本来の言葉の意味を軽くしてしまうことは、例として刑務所や入国管理局にいる人たちのやっている活動を台無しにしてしまうというのは別の視点で学びになった。とくに大空さんはリベラルはそういった議論から逃げてはいけないと自ら難しい問題に対して在るべき姿勢で解決しようとしていて、その姿勢には共感できた。同じ主張をしていてもひろゆきとは対照的にみえた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1007/>フォームの enter key の振る舞いと制御</a></h1><div class=post-meta><span class=post-date>2022-10-07</span></div><span class=post-tags>#<a href=/diary/tags/vue.js/>vue.js</a>&nbsp;</span><div class=post-content><p>1時に寝て3時に起きて5時までだらだらしてて8時に起きた。季節の変化のせいかな？夜眠れない生活が普通になってきた。最近セブンイレブンのマスカット紅茶をよく飲んでいるのでカフェインの摂り過ぎなのかもしれない。</p><h2 id=vuetify-の-v-form-の-enter-key-無効化>vuetify の v-form の enter key 無効化</h2><p>あるフォーム画面でテキスト入力欄で enter key を押下すると xhr リクエストが送信されてしまう。これがフォームのデフォルトの振る舞いかどうか、私はフロントエンドに詳しくないからよくわからない。検索などはその方が便利なときもあるだろうからそういう振る舞いがあることは知っている。業務の重要な情報を誤って確定してしまってはいけないから、画面によっては禁止した方がよい状況もある。vuetify の v-form を使っている画面だとデフォルトで enter key を入力すると submit 処理が実行されてしまう。パラメーターに渡される event 情報からもマウスクリックとキー入力の見分けがつかない。</p><ul><li><a href=https://vuetifyjs.com/en/api/v-form/#events>v-form events</a></li><li><a href=https://vuetifyjs.com/en/api/v-text-field/#events>v-text-field events</a></li></ul><p>それぞれのコンポーネントの events をみると、v-form は <code>input</code> と <code>submit</code> しか対応していない。v-form の設定で直接 enter key 入力のイベント制御はできない。<a href=https://v2.vuejs.org/v2/guide/components-custom-events.html#Binding-Native-Events-to-Components>Binding Native Events to Components</a> によると、そういった状況のために <code>.native</code> を使うと直接イベントをフックできるらしい。ここで v-text-field は <code>keyup</code> ではなく <code>keydown</code> のみを提供しているせいか <code>keydown</code> を次のように prevent してあげることでテキスト入力欄で enter key を押下しても submit 処理は呼ばれなくなった。但し、副作用として v-form の slots にあるすべてのコンポーネントの enter key の <code>keydown</code> イベントを prevent してしまう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>  <span style=color:#f92672>&lt;v-form</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>submit=</span><span style=color:#e6db74>&#34;submit&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>@keydown.native.enter.prevent</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><p>vuetify の issue をみていると過去には無効だったものを有効化したようにもみえる。なにが正しい振る舞いなのかよくわからないし、どうやって制御するのが正しい方法なのかよくわからなかった。</p><ul><li><a href=https://github.com/vuetifyjs/vuetify/issues/1545>[Feature Rquest] v-form prop: Enter key submits form #1545</a></li></ul></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1006/>gitlab を使う開発のお仕事</a></h1><div class=post-meta><span class=post-date>2022-10-06</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/gitlab/>gitlab</a>&nbsp;</span><div class=post-content><p>0時に寝て何度か起きて、なぜか寝坊して9時に起きた。おそらく休日以外で9時まで寝ていたことはこの日記を書き始めて初めてだと思う。</p><h2 id=次のお仕事の意識合わせ>次のお仕事の意識合わせ</h2><p>来月から新しい取引先のお仕事を手伝う。先方と業務内容の確認のための打ち合わせを行った。先方はパッケージベンダーになる。私の大先輩にあたる方々が働いている会社だし、当社が目指すパッケージベンダーとしてのお手本のような会社でもある。大いに学ぶところがある業務になるだろうと想定している。私はここ数年 web 業界で働いてきたせいか、やり取りをしていても勝手の違いを少し感じる。それは web 業界が緩過ぎるからだと思う。気を付けないと先方からみて失礼になってしまうかもしれない。契約や初期のオンボーディングも兼ねて10月31日から1週間ほど東京出張する予定になる。</p><p>またリポジトリに <a href=https://gitlab.com/>gitlab</a> を使っている。課題管理や ci/cd も基本的には gitlab で行うことになる。私のもっている github のドメイン知識はまったく活かせないが、gitlab の機能を学ぶよい機会でもある。gitlab と聞くと私は一番先に Remote Manifesto を思い浮かべる。</p><blockquote><ol><li>Hiring and working from all over the world (instead of from a central location).</li><li>Flexible working hours (over set working hours).</li><li>Writing down and recording knowledge (over verbal explanations).</li><li>Written processes (over on-the-job training).</li><li>Public sharing of information (over need-to-know access).</li><li>Opening up documents for editing by anyone (over top-down control of documents).</li><li>Asynchronous communication (over synchronous communication).</li><li>The results of work (over the hours put in).</li><li>Formal communication channels (over informal communication channels).</li></ol><p><a href=https://about.gitlab.com/company/culture/all-remote/guide/>https://about.gitlab.com/company/culture/all-remote/guide/</a></p></blockquote><p>私の考える課題管理とも相性がよく、時間よりも成果、書くことや非同期コミュニケーションの重要性、組織の透明性を簡潔に表現したマニフェストとなっている。うちの会社はまだ社員採用できる状況ではないが、社員を採用する時期になったらこういったマニフェスト的なものを自社でも作りたいと思う。そのときの最も参考になるものだと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1005/>SECI モデルのワークショップに参加した</a></h1><div class=post-meta><span class=post-date>2022-10-05</span></div><span class=post-tags>#<a href=/diary/tags/python/>python</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/information-exchange/>information exchange</a>&nbsp;
#<a href=/diary/tags/knowledge-management/>knowledge management</a>&nbsp;</span><div class=post-content><p>0時に寝て、2時、3時、5時に起きて7時に起きた。夜中何回も起きる。</p><h2 id=データ移行スクリプト>データ移行スクリプト</h2><p>あるテーブル間のデータ移行のために久しぶりに python のスクリプトを書いた。python の文法を忘れるぐらい最近は書かなくなってしまっていた。1時間ほど書いていると興がのってきてそれなりに書けた。書いていれば体が覚えているので自然に動く的な。dump データ (insert 文) から json 文字列を含むデータを移行しないといけなかった。json 文字列を1つのカラムの値としてパースするのが思ったより難しかった。とはいえ python だとこういう煩雑な文字列操作は得意なので1-2時間で実装して移行作業を完了できた。</p><h2 id=seci-モデルのワークショップ>SECI モデルのワークショップ</h2><p>たまたま twitter でフォローされたアカウントのタイムラインでみかけた <a href=https://peatix.com/event/3336364>ゲームで体感！SECIモデル～チームビルディングの瞬間に迫る！～</a> に参加した。SECI モデルとは野中郁次郎氏と竹内弘高氏の論文で提唱された知識創造のフレームワークの1つ。私は実践知の本で知って、スクラム本でも紹介されていたのでよく覚えていた。</p><ul><li><a href=https://t2y.hatenablog.jp/entry/2021/12/19/183339>アジャイル開発とスクラム 第2版 顧客・技術・経営をつなぐ協調的ソフトウェア開発マネジメント</a></li></ul><p>暗黙知と形式知がぐるぐるまわるんだよという頭だけで理解していて、違和感もなかったし、普通に理解していたつもりだった。SECI モデルを学ぶことを意識したワークショップに実際に参加してみると、知識で理解していた概念と実際に行動 (ワークショップを通してチームで学ぶ) を通して得たフィードバックのようなものがあって、参加前の私は SECI モデルを誤解していたことにも気付いた。単純に知識創造だけのことを言っているわけではなく、チームビルディングや人間関係も知識創造には影響を与えている。私が他人にあまり関心をもたない人間だから人間関係や多様性が知識創造にどういった影響を与えるかを軽視していたと思う。</p><p>このワークショップは有償なのもあるだろうけど、2時間で SECI モデルとチームビルディングを組み合わせた要点が学べるようによく練られたものになっていたと思う。チームビルディングの3要素として、目的・関係性・多様性をあげていた。SECI モデルは個人、チーム、組織、環境の集合の要素としてモデル化されていた。個人よりも大きい集合 (チーム、組織) の重要性を私は軽視していたから気付きが多かったという話し。SECI モデルで提唱されていることは、多寡はあっても開発者は普段の業務で普通にやっている。受講後に SECI モデルで実践していることをよりエンパワーメントする仕組みを課題管理もしくは課題管理システムの文脈でできないだろうかと考えたりもしていた。ふらっと参加したのに私にとって気付きが多かったのでこのワークショップを運営しているコミュニティのイベントに今後も継続的に参加してみようと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1004/>備えあれば憂いなし</a></h1><div class=post-meta><span class=post-date>2022-10-04</span></div><span class=post-tags>#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/biztrip/>biztrip</a>&nbsp;</span><div class=post-content><p>2時に寝て6時に起きた。眠り方がわからなくなってきた雰囲気。昨日に引き続き、淡々とリリース前の細かいバグ修正をしていた。フロントエンドの ux のよくないところを修正したりしていた。</p><h2 id=m2-macbook-air-購入>m2 macbook air 購入</h2><p>次のお仕事は東京出張もちょいちょい入る (自オフィスのデスクトップマシンで開発できない) ことからラップトップの開発マシンがあった方がよいなと気付いて <a href=https://www.apple.com/jp/macbook-air/>M2 MacBook Air</a> を購入した。2022年7月に販売開始されたそうなのでタイミングとしてはちょうどよかった。本当は macos である必要はない。linux が動くラップトップなら何でもよいのだけど、dell のラップトップをみても値段がそんなに安くない。数万円ぐらいの違いしか変わらないなら macbook にしようと思って決断した。1週間ほどで納品される。</p><p>いま macbook を使わなくなった理由の1つとしてバタフライキーボードが大きい。前職でも2台ほどキーボードのキー入力が一部受け付けなくなって交換してもらったりしていた。2016年モデルの macbook を持っているけど、もうバタフライキーボードを使いたくないという忌避感が強い。2019年からシザーキーボードが復活しているらしい。使ったことない他メーカーのラップトップに躊躇する理由もキーボードが気に入らないものだったらどうしようという不安がある。いまデスクトップマシンだから realforce の打鍵に慣れ親しんでしまい、キーボードの使い心地に敏感になっていると思う。</p><p>新しいお仕事、新しい挑戦、新しいマシン。気持ちを入れ替えて集中したい。</p><h2 id=東京出張の準備>東京出張の準備</h2><p>次のお仕事のキックオフのため、10月31日の週に1週間ほど東京出張しようと考えている。コロナ禍になってから約3年間ほとんど神戸を出ていない。大阪すら年に1-2回ぐらいしか行っていない。東京は約3年ぶり。新幹線やホテルの予約の仕方も忘れてしまった。せっかく行くので長い間、会っていない友だちや知人に挨拶できればと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1003/>お仕事探しのふりかえり</a></h1><div class=post-meta><span class=post-date>2022-10-03</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;
#<a href=/diary/tags/reflection/>reflection</a>&nbsp;</span><div class=post-content><p>2時に寝て7時に起きた。とくに可もなく不可もなく淡々とリリース前の開発の詰めや検証をしていた。大きな改修を先週末に終えていたので後始末的なタスクが主だった。</p><h2 id=お仕事探し終了>お仕事探し終了</h2><p>いくつか選考して次のお仕事を決めた。8月からお仕事探しをしていた。いくつか求人プラットフォームのステータを更新し、途中まで選考が進んでいた会社には辞退メールを送った。昨年は1ヶ月ほどで次のお仕事をたまたまみつけたけど、今回は2ヶ月ぐらいかけて求職活動をしていた。探す期間が短いとどうしても妥協したり近視眼的な考えに陥ってしまいやすい。心に余裕があることの利点を考慮して2ヶ月ぐらいかけるのがちょうどよいのかもしれない。私は基本的に辞めると決めて関係者と調整してから次を探す人間なので転職活動に失敗すると無職になるリスクが高い。自分の会社に所属していると、最悪の場合、契約終了時に次のお仕事がなくても無職になるわけではない。この安心感が人生において重要なものだとわかるようにもなってきた。</p><p>今回は3つの経路を使ってお仕事探しをしていた。</p><ul><li>人脈</li><li>スカウト</li><li>エージェント</li></ul><p><a href=/diary/posts/2022/0930/#隔週の雑談>以前にも書いた</a> が、私のような人間は普通の求職活動をしても、他者と比べて秀でたところがなく競争に勝つのが難しい。コミュニティやいくつかの会社で働いてきた人脈を駆使して、自分という人間を知っている人からお仕事をもらうしか生き残りの戦略はないのかもしれない。次のお仕事は課題管理を徹底的に実践して他社のお手伝いをする。うちの会社が今後ビジネスをやっていけるかどうかの分水嶺になるかもしれない。できるだけの準備をして臨む。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1002/>主に寝てた</a></h1><div class=post-meta><span class=post-date>2022-10-02</span></div><span class=post-tags>#<a href=/diary/tags/audio-media/>audio media</a>&nbsp;
#<a href=/diary/tags/web3/>web3</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;</span><div class=post-content><p>2時に寝て8時に起きて、昼間はだらだらしてた。ここ最近は夜にあまり眠れてなかったので久しぶりによく寝た気がする。</p><h2 id=web3-の信頼できる情報源>web3 の信頼できる情報源</h2><p><a href=https://voicy.jp/channel/2627/396827>Web3を思い切りディスった上で褒めてみる</a> を聞いた。キーワードとして技術動向はみておこうと昨年ぐらいから web3 関連の記事を読んだりコミュニティで議論したりはしている。最近はなかじまさとしさんの発言を全面的に信頼してみている。というのは開発者としても投資家としても成功をおさめた方なので信頼できる。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>Web3を思い切りディスった上で褒めてみる<a href=https://t.co/AYlknWY20P>https://t.co/AYlknWY20P</a><a href="https://twitter.com/hashtag/Voicy?src=hash&ref_src=twsrc%5Etfw">#Voicy</a></p>&mdash; Satoshi Nakajima @NounsDAO 🇺🇦 (@snakajima) <a href="https://twitter.com/snakajima/status/1576427464213295105?ref_src=twsrc%5Etfw">October 2, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><ul><li>play2earn はすべてポンジスキーム<ul><li>入っていくお金より出ていくお金の方が少ない</li><li>投資のようなスキームではない</li><li>トークンの価値を操作して一見出ていくお金を増えているようにみせることはできる<ul><li>先行者利益エコノミー</li></ul></li><li>ネズミ講とまったく同じ</li><li>これを褒めるインフルエンサーは基本的にポジショントークか頭の悪い人たち</li></ul></li><li>dao は株式会社を置き換えない<ul><li>dao でやっていることの大半は安価な資金調達でしかない<ul><li>ベンチャーキャピタルから資金調達するのは難しいが、ど素人から資金調達するのはべらぼーに簡単</li><li>2-3年前の ico ブームと同じ、情報弱者からの搾取でしかない</li></ul></li><li>もっとも dao らしいと言われる <a href=https://nouns.wtf/>nouns dao</a> ですら苦労している<ul><li>資金運用を多数決で決めるのはものすごく難しい</li><li>賢い連中が揃ってないとうまくいかない</li><li>リーダーシップも必要となる</li><li>dao からお金がほしいためにアプローチしてくるメンバーもいる</li><li>株式会社よりもきれいに運営できるとはまったく思えない</li><li>dao を運営するのはとても難しい</li></ul></li><li>非営利団体が寄付金を運営するには向いているかもしれない</li></ul></li><li>メタバースと web3 は相性が悪い<ul><li>双方は独立したものである</li><li>メタバースのサービスはブロックチェーン上ではできない<ul><li>web2 の技術で開発・運営されている</li><li>web3 アプリではまったくない</li></ul></li></ul></li><li>web3 がもたらす素晴らしい世界<ul><li>スマートコントラクトに大きなポテンシャルはある<ul><li>デプロイすれば未来永劫、勝手に動き続けてくれる</li><li>さまざまな開発者が作ったスマートコントラクトのアプリが協調してずっと動き続ける未来がくるはず<ul><li>人間が関与しないシステムが動き続ける仕組み</li></ul></li></ul></li><li>さまざまなスマートコントラクトが結びつく集合体やエコシステムに価値がある<ul><li>人手がかからないので中間業者が存在しない</li><li>クリエイターに大半のお金がまわる仕組みを実現できる</li></ul></li><li>お金がまわるコストが極端に下がる、もしくは透明化されることの価値<ul><li>apple store は30%の手数料をとっているが、スマートコントラクトなら2-3%という時代になるだろう</li><li>中間業者が悪いことはできない</li></ul></li></ul></li></ul><p>以前にも dao + nft を使って非営利団体で運用するのはよいのではないかとツィートされていた。非営利なコミュニティでお金の管理を透明化するところに私も関心をもっている。スマートコントラクトでさまざまな団体が低コスト且つ透明性をもったお金の管理ができるのであればそういう分野に挑戦する可能性はある。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1001/>バックオフィスの作業</a></h1><div class=post-meta><span class=post-date>2022-10-01</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/audio-media/>audio media</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;</span><div class=post-content><p>1時に寝て7時に起きた。引き続き夜はあまり眠れない。とくにこれといったことをしていたわけではないけど、請求書を発行したり受け取った請求書の処理をしたりと溜まった雑務を捌いてた。lapras さん経由でバックエンドエンジニアのスカウトが届いた。ざっと募集要項をみたら選考を受ける程度にはよさそうにみえたけれでもこれ以上は増やさない。縁がなかった。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前156cmで、ストレッチ後159cmだった。先週に引き継いで数値が悪化していてよくなくなっているのかもしれない。大抵は右腰に張りがあるのだけど、今日は左腰に張りがあった。あとはふくらはぎに張りがあったかな。夜あまり眠れていないこと以外は体調は悪くない。とはいえ、夜眠れていないのがよくないのかもしれない。</p><h2 id=上場時の有価証券報告書>上場時の有価証券報告書</h2><p>たまたまみかけたので <a href=https://voicy.jp/channel/32/396619>プログリット上場！ダウンラウンドの原因はここか！一の部かなり言いたい放題！</a> を聞いてみた。k さんの経歴は公認会計士でニューヨークの4大会計事務所の1つで働いた後、帰国してベンチャーキャピタルで働いて、いまスタートアップを起業している。ベンチャー起業の財務諸表は見慣れているということなんだと思う。私も自分の会社で起こったことと財務諸表を見比べて勉強しつつ、他社の財務諸表を読んで勉強することもある。この放送はプレミアム向けなのでお金を払わないと聞けないのかな？会社をやっていると、こういった有償の情報ソースを経費にしやすい。単発でもサブスクリプションでも気軽に聞ける。</p><p>以前にも <a href=/diary/posts/2022/0918/#会計監査と数字の着眼点>ある一般社団法人の会計監査</a> の記事を社内コミュニティで議論したりした。いま社内コミュニティも少しずつ育ってきて社外メンバーが6人いる。少数の閉じたコミュニティの方が気軽に発言できて濃いやり取りができておもしろかったりもする。</p></div></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=/diary/dates/2022/10/page/3/><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/diary/assets/main.js></script>
<script src=/diary/assets/prism.js></script></div></body></html>