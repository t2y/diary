<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2022/06 on forest nook</title><link>/diary/dates/2022/06/</link><description>Recent content in 2022/06 on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/dates/2022/06/index.xml" rel="self" type="application/rss+xml"/><item><title>ワーケーション 1日目</title><link>/diary/posts/2022/0603/</link><pubDate>Fri, 03 Jun 2022 14:24:23 +0900</pubDate><guid>/diary/posts/2022/0603/</guid><description>三ノ宮から城崎温泉への移動 8時前にレンタカーを借り、途中で同乗者のすみよしさんを拾ってから城崎温泉へと向かう。途中、丹羽市の氷上というパーキングエリアで15分ほど休憩した。よく知らない道を運転しているとどこのパーキングエリアで休憩していいかわからなくなる。事前に休憩する場所を調べておく必要があったことに気付いた。もともとかなり余裕をもったスケジュールで運転していたものの、普通に高速道路を運転していると10時半ぐらいには城崎温泉の近くまで着いていた。宿の管理人さんには12時前後と伝えていたのでかなり早過ぎる。寄り道しようということで近くの玄武洞に行ってみることにした。残念ながら展示している岸壁の工事をしていてあまり景観はよくなかったけど、軽いハイキングのような感覚で玄武洞周りの公園を歩いたり、ミュージーアム (というよりはお土産さんみたい印象) で様々な石をみたりもできた。30分強ほど時間を潰して11時半頃に城崎温泉のきのいえに辿り着いた。何度か道を間違えてうろうろしたりもした。初めて行く場所は道を間違えることも計算に入れて少し早めに行くぐらいでちょうどよい時間帯になるのかもしれない。
きのいえのチェックイン 2泊3日で きのいえ という城崎温泉唯一の一棟貸しの宿を借りた。本来のチェックインは15時からになるものの、管理人さんの計らいで特別に12時にチェックインの手続きをしてくれた。宿に到着して電話すると15分ぐらいでやってきて、宿泊者のワクチン摂取確認と本人確認を行い、その後に宿泊料を私がクレジットカードで一括で支払った。これは ひょうごを旅しようキャンペーン＋(プラス) で割引を受けるためにワクチン摂取証明と本人確認が厳しいという背景。事務手続きを終えて施設の説明を一通り受ける。管理人さんは見た目30歳前後の若い方で、普段はカーテン職人として働きながら週末だけきのいえの管理人をやっているという。週末起業みたいなものかもしれない。とても親切な方で丁寧に設備の説明をしてくれて、付近のおすすめのお店や城崎温泉での過ごし方なども教えてくれた。
はらさん合流と午後の作業 13時前に千葉から来られたはらさんを城崎温泉駅で出迎えて一緒にお昼ご飯を食べた。但馬牛の牛すじ丼とうどんを食べた。おいしろかった。宿に戻っていたらお手伝い先のミーティングが入っていることに気付く。1時間ほどテレビ会議でややこしい内容の方向性の議論をして、その後もチケットの作業をしていた。17時ぐらいから sns でシェアするときの ogp 画像のデザインについてはらさんに相談にのってもらった。これまでは、私が求めていたデザインに近いものを最初から提供してくれていたデザイナーさんだったが、今回は苦戦していて、最初のものは全然違うって感じでボツにして再作成してもらった。いくつかやり取りして、ある程度、近いものに修正してくれて、微調整をはらさんと一緒にしていた。はらさんのアドバイスは的確で、こうした方がよいと言われた内容をデザイナーさんに伝えて、修正してもらって、再アップロードしてもらった画像をみると、ちょっとした違いでうける印象も変わったりしてよくなった。デザイナー視点におけるみるポイントがあるんだなぁと、素人の私にはわからない視点を見抜かれていたようだ。
外湯めぐりと晩ご飯 17時過ぎからみんなの作業も終わったところで温泉に入りにいくことにした。7つの外湯 があり、まずは駅の近くの「さとの湯」に入った。2Fと3Fにお風呂があって、3種類のお風呂と3種類のサウナ (高温、中温、ミスト)、露天風呂があって、1つずつはそんなに特筆するものはないものの、いろいろ入ってみて楽しめたのでよかったと思う。温泉に入ってから定番のコーヒーを飲み、宿の管理人さんに紹介してもらった居酒屋 ふくとみ さんに行ってきた。3人で適当に見繕ってくださいという適当なオーダーでおでんとお刺身を頼んで十分な量が出てきたのでよかった。他にもおすすめはいくつかあったけれど、食べきれないので何度か通うようなお店みたい。
就寝前 22時前には宿に戻ってきて今日の出来事をまとめていた。座椅子で低足の机に向かってラップトップを使うのは腰にくるというのを数時間で悟って、私はタイニングテーブルと椅子で作業することにした。翌日の旅程のチェックや補足事項の調査、細々したことをやっていた。</description><content>&lt;h2 id="三ノ宮から城崎温泉への移動">三ノ宮から城崎温泉への移動&lt;/h2>
&lt;p>8時前にレンタカーを借り、途中で同乗者のすみよしさんを拾ってから城崎温泉へと向かう。途中、丹羽市の氷上というパーキングエリアで15分ほど休憩した。よく知らない道を運転しているとどこのパーキングエリアで休憩していいかわからなくなる。事前に休憩する場所を調べておく必要があったことに気付いた。もともとかなり余裕をもったスケジュールで運転していたものの、普通に高速道路を運転していると10時半ぐらいには城崎温泉の近くまで着いていた。宿の管理人さんには12時前後と伝えていたのでかなり早過ぎる。寄り道しようということで近くの玄武洞に行ってみることにした。残念ながら展示している岸壁の工事をしていてあまり景観はよくなかったけど、軽いハイキングのような感覚で玄武洞周りの公園を歩いたり、ミュージーアム (というよりはお土産さんみたい印象) で様々な石をみたりもできた。30分強ほど時間を潰して11時半頃に城崎温泉のきのいえに辿り着いた。何度か道を間違えてうろうろしたりもした。初めて行く場所は道を間違えることも計算に入れて少し早めに行くぐらいでちょうどよい時間帯になるのかもしれない。&lt;/p>
&lt;h2 id="きのいえのチェックイン">きのいえのチェックイン&lt;/h2>
&lt;p>2泊3日で &lt;a href="https://kinosaki-kinoie.com/index.html">きのいえ&lt;/a> という城崎温泉唯一の一棟貸しの宿を借りた。本来のチェックインは15時からになるものの、管理人さんの計らいで特別に12時にチェックインの手続きをしてくれた。宿に到着して電話すると15分ぐらいでやってきて、宿泊者のワクチン摂取確認と本人確認を行い、その後に宿泊料を私がクレジットカードで一括で支払った。これは &lt;a href="https://www.hyogo-tourism.jp/furusato-ouen/">ひょうごを旅しようキャンペーン＋(プラス)&lt;/a> で割引を受けるためにワクチン摂取証明と本人確認が厳しいという背景。事務手続きを終えて施設の説明を一通り受ける。管理人さんは見た目30歳前後の若い方で、普段はカーテン職人として働きながら週末だけきのいえの管理人をやっているという。週末起業みたいなものかもしれない。とても親切な方で丁寧に設備の説明をしてくれて、付近のおすすめのお店や城崎温泉での過ごし方なども教えてくれた。&lt;/p>
&lt;p>&lt;figure>&lt;img src="/diary/diary/img/2022/0603_hotel1.jpg"/>
&lt;/figure>
&lt;figure>&lt;img src="/diary/diary/img/2022/0603_hotel2.jpg"/>
&lt;/figure>
&lt;/p>
&lt;h2 id="はらさん合流と午後の作業">はらさん合流と午後の作業&lt;/h2>
&lt;p>13時前に千葉から来られたはらさんを城崎温泉駅で出迎えて一緒にお昼ご飯を食べた。但馬牛の牛すじ丼とうどんを食べた。おいしろかった。宿に戻っていたらお手伝い先のミーティングが入っていることに気付く。1時間ほどテレビ会議でややこしい内容の方向性の議論をして、その後もチケットの作業をしていた。17時ぐらいから sns でシェアするときの ogp 画像のデザインについてはらさんに相談にのってもらった。これまでは、私が求めていたデザインに近いものを最初から提供してくれていたデザイナーさんだったが、今回は苦戦していて、最初のものは全然違うって感じでボツにして再作成してもらった。いくつかやり取りして、ある程度、近いものに修正してくれて、微調整をはらさんと一緒にしていた。はらさんのアドバイスは的確で、こうした方がよいと言われた内容をデザイナーさんに伝えて、修正してもらって、再アップロードしてもらった画像をみると、ちょっとした違いでうける印象も変わったりしてよくなった。デザイナー視点におけるみるポイントがあるんだなぁと、素人の私にはわからない視点を見抜かれていたようだ。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2022/0603_food1.jpg"/>
&lt;/figure>
&lt;h2 id="外湯めぐりと晩ご飯">外湯めぐりと晩ご飯&lt;/h2>
&lt;p>17時過ぎからみんなの作業も終わったところで温泉に入りにいくことにした。&lt;a href="https://kinosaki-spa.gr.jp/about/spa/7onsen/">7つの外湯&lt;/a> があり、まずは駅の近くの「さとの湯」に入った。2Fと3Fにお風呂があって、3種類のお風呂と3種類のサウナ (高温、中温、ミスト)、露天風呂があって、1つずつはそんなに特筆するものはないものの、いろいろ入ってみて楽しめたのでよかったと思う。温泉に入ってから定番のコーヒーを飲み、宿の管理人さんに紹介してもらった居酒屋 &lt;a href="https://tabelog.com/hyogo/A2808/A280801/28017042/">ふくとみ&lt;/a> さんに行ってきた。3人で適当に見繕ってくださいという適当なオーダーでおでんとお刺身を頼んで十分な量が出てきたのでよかった。他にもおすすめはいくつかあったけれど、食べきれないので何度か通うようなお店みたい。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2022/0603_food2.jpg"/>
&lt;/figure>
&lt;h2 id="就寝前">就寝前&lt;/h2>
&lt;p>22時前には宿に戻ってきて今日の出来事をまとめていた。座椅子で低足の机に向かってラップトップを使うのは腰にくるというのを数時間で悟って、私はタイニングテーブルと椅子で作業することにした。翌日の旅程のチェックや補足事項の調査、細々したことをやっていた。&lt;/p></content></item><item><title>draw.io で描いたインフラ構成図</title><link>/diary/posts/2022/0602/</link><pubDate>Thu, 02 Jun 2022 08:51:06 +0900</pubDate><guid>/diary/posts/2022/0602/</guid><description>0時に寝て4時に起きて7時までだらだらしてた。なんか調子悪い。
draw.io を描いてみた 先日、draw.io で aws 構成図を描く調査 をした。割り込みの作業をやっていてシステム構成図の作成を先延ばししていた。だいたいの調査は終わっていたのであとは根を詰めて描くだけ。次のサンプル構成図をみながら同じように描いていく。
AWS のアーキテクチャ図を描きたい ! でもどうすれば良いの ? 2つの環境があって、そのうちの1つを作成した。新規構築した環境でスクラッチから描いたものの、インフラリソースの構成要素が少なかったのでサンプル構成図を参考にしながらすぐに描けた。半角スペースで文字位置を調整したりすると、github 上で svg 表示したときに文字の位置がずれたりするのでそういうやり方はダメだとわかった。あと draw.io の振る舞いなのか、vscode のプラグインのせいなのかわからないけど、オブジェクトの配置の前後関係をうまく調整できなくてコピペし直したり、なにかの操作をしたタイミングでインフラリソースのアイコンが後ろに隠蔽されていたりもした。リソース間の接続のための線も自動的に繋がるときもあって便利なのだが、誤動作して変な位置にレイアウトされることもあって制御が難しい。私の感覚では、多少の利便性のために自動化されるよりも、自分で思い通りに制御出来る方を好む。draw.io の自動調整機能の制御が難しいなと思った。</description><content>&lt;p>0時に寝て4時に起きて7時までだらだらしてた。なんか調子悪い。&lt;/p>
&lt;h2 id="drawio-を描いてみた">draw.io を描いてみた&lt;/h2>
&lt;p>先日、&lt;a href="/diary/diary/posts/2022/0523/">draw.io で aws 構成図を描く調査&lt;/a> をした。割り込みの作業をやっていてシステム構成図の作成を先延ばししていた。だいたいの調査は終わっていたのであとは根を詰めて描くだけ。次のサンプル構成図をみながら同じように描いていく。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://aws.amazon.com/jp/builders-flash/202204/way-to-draw-architecture/">AWS のアーキテクチャ図を描きたい ! でもどうすれば良いの ?&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>2つの環境があって、そのうちの1つを作成した。新規構築した環境でスクラッチから描いたものの、インフラリソースの構成要素が少なかったのでサンプル構成図を参考にしながらすぐに描けた。半角スペースで文字位置を調整したりすると、github 上で svg 表示したときに文字の位置がずれたりするのでそういうやり方はダメだとわかった。あと draw.io の振る舞いなのか、vscode のプラグインのせいなのかわからないけど、オブジェクトの配置の前後関係をうまく調整できなくてコピペし直したり、なにかの操作をしたタイミングでインフラリソースのアイコンが後ろに隠蔽されていたりもした。リソース間の接続のための線も自動的に繋がるときもあって便利なのだが、誤動作して変な位置にレイアウトされることもあって制御が難しい。私の感覚では、多少の利便性のために自動化されるよりも、自分で思い通りに制御出来る方を好む。draw.io の自動調整機能の制御が難しいなと思った。&lt;/p></content></item><item><title>手抜き</title><link>/diary/posts/2022/0601/</link><pubDate>Wed, 01 Jun 2022 07:20:18 +0900</pubDate><guid>/diary/posts/2022/0601/</guid><description>2時に寝て6時に起きた。疲れていたからよく眠れた。
mvp（minimum viable product）で対応した スクラムに限った話しではないと思うが、プロダクト開発をしていると mvp（minimum viable product）という言葉を聞くことがままある。昔ながらのイテレーション開発よりも、アジャイル開発の文脈でよく使われるように思う。というのは、短い開発期間でプロトタイプを作ったり、最低限の動く機能を作ったりすることをよしとする考え方があるから。昔ながらのやり方だと、イテレーション期間の中でそういった段階的な開発はするものの、外部からみたとき (もしくはマイルストーン) においてはそこそこの機能が提供されているので mvp といった言い方をすることはなかった。もしかしたらアルファとかベータとか呼んでいたかもしれない。最近ある lambda 関数の移行作業を行った。serverless framework でデプロイしていたリソースを cdk で一元管理する。その過程で既存のコードを読むと、ある id をハードコーディングで指定して FIXME がこんな感じに書いてあった。この id が指すリソースはその後なくなっており、本番環境で不要な処理が定期実行でずっと動き続けていたのと、本来は複数の id リソースに対して行うべき処理を実行していなかった。
# FIXME 対象 id 一覧を取得する。(Phase2までに対応します) id = &amp;#39;ABC001&amp;#39; チームの開発リーダーはその存在を全く忘れていたし、このスクリプトを実装したさらに上位の開発リーダーからはこの処理の要否はよくわからないからチームで確認してという曖昧な返事が返ってきた。チームで確認したところ、この処理は必要だとわかり、この機に複数の id リソースに対して対応するようにした。何も知らない私が修正しても5分で対応を完了した。
mvp で対応したんで
このように実装者は話していたが、本当なのだろうか？と思えた。さらにこのスクリプトのエラーログのログストリームを監視して slack 通知する lambda 関数も移行対象で、コードの検証をしていたところ、slack 通知をするための lambda 関数が別途あり、その動作検証をしていたところ、その lambda 関数を呼び出す権限 lambda:InvokeFunction が足りないことに気付いた。これも実装者に問い合わせたところ、動作検証はやっていないし、過去に1度も slack 通知は発生していないという。状況証拠から考えると、権限が足りないために正常に動作していなかったと推測される。結果的に mvp で対応したという2つの lambda 関数は実運用で半年間、無駄にリソースを浪費して何の役にも立っていなかった。当然、引き継ぎも、課題管理システムのチケットも、ドキュメントも何ら残されていなかった。mvp で対応したという表現に開発で大事なものを誤魔化してはいないだろうか。</description><content>&lt;p>2時に寝て6時に起きた。疲れていたからよく眠れた。&lt;/p>
&lt;h2 id="mvpminimum-viable-productで対応した">mvp（minimum viable product）で対応した&lt;/h2>
&lt;p>スクラムに限った話しではないと思うが、プロダクト開発をしていると mvp（minimum viable product）という言葉を聞くことがままある。昔ながらのイテレーション開発よりも、アジャイル開発の文脈でよく使われるように思う。というのは、短い開発期間でプロトタイプを作ったり、最低限の動く機能を作ったりすることをよしとする考え方があるから。昔ながらのやり方だと、イテレーション期間の中でそういった段階的な開発はするものの、外部からみたとき (もしくはマイルストーン) においてはそこそこの機能が提供されているので mvp といった言い方をすることはなかった。もしかしたらアルファとかベータとか呼んでいたかもしれない。最近ある lambda 関数の移行作業を行った。serverless framework でデプロイしていたリソースを cdk で一元管理する。その過程で既存のコードを読むと、ある id をハードコーディングで指定して &lt;em>FIXME&lt;/em> がこんな感じに書いてあった。この id が指すリソースはその後なくなっており、本番環境で不要な処理が定期実行でずっと動き続けていたのと、本来は複数の id リソースに対して行うべき処理を実行していなかった。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-python" data-lang="python">&lt;span style="color:#75715e"># FIXME 対象 id 一覧を取得する。(Phase2までに対応します)&lt;/span>
id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;ABC001&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>チームの開発リーダーはその存在を全く忘れていたし、このスクリプトを実装したさらに上位の開発リーダーからはこの処理の要否はよくわからないからチームで確認してという曖昧な返事が返ってきた。チームで確認したところ、この処理は必要だとわかり、この機に複数の id リソースに対して対応するようにした。何も知らない私が修正しても5分で対応を完了した。&lt;/p>
&lt;blockquote>
&lt;p>mvp で対応したんで&lt;/p>
&lt;/blockquote>
&lt;p>このように実装者は話していたが、本当なのだろうか？と思えた。さらにこのスクリプトのエラーログのログストリームを監視して slack 通知する lambda 関数も移行対象で、コードの検証をしていたところ、slack 通知をするための lambda 関数が別途あり、その動作検証をしていたところ、その lambda 関数を呼び出す権限 &lt;em>lambda:InvokeFunction&lt;/em> が足りないことに気付いた。これも実装者に問い合わせたところ、動作検証はやっていないし、過去に1度も slack 通知は発生していないという。状況証拠から考えると、権限が足りないために正常に動作していなかったと推測される。結果的に mvp で対応したという2つの lambda 関数は実運用で半年間、無駄にリソースを浪費して何の役にも立っていなかった。当然、引き継ぎも、課題管理システムのチケットも、ドキュメントも何ら残されていなかった。mvp で対応したという表現に開発で大事なものを誤魔化してはいないだろうか。&lt;/p></content></item></channel></rss>