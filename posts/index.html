<!doctype html><html lang=en><head><title>Posts :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0427/>法人決算後の納税</a></h1><div class=post-meta><time class=post-date>2024-04-27 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日の運動は腕立て,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=法人税の納付>法人税の納付</h2><p>昨日の <a href=/diary/posts/2024/0426/#決算申告の打ち合わせ>決算申告打ち合わせ</a> を終えて税理士さんが法人税の電子申告をしてくれた。今朝から申告内容を確認して納付情報を登録したりしながら pay-easy で納税をした。e-tax と eltax のちょっとした操作を介してインターネットバンキング (pay-easy) で納税のための振り込みを行う。この手続きはすぐ完了する。いつもは GW 期間中に法人決算を行い、申告書を作成して、連休明けに申告したり納税したりしていた。連休前に法人決算のすべてが終わって晴れ晴れした気分で気持ちがよい。</p><ul><li>国税<ul><li>法人税</li><li>法人地方税</li></ul></li><li>地方税<ul><li>都府県民税</li><li>事業税</li><li>特別法人事業税</li><li>市町村民税</li></ul></li><li>消費税</li></ul><p>気分がよかったから法人決算完了や税理士さんの紹介など facebook にも軽く所感を書いた。</p><ul><li><a href=https://www.facebook.com/t2y1979/posts/pfbid02UYerJ7rKFBCbH56HeQMGpZrAgRKVpWeFnCc4aEScpR6i8niphccwh6zwH7vLbSHXl>第5期決算の所感</a></li></ul><h2 id=ストレッチ>ストレッチ</h2><p>しばらく土曜日の午前中は公園運動へ行き、夕方にストレッチへ行くように予定を変えてみる。今日は午前中天気が悪かったので公園運動は中止かなと思っていたものの、午後から晴れてきて地面も乾いたようにみえたので15時から公園へ行って縄跳びをしてきた。その後、Dr.stretch さんへ行ってストレッチを受けてきた。運動後にストレッチを受ける方が効果がありそうでよい気がする。</p><p>今週も前半は雨降りでほとんど運動しなかったため、それほど筋肉痛はひどくないが、木・金・土と縄跳びをしている分の疲労はあった。いつも通り太ももの前と後ろの筋の張りが強かった。トレーナーさんからも太ももの外側の筋をよく使っているという。太ももの内側の筋肉を鍛えた方がバランスがよくなって運動にもよい効果が出るのではないかと教えてもらった。内側の筋を鍛えるワークアウトなども意識してやってみようと思う。今日の開脚幅は開始前149cmで、ストレッチ後155cmだった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0426/>自社の打ち合わせ2つ</a></h1><div class=post-meta><time class=post-date>2024-04-26 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。</p><ul><li>第5期法人決算の進捗</li><li>第5期のふりかえり</li><li><a href=/diary/posts/2024/0420/#ワーケーションの学び>デジタルノマドとワーケーションイベントに参加してきた所感</a></li></ul><p><a href=/diary/posts/2024/0417/#新しい税理士さんとのキックオフ>新たに税理士さんと契約して以降</a>、日々着実に決算申告の業務を進めていただいてわずか2週間ほどで決算申告できる状態まで進捗した。今期の決算だけでなく、過去の私が行った法人決算の誤りまで訂正して補正してくれた。日々の進捗も slack にコメントを残してくれるので非同期／テキストコミュニケーションにおいて困ることもなかった。前の税理士さんが質問したらその返信に2-3日かかっていたことと比べると雲泥の差となる。いまどきの業務を円滑に進めるには非同期／テキストコミュニケーションが必須であると、私はお客さんやメンバーに課題管理の文脈でよく話していることではあるけれども、税理士さんもそれができる IT リテラシーの差でこれだけの業務の進捗やワークフローの差異になることを実感した。</p><p>第5期のふりかえりを行って、うちの会社の受託開発における最低単価を上げることに決めた。私の周りでも商品やサービスの価格をあげているのを見聞きする。うちの会社は創業当初から受託開発の最低単価を変更していない。私が得意とすることや難易度の高い業務内容と、そうじゃない内容で単価に幅をもたせていた。私自身、未知の領域であまり高い単価をお客さんからいただこうとは考えていなかった。一方で4社の受託開発をしてきて、私と同じぐらいビジネスにコミットする開発者はそうそういないこともわかってきた。ほとんどの開発者は言われたことをやるだけでビジネスを成功させるための一連の業務や提案を行ったりしない。たとえば <a href=https://blog.osstech.co.jp/author/%E6%A3%AE%E6%9C%AC-%E5%93%B2%E4%B9%9F/>採用とプロダクトの宣伝</a> のためにテックブログを書いているが、協力会社のプログラマーで勝手にテックブログを書く開発者はほとんどいない。さらにいまお手伝いしているプロジェクトではマネージャー経験も得られた。今後は開発者兼マネージャーとして働けることも考慮すると最低単価をあげるという意思決定をした。はらさんからも違和感はないとコメントをいただいた。はらさんも手伝っているある会社において値上げを依頼していないにも関わらず雇い主から単価が上げることを通知してきたとのこと。やはり業界全体の単価が上がっているとみてよさそうだ。</p><h2 id=決算申告の打ち合わせ>決算申告の打ち合わせ</h2><p>夕方に税理士さんと決算申告についての打ち合わせをした。税理士さんの申告書類作成は完了していて最後に私の承認を得て申告するとのこと。申告内容については日々、共有してもらったものを私も確認していて、まったく何も問題なくてそのまま申告してもらってよいという旨を伝えた。その上で税理士さんから決算のための作業をして10項目ほど気付き事項としてコメントをいただいた。本当にありがたい。</p><p>おもしろい話題の1つとして社用車の運行記録をつけた方がよいと提案された。税務調査において社用車を本当に業務に使っているかどうか、調査官によってはチェックするという。社用車を購入した年度や翌年などの運行記録を求められたりするとのこと。社用車の主な用途としては実家と現住所を往復している。今季中には実家の離れのスペースを当社の出張所としたい。そんな記録をつけることそのものにあまり意味があるとは私自身思えないため、必要になったときに作るのはどうか？と尋ねてみた。一般的には税務調査の連絡が数日前にくるという。うちはまだ1度も税務調査が来たことはない。いつ来るかわからないが、来ると分かったときに高速道路の利用履歴が会計システムの明細にあるからそこから作成すればよいという話しでまとまった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0425/>よく働きよく動く</a></h1><div class=post-meta><time class=post-date>2024-04-25 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/ldap/>ldap</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;</span><div class=post-content><p>今日の運動は腕立て,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ou-エントリーの更新対応>ou エントリーの更新対応</h2><p>ここ2週間ほどずっと、お仕事のある機能開発で <a href=/diary/posts/2024/0422/>テンパった開発状況</a> でやってきたものがようやく終わった。私は自社の経営だったり、プロジェクトのマネージャーだったりで、普通の開発メンバーのような集中した開発を時間的にできないものの、それでも私が1つの機能に2週間もかける開発はそうそうない。想定以上にこの対応のために、扱う LDAP エントリーのデータ定義や既存システムの実装変更を余儀なくされた。逆に言えば、既存の実装にそういった考慮が当初の設計に足りなかったと言える。この改修において ID 連携におけるノウハウをメンバーと共有したとも言える。</p><p>運用視点からは出来て当然の、しかし、開発視点からは厄介な仕様変更の開発を完了できた。いまの時点では完璧に作ったので将来的な拡張も含めて、さまざまな要件に対応できる設計になったと思う。自画自賛だが、時間をかけた分のよいものができたと思う。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p>今週の前半は雨降りだったり、雨が断続的に降ったりやんだりでお出掛けできなかった。お仕事も一区切りついた開放感と久しぶりによい天気だったのもあって <a href=https://kobe-machiguide.com/park/minatonomori-park/>みなとのもり公園</a> へ行って縄跳びしてきた。運動できない日々が続いて体力を回復していたせいか、15分間のワークアウトで過去最高の 1113 回となった。前回よりも大きく回数が増えたので、もしかしたら100ほど計測ミスがあるのかもしれない。いまの目標としては15分間で最低800回跳ぶことを想定している。跳んでいるうちにカラダが慣れてきて、ミスしなくなったり、フロー状態に入って速く巧く跳べて回数が増えたりする。</p><p>縄跳びの前後にストレッチをできるよう、大きめのレジャーシートも買った。100円ショップなどで売っているレジャーシートに比べたら少し厚手になる。折り畳んで持ち運びできるのがいいなと思って購入した。公園へ持っていくのに便利。1人なら完全に寝転がって広々とストレッチできる。よいと思う。</p><figure><img src=/diary/img/2024/0425_sheet.jpg></figure><p><a href=https://amzn.to/49Ur0YS target=_blank><img src=https://m.media-amazon.com/images/I/71jz9VPb9TL._AC_SX679_.jpg width=240></a></p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0424/>洋食ランチ</a></h1><div class=post-meta><time class=post-date>2024-04-24 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/kobe/>kobe</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;
#<a href=/diary/tags/biztrip/>biztrip</a>&nbsp;</span><div class=post-content><p>昨日はキングダム第5シリーズの後半を一気見してそのまま疲れて寝てた。</p><p>今日の運動は腹筋ローラー,散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=パワーランチ>パワーランチ</h2><p>お手伝い先の会社の別チームの社員さんがたまたま神戸のお客さんの現地作業に来られるということでランチを一緒に行ってみた。私が1人だけというのも寂しいのでハニカムのやまとさんにも声をかけて一緒に行ってきた。いくつか候補を提示して先方が洋食屋へ行きたいという希望だったので <a href=https://tabelog.com/hyogo/A2801/A280102/28007317/>マックス</a> さんへ行ってきた。体脂肪コントロールする前は1週間に1回ぐらい行っていたお店だったのだけど、もう何ヶ月も行っていなかった。今日は開放食で久しぶりにミンチカツを山盛り食べた。これはちょっと体重増えるやろな。ランチを食べながら3人で雑談して、それからうちのオフィスを軽く案内して解散した。お客さんが来られたときに紹介できるお店のストックがたまってきてよい感じではある。</p><figure><img src=/diary/img/2024/0424_tonkatsu.jpg></figure><h2 id=社員旅行の目的地決定>社員旅行の目的地決定</h2><p>お手伝い先で社員旅行に今年も付いていく予定。今回は沖縄 (本島) へ行くことになったみたい。ずっと行きたいと思いつつ (いや本当の意味では思っていない) 行ったことのない場所なので楽しみではある。沖縄へ行ってもやりたいこととか全く思いつかない。おそらく他の社員さんに付いていってあちこち観光してくるような感じになるのではないだろうか。他の人たちは関心ないだろうから行かないとは思うけれど、沖縄のコワーキングスペース巡りとか、余裕があればやってみたいかもしれない。あとは本場の沖縄料理とかも食べるぐらいかなぁ。沖縄本島でなにかお勧めのアクティビティがあったら教えてほしい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0423/>mongodb のデータ移行のあれこれ</a></h1><div class=post-meta><time class=post-date>2024-04-23 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/mongodb/>mongodb</a>&nbsp;
#<a href=/diary/tags/migration/>migration</a>&nbsp;</span><div class=post-content><p>昨日の夜に縄跳びに出掛けようと思ったところ、雨がパラパラしてきて諦めた。今週は天気が悪いからあまり外で運動できないかもしれない。</p><p>今日の運動は腕立て,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=mongosh-でデータ移行>mongosh でデータ移行</h2><p>あるコレクションのデータ構造を変更したので既存データを移行しないといけない。<a href=https://www.mongodb.com/docs/mongodb-shell/>mongosh</a> を使うと javascript っぽい文法で repl から mongodb のデータを操作できる。私は sql を書く方が好みだけど、慣れの問題で mongosh はプログラミングに近い形でオブジェクトを操作してデータを更新できる。例えば、history というコレクションを3件だけ取得して1件ずつ dump するコードは次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>history</span>.<span style=color:#a6e22e>find</span>().<span style=color:#a6e22e>limit</span>(<span style=color:#ae81ff>3</span>).<span style=color:#a6e22e>forEach</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>i</span>) {<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>i</span>)})
</span></span></code></pre></div><p>なにかしら関数内で処理した結果を用いて更新しないといけないようなときに forEach を使うと簡単にデータ移行できる。しかし、これは1件ずつ更新を実行するので時間はかかる。余談だけど、mongosh をリモートから接続すると forEach で取得するデータをローカルに fetch してくるので document のサイズに比例してデータの取得分の時間だけ遅くなる。forEach を使うときは ssh で mongodb のサーバーにログインして、そこで mongosh を起動した方が効率よくデータ移行できる。</p><p>compose 環境の mongodb に direct 接続するときはこんな感じ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker compose exec -it mongo mongosh <span style=color:#e6db74>&#34;mongodb://</span><span style=color:#e6db74>${</span>USER<span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span>PASSWORD<span style=color:#e6db74>}</span><span style=color:#e6db74>@localhost:27017/?authMechanism=DEFAULT&amp;directConnection=true&#34;</span>
</span></span></code></pre></div><p>シンプルな条件で更新できるようなときは updateMany を使ってバッチ更新すると1件ずつ更新するよりめちゃくちゃ速い。私の環境では270万件ほど更新するのが数分で完了した。仮想マシン上のコンテナ環境なので実機だったらもっと速いはず。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>history</span>.<span style=color:#a6e22e>updateMany</span>({<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span><span style=color:#66d9ef>null</span>}, {<span style=color:#a6e22e>$set</span><span style=color:#f92672>:</span>{<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#34;myType&#34;</span>}}, {})
</span></span></code></pre></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0422/>テンパった開発状況</a></h1><div class=post-meta><time class=post-date>2024-04-22 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/github/>github</a>&nbsp;
#<a href=/diary/tags/ci/cd/>ci/cd</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=開発がなかなか進まない>開発がなかなか進まない</h2><p>本当は次の開発課題に着手しないといけないところだが、先週からずっと新機能のための、既存コードのリファクタリングに時間を費やしている。データ構造を変えたり、主キーを変えたりしているので影響範囲が大きくて、テストコードもあちこち修正しないといけなくて時間がかかる。結合テストの実行そのものにも時間がかかるし。</p><p>なかなか開発がテンパっているものの、今日でようやく一通りのリファクタリングを完了して、意図していた新機能のための web api が動くところまで確認できた。なんというか、新機能を作るために既存コードの改善に8割の時間を費やした感じ。おかげで新機能はなにも開発していないのに勝手に動いた (違) ような気持ちになった。今後、同様に個別データの拡張や新たなデータ追加のときは既存データに影響を与えず、独立して追加しやすい設計となっている。将来的に私がいなくなった後に拡張するときにこの設計は役に立つだろうと思う。</p><h2 id=awesome-go-へ道>awesome-go へ道</h2><p><a href=/diary/posts/2024/0421/#kyotogo-の資料づくり>昨日の続き</a> 。contribution guidelines を読んでいて最低限やれと書いてあることの1つに <a href=https://goreportcard.com/report/github.com/kazamori/orderedmap>Go Report Card report</a> を作れと書いてあった。これは静的解析したスコアのようなものが表示される。すべて100%が表示されるようにした。</p><p>カバレッジも測れとあったので github actions の <a href=https://github.com/kazamori/orderedmap/blob/main/.github/workflows/go.yml>workflow ファイル</a> を設定して計測してみた。63.9 % といまいちだった。コアなところしかテスト書いてないからかな。ユーティリティや cli のテストもちゃんと書いたら 80-90% ぐらいはいくのかな？また後日、時間のあるときにやってみる。余談だけど、久しぶりに github actions を触ったらもうワークフローファイルの文法とか覚えてなくてずっと触ってないとすぐ忘れるとか思ったりもした。</p><blockquote><p>if the library/program is testable, then coverage should be >= 80% for non-data-related packages and >=90% for data-related packages. (Note: the tests will be reviewed too. We will check your coverage manually if your package&rsquo;s coverage is just a benchmark result);</p><p><a href=https://github.com/avelino/awesome-go/blob/main/CONTRIBUTING.md#quality-standards>Quality standards</a></p></blockquote></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0421/>来週の資料づくり</a></h1><div class=post-meta><time class=post-date>2024-04-21 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/review/>review</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;</span><div class=post-content><p>今日の運動は腕立て,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><p>外では神戸まつりやっていたけど、1日中雨降りだったからとくに見に行くこともしなかった。</p><h2 id=kyotogo-の資料づくり>kyoto.go の資料づくり</h2><p>前日の深夜2時頃までかけて資料を作った。社内 slack でレビュー依頼を出して帰ったら2時半頃にこみやさんがレビューしてくれてた。こみやさん夜型やなぁ。朝起きてから家事を済ませて、お昼前にオフィスへ行ってレビューで指摘してくれた内容の修正をしていた。なんやらかんやらでスライドも2-3枚増やして指摘前よりわかりやすくなったと思う。他者にレビューしてもらえると、自分だけの視点では気付かなかったところの示唆を受けて改善できる。レビューしてくれる存在のありがたさ。いつか本当に <a href=/diary/posts/2023/1206/>レビューサービス</a> を作るかもしれない。</p><p>こみやさんと話していて、私はライブラリを探すときに <a href=https://github.com/avelino/awesome-go>avelino/awesome-go</a> の話題になった。私はこのリストを参照することが多いのだけど、<a href=https://github.com/ake-persson/mapslice-json>mapslice-json</a> は実用的に使えるライブラリではないのにここにリストされていておかしいなということに気付いた。このリストを更新する PR を送るべきだなと思って <a href=https://github.com/avelino/awesome-go/blob/main/CONTRIBUTING.md>contribution guidelines</a> を読んでみることにした。</p><h2 id=macbook-air-2013-mid-の再インストール>macbook air (2013-mid) の再インストール</h2><p>古いマシンを処分しようと思ってオフィスにもってきた。もう1つの macbook は故障していて起動しない。試しに電源につないで起動させてみたらこっちは起動した。</p><figure><img src=/diary/img/2024/0421_macbook.jpg></figure><p>処分するにしてもデータは全部消したいと思って os の再インストールのようなことができないかを調べていた。最近の macos にはその機能がある。この macbook では <a href="https://apps.apple.com/us/app/macos-catalina/id1466841314?mt=12">macOS Catalina</a> までアップデートできるが、その os では再インストールのようなことはできないみたい。facebook にそんなことを書いていたら知人から <a href=https://chromeenterprise.google/intl/ja_jp/os/chromeosflex/>ChromeOS Flex</a> をインストールすればいいんじゃない？とコメントをもらって、それはいいなと思ってやってみようと思う。ChromeOS ならタブレットの代替のような用途に使えるかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0420/>しばらく土曜日の午前中は公園運動をする</a></h1><div class=post-meta><time class=post-date>2024-04-20 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/digital-nomads/>digital nomads</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ワーケーションの学び>ワーケーションの学び</h2><p><a href=https://panq20240420.peatix.com/view>デジタルノマドとワーケーションの現在地と展望</a> に参加した。</p><p>土曜日の7-9時という、あまりみかけない時間帯にイベントが開催されている。なぜ土曜日の朝7時か？というと他の予定と競合しないというメリットがある。通常は参加に1,000円かかるが、カフーツさんのオンラインイベントに山梨大学生命環境部教授の田中敦さんが参加されていて、そのコネで招待コードを無料でいただいたので試しに参加してみた。初めて参加してまず驚いたのだけど、このイベントは4年ほど継続しているらしく、且つ朝7時から30人以上参加されていた。おそらく参加者から1,000円徴収したいわけではなく、質の高いコミュニティ運営を目的に、無料イベントよりも参加の敷居をあげたいという狙いではないかと推測する。イベントそのものの参加費用をある程度高めに設定して一見さんのハードルをあげつつ、信頼できる知人には招待コードを無料で配るといったやりかたではないかと思えた。</p><p>またオフラインと比べてオンラインイベントは無茶な時間帯に開始時間を設定しやすいことにも気付いた。私は寝起きで参加したのだけど、オンラインイベントだとビデオオフにしておけば身なりを整えなくても済む。同様に夜の遅い時間帯も物理的に出掛けるのは面倒くさい。オンラインなら夜23時からイベントを開催しても終電の心配もない。うちの会社のイベントを開催するときでも土曜日の朝7時という時間帯を検討する価値はあると思えた。この時間帯は暗に真剣に参加する人だけ来ればいいというメッセージも含まれている。</p><p>内容は大学の教授といった方々が発表されているため、やや硬めのしっかりした内容の発表が多かった。デジタルノマドやワーケーションの実践的ななにかというよりも研究対象として分析したことからわかってきた知見やノウハウ、統計的な見解の共有といった意味づけの方が強かったように思う。</p><p>もっとも大きな気付きを1つ書く。<a href=https://note.com/matsulab>松下慶太</a> さんという関西大学社会学部の教授が話していた内容で「混ぜる (mixed)」と「和える (harmonized)」は違うという話しをされた。外国にはない表現なので harmonized という英単語が適切かどうかはわからないと本人も仰っていた。デジタルノマドを地域に受け入れるのは混ぜる (地域の文化やしきたりに均質化させる) のではなく、和える (それぞれの持ち味がでるよう、いい加減で止める) アプローチがよいのではないかと提案されていた。料理の世界で使う和えるという言葉を日本人の価値観でわかりやすく見事に表現されていた。相対的にコミュニティはポリシーの下「混ぜる」というアプローチをするし、コワーキングは個々のコワーカーのホスピタリティを優先するなら「和える」というアプローチが向く。似て非なる概念を日本人にとって馴染みのある言葉でうまく表現されていて素直に素晴らしい視点だと感心した。</p><p>私自身、組織に馴染めなかった方の「混ざらなかった」人間と言える。うちの会社で社員を雇う価値観としても「和える」というアプローチを採用したいし、会社にとっての <a href=https://www.soumu.go.jp/kankeijinkou/about/index.html>関係人口</a> を増やすという概念を、会社の理念や行動規範とするのもいいんじゃないかと論理を飛躍して考えたりもしていた。資本主義における会社の目的は究極的には利益の追求に帰結してしまう。しかし、それが行き過ぎると社会に歪みを生じさせてしまう。利益だけではない行動規範として、ただ会社に関わる人を増やすというシンプルな目的はコワーキングやコラボレーションとも相性がよさそうで、私の理念にもあうように思えた。このアイディアはもう少し寝かせて時がきたら掘り下げてみようと思う。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週もお仕事がいろいろ立て込んでいて余裕がなかったため、運動の時間をあまり取れなかった。結果的にいつもよりも少し運動時間が少ないせいで筋肉やカラダへの負荷が下がり、ストレッチを受けても疲労が蓄積していない状態だった。右臀部のツボがいつもよりきつく感じたのと、肩甲骨辺りの筋肉が硬くなっているとトレーナーさんが仰っていた。これは腕立て伏せや腹筋ローラーでその辺りの筋肉を使ってしまっている影響もあるのかもしれない。トレーナーさんが言うには、腕立て伏せは大胸筋、腹筋ローラーは腹筋を意識したフォームでないと他の部位の筋肉も使ってしまってあまりよくないようなニュアンスで話されていた。今日の開脚幅は開始前150cmで、ストレッチ後155cmだった。</p><p>いま三宮.devの公園運動がやや盛り上がりつつあって土曜日の午前中に参加する人が多いため、土曜日の 10:00-11:40 で受けているストレッチを午後に変更してみることにした。5月は土曜日の午前中を公園運動の時間に割いてみる。暑くて外に出るのが嫌になるまでは続けてみようと思う。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p>ストレッチを終えてから12時過ぎから1時間ほど運動してきた。<a href=/diary/posts/2024/0419/#みなとのもりの運動>前回の所感はここ</a> 。バスケコートは3つとも埋まっていて今日はやらなかった。いつも通り縄跳びを15分間跳んでから付近を散歩したりストレッチしたりしていた。縄跳びをうまく跳ぶコツを少しつかんだ。いつもタイマーを地面かベンチに置いて目線を下げて跳んでいた。そうすると、縄が跳んでいる位置よりも少し前方で接地してしまい、飛ぶタイミングが微妙にあわなくて引っかかるということがあった。これは目線を水平方向に向けることで縄の接地面をなるべく跳んでいる位置、もしくは接地しないように調整しやすいことに気付いた。したがってタイマーも下方ではなく、なるべく目線の水平方向に設置するとうまく跳べる気がする。木の幹の枝のところに引っ掛けると目線が安定してよかった。</p><figure><img src=/diary/img/2024/0420_smartrope.jpg></figure><p>その後メンバーの1人が来たのでデカテニスをやってみた。昨日はデカバドミントンをしたからどう違うかを比較してみた。</p><figure><img src=/diary/img/2024/0420_bigtennis.jpg></figure><ul><li>大きいボールは子ども向けで大人が使うには (距離を取ると) ボールの挙動を制御しにくい<ul><li>デカバドミントンも大きい羽の方が飛ばないから運動するにはあまり向かない</li></ul></li><li>小さいボールは大きいボールの倍以上飛ぶのである程度の距離をあけてラリーをしやすい</li><li>デカバドミントンよりもデカテニス (小さいボール) の方が飛距離が増える分、前後左右に動く量が大きくなる<ul><li>たくさん動きたい場合はこちらの方が運動量が増えてよいように思える</li></ul></li><li>相対的に体力がない人はデカバドミントンを、体力がある人はデカテニスを選択するとよさそう</li></ul><h3 id=ダブルダッチ>ダブルダッチ</h3><p>土曜日のお昼なので公園でいろんな人たちが活動している。その中に縄を2つ使ってぐるぐるまわしているのを何度かみかけていた。この競技は <a href=https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%96%E3%83%AB%E3%83%80%E3%83%83%E3%83%81>ダブルダッチ</a> と呼ぶ。</p><blockquote><p>ダブルダッチの歴史は、300年以上前に、アメリカ合衆国のハドソン川ほとりのニュー・アムステルダム（現在のニューヨーク）に入植したオランダ人によってアメリカに持ち込まれた“なわとび”である。 ダブルダッチという言葉は、オランダ人が複雑でおかしなことをした時に、それを指して言うイギリス人の俗語で、イギリス人がこのゲームにダブルダッチという名を付けた。</p><p><a href=https://www.ssf.or.jp/knowledge/dictionary/doubledutch.html>ダブルダッチの歴史・発祥</a></p></blockquote><p>変な名前だが、いまとなってはちゃんとルールも整備され世界大会も開催されている。歴史のあるスポーツ？になっているようだ。これも運動量が増えて公園に来た人たちがやることなくてあぶれないための施策の1つになりそうに思える。ダブルダッチをするためにトーエイライト社の長縄を購入してみた。これも1人ではできないので誰か来てくれると嬉しい。</p><p><a href=https://amzn.to/3UrtmJ5 target=_blank><img src=https://m.media-amazon.com/images/I/81InYAc1VXS._AC_SX679_.jpg width=240></a></p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0419/>関係者を増やしていく試み</a></h1><div class=post-meta><time class=post-date>2024-04-19 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;
#<a href=/diary/tags/recruiting/>recruiting</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>今日の運動は縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ブロックチェーンのお仕事の再面談>ブロックチェーンのお仕事の再面談</h2><p><a href=/diary/posts/2022/0920/#ブロックチェーンのお仕事の面談>約1年半前に lapras 経由でカジュアル面談した</a> 会社から、時間が経ったのでまた面談したいという連絡がきた。律儀な方で前回話したときの印象もよかったので再面談してみることにした。一方で、私はこれから課題管理のビジネスに注力するので現実としてはこの会社に転職することも、開発者として開発の最前線でコミットすることもできないという見通しがあるため、そのことも伝えた上でのカジュアル面談をしてみた。採用のリクルーターとピープルマネジメントのマネージャーの2人がやってきて、途中から私がやりたい課題管理とは何ぞや？みたいな話しを30分ほどしゃべくりした。</p><p>ちょうど <a href=/diary/posts/2024/0417/#新しい税理士さんとのキックオフ>新しい税理士さん向けに簡単な課題管理の概要</a> 資料を作ったばかりだったのでそのスライドをみせながら話した。わりと先方に刺さったみたいで「この文脈でお困りならうちの会社と協業できるかもしれない」と言ったら「その文脈で確かに困っているかもしれない」といった発言も出ていたのでいろいろ大変なのだろうと推測する。うちの会社のターゲットとして、若い組織の方が開発方法論が曖昧だったり、経験不足からノウハウの蓄積がなかったりして課題管理の話題は関心をもってくれるのかもしれない。課題管理の話しでカジュアル面談の大半の時間を浪費してしまったので、先方の話しを私がほとんど聞かないまま、私が言いたいことだけしゃべくりして終わるという、不思議なカジュアル面談となった。いつかうちの会社のことを思い出してくれて一緒にお仕事できればいいんじゃないかと思ったりした。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p><a href=/diary/posts/2024/0412/#バスケットボール>先週と同様19-20時で運動</a> すると三宮.devで宣言して縄跳び、デカバドミントン、バスケットボールの練習をしてきた。他に2人参加者がいて3人で運動してきた。こうやって一緒に運動してくれる人がいるから私もさぼることができず、公園へ行ってなにかしら運動するという、よい継続の循環ができる。いままでモノゴトを継続するには自分の意思のチカラだけだと考えていた。しかし、それはちょっと違うなと歳を経て思うようになってきた。もちろん個人の意思のチカラも一定量はいるけれど、自分を取り巻く周りの人たちの助けも確実にあって、それらも含めて継続できるということを実感できるようになってきた。今後も周りの人たちに助けてもらいながら運動を続けていければいいなと思う。</p><figure><img src=/diary/img/2024/0418_badminton.jpg></figure></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0418/>主キーの特性</a></h1><div class=post-meta><time class=post-date>2024-04-18 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/mongodb/>mongodb</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/postmortem/>postmortem</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,腕立て,スクワット,縄跳び(両足跳)をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=コレクションデータの再定義>コレクションデータの再定義</h2><p>ある mongodb のコレクションのデータ定義で <code>_id</code> に ldap の dn の値を使っていた。dn は一意な値なので主キーとして使ってもよさそうに思えたが、ここで運用上 dn の値が変更されるケースがいくつかあることがわかってきた。例えば、dn に姓名が含まれる場合、結婚して姓名が変わると dn の値が変わることはありえる。他にも dn に含まれる ou の値が現実の組織名を表している場合、組織変更によって ou の値が変わったときに dn の値も連動して変わってしまう。一意な値というだけでデータベースの主キーにするのはよくないということがわかってきた。主キーは一意な値、且つ immutable が望ましい。</p><p>たとえば mongodb では <code>_id</code> を主キーとして使う。mongodb は主キーの値を変更することはできなくて実装上は delete & insert になる。</p><ul><li><a href=https://stackoverflow.com/questions/4012855/how-to-update-the-id-of-one-mongodb-document>How to update the _id of one MongoDB Document?</a></li></ul><p>delete & insert の運用上の問題は更新時にトランザクションを使わないといけないため、パフォーマンスが悪い。さらに id 連携という業務に特化して言うと、たとえば、姓名の変更は名前が変わったというだけでその人が退職したわけではない。これをシステム上 delete & insert で扱うと、古いユーザーデータを削除して、新規にユーザーデータを作成するといった振る舞いになってしまう。そうすると、古いユーザーがもっていた権限やデータなどを移行しないといけないわけだが、それらをすべて自動化できるか？という難しい課題も積み重なってしまう。本質的に rename を delete & insert で扱うことそのものが誤っているのだ。</p><p>メンバーと相談して <code>_id</code> に uuid を発行して <code>dn</code> はフィールドに unique 制約を課して保持するよう設計を変更することに決めた。コレクションのデータ定義の主キー変更なのであちこち修正してテストコードも修正しないといけない。一意な値、且つ immutable な値のみを主キーとして使うのが今回の学びとなった。私自身、初期の設計に関わったときにこのことに気付かなかったから、これは私のレビューの失敗・見逃しでもある。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0417/>会社も個人も関係者が増えていく実感</a></h1><div class=post-meta><time class=post-date>2024-04-17 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,腕立て,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=新しい税理士さんとのキックオフ>新しい税理士さんとのキックオフ</h2><p>先日 <a href=/diary/posts/2024/0408/>電撃的に税理士さん変更</a> を実施した。その後、契約やシステムへのアカウント登録などを行って体制を整えた。満を持してキックオフの打ち合わせを行った。顧問のはらさんにも参加してもらって3人でキックオフをした。はらさんの顔合わせを行い、当社の概要として課題管理のビジネスについて軽く共有して税理士さんからも質疑応答でいろいろコメントをいただいて、当社の雰囲気や人となりを知ってもらうよい機会になったのではないかと思う。私はあちこちで課題管理の話しをしているので説明するのも慣れてきて時間にあわせてコンパクトに組み立てられるようになってきた。</p><p>新しい税理士さんと法人決算の予定を調整しようと思っていたら、早かったら連休前、意図しない課題に遭遇して遅れても連休明けにはできそうといったスピード感でやってくれるらしい。申告前にデータを整理したら打ち合わせもしてくれるらしい。契約してから1週間ぐらいしか経っていないのに、前の税理士さんと比べると10倍速いと言っていい。一般論として優秀なプログラマーと普通のプログラマーの差が10倍と言われるけど、税理士さんにも当てはまるなぁと実感した。先週締結した契約後も、この書類をくださいとか、過去のこの手続きが誤っているから訂正が必要とか、slack connect でつないでいてどんどん指摘してくれる。前の税理士さんは半年ほど契約していて、先方から質問や問い合わせが来たことはほぼゼロだったと思う。業務として達成しようとしている基準レベルがまったく違う。税理士さんを変更して本当によかった。</p><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>月例のカフーツさんのオンラインイベントに参加した。<a href=/diary/posts/2023/0221/#コワーキングのオンラインイベント>前回の所感はここ</a> 。3月は私の都合があわなくてお休みしたので2ヶ月ぶり。今日はメンバーが外国人のデジタルノマドとイベントを行った成果を発表する予定だったものの、そのメンバーの体調が悪くなってしまって声が出ないということでその発表はキャンセルとなった。主題がなくなってしまったので何を話します？みたいな感じになってぐだぐだになった。</p><p>そのメンバーがまとめた、発表予定だったイベント記事が公開されていて写真も多くてよさそうにみえる。奈良の明日香村と大阪の太子町でイベントをされたらしい。日本人でも聖徳太子とか、大化の改新とか、学校で習った程度しか知らないのでおもしろそうにみえる。日本の文化に関心のある外国人には新鮮なイベントになったのではないかと思う。</p><ul><li><a href=https://en.thedeck.jp/blog/hllm2z2345t6sygj707ussvmhltsd0>Traveler&rsquo;s guide March 30-31st Asuka Village, Nara Prefecture, where Japan began as a nation</a></li><li><a href=https://en.thedeck.jp/blog/taishi-town-tour-11th-april>Taishi Town Tour 11th April</a></li></ul><p>岡山県と兵庫県の県境に佐用町という町がある。姫路よりもまだ西、赤穂の北。いとうさんが佐用町は兵庫県だけど、ほとんど岡山県だと仰っていたのが後になって地図をみて理解できた。佐用町に <a href=https://workandcamp.cobaco.co.jp/>コバコWork&amp;Camp</a> というコワーキングスペースがあって宿泊施設を設けたことで訪問者が滞在する日数が増えてよかったといった話題があった。佐用町には集落をまるごと再生した <a href=https://glaminka.com/sayo/>glaminka SAYO集落</a> という宿泊体験もあるらしい。料金は1名38,600円〜とあって強気な価格設定。</p><p>昨日は2.5時間ぐらいしか寝てなかったので前半は眠くなってやや寝落ちしていた。後半に話しを振られて it 業界の開発合宿や当社の開発合宿イベントについて話したら、なにか受けていた気がするけれど、話すネタがなかったからちょうどよかっただけなのかもしれない。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/page/2/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>