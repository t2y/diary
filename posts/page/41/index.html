<!doctype html><html lang=en><head><title>Posts :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1218/>オフィスでのんびり過ごす</a></h1><div class=post-meta><time class=post-date>2022-12-18 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;</span><div class=post-content><p>21時に寝て何度も夜起きながら頭痛の機嫌をとりつつ8時に起きた。頭痛はほとんどなくなったもののお腹が痛かったりして微妙な体調。お仕事は断念してブログの記事を読んだりみかん食べたり買いものしたりしてのんびりしていた。</p><h2 id=リモートワークの道具>リモートワークの道具</h2><p>たいちさんが <a href=https://blog.satotaichi.info/working-area/>二年以上のリモートワークを生き残っている道具を紹介する</a> という記事を書いていて同じマウスを使っているなと親近感をもって読んでいた。引っ越したばかりのオフィスでケーブル周りがあまりしっくりこないと思っていたので <a href="https://www.sanwa.co.jp/product/syohin?code=CB-CT4">ケーブルトレー (CB-CT4)</a> を購入してみることにした。机の上にわさわさしているケーブルや電源タップの取り回しをすっきりできそう。</p><h2 id=マイナポータルへの登録>マイナポータルへの登録</h2><p>親が <a href=https://mynumbercard.point.soumu.go.jp/>マイナポイントのキャンペーン</a> がどうこうと、マイナンバーカードを取得して申し込みなどをしていた話しを聞いた。うちの親が手続きしているぐらいなのでそれなりに一般の人たちがマイナンバーカードを取得して申し込みしているのではないかと思う。私もよくわかっていなかったけど、12月中に手続きをすれば20,000ポイントをもらえるとあるので paypay 経由で手続きをしてみた。次の2つに登録するとよいみたい。</p><ul><li>健康保険証としての利用申し込み</li><li>公金受取口座の登録</li></ul><p>どちらも行政手続きの簡略化が期待される。システムに関わっている私は受け入れて申し込みした。手続きがうまくいけば paypay でマイナポイントをチャージして使えるらしい。paypay はふるさと納税とも連携するし、こういった行政との連携も抜群で便利な決済アプリになったなぁという印象。また以前はボーナス運用と呼ばれていた paypay を使ったときに還元されるポイントを資産運用している。それがパワーアップして <a href=https://www.paypay-sec.co.jp/>paypay証券</a> になったみたい。paypay はイケイケやね。積立もできるらしいので投資信託の代わりのようなものだと思う。いままでのポイント運用プラス積立を気軽にできる資産運用としてよさそうに思えたので申し込みしてみた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1217/>コミュニティ忘年会</a></h1><div class=post-meta><time class=post-date>2022-12-17 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span>
<img src=/diary/img/2022/1217_bigpork.jpg class=post-cover alt=コミュニティ忘年会 title="Cover Image"><div class=post-content><p>22時に寝て0時に起きて、4時5時と起きて7時に起きた。昨日の夜ぐらいからずっと頭痛がする。体調悪い。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前153cmで、ストレッチ後157cmだった。先週とほぼ変わらず疲弊と疲労が抜けきっていない。右太もも周りの張りや違和感が依然として強い。腰も自覚症状はなかったもののストレッチを受けていると張りが強いことに気付いた。トレーナーさんからも調子悪そうみたいなコメントもあった。田んぼ・出張を経てのオフィス移転から引っ越しに伴う行政手続きと、この3週間のバタバタした負荷が残っているみたい。土日もずっと作業を継続しているのもよくないのかもしれない。とはいえ、お仕事も引っ越しの行政手続きも一段落はついたので徐々に復調していくはず。</p><h2 id=もくもく会--忘年会>もくもく会 & 忘年会</h2><p>ストレッチを終えたら普段はオフィスで調べものをしているところ、頭痛でしんどいから家に帰って寝てた。そして14時から <a href=https://kobe-sannomiya-dev.connpass.com/event/265510/>【三宮.dev】今年を〆るもくもく会</a> に参加した。2022年7月頃に移転したばかりの中央区の区役所の上に <a href=https://www.kobe-bunka.jp/facilities/chuo/>中央区文化センター</a> がある。そこで開催されて初めて施設に入った。新設した施設なのできれいで設備も充実していてよさそうにみえた。うちのオフィスからも近い。うちの会社にお客さんが来ることはないのだけど、大人数の打ち合わせにも使えそう。</p><p>オフィスへ行かなかった日は <a href=/diary/tags/day-off/>day off</a> というタグで記録している。オフィスへ行ったからといった必ずしもお仕事しているわけではないけれど、役員は考えること・為すことすべてが事業に関連するという考えからオフィスへ行く・行かないという基準で <em>day off</em> という概念を私の中で切り替えている。家で寝てても頭痛はおさまらなかったものの、気合を入れてもくもく会へ行って日記を書いたり調べものをしたりしていた。17時にもくもく会が終わって忘年会へ続く。頭痛はまだ残っていたものの、お昼よりは少しましになった。忘年会も休もうかどうか迷ったんだけど、普段来られない方々もいたのでせっかくの機会だと思って、本気出して忘年会へ行ってきた。体調悪いからお酒は控えた。忘年会でいろいろな話しを聞けたので行って楽しかった。</p><p>体調悪いから2次会は控えて家に帰ってきてそのまますぐ寝てた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1216/>openapi 勉強会</a></h1><div class=post-meta><time class=post-date>2022-12-16 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/docker/>docker</a>&nbsp;
#<a href=/diary/tags/nginx/>nginx</a>&nbsp;
#<a href=/diary/tags/tls/>tls</a>&nbsp;
#<a href=/diary/tags/openapi/>openapi</a>&nbsp;</span><div class=post-content><p>1時に寝て7時に起きた。昨日はたまたま遅くなって0時頃に帰ってきたが、最近は22時前後に帰ってくることが多い。疲労困憊。</p><h2 id=nginx-でつくるリバースプロキシ>nginx でつくるリバースプロキシ</h2><p>ちょっとググってみつかる記事を参考にして設定したらすぐにできた。私は tls 周りの設定に詳しくないのでこういうまとめ記事はとても助かる。インターネットって便利。</p><ul><li><a href=https://gist.github.com/dahlsailrunner/679e6dec5fd769f30bce90447ae80081>Docker with SSL and an nginx reverse proxy</a></li><li><a href=https://mpolinowski.github.io/docs/DevOps/NGINX/2020-08-27--nginx-docker-ssl-certs-self-signed/2020-08-27/>NGINX Docker with SSL Encryption (Self-signed)</a></li></ul><h2 id=openapi-勉強会>openapi 勉強会</h2><p>昨日の続き。openapi についてチーム勉強会を開催した。wiki に次の目次で説明を書いてその内容を勉強会で話した。ちょうど1時間におさまって内容もわかりやすいものができたのではないかと自画自賛。毎週のチーム勉強会のネタとしてちょうどよい粒度だった。</p><ul><li>code generator が fork した背景</li><li>スキーマ駆動開発<ul><li>メリット</li><li>デメリット</li></ul></li><li>OpenAPI スキーマからドキュメント生成</li><li>OpenAPI スキーマからコード生成</li><li>リファレンス</li></ul><p>余談だけど、過去に働いていた会社の発表資料が slideshare から docswell というサービスに移管されてた。slideshare は広告が鬱陶しいサービスになってしまってひどいユーザー体験だからこれは適切な判断だと思う。</p><ul><li><a href=https://www.docswell.com/s/ydnjp/Z3YQV5-2019-11-21-120351>https://www.docswell.com/s/ydnjp/Z3YQV5-2019-11-21-120351</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1215/>openapi 再び</a></h1><div class=post-meta><time class=post-date>2022-12-15 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/openapi/>openapi</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>1時に寝て何度か起きて7時に起きた。1-2時頃に吐き気がして苦しむ割に後半はなにもなかったかのように眠れることがある。</p><h2 id=openapi-generator-の調査>openapi-generator の調査</h2><p>毎週の勉強会に向けて最新の <a href=https://github.com/OpenAPITools/openapi-generator>openapi-generator</a> を使って出力した go client のコードを読んだりしていた。openapi-generator を簡単に試すためのチュートリアルのようなものとして、過去にリポジトリに整理しておいた。このリポジトリを使うとコード生成とドキュメント生成の両方を試してスキーマがあることのメリットを体験できるようになっている。</p><ul><li><a href=https://github.com/kazamori/try-openapi-generator-cli>https://github.com/kazamori/try-openapi-generator-cli</a></li></ul><h2 id=chatgpt-で遊ぶ>chatgpt で遊ぶ</h2><p><a href=https://play2learn.connpass.com/event/268391/>【おあそぶ会】GPT3と遊ぶ</a> に参加した。gpt3 についてちょうさんが調べたメモにも目を通して参考になった。</p><ul><li><a href=https://peridot-balmoral-923.notion.site/20221215-GPT3-31a50d35e2b14c38a73693d1cf1d339a>20221215【おあそぶ会】GPT3と遊ぶ</a></li></ul><p>ちょうさんの gpt3 の説明を聞きながら chatgpt で葬送のフリーレンについてチャットしてた。今日の成果はこれかな。</p><figure><img src=/diary/img/2022/1215_chatgpt1.png></figure></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1214/>技術選定の調査開始</a></h1><div class=post-meta><time class=post-date>2022-12-14 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/frontend/>frontend</a>&nbsp;
#<a href=/diary/tags/tech-selection/>tech selection</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>1時に寝て2時に起きて吐き気に苦しんで6時に起きた。後半はよく眠れた気がする。</p><h2 id=フロントエンドの技術選定の調査>フロントエンドの技術選定の調査</h2><p>はらさんにお願いした <a href=/diary/posts/2022/1209/#フロントエンド勉強会>フロントエンド勉強会</a> の内容を踏まえて技術選定を行う。次の3つを候補とした。</p><ul><li>react</li><li>svelte</li><li>solid</li></ul><p>客観的な指標で3つの技術を調査して比較した時点で solid はうちのチームにはあわないと候補から除外することにした。なので react vs svelte の一騎討ちとなる。なにか理由がない (デファクトスタンダード) なら react だし、うちのチームにとって有効だと判断できる項目があるなら svelte になる。ここで next.js と svelte kit でちょっとコードを書いてみて自分なりの感触も探ろうと考えている。</p><ul><li><a href=https://scrimba.com/articles/svelte-vs-react/>Svelte vs React: Which framework to learn in 2023?</a></li></ul><h2 id=インフレ勉強会>インフレ勉強会</h2><p><a href=https://inflation.connpass.com/event/266172/>エンジニアのためのインフレ研究会 #1</a> に参加した。お仕事の調べものをしながら聞いてた。私はもう常連で前々から同じような話を聞いているものの、発表者の資料も説明もわかりやすいものだったと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1213/>eltax で異動届を申請してみた</a></h1><div class=post-meta><time class=post-date>2022-12-13 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/eltax/>eltax</a>&nbsp;</span><div class=post-content><p>0時に寝て5時に起きて7時に起きた。変哲のない普通の朝だった気がする。</p><h2 id=三菱-ufj-銀行の住所変更手続き>三菱 UFJ 銀行の住所変更手続き</h2><p>先週来店予約をとったので登記事項証明書をもって来店した。手続き自体はすんなりと進み10分で完了した。わざわざ対面で行うのは最早これセキュリティ。とりあえずセキュリティと言っておけば多少の不便さなんか吹っ飛ぶ。担当者が次の項目をチェックしていた。</p><ul><li>免許証の写真と同じ人物かどうか</li><li>住所が書類とあっているかどうか</li><li>通帳が正しいかどうか</li><li>銀行の届け印が正しいかどうか</li></ul><h2 id=eltax-の住所変更手続き>eltax の住所変更手続き</h2><p>オフィスのプリンタを調べたらスキャナの機能もあることがわかった。夜に登記事項証明書をスキャナで取り込み pdf 変換できたのでそれを使って eltax で地方自治体 (県と市) の異動届も提出することにした。どうやら申請・届出は pc 版ではなく web 版を使うらしい。初めて行う申請だったので書類の在り処や段取りがわからなくて2時間ぐらいかかった。ざっくり次の手順でできる。</p><ol><li>県向けに異動届を作成<ol><li>登記事項証明書の pdf 添付</li></ol></li><li>作成した異動届をマイナンバーカードを使った公的個人認証サービスで署名して送信</li><li>eltax の利用者情報の変更届けを送信<ol><li>住所が旧住所になっているので更新</li><li>県と市のどちらかを選択すると両方に通知される？</li></ol></li><li>県向けに送付した異動届を複製<ol><li>登記事項証明書の pdf 添付も複製される</li></ol></li><li>同じ異動届を使って市向けに作成</li><li>作成した異動届をマイナンバーカードを使った公的個人認証サービスで署名して送信</li><li>メッセージ照会や受付状況照会で内容を確認</li></ol><p>翌日には受付状況照会で手続きを完了したというステータスになっていたので問題はなかったみたい。同じ異動届を複製できたのが便利だった。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>eltax で異動届を県と市の2つへ提出した。2時間ぐらいかかったけど、手続きを理解した (はず) 。最初に作った異動届をコピーして別の自治体向け申請ができた。入力の手間を省けるので便利な機能にみえる。この次に1つの申請を2つの自治体へ送るといった改善が期待される。</p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1602658819368456192?ref_src=twsrc%5Etfw">December 13, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1212/>docker compose に期待しない</a></h1><div class=post-meta><time class=post-date>2022-12-12 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/gitlab/>gitlab</a>&nbsp;
#<a href=/diary/tags/docker/>docker</a>&nbsp;
#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=post-content><p>0時に寝て5時に起きて7時に起きた。起きたら冷やしたのかお腹痛かったが、まぁまぁ眠れたと思う。</p><h2 id=テスト環境の構築>テスト環境の構築</h2><p><a href=https://docs.gitlab.com/ee/ci/>GitLab CI/CD</a> にだいぶ慣れてきてジョブを追加したり改善したりしながらようやくアプリケーションの docker image もコンテナレジストリに push されるようになった。それを pull してきて、テスト環境を <a href=https://docs.docker.com/compose/>docker compose</a> で構築する。<a href=https://docs.docker.com/compose/production/>Use Compose in production</a> とドキュメントでは威勢がよいが、これが全然イケてない。複数の compose.yml で項目によっては変更したいところを置き換えるといった振る舞いになっていない。例えば、ポート番号などを dev と prod で置き換えたいといった運用の要件を考える。</p><ul><li>dev.yml</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>myapp</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>18080</span>:<span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><ul><li>prod.yml</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>myapp</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>8080</span>:<span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><p>これを次のように指定すると、</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker compose -f dev.yml -f prod.yml up -d
</span></span></code></pre></div><p>実際のサービスは次のように振る舞う。全然あかん。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>myapp</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>18080</span>:<span style=color:#ae81ff>8080</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>8080</span>:<span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><p>他にもそれぞれの yml ファイルで読み込む environment file のマージなどもよくわからない振る舞いをしていて複数の compose.yml で制御するのは断念した。dry の原則に反して設定は重複するけど、それぞれの環境を個別に compose.yml として管理した方が保守コストは小さくなると私は判断した。複数の compose.yml の使い分けのデバッグを1-2日やった後に諦めてテスト環境の構築は完了した。</p><h2 id=年金事務所の住所変更手続き>年金事務所の住所変更手続き</h2><p>先週 <a href=/diary/posts/2022/1205/#法務局で法人登記の変更申請>法務局で法人登記の変更申請</a> をしていて、そのときに問題がなければ今日から登記事項証明書を取得できると案内をもらっていた。決定書が漏れていて再提出というトラブルはあったものの、最小限の損失で留めたせいか、問題なく登記事項証明書を発行できた。住所の変更だけわかればよいので履歴事項証明書ではなく現在事項証明書を発行してみた。この書類もおもしろくて1つ前の住所といまの住所の2つを確認できる。法務局へ行った帰りに年金事務所へ立ち寄って社会保険の住所変更の手続きを行った。次の3つの書類をもって窓口へ。</p><ul><li>登記事項証明書: 番地まで記載されている</li><li>オフィスの一時使用契約書: ビル名はあるがこのビル名は来月に改名</li><li>ビル名変更の証明書類: ビル名の変更のみが記載されている</li></ul><p>この3つの書類で完全に指定された住所 (Fully Qualified Address: 造語) を丁寧に説明したところ担当者に納得してもらえて事なきを得た。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/page/40/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/posts/page/42/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>