<!doctype html><html lang=en><head><title>Posts :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1027/>バドミントンのフットワークを学んだ</a></h1><div class=post-meta><time class=post-date>2024-10-27 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>今日は体育館でバドミントン練習を120分した。前回よりは余裕をもって練習できた。1日の消費カロリーも3000を超えた。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/1020/#体育館でバドミントン>前回の所感</a> 。先週シニアの方の練習に混ぜてもらって今日も初心者と練習すると伺っていたので部外者なのにまた混ぜてもらった。8時に体育館へ並びに行ったら前に2人いて3番目だった。10分ほどしたらシニアも方も来られて一緒に並びましょうと声をかけた。1人1面しか借りられないため、2面借りるためには2人いる。私は近所なので8時から並ぶことも苦にならない。今後も個人利用の日で9時から来られるなら私が並びますよと提案したら先方もそれは助かるみたいな話しになって line 交換して連絡とれるようになった。個人利用は人数を数えてからチケットを購入し、開始前に窓口でまとめて支払う必要がある。料金の支払い方がよくわからなくて後でまとめてもっていったら手続きが違うって怒られた。ちゃんとした指導者と練習場所を確保できる可能性が高くなることから願ったり叶ったり。先週も並んでいたメンバーが何人かいて、これを繰り返すうちにいつものメンバーになって他のチームとも仲良くなるのかもしれない。</p><p>今日は一緒に練習させてもらった中級者の方にフットワークの足さばきを教えてもらった。</p><ul><li>基本的には奇数で移動する (1歩か3歩)<ul><li>ホームポジションから3歩でコートの範囲内を移動できる</li><li>実際の試合だとシャトルが飛んでいるから3歩も歩く余裕はなくて1歩になることが多いらしい</li></ul></li><li>足さばきで移動する足は必ず後ろを通す</li><li>移動した後にラケットを打つために腰を入れられるような動き方が大事になる</li><li>移動してラケットを振った後に右足が前に出る<ul><li>そのための体重移動や体幹のバランスを取る</li></ul></li></ul><p>その他にも一緒に練習してもらった方からもアドバイスをいただいたりしていた。</p><ul><li>フォア持ちとバック持ちで少し握りを変える<ul><li>持ち方が少し違うらしい</li><li>打ち返す前に握り方を変えているらしい</li></ul></li><li>バック打ちは手の甲を上に向けて固定する<ul><li>手首を曲げたりひねったりしない</li></ul></li></ul><p>今日は次のような練習をした。忘れないようにメモしておく。</p><ul><li>ホームポジションからフットワークを使って素振りの練習 (ひとり練習可)<ul><li>左右斜め前と後ろの4つの方向へ移動する</li></ul></li><li>左右にシャトルを投げてフォアとバック持ちでドライブを返す練習</li><li>左右にシャトルを投げてプッシュを打つ練習</li><li>ネット際からシャトルを投げてプッシュ・クロス・ヘアピンの3つを打ち分ける練習</li><li>ドライブで交互に打ち合いする練習 (真っ直ぐ飛ばす)</li><li>落ちてくるシャトルをヘッドを立ててひじを曲げてうつ練習<ul><li>地面にシャトルを置いて真っ直ぐうつ練習</li><li>これは素振りでもよいかも？ (ひとり練習可)</li></ul></li></ul><p>実際に教えてもらったり実践した練習を覚えていってオプチャのコミュニティでも活用しようと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1026/>雑多な作業をして休んでいた</a></h1><div class=post-meta><time class=post-date>2024-10-26 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを20分した。短い時間でも連続最大回数は244回できた。他に連続100回超えも2回ほどできた気がする。ゆっくり慎重にやれば200回を超すのはできるようになってきたのかもしれない。安定的にリフティングできるようになってきた。</p><h2 id=社用車の車検3ヶ月前点検>社用車の車検3ヶ月前点検</h2><p><a href=/diary/posts/2024/0713/#社用車の15年点検>前回の定期点検はここ</a> 。10時からディーラーさんへ点検にもっていく。お店で点検完了を1時間待つ。最近は月に1-2回ほどしか乗っていないのもあってバッテリーの残容量が48%と低いといったところだけ指摘された。この3ヶ月後に車検がある。もう購入してから2年経つんやな。月日が流れるのは早い。同時に車検の見積もりもしてもらってフル整備で 186,538 円になるという。いくつか必須ではない部品交換や作業を省くと1-2万円ぐらいは安くなるとのこと。さらに <a href=https://www.honda.co.jp/ciao/>まかせチャオ SSコース</a> が 81,690 円となる。これは次回の車検までの4回分の6ヶ月点検の費用を先払いするようなパッケージ。もう2年も乗っていて調子のよい車を6ヶ月ごとに点検する必要はあるのか？という点に懸念がある。私の用途だとそんなに距離走っていないし点検を減らしてよいのでは？という気はしている。整備士さんの立場からは安全のためには6ヶ月ごとに点検するのを推奨している。</p><p>走行距離の推移は次の通り。</p><ul><li>購入時: 49,426 km</li><li>6ヶ月点検: 50,156 km</li><li>12ヶ月点検: 52,594 km</li><li>18ヶ月点検: 53,056 km</li><li>21ヶ月点検: 53,429 km</li></ul><h2 id=開発合宿の資料づくり>開発合宿の資料づくり</h2><p>もう来週に迫った開発合宿の旅のしおりを今日作った。これまでも作る時間はたくさんあったのだけど、体調が悪くて手が動かなくてずっと先送りしてきた。ようやく資料を作り終えられて準備が前に進んで素直によかった。いつも晩ご飯にみんなで鍋を作っている。これまでは海鮮鍋を作ってきたが、今回は趣をかえてすき焼きを作ろうと予定している。すき焼きは関東風と関西風の2種類の作り方がある。うちの家は煮込む方の関東風のすき焼きだった。参加者でどちらがよいかを聞いていたら関西風は知らないという話題になって逆に関西風を作ってみようという雰囲気になっている。</p><div class=video-container><iframe src=https://www.youtube.com/embed/6UlpXbVcyR0 allowfullscreen title=【お肉のプロが教える】本格すき焼き（関西風）の作り方！></iframe></div><h2 id=ストレッチ>ストレッチ</h2><p>先週の <a href=/diary/posts/2024/1020/>バドミントン練習</a> でころんで腰を痛めたのがまだ続いている。日常生活に影響はないものの、たまに腰を曲げた姿勢によっては腰に鈍痛が響く。出張中もホテルで寝起き時に腰が痛いなと感じていた。トレーナーさんにも相談してストレッチでみてもらったら腰の奥側の筋に張りがあるようだ。右がひどいが、左もやや張りがある。右をかばって左にも影響が出ているのかもしれない。今日の開脚幅は開始前148cmで、ストレッチ後153cmだった。出張明けでカラダに疲労が溜まっているし体調もよくなかったのでそんなもんかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1025/>テストを書きなぐり</a></h1><div class=post-meta><time class=post-date>2024-10-25 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/music/>music</a>&nbsp;
#<a href=/diary/tags/animation/>animation</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを20分した。連続最大回数は235回できた。出張休み明けだからあまりできないかと思ったが、そうでもなかった。他に122, 192回と20分しかやっていないのに200回超えして、さらに100回超えが2回もあった。練習の間が空いたから慎重にシャトルをみて取り組めたのかもしれない。エアシャトルでのリフティングも200回を超えるようになってきたら別の練習メニューへ移っていく。</p><p>神戸にいると、いつも通りのロウカット玄米と生卵と納豆に野菜サラダを食べられる。外食しなくて済むとほっとする。一昨日からの結合テストのリファクタリングを区切りとして終わらせた。一日中テストデータ生成処理のリファクタリングと足りないテストコードの追加をしていた。テストコードの妥当性をカバレッジで確認できるようになったので安心してテストの品質を管理できる。</p><h2 id=レゾナンスの楽曲>レゾナンスの楽曲</h2><p>apple music で <a href=https://www.sawanohiroyuki.com/>澤野弘之</a> 氏をお気に入り登録しているせいか、新しいアルバムの配信が始まった的な通知をみかけた。これはなんだろう？と調べたら <a href=https://rzns.jp/>レゾナンス：無限号列車</a> というスマホゲームの音楽を担当しているらしい。プロモーションアニメも本格的なものが作られている。このイントロの数秒を聞いただけでこれは澤野弘之氏の音楽だとわかる。近未来且つ SF 的な雰囲気。</p><div class=video-container><iframe src=https://www.youtube.com/embed/G-BLrbA5YQE allowfullscreen title="【Production I.G x Hiroyuki SAWANO x 大張正己】『レゾナンス』アニメーションPV《Prologue》"></iframe></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1024/>飛行機での出張帰り</a></h1><div class=post-meta><time class=post-date>2024-10-24 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/mongodb/>mongodb</a>&nbsp;
#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/performance/>performance</a>&nbsp;
#<a href=/diary/tags/biztrip/>biztrip</a>&nbsp;</span><div class=post-content><p>夜に神戸に戻ってきてからオフィスに来て、機内でやっていた作業を区切りのよいところまで進めてコミットしたりしていた。その後スーパーへ買いものへ行ったりしていた。今日もバドミントン練習はおやすみ。</p><h2 id=ローカルは-standalone-mongodb>ローカルは standalone mongodb</h2><p>mongodb の <a href=https://www.mongodb.com/docs/manual/replication/>レプリケーション</a> 機能を使っていて、replica set の設定が容易なことから <a href=https://hub.docker.com/r/bitnami/mongodb>bitnami/mongodb</a> というコンテナを使っている。これまで結合テストもレプリケーション機能を設定して実行するようにしていた。結合テストの量が増えてきたのもあって実行時間が徐々に遅くなってきた。いまテストのリファクタリングをしているため、ローカルで検証のために何度も実行する必要がある。コードの品質を上げるためにテストを書きやすくする必要がある。実行時間は短いほどよい。そこでローカルでの実行はレプリケーションを設定しないようにしてみた。さらに go のデータ競合を検知する <code>-race</code> オプションも外してテストを実行してみたところ、この2つの改善で macbook の環境で改善前より45%ほど速くなった。十分な高速化を図れた。</p><h2 id=飛行機ルートのふりかえり>飛行機ルートのふりかえり</h2><p>8月に大雨で新幹線が止まってしまい <a href=/diary/posts/2024/0829/>神戸に帰れない状況</a> に直面した。私はほとんど飛行機に乗ったことがなかったため、新幹線が動かないときの迂回手段として飛行機のルートに慣れておく。普段リュックサックに小さいカッターとマイナスドライバーを携帯している。これらは飛行機の手荷物検査でとめられてしまう。荷物を預けるか、検査場で処分してもらうしかない。前回は ANA で帰ってきたが、今回は <a href=https://www.skymark.co.jp/ja/>スカイマーク</a> の飛行機に乗った。値段が安いから LCC だと思っていたら <a href=https://japantour.airtrip.jp/column/magazine/skymark-why-popularity-goodvalue/>スカイマークは安くて快適なMCC</a> らしい。ANA に比べたらずっと小さい飛行機だった。</p><p>タイムスケジュールは次のようになった。</p><pre tabindex=0><code>18:15 (都営浅草線) 五反田 発
18:56 (京急本線) 羽田空港 着
19:45 搭乗開始
19:55 飛行機の座席に着く
20:08 羽田空港の滑走路を発進
20:20 離陸
(機内は暗かった、ラップトップで作業)
21:16 神戸空港の滑走路に着陸
21:22 降機
21:25 空港内の荷物受け取り場に着く
21:30 荷物を受け取り
21:35 (ポートライナー) 神戸空港 発
21:51 (ポートライナー) 貿易センター 着
</code></pre><p>新幹線だと次のようなタイムスケジュールになる。トータルの時間でみれば新幹線の方が20-30分早いかなといったところ。一方で新幹線だと2時間半、同じ姿勢で座っている必要がある。飛行機だと座っている時間は1時間強。飛行機は搭乗手続きのチェックポイントがいくつかあってそれぞれに細かい待ち時間ができてしまうのが気になる。そのときの体調によってもどちらがよいかは変わってくるかもしれない。来月は行きは飛行機、帰りは新幹線にしてみる。</p><pre tabindex=0><code>17:57 (JR) 五反田 発
18:03 (JR) 品川 着
18:19 (新幹線) 品川 発
20:53 (新幹線) 新神戸 着
21:10 (市営地下鉄) 新神戸
21:12 (市営地下鉄) 三宮
</code></pre></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1023/>本番導入へ向けての社内キックオフ</a></h1><div class=post-meta><time class=post-date>2024-10-23 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/project-management/>project management</a>&nbsp;</span><div class=post-content><p>出張で道具がないのでバドミントン練習はおやすみ。</p><h2 id=プロジェクトの進捗報告>プロジェクトの進捗報告</h2><p>出張したときの月例報告の21回目。<a href=/diary/posts/2024/0731/>前々回の進捗報告はこちら</a> 。前回の9月は特別な話題がなかったのもあって書いてなかった。今回も淡々と進捗を報告してあまり話題はないものの、プログラミングを教えることの、抽象化能力と論理的思考、モジュール設計について話題にしてみた。経験のあるプログラマーやできる人は勝手にできてしまうものの、普通の人へどうやって指導していけばいいのか。どこでもよく聞く話しではあるし、プロダクト開発で課題管理をする上での延長上にある話題かもしれない。プロジェクトで解かないといけない問題の本質を認識できるかどうか、気付くかどうかという個人の素養に基づくところが大きい。経験を積んでスキルアップする過程で身につけていく特性を言語化したり明文化したりすることには意味がある。いまの私は答えをもっていないのだけど、とりとめのないの話題だけ共有した。</p><p>その後、ある案件の社内向けキックオフがあった。うちらが約2年開発してきたプロダクトがお客さん先で導入することが決まった。1月にテストして2月下旬から本番導入となる。最初のお客さんなので本番導入後のトラブルがあることも想定しておく。それが終わったらフルタイムもお仕事もようやく終えられるかもしれない。うちの会社のプロダクト開発に工数を取るようにしていきたい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1022/>とりとめのない出張初日</a></h1><div class=post-meta><time class=post-date>2024-10-22 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>出張で道具がないのでバドミントン練習はおやすみ。</p><p>始発の新幹線で東京へ。定例会議に出て、昨日の <a href=/diary/posts/2024/1021/>カバレッジ計測</a> の成果をメンバーに共有して、その後もバグ修正や結合テストのリファクタリングをしていた。夕方には疲労で眠くなってきて17時でお仕事を終えて、お気に入りの <a href=/diary/posts/2024/0924/>中華料理屋さんの晩酌セット</a> を食べて、ホテルに帰って3時間ほど寝てた。起きてから軽く散歩に外に出たぐらいでまたホテルに戻って寝てた。毎月の出張で生活のリズムが乱れる。食べものと生活の拠点がいつもと違うのがしんどくなってきた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1021/>出張前日の資料づくり</a></h1><div class=post-meta><time class=post-date>2024-10-21 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/project-management/>project management</a>&nbsp;</span><div class=post-content><p>今日は1日中オフィスにこもって作業と出張準備をしていたのでバドミントン練習はお休み。夕方にお土産として <a href=https://shop.morozoff.co.jp/c/region/kobe>モロゾフのプリンクッキー</a> を購入するために本店へ行ってきた。これも神戸限定らしい。</p><h2 id=パッケージ外のディレクトリにあるテストのカバレッジ計測>パッケージ外のディレクトリにあるテストのカバレッジ計測</h2><p>先日 <a href=/diary/posts/2024/1018/#go-test-からバイナリをビルドしてサーバーを起動する>深夜にバイナリのビルド・起動調査</a> をしたのに、最終的にはそんなことしなくてもよかった。デフォルトではパッケージ外のディレクトリにあるテストのカバレッジを計測しないことから普通にはできないと考えていた。しかし、調べたら次の SO で解決法をみつけた。結論としては <code>-coverpkg ./...</code> のように go test で実行している結合テストに対してオプションを指定するだけでよかった。</p><ul><li><a href=https://stackoverflow.com/questions/34535704/how-to-detect-code-coverage-of-separated-folders-in-go>How to detect code-coverage of separated folders in GO?</a></li></ul><p>この調査を終えて最終的な makefile の coverage ターゲットは次のようになった。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#a6e22e>coverage</span><span style=color:#f92672>:</span> lint
</span></span><span style=display:flex><span>	rm -f coverage.*
</span></span><span style=display:flex><span>	go test -tags<span style=color:#f92672>=</span>integration -race -cover ./... -coverpkg ./... -covermode atomic -coverprofile<span style=color:#f92672>=</span>coverage.out
</span></span><span style=display:flex><span>	go tool cover -html coverage.out -o coverage.html
</span></span></code></pre></div><p>この make ターゲットを gitlab ci/cd から実行して coverage.out/coverage.html を自動生成する。coverage.out があるので必要に応じて好みのツールで統計情報を解析すればよい。たとえば <a href=https://github.com/nikolaydubina/go-cover-treemap>nikolaydubina/go-cover-treemap</a> でツリーマップを作るなら次のように実行する。</p><pre tabindex=0><code>$ go-cover-treemap -coverprofile coverage.out &gt; treemap.svg
</code></pre><h2 id=近況報告の資料作り>近況報告の資料作り</h2><p>普段は週末に報告資料を作っているのにもうやる気が無さ過ぎてお仕事を終えてから作っている。今回はネガティブな内容も報告に入れる。過去の経緯などを調査しながら3時間もあれば一通りのアウトラインはできた。明日がマイルストーンの最終日になるため、明日を終えてからでないと細かい数字は決定しない。マイルストーンの issue を調べたら qa テストでみつけた不具合の issue がそれなりに溜まっているようにみえる。本当は次のマイルストーンで5次開発は完了予定だが、もう1つ増やしてもよいかもしれない。いずれにしても12月／1月に本番導入のための準備もある。今の開発フェーズを完了しても次の開発フェーズには入らないのではないかという見通しもある。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1020/>バドミントンの基本練習</a></h1><div class=post-meta><time class=post-date>2024-10-20 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は磯上体育館で9時から12時半頃まで3時間ほど練習できた。ひとりでリフティング練習をするよりも相手がいて打ち合いする方がずっと楽しい。午前中にしっかり動いたので2万歩を超えて昨日の消費エネルギーは4500カロリーを超えた。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/0918/#体育館でバドミントン>前回の所感</a> 。磯上体育館では月に2回ぐらい個人利用という先着順で予約できる仕組みがある。8時過ぎに磯上体育館へ行ったらすでに2組並んでいた。先頭の方は9時から2面予約するという。私は3番目で並んでいた。8時半頃には10人以上後ろに並んでいたので8時頃に行くと確実に予約できると思う。事務側も本当は9時から受付だけど、並んでいるせいか8時45分頃から予約受け付けしてれくた。こうやって予約を取るためにどんどん並ぶ時間が早くなっていくのかもしれない。</p><p>先頭に並んでいたシニアの方が気さくに周りに声をかけていて、話しているうちに仲良くなってその人たちの9時からの練習に混ぜてもらうことになった。ベテランのシニアな方で経験もあって教え方もとても上手だった。丁寧に教えてくれてすごく勉強になった。来週も個人利用で9時から借りると話されていたのを聞いて来週も練習に混ぜてもらうことにした。今日は3つの打ち方の基本を教えてもらいながら練習した。</p><ul><li>クリア<ul><li>コートの奥から相手のコート奥へ大きく前方へ打ち返す</li></ul></li><li>ドロップ<ul><li>クリアを同じ打ち方でコートの奥からネットを超えた前方位置へゆるく落とす</li></ul></li><li>プッシュ<ul><li>ネット前で浮いた球を下方に叩きつけるような打ち方になる</li></ul></li></ul><p>打ちながら、私のラケットの振り方や持ち方のよくないところを指摘してもらった。我流でやっていたからちゃんとした知識やフォームを教えてもらえるのは本当にありがたい。教えてもらったことで覚えていることを書いておく。</p><ul><li>足は肩幅に開いて準備をする<ul><li>まだ言語化できないが、右足/左足の使い方について説明されてた</li><li>足の親指部分にチカラを入れてコントロールするように話されていた</li></ul></li><li>フットワークと足の位置を意識してみる<ul><li>私は無意識に一歩目は左足から動いてしまう<ul><li>フォアハンドで打つときは右足から動いた方が速いのかもしれない</li></ul></li></ul></li><li>シャトルが来てから動くのではなく、来る前から位置を予測して動いて備える</li><li>ラケットを振るときに左手をあげてカラダのバランスをとる<ul><li>基本として左手をどう使うのかがすごく大事とのこと</li><li>左手を下げない、肘を90度にまげてあげるのに備えておく</li><li>手首をまげずに固定してラケットを振る</li></ul></li><li>ラケットは親指と人差し指でつまむ気持ちで軽くもち、シャトルを打ち返す瞬間だけ握る<ul><li>この感覚で打ち返すと真っ直ぐ強い打球を返せるようになった</li><li>バックハンドで返すときも同様でシャトルを打つ瞬間だけ握り込んで止めるような感覚で返す</li></ul></li><li>向かってくるシャトルに対してカラダの正面でとらえて打つ<ul><li>この位置を固定にすることで安定して打ち返せる気がする</li></ul></li></ul><p>1時間ちょっと練習の指導をしてもらって30分ほどダブルスの試合をした。私は下手だからすぐ失敗してラリーが止まってしまう。試合形式になると簡単そうにみえるシャトルの打ち返しも緊張や前後左右の動きの中で失敗してしまう。練習でできないことは試合では絶対にできない。ラリーを止めてしまって他の人たちに悪いなと罪悪感を感じるし、練習する方がたくさんシャトルを打つことができて楽しい。もう少し上達するまでは試合は棄権しようかなとも思う。11時からいとうさんが来られて、前の時間帯に教えてもらった打ち方を意識しながらひたすら打ち合いの練習をしていた。その前の練習で教えてもらったことをゆっくり反復する時間をとれてこの時間もよかった。基本の打ち方を教えてもらった通りにやっていると狙ったところにうまく返せる回数が増えたように感じた。</p><h2 id=ストレッチ>ストレッチ</h2><p>先週は実家へ帰ってストレッチをお休みして2週間ぶり。午前中にバドミントンの練習をたくさんして疲れていたのと、試合をしているときにころんで足と腰を少し痛めていた。その部位を伸ばす意図でもストレッチしてもらってちょうどよかった。運動して筋肉痛もある状態でストレッチするとよく伸びて、その日の睡眠もよく取れるし疲労回復も早くなる。今日の開脚幅は開始前146cmで、ストレッチ後155cmだった。ストレッチ前は筋肉痛で伸びないのがストレッチ後によく伸びていることが伺える。トレーナーさんはサッカーをずっとされていた方なのでたまたまはてブでみかけた町田ゼルビアの記事を話題にしたら盛り上がった。この著者の記事が3つもあがっているようにいまホット話題ではあるらしい。</p><ul><li><a href=https://note.com/shv12/n/nab3420c578d4>なぜ町田ゼルビアは叩かれるのか？ここ2年の出来事を振り返る③</a></li></ul><p>ストレッチを終えて晩ご飯を食べた後にオフィスで作業しようと思っていたものの、家に帰ったら疲れてそのまま休んでしまった。体調が悪いわけでもないのに、最近はやらないといけないことをがんばる気力がなくなっている。なにか内からのやりたいが出てこない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1019/>コンパクトな REALFORCE R1 キーボード</a></h1><div class=post-meta><time class=post-date>2024-10-19 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/keyboard/>keyboard</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/noh/>noh</a>&nbsp;
</span><img src=/diary/img/2024/1019_r1.jpg class=post-cover alt="コンパクトな REALFORCE R1 キーボード" title="Cover Image"><div class=post-content><p>今日は午前中寝ていたのと雨降りだったのもありバドミントン練習はお休みした。</p><h2 id=realforce-r1-レビュー>REALFORCE R1 レビュー</h2><p>bluetooth の初回ペアリング設定を過去の <a href=/diary/posts/2021/1102/#realforce-のワイヤレスモデル>R3 のペアリング設定</a> をみながら行った。手順を忘れていたのでまた書いておく。agent を介してパスキーを入力する必要がある。その手順が少しわかりにくい。30分ほどペアリング設定をうまくできなくてやり直ししたりしていた。滅多にやらないことだし。今回も GUI ツールではなく bluetoothctl を実行してペアリングした。</p><pre tabindex=0><code>$ bluetoothctl
[REALFORCE_2 (R3)]# default-agent
Default agent request successful
[REALFORCE_2 (R3)]# scan on
Discovery started
... (デバイスを検索しているうちに RC1 がみつかる)
... MAC アドレスを確認してペアリングする

[REALFORCE_2 (R3)]# pair F7:62:4B:02:D6:EB
Attempting to pair with F7:62:4B:02:D6:EB  (キーボードに接続を試みる)
..
[agent] Passkey: 946185 (エージェントがパスキーを受け取る)
...
</code></pre><p>エージェントが受け取ったパスキーを、bluetooth 接続するキーボードで入力して Enter を押下する。</p><pre tabindex=0><code>[NEW] Primary Service (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service000a
	00001801-0000-1000-8000-00805f9b34fb
	Generic Attribute Profile
[NEW] Primary Service (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service000b
	0000180a-0000-1000-8000-00805f9b34fb
	Device Information
[NEW] Characteristic (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service000b/char000c
	00002a29-0000-1000-8000-00805f9b34fb
	Manufacturer Name String
[NEW] Characteristic (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service000b/char000e
	00002a50-0000-1000-8000-00805f9b34fb
	PnP ID
[NEW] Primary Service (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service0010
	0000180f-0000-1000-8000-00805f9b34fb
	Battery Service
[NEW] Characteristic (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service0010/char0011
	00002a19-0000-1000-8000-00805f9b34fb
	Battery Level
[NEW] Descriptor (Handle 0x0000)
	/org/bluez/hci0/dev_F7_62_4B_02_D6_EB/service0010/char0011/desc0013
	00002902-0000-1000-8000-00805f9b34fb
	Client Characteristic Configuration
[CHG] Device F7:62:4B:02:D6:EB UUIDs: 00001800-0000-1000-8000-00805f9b34fb
[CHG] Device F7:62:4B:02:D6:EB UUIDs: 00001801-0000-1000-8000-00805f9b34fb
[CHG] Device F7:62:4B:02:D6:EB UUIDs: 0000180a-0000-1000-8000-00805f9b34fb
[CHG] Device F7:62:4B:02:D6:EB UUIDs: 0000180f-0000-1000-8000-00805f9b34fb
[CHG] Device F7:62:4B:02:D6:EB UUIDs: 00001812-0000-1000-8000-00805f9b34fb
[CHG] Device F7:62:4B:02:D6:EB ServicesResolved: yes
[CHG] Device F7:62:4B:02:D6:EB Paired: yes
Pairing successful
[CHG] Device F7:62:4B:02:D6:EB Modalias: usb:v0853p031Ad0001
...
[REALFORCE_2 (R3)]# exit
</code></pre><p>ペアリングが成功したらキーボード入力できるようになる。bluetoothctl を eixt してから再実行すると今度は RC1 で実行された。</p><pre tabindex=0><code>$ bluetoothctl
[RC1_1]# info
Device F7:62:4B:01:D6:EB (random)
	Name: RC1_1
	Alias: RC1_1
	Appearance: 0x03c1
	Icon: input-keyboard
	Paired: yes
	Trusted: no
	Blocked: no
	Connected: yes
	WakeAllowed: yes
	LegacyPairing: no
	UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
	UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
	UUID: Device Information        (0000180a-0000-1000-8000-00805f9b34fb)
	UUID: Battery Service           (0000180f-0000-1000-8000-00805f9b34fb)
	UUID: Human Interface Device    (00001812-0000-1000-8000-00805f9b34fb)
	Modalias: usb:v0853p031Ad0001
	Battery Percentage: 0x5b (91)
[RC1_1]# trust 
[CHG] Device F7:62:4B:02:D6:EB Trusted: yes
</code></pre><p>この日記を R1 のキーボードで書いている。R3 と比べてたしかにコンパクトで軽い。キーボードを持ち運びするならよさそう。R3 と比べて右シフトキーが小さいのでその隣にある PgUp キーをタイプミスしてしまう。私は左右両方のシフトキーを使う。!記号などの左手でタイプするときは右シフトキーを使う。それからコンパクトサイズのせいか、キーとキーの隙間が若干狭くなったように感じる。矢印キーの位置もエンターキーの下の方に移動している。R3 の矢印キーの位置を無意識にタイプしようとして空打ちしてしまう。意外と矢印キーを私は使っていたことに気付く。これらの操作の違和感は慣れの問題だと思う。キーボードの打鍵感も R3 と比べて若干違う。気持ち、深さが増して軽い印象を受ける。キー荷重は 45g を選択した。R3 では変荷重モデルを使っていたので小指キーが 30g から 45g に変わる。その違いはあまり感じない。</p><p>キーボードは毎日たくさん使うものだから慣れによる無意識の最適化が自然と行われる。私の用途では R3 と R1 では右シフトキーと矢印キーの位置の違いに違和感を感じる。両方のキーボードを使い分けるというようにはならないのかもしれない。どちらかに慣れるともう一方に違和感を抱くように思える。</p><h2 id=能楽の勉強>能楽の勉強</h2><p><a href=https://nohgaku-kyodo.com/repertoire/yondemiru-yohkihi20241019>玄宗皇帝と楊貴妃の愛情物語の後日談《楊貴妃》 第41回能のことばを読んでみる会</a> に参加してきた。<a href=/diary/posts/2024/0630/#能楽の勉強>前回の所感はここ</a> 。中国史上もっとも有名な美人といわれる <a href=https://ja.wikipedia.org/wiki/%E6%A5%8A%E8%B2%B4%E5%A6%83>楊貴妃</a> の幽霊を主人公とした能になる。<a href=https://ja.wikipedia.org/wiki/%E6%96%B9%E5%A3%AB>方士</a> と呼ばれる修行者が玄宗皇帝の命令で楊貴妃の魂魄の在り処を探していて蓬莱島でみつけて話しを聞くといった、とくに変わったこともない普通の物語の構成になっている。作者ははっきり分かっていないらしいが、世阿弥の娘婿になる金春禅竹 (こんぱる ぜんちく) ではないかと推定されるとのこと。</p><p><a href=https://ja.wikipedia.org/wiki/%E8%B2%B4%E5%A6%83>貴妃</a> というのは皇帝の后に与えられる位の1つで皇后に次ぐ高い位だという。楊が姓になる。唐の <a href=https://ja.wikipedia.org/wiki/%E7%8E%84%E5%AE%97_(%E5%94%90)>玄宗皇帝</a> は在位期間が45年と長い。前半は善政をしいて唐は絶頂期を迎える。後半は楊貴妃にうつつを抜かすようになる。楊一族が政治の重要なポストを占めるようになり、玄宗皇帝が政治に関心をなくして最終的に反乱が起きて国が乱れてしまう。その後、白居易 (はくきょい) という著名な詩人が玄宗皇帝と楊貴妃の物語を <a href=https://ja.wikipedia.org/wiki/%E9%95%B7%E6%81%A8%E6%AD%8C>長恨歌</a> にした。この漢詩が素晴らしい内容だと評価されて後世にまで楊貴妃の物語が広く伝わる影響を与えたという。</p><p>源氏物語に出てくる <a href=https://ja.wikipedia.org/wiki/%E6%A1%90%E5%A3%BA%E6%9B%B4%E8%A1%A3>桐壺更衣</a> (光源氏の母) が楊貴妃のイメージや長恨歌から引用されて創作されているという。この能は源氏物語に出てくる長恨歌を引用した文章を引用して作られてもいて、伝言ゲームのように、引用を繰り返すうちに少しその内容が変わってしまうといったことも起きているらしい。おもしろかったのが、漢詩に序文をつけたりするのを詩序と呼ぶ。オリジナルの中国の長恨歌には詩序がないのに、日本に伝わって残っている長恨歌には詩序が残っていて、その詩序の内容を能でも引用していたりする。当時は長恨歌には詩序があったのに現代では失われてしまった可能性もないわけではないが、おそらく日本に伝わってきた後に誰かが詩序を追加したのではないかと考えられているらしい。</p><blockquote><p>会者定離ぞと 聞く時は、逢うこそ別れなりけれ</p></blockquote><p>以前 <a href=/diary/posts/2023/1021/#能楽の勉強>蝉丸の能</a> を読んだときにも <a href=https://ja.wikipedia.org/wiki/%E4%BC%9A%E8%80%85%E5%AE%9A%E9%9B%A2>会者定離 (えしゃじょうり)</a> が出てきた。一種の悟りのような表現だと朝原さんが解説していて私も記憶によく残っている。直接なにかの役に立つわけではないけれど、こういう言葉や概念に触れて自分の価値観をふりかえる機会があるのはおもしろい。能の言葉を読んでいるとそういう出会いがある。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1018/>exec とスクリプト</a></h1><div class=post-meta><time class=post-date>2024-10-18 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/cli/>cli</a>&nbsp;
#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを60分した。連続最大回数は191回だった。もう少しで200回だったのに残念。木曜日は睡眠をたくさんとって疲れは少し取れたし、安定的に50回前後は続くようになりつつも、100回までに失敗してしまう。今日は100回を超えたのが2回だけだった。ラケットのスィートスポットでとらえたときにきれいに真上にあがる感覚が楽しい。うまくいくときは数回は続く。それが自然にできるときとそうじゃないときの違いを私は制御できてなくて言語化もできない。</p><p>エアシャトルとメイビスにおけるリフティングの違いを比べてみると、メイビスの方が打ち上げて落ちてくるときにあまり回転せずコルクが下を向く傾向が多いようにみえる。エアシャトルの方がコルクが重い分、縦方向に回転し始めるとその回転が止まらず、回転しているからラケット面でとらえるのが難しくなる。だからエアシャトルの方がメイビスよりもリフティングが難しいといえる。シャトルを高く打ち上げると、落下してくる距離が長くなりその回転が落ち着く傾向があるからリフティングしやすくなるのではないかと仮説を考えた。伸び悩みかもしれないし、地道に練習を継続するときかもしれない。</p><h2 id=exec-とエントリーポイントのスクリプト>exec とエントリーポイントのスクリプト</h2><p>コンテナを起動して stop すると SIGTERM が送られる。そのときに api サーバーでシグナルの処理をしているのに、気付いたらシグナル処理が行われずタイムアウトするようになっていた。デフォルトでは10秒でタイムアウトして強制終了となる。なぜシグナルを捕捉しなくなったかを調査したら、あるときサーバーの起動前に前処理が必要になってエントリーポイントをシェルスクリプトにしていた。そのときに exec しないと、シェルスクリプトのプロセスに対してシグナルが送られるため、api サーバーがシグナルを検知できなくなるという副作用があることに気付いた。これまでも <a href=https://ja.wikipedia.org/wiki/Exec>exec</a> を使うとプロセス ID は変更されないという知識を知っていたが、それがどういう状況で役に立つかを理解できていなかった。シグナルを用いた同期処理に exec が役に立つ状況があることを学んだ。修正は次の1行のみ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#f92672>--- a/docker/entrypoint.sh
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/docker/entrypoint.sh
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -2,4 +2,4 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> ...
</span></span><span style=display:flex><span> ... (pre process)
</span></span><span style=display:flex><span> ...
</span></span><span style=display:flex><span><span style=color:#f92672>-./bin/api &#34;$@&#34;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+exec ./bin/api &#34;$@&#34;
</span></span></span></code></pre></div><h2 id=go-test-からバイナリをビルドしてサーバーを起動する>go test からバイナリをビルドしてサーバーを起動する</h2><p>先日 <a href=/diary/posts/2024/1011/#go-の結合テスト向けカバレッジ計測の考察>結合テスト向けカバレッジ計測の調査</a> をした成果を使って実際に go test からカバレッジ計測のカスタマイズを施したバイナリをビルドしてサーバー起動するコードを書いてみた。やや手間取ったが、一通り動いてカバレッジを計測できた。例えば、単体テストのカバレッジを計測するための makefile のターゲットは次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span>GO_COVER_DIR<span style=color:#f92672>:=</span><span style=color:#66d9ef>$(</span>CURDIR<span style=color:#66d9ef>)</span>/tests/coverage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>coverage</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>GO_COVER_DIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	go test -tags<span style=color:#f92672>=</span>integration -race -cover ./... -covermode atomic -args -test.gocoverdir<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GO_COVER_DIR<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><p>go は <a href=https://ja.wikipedia.org/wiki/Fork>fork</a> ができない。fork の代わりに exec を使う。<a href=https://stackoverflow.com/a/28371586>How do I fork a go process?</a> に go の goroutine のスケジューリングと fork は相性が悪くてうまく動かないということが背景だと説明されている。それはともかく exec を使ってもサーバープロセスを非同期に起動できたのでそのスニペットを書いておく。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>binaryPath</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>buildBinary</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>args</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;-verbose&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;-port&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Itoa</span>(<span style=color:#a6e22e>ServerPort</span>),
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>w</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Pipe</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewScanner</span>(<span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Scan</span>() {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Text</span>())
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>cmd</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>exec</span>.<span style=color:#a6e22e>Command</span>(<span style=color:#a6e22e>binaryPath</span>, <span style=color:#a6e22e>args</span><span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Stdout</span> = <span style=color:#a6e22e>w</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Start</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to start api server&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Process</span>.<span style=color:#a6e22e>Signal</span>(<span style=color:#a6e22e>syscall</span>.<span style=color:#a6e22e>SIGTERM</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to terminate the api process&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Process</span>.<span style=color:#a6e22e>Wait</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to wait terminating the api process&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Info</span>(<span style=color:#e6db74>&#34;completed to terminate the api process&#34;</span>, <span style=color:#e6db74>&#34;s&#34;</span>, <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>String</span>())
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// サーバーに対するテストを実行
</span></span></span></code></pre></div><p>サーバープロセスの標準出力のログを <a href=/diary/posts/2024/0919/>io.Pipe</a> を使って出力することもできる。exec で生成したプロセスに対してもシグナルを送ったり終了を待つこともできる。デバッグしている分にはこれで意図したように制御できた。この知見は将来的に役に立つ気がする。0時過ぎから調査を再開して4時前ぐらいまでやっていた。少しはまって時間はかかったものの、久しぶりに集中してデバッグしていた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1017/>変な疲れかた</a></h1><div class=post-meta><time class=post-date>2024-10-17 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを40分した。連続最大回数は168回だった。いくつか練習場所を転々としながら最終的にはホームのビルの軒下に行き着いた。環境のよい場所を知ってしまうと、それよりも劣る環境で練習することに抵抗を感じてしまう。昼間なら風がなくて人通りの少ないところであればどこでもそう大差はないが、<a href=/diary/posts/2024/1012/#練習場所と照明と背景の考察>夜は証明と背景でシャトル視認性</a> が変わってくる。21時まではホームのビルで、21時以降はその隣のビルでといった定番の練習場所ができつつある。今日はなんとなく調子がよくなくて練習していて手応えや集中力を感じなかった。</p><p>午前中に結合テスト改善に関するドキュメントを書いて、お昼から rpm パッケージングのリファクタリングやって、夕方に午前中に書いたドキュメントを使いながらメンバーに結合テスト改善の要項について共有した。そして17時半にはお仕事終えて帰った。晩ご飯も外食してリフティング練習も早めに切り上げて帰った。ここ数日あまり睡眠時間を取れていなかったのもあり、疲れているかも？と21時過ぎから横になって寝ていた。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/posts/page/3/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>