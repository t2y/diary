<!doctype html><html lang=en><head><title>Posts :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0420/>しばらく土曜日の午前中は公園運動をする</a></h1><div class=post-meta><time class=post-date>2024-04-20 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/digital-nomads/>digital nomads</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ワーケーションの学び>ワーケーションの学び</h2><p><a href=https://panq20240420.peatix.com/view>デジタルノマドとワーケーションの現在地と展望</a> に参加した。</p><p>土曜日の7-9時という、あまりみかけない時間帯にイベントが開催されている。なぜ土曜日の朝7時か？というと他の予定と競合しないというメリットがある。通常は参加に1,000円かかるが、カフーツさんのオンラインイベントに山梨大学生命環境部教授の田中敦さんが参加されていて、そのコネで招待コードを無料でいただいたので試しに参加してみた。初めて参加してまず驚いたのだけど、このイベントは4年ほど継続しているらしく、且つ朝7時から30人以上参加されていた。おそらく参加者から1,000円徴収したいわけではなく、質の高いコミュニティ運営を目的に、無料イベントよりも参加の敷居をあげたいという狙いではないかと推測する。イベントそのものの参加費用をある程度高めに設定して一見さんのハードルをあげつつ、信頼できる知人には招待コードを無料で配るといったやりかたではないかと思えた。</p><p>またオフラインと比べてオンラインイベントは無茶な時間帯に開始時間を設定しやすいことにも気付いた。私は寝起きで参加したのだけど、オンラインイベントだとビデオオフにしておけば身なりを整えなくても済む。同様に夜の遅い時間帯も物理的に出掛けるのは面倒くさい。オンラインなら夜23時からイベントを開催しても終電の心配もない。うちの会社のイベントを開催するときでも土曜日の朝7時という時間帯を検討する価値はあると思えた。この時間帯は暗に真剣に参加する人だけ来ればいいというメッセージも含まれている。</p><p>内容は大学の教授といった方々が発表されているため、やや硬めのしっかりした内容の発表が多かった。デジタルノマドやワーケーションの実践的ななにかというよりも研究対象として分析したことからわかってきた知見やノウハウ、統計的な見解の共有といった意味づけの方が強かったように思う。</p><p>もっとも大きな気付きを1つ書く。<a href=https://note.com/matsulab>松下慶太</a> さんという関西大学社会学部の教授が話していた内容で「混ぜる (mixed)」と「和える (harmonized)」は違うという話しをされた。外国にはない表現なので harmonized という英単語が適切かどうかはわからないと本人も仰っていた。デジタルノマドを地域に受け入れるのは混ぜる (地域の文化やしきたりに均質化させる) のではなく、和える (それぞれの持ち味がでるよう、いい加減で止める) アプローチがよいのではないかと提案されていた。料理の世界で使う和えるという言葉を日本人の価値観でわかりやすく見事に表現されていた。相対的にコミュニティはポリシーの下「混ぜる」というアプローチをするし、コワーキングは個々のコワーカーのホスピタリティを優先するなら「和える」というアプローチが向く。似て非なる概念を日本人にとって馴染みのある言葉でうまく表現されていて素直に素晴らしい視点だと感心した。</p><figure><img src=/diary/img/2024/0420_aeru.png></figure><p>私自身、組織に馴染めなかった方の「混ざらなかった」人間と言える。うちの会社で社員を雇う価値観としても「和える」というアプローチを採用したいし、会社にとっての <a href=https://www.soumu.go.jp/kankeijinkou/about/index.html>関係人口</a> を増やすという概念を、会社の理念や行動規範とするのもいいんじゃないかと論理を飛躍して考えたりもしていた。資本主義における会社の目的は究極的には利益の追求に帰結してしまう。しかし、それが行き過ぎると社会に歪みを生じさせてしまう。利益だけではない行動規範として、ただ会社に関わる人を増やすというシンプルな目的はコワーキングやコラボレーションとも相性がよさそうで、私の理念にもあうように思えた。このアイディアはもう少し寝かせて時がきたら掘り下げてみようと思う。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週もお仕事がいろいろ立て込んでいて余裕がなかったため、運動の時間をあまり取れなかった。結果的にいつもよりも少し運動時間が少ないせいで筋肉やカラダへの負荷が下がり、ストレッチを受けても疲労が蓄積していない状態だった。右臀部のツボがいつもよりきつく感じたのと、肩甲骨辺りの筋肉が硬くなっているとトレーナーさんが仰っていた。これは腕立て伏せや腹筋ローラーでその辺りの筋肉を使ってしまっている影響もあるのかもしれない。トレーナーさんが言うには、腕立て伏せは大胸筋、腹筋ローラーは腹筋を意識したフォームでないと他の部位の筋肉も使ってしまってあまりよくないようなニュアンスで話されていた。今日の開脚幅は開始前150cmで、ストレッチ後155cmだった。</p><p>いま三宮.devの公園運動がやや盛り上がりつつあって土曜日の午前中に参加する人が多いため、土曜日の 10:00-11:40 で受けているストレッチを午後に変更してみることにした。5月は土曜日の午前中を公園運動の時間に割いてみる。暑くて外に出るのが嫌になるまでは続けてみようと思う。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p>ストレッチを終えてから12時過ぎから1時間ほど運動してきた。<a href=/diary/posts/2024/0419/#みなとのもりの運動>前回の所感はここ</a> 。バスケコートは3つとも埋まっていて今日はやらなかった。いつも通り縄跳びを15分間跳んでから付近を散歩したりストレッチしたりしていた。縄跳びをうまく跳ぶコツを少しつかんだ。いつもタイマーを地面かベンチに置いて目線を下げて跳んでいた。そうすると、縄が跳んでいる位置よりも少し前方で接地してしまい、飛ぶタイミングが微妙にあわなくて引っかかるということがあった。これは目線を水平方向に向けることで縄の接地面をなるべく跳んでいる位置、もしくは接地しないように調整しやすいことに気付いた。したがってタイマーも下方ではなく、なるべく目線の水平方向に設置するとうまく跳べる気がする。木の幹の枝のところに引っ掛けると目線が安定してよかった。</p><figure><img src=/diary/img/2024/0420_smartrope.jpg></figure><p>その後メンバーの1人が来たのでデカテニスをやってみた。昨日はデカバドミントンをしたからどう違うかを比較してみた。</p><figure><img src=/diary/img/2024/0420_bigtennis.jpg></figure><ul><li>大きいボールは子ども向けで大人が使うには (距離を取ると) ボールの挙動を制御しにくい<ul><li>デカバドミントンも大きい羽の方が飛ばないから運動するにはあまり向かない</li></ul></li><li>小さいボールは大きいボールの倍以上飛ぶのである程度の距離をあけてラリーをしやすい</li><li>デカバドミントンよりもデカテニス (小さいボール) の方が飛距離が増える分、前後左右に動く量が大きくなる<ul><li>たくさん動きたい場合はこちらの方が運動量が増えてよいように思える</li></ul></li><li>相対的に体力がない人はデカバドミントンを、体力がある人はデカテニスを選択するとよさそう</li></ul><h3 id=ダブルダッチ>ダブルダッチ</h3><p>土曜日のお昼なので公園でいろんな人たちが活動している。その中に縄を2つ使ってぐるぐるまわしているのを何度かみかけていた。この競技は <a href=https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%96%E3%83%AB%E3%83%80%E3%83%83%E3%83%81>ダブルダッチ</a> と呼ぶ。</p><blockquote><p>ダブルダッチの歴史は、300年以上前に、アメリカ合衆国のハドソン川ほとりのニュー・アムステルダム（現在のニューヨーク）に入植したオランダ人によってアメリカに持ち込まれた“なわとび”である。 ダブルダッチという言葉は、オランダ人が複雑でおかしなことをした時に、それを指して言うイギリス人の俗語で、イギリス人がこのゲームにダブルダッチという名を付けた。</p><p><a href=https://www.ssf.or.jp/knowledge/dictionary/doubledutch.html>ダブルダッチの歴史・発祥</a></p></blockquote><p>変な名前だが、いまとなってはちゃんとルールも整備され世界大会も開催されている。歴史のあるスポーツ？になっているようだ。これも運動量が増えて公園に来た人たちがやることなくてあぶれないための施策の1つになりそうに思える。ダブルダッチをするためにトーエイライト社の長縄を購入してみた。これも1人ではできないので誰か来てくれると嬉しい。</p><p><a href=https://amzn.to/3UrtmJ5 target=_blank><img src=https://m.media-amazon.com/images/I/81InYAc1VXS._AC_SX679_.jpg width=240></a></p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0419/>関係者を増やしていく試み</a></h1><div class=post-meta><time class=post-date>2024-04-19 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;
#<a href=/diary/tags/recruiting/>recruiting</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>今日の運動は縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ブロックチェーンのお仕事の再面談>ブロックチェーンのお仕事の再面談</h2><p><a href=/diary/posts/2022/0920/#ブロックチェーンのお仕事の面談>約1年半前に lapras 経由でカジュアル面談した</a> 会社から、時間が経ったのでまた面談したいという連絡がきた。律儀な方で前回話したときの印象もよかったので再面談してみることにした。一方で、私はこれから課題管理のビジネスに注力するので現実としてはこの会社に転職することも、開発者として開発の最前線でコミットすることもできないという見通しがあるため、そのことも伝えた上でのカジュアル面談をしてみた。採用のリクルーターとピープルマネジメントのマネージャーの2人がやってきて、途中から私がやりたい課題管理とは何ぞや？みたいな話しを30分ほどしゃべくりした。</p><p>ちょうど <a href=/diary/posts/2024/0417/#新しい税理士さんとのキックオフ>新しい税理士さん向けに簡単な課題管理の概要</a> 資料を作ったばかりだったのでそのスライドをみせながら話した。わりと先方に刺さったみたいで「この文脈でお困りならうちの会社と協業できるかもしれない」と言ったら「その文脈で確かに困っているかもしれない」といった発言も出ていたのでいろいろ大変なのだろうと推測する。うちの会社のターゲットとして、若い組織の方が開発方法論が曖昧だったり、経験不足からノウハウの蓄積がなかったりして課題管理の話題は関心をもってくれるのかもしれない。課題管理の話しでカジュアル面談の大半の時間を浪費してしまったので、先方の話しを私がほとんど聞かないまま、私が言いたいことだけしゃべくりして終わるという、不思議なカジュアル面談となった。いつかうちの会社のことを思い出してくれて一緒にお仕事できればいいんじゃないかと思ったりした。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p><a href=/diary/posts/2024/0412/#バスケットボール>先週と同様19-20時で運動</a> すると三宮.devで宣言して縄跳び、デカバドミントン、バスケットボールの練習をしてきた。他に2人参加者がいて3人で運動してきた。こうやって一緒に運動してくれる人がいるから私もさぼることができず、公園へ行ってなにかしら運動するという、よい継続の循環ができる。いままでモノゴトを継続するには自分の意思のチカラだけだと考えていた。しかし、それはちょっと違うなと歳を経て思うようになってきた。もちろん個人の意思のチカラも一定量はいるけれど、自分を取り巻く周りの人たちの助けも確実にあって、それらも含めて継続できるということを実感できるようになってきた。今後も周りの人たちに助けてもらいながら運動を続けていければいいなと思う。</p><figure><img src=/diary/img/2024/0418_badminton.jpg></figure></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0418/>主キーの特性</a></h1><div class=post-meta><time class=post-date>2024-04-18 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/mongodb/>mongodb</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/postmortem/>postmortem</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,腕立て,スクワット,縄跳び(両足跳)をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=コレクションデータの再定義>コレクションデータの再定義</h2><p>ある mongodb のコレクションのデータ定義で <code>_id</code> に ldap の dn の値を使っていた。dn は一意な値なので主キーとして使ってもよさそうに思えたが、ここで運用上 dn の値が変更されるケースがいくつかあることがわかってきた。例えば、dn に姓名が含まれる場合、結婚して姓名が変わると dn の値が変わることはありえる。他にも dn に含まれる ou の値が現実の組織名を表している場合、組織変更によって ou の値が変わったときに dn の値も連動して変わってしまう。一意な値というだけでデータベースの主キーにするのはよくないということがわかってきた。主キーは一意な値、且つ immutable が望ましい。</p><p>たとえば mongodb では <code>_id</code> を主キーとして使う。mongodb は主キーの値を変更することはできなくて実装上は delete & insert になる。</p><ul><li><a href=https://stackoverflow.com/questions/4012855/how-to-update-the-id-of-one-mongodb-document>How to update the _id of one MongoDB Document?</a></li></ul><p>delete & insert の運用上の問題は更新時にトランザクションを使わないといけないため、パフォーマンスが悪い。さらに id 連携という業務に特化して言うと、たとえば、姓名の変更は名前が変わったというだけでその人が退職したわけではない。これをシステム上 delete & insert で扱うと、古いユーザーデータを削除して、新規にユーザーデータを作成するといった振る舞いになってしまう。そうすると、古いユーザーがもっていた権限やデータなどを移行しないといけないわけだが、それらをすべて自動化できるか？という難しい課題も積み重なってしまう。本質的に rename を delete & insert で扱うことそのものが誤っているのだ。</p><p>メンバーと相談して <code>_id</code> に uuid を発行して <code>dn</code> はフィールドに unique 制約を課して保持するよう設計を変更することに決めた。コレクションのデータ定義の主キー変更なのであちこち修正してテストコードも修正しないといけない。一意な値、且つ immutable な値のみを主キーとして使うのが今回の学びとなった。私自身、初期の設計に関わったときにこのことに気付かなかったから、これは私のレビューの失敗・見逃しでもある。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0417/>会社も個人も関係者が増えていく実感</a></h1><div class=post-meta><time class=post-date>2024-04-17 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,腕立て,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=新しい税理士さんとのキックオフ>新しい税理士さんとのキックオフ</h2><p>先日 <a href=/diary/posts/2024/0408/>電撃的に税理士さん変更</a> を実施した。その後、契約やシステムへのアカウント登録などを行って体制を整えた。満を持してキックオフの打ち合わせを行った。顧問のはらさんにも参加してもらって3人でキックオフをした。はらさんの顔合わせを行い、当社の概要として課題管理のビジネスについて軽く共有して税理士さんからも質疑応答でいろいろコメントをいただいて、当社の雰囲気や人となりを知ってもらうよい機会になったのではないかと思う。私はあちこちで課題管理の話しをしているので説明するのも慣れてきて時間にあわせてコンパクトに組み立てられるようになってきた。</p><p>新しい税理士さんと法人決算の予定を調整しようと思っていたら、早かったら連休前、意図しない課題に遭遇して遅れても連休明けにはできそうといったスピード感でやってくれるらしい。申告前にデータを整理したら打ち合わせもしてくれるらしい。契約してから1週間ぐらいしか経っていないのに、前の税理士さんと比べると10倍速いと言っていい。一般論として優秀なプログラマーと普通のプログラマーの差が10倍と言われるけど、税理士さんにも当てはまるなぁと実感した。先週締結した契約後も、この書類をくださいとか、過去のこの手続きが誤っているから訂正が必要とか、slack connect でつないでいてどんどん指摘してくれる。前の税理士さんは半年ほど契約していて、先方から質問や問い合わせが来たことはほぼゼロだったと思う。業務として達成しようとしている基準レベルがまったく違う。税理士さんを変更して本当によかった。</p><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>月例のカフーツさんのオンラインイベントに参加した。<a href=/diary/posts/2023/0221/#コワーキングのオンラインイベント>前回の所感はここ</a> 。3月は私の都合があわなくてお休みしたので2ヶ月ぶり。今日はメンバーが外国人のデジタルノマドとイベントを行った成果を発表する予定だったものの、そのメンバーの体調が悪くなってしまって声が出ないということでその発表はキャンセルとなった。主題がなくなってしまったので何を話します？みたいな感じになってぐだぐだになった。</p><p>そのメンバーがまとめた、発表予定だったイベント記事が公開されていて写真も多くてよさそうにみえる。奈良の明日香村と大阪の太子町でイベントをされたらしい。日本人でも聖徳太子とか、大化の改新とか、学校で習った程度しか知らないのでおもしろそうにみえる。日本の文化に関心のある外国人には新鮮なイベントになったのではないかと思う。</p><ul><li><a href=https://en.thedeck.jp/blog/hllm2z2345t6sygj707ussvmhltsd0>Traveler&rsquo;s guide March 30-31st Asuka Village, Nara Prefecture, where Japan began as a nation</a></li><li><a href=https://en.thedeck.jp/blog/taishi-town-tour-11th-april>Taishi Town Tour 11th April</a></li></ul><p>岡山県と兵庫県の県境に佐用町という町がある。姫路よりもまだ西、赤穂の北。いとうさんが佐用町は兵庫県だけど、ほとんど岡山県だと仰っていたのが後になって地図をみて理解できた。佐用町に <a href=https://workandcamp.cobaco.co.jp/>コバコWork&amp;Camp</a> というコワーキングスペースがあって宿泊施設を設けたことで訪問者が滞在する日数が増えてよかったといった話題があった。佐用町には集落をまるごと再生した <a href=https://glaminka.com/sayo/>glaminka SAYO集落</a> という宿泊体験もあるらしい。料金は1名38,600円〜とあって強気な価格設定。</p><p>昨日は2.5時間ぐらいしか寝てなかったので前半は眠くなってやや寝落ちしていた。後半に話しを振られて it 業界の開発合宿や当社の開発合宿イベントについて話したら、なにか受けていた気がするけれど、話すネタがなかったからちょうどよかっただけなのかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0416/>睡眠外来の経過観察</a></h1><div class=post-meta><time class=post-date>2024-04-16 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,腕立て,スクワットをした。今日は強い雨が局所的に降って外に出掛けられなかった。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><p>今日もひたすらコードを書いていてなかなか進捗が厳しい。</p><h2 id=睡眠外来>睡眠外来</h2><p>夜に睡眠外来へ行った。<a href=/diary/posts/2024/0312/#睡眠外来>前回の所感はここ</a> 。<a href=/diary/posts/2024/0314/>CPAP 装置</a> を使って1ヶ月の経過観測だったので10分で終わった。リースで借りている CPAP 装置から送られたデータは通っているクリニックのお医者さんからも確認できるようになっている。いびきの計測や fitbit の睡眠の記録からも効果を確認していた。お医者さんの診察でも着実に成果が出ていてよい感じだと追認してもらえた。一方で最近は装置を付けずに寝てしまう日が何日かあって、さぼっているのもお医者さんにバレてしまい、毎日ちゃんと付けなさいと諭された。</p><p>CPAP 装置について <a href=https://tms1992.co.jp/business/sleep/personal>このサイト</a> だと機器の価格とレンタル料金が次のようになっている。</p><pre tabindex=0><code>販売価格: 450,000円（税別）
レンタル価格: 14,600円（税別）/月
</code></pre><p>支払いするときに1万5千円ぐらいいるのかなぁと覚悟していたら4,580円だった。健康保険で3割負担ってことなのかな？想定していたよりも安くてよかった。この金額ならこのままリースでいいんじゃないかと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0415/>このワークアウトの名前はお風呂ウォーキング</a></h1><div class=post-meta><time class=post-date>2024-04-15 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>今日の運動はスクワット,散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><p>お仕事がいろいろ忙しくてテンパっていながらも、夜は散歩に行くからまぁいっかみたいな微妙な1日を過ごした。本当は帰ってきてから一仕事すべきだったのだけど、もうだらけてしまってそのまま休んでいた。</p><h2 id=お風呂ウォーキング>お風呂ウォーキング</h2><p>ながいさんとやまさきさんと散歩してきた。<a href=/diary/posts/2024/0326/#晩ご飯を食べて温泉へ入ってくる散歩コース>前回の所感はここ</a> 。今日は三宮から歩くにはちょっと遠い <a href=https://aguro-no-yu.com/>あぐろの湯</a> へ行ってきた。途中まで電車で移動して、1時間以内で歩ける適当なところから散歩してきた。必ずしも三宮から目的地まで歩かなくてもよい。これなら行けるお風呂の候補も増えてあちこち行ける。三宮近辺のお風呂を目的に歩くのがよさそうと話していた。歩いていて、カフーツさんの話題になって、いとうさんがやっているのはコワーキングのホスピタリティというより徹子の部屋じゃないか？とながいさんが指摘して、本当にその通りだなと納得した。ゲストの話しを聞いているようで、気付いたらゲスト放っておいて自分の話しばかりしている的な。ゲストをもてなしているのかどうか、よくわからんところが黒柳徹子さんと重なっておもしろかった。</p><p>晩ご飯はとんてき定食を食べた。運動目的で歩いているのにカロリーの高いものを食べるのはよくないのだけど、初めて来た場所だし、食べたいと思ったものを食べた方がストレスが溜まらなくてよい。週に4食は開放食として好きなものを食べたらよいと <a href=/diary/posts/2024/0204/>格闘家に学ぶ体脂肪コントロール</a> 本にも書いてあったので注文してみた。量もガッツリあって味付けも濃かったので運動して消費したカロリーよりも高かったんじゃないかと思う。普通のレストランでとんてきというメニューをあまりみかけなくなった気がする。とんてきを久しぶりに食べた。大阪で働いていた頃はよく食べてた。おいしかった。</p><figure><img src=/diary/img/2024/0415_aguro.jpg></figure><p>お風呂もジェットバス、露天風呂、壺湯、寝転び湯、足湯といろいろな種類があって楽しめた。スーパー銭湯で寝転び湯をみかけたことはあったけど、実際に浸かってみたことはなかった。空いていたので試してみてこの体験は家ではできないお風呂の入り方だなという感想が最初に出てきて新鮮な気持ちになった。サウナもロウリュサウナと薬草サウナの2種類があった。ロウリュサウナがどういうものか、よく分かってなかったけど、広くて汗がどんどん出てきて爽快だった。暑いから私はすぐに出てきてしまうのだけど。</p><p>今日のルートは次の通り。これはマイマップの「ライン」機能を使って描いている。ルート選択すると、変な線引きになったり重ねて表示したりできないので普通にラインで描くのが簡単。</p><ul><li><a href=https://100kado.net/google-my-maps-lines-and-shapes>マイマップ便利機能。シェイプ機能で距離と面積を比較表示 【応用編①】</a></li></ul><a href="https://www.google.com/maps/d/edit?mid=1-CinjerzC80BPVncPF6vX7V_T5T4Mf0&usp=sharing"><figure><img src=/diary/img/2024/0415_mymap.png></figure>海岸通沿いのあぐろの湯</a></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0414/>初めての骨伝導ワイヤレスイヤホンレビュー</a></h1><div class=post-meta><time class=post-date>2024-04-14 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/review/>review</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワット,散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><p>昨日は気付いたら4時半まで役員報酬の減額の手続きをやっていた。5時から寝て8時半に起きた。今日は軽く流そうと思ってレビューを書いてみた。</p><h2 id=骨伝導ワイヤレスイヤホンのレビュー>骨伝導ワイヤレスイヤホンのレビュー</h2><p><a href=/diary/posts/2024/0226/#骨伝導ワイヤレスイヤホン>2ヶ月前に Roddy というブランドの骨伝導イヤホン</a> を購入した。購入直後にサクラチェッカーでレビューを調べたら「サクラ度は99%」と言われて失敗したかなぁとか思ったりもした。いまもその数値は改善していない。一方で実際に2ヶ月間使ってみて、私の用途では十分に満足しているのでそのレビューを書いてみようと思う。お断りとして、私は他の骨伝導ワイヤレスイヤホンを使ったことがないため、相対比較はできない。初めて買ってみた骨伝導ワイヤレスイヤホンが悪くなかったのでこのレビューを書いている。</p><p>もともと <a href="https://katteyokatta.tokyo/?p=8008">【10個以上購入して分かったNo.1】2024年骨伝導イヤホンの最強3選【2024年4月10日更新版】</a> というインフルエンサー？の記事を読んで Roddy 骨伝導イヤホンを知った。品質がよいと書いてあって値段が 5,980 円だった。よく知らない商品を購入するとき、私はまずエントリーモデルを買う。いきなり高い商品を買って自分にあわなかったり、想定していた状況を違ったりするとがっかりするので失敗してもよいぐらいの価格帯で購入する。だいたい3,000円から6,000円ぐらいの価格帯になる。その視点からちょうどよい価格帯だった。余談だけど、違法なセラーがこれよりも安い値段で販売して商品が発送されないという詐欺被害も出ているそうなので、必ず <a href="https://www.amazon.co.jp/sp?ie=UTF8&seller=A1KFMHATUEKBST&asin=B0CMV31HK3&ref_=dp_merchant_link&isAmazonFulfilled=1">Roddy Goods</a> という販売元から購入した方がよいらしい。</p><p>閑話休題。私の用途としては次になる。</p><ul><li>iphone で bluetooth 接続して使う</li><li>イヤホンで聞くのは apple music の音楽だけ</li><li>散歩しながら聴く</li><li>縄跳びしながら聴く</li><li>(たまに) オフィスでデスクワークしながら聴く</li></ul><p>普通のワイヤレスイヤホンと骨伝導ワイヤレスイヤホンとを比較して当たり前の感想だけれども耳を塞がないということの快適さがある。耳が開いているから外の音が聞こえる・聞こえないというのは私にとってはあまり重要ではない。それよりも、物理的に耳を塞いでいないことの開放感、またはずっと塞いだ状態でいることのストレスから開放されることの快さがある。普通のワイヤレスイヤホンをずっと付けているとストレスだと感じたことはあまりなかったが、骨伝導ワイヤレスイヤホンを使ってみてストレスだったんだなと気付いた。</p><p>ながら作業をするときに音楽があった方が集中力が増すので真剣に音楽を聴いているわけではない。聴き流しに近いので高い音質を求めておらず、普通に聴ければそれでよいから私にとっては十分満足している。バッテリーはカタログスペックによると「連続再生約8時間」となっている。散歩や縄跳びのために出掛けると1-2時間ほど連続で使う。ちゃんとバッテリーを使い切ってから充電しているわけではないが、1週間に1-2回の充電でバッテリーが切れることもない。あと購入したときに試しに半日聴いていたら頭がむずむずしたり違和感を感じたりもした。頭痛というほどではないが、最初は慣れがいるのかもしれない。その後、長時間ずっと装着しないようにして、せいぜい1回あたり2-3時間つける程度なら身体的になにも違和感を感じなくなった。骨伝導に慣れたのかもしれない。</p><p>私の主な用途は「ながら」で運動するときに聴くというものなので満足できた。あとは耐久性だけかな。</p><p><a href=https://amzn.to/3Q07zql target=_blank><img src=https://m.media-amazon.com/images/I/61ki0oFCRmL._AC_SX679_.jpg width=240></a></p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0413/>運動の昼夜逆転</a></h1><div class=post-meta><time class=post-date>2024-04-13 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/recipe/>recipe</a>&nbsp;</span><div class=post-content><p>今日の運動は腕立て,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週は月・火と雨降りで外へ出て運動できなかったのと、たまたまお仕事の事務手続きがいろいろ重なって忙しかったのもあり、運動をお休みしていた。お休みしたおかげで筋肉痛の疲労が回復した。トレーナーさんからも先週より筋肉が柔らかいと話されていた。運動し過ぎというほどやっているわけではないけれど、たまに休んで筋肉を回復させると痛みがなくなるという点においてよいのかもしれない。今日は筋肉痛の張りそのものは感じるものの、足全般のどこかしこの部位も痛いといった状況ではなかった。適度な負荷でストレッチができて健康そうに感じた。今日の開脚幅は開始前150cmで、ストレッチ後156cmだった。</p><h2 id=連日のバスケットボール>連日のバスケットボール</h2><p><a href=/diary/posts/2024/0412/#バスケットボール>昨日の続き</a> 。</p><p>コートが空いていない可能性もあったので金・土の2日に渡って練習時間を伝えていた。残念ながら今日は3つともコートが使われていて、少し待ってから利用人数が減ってから混ざるといった練習をした、と言っても30分だけ。私以外に誰も来なかったので30分ほどドリブルやシュートの練習をして、その後、15分間の縄跳びをやって、クールダウンをして帰ってきた。いつもは夜に縄跳びや散歩に出掛けるのを、今日は昼間にやってきた。いまの時期なら暑くないから昼間に運動するのも気分転換になってよいように思えた。<a href=https://kobe-machiguide.com/park/minatonomori-park/>みなとのもり公園</a> は広いからバスケットボールだけをやりに行くのではなく、他のエクササイズやワークアウトもできるような準備をしていって、たまたま来た人が好きな種目を選んで運動できるような体制にしていきたい。</p><h2 id=住居の社宅化と役員報酬の減額>住居の社宅化と役員報酬の減額</h2><p>先日 <a href=/diary/posts/2024/0406/#社宅探しの内覧>社宅の内覧</a> へ行ってきて、一番よかった候補に対しての部屋止めを水曜日に完了した。オーナーが厳しい方らしくて、うちの会社の信用では拒否されるかもしれない。どうやらその部屋は保証会社ではなく保証人で契約しないといけない。過去に何度もお願いしているが、姉の旦那に保証人を依頼して肩身の狭い思いをした。保証人という制度は滅んでほしい。いま審査している部屋に決まるかどうかはともかく、よい仲介業者さんもみつけたので今季中に住居を社宅にすることは確定路線で進める。それに伴い、役員報酬も10万円／月を減額する。これで3等級下がる。変更作業をやり始めたら2-3時間でやってしまった。</p><ul><li>役員報酬変更の同意書作成と押印</li><li>人事給与システムの設定変更</li><li>年金事務所へ月額変更届けの提出<ul><li><a href="https://shinsei.e-gov.go.jp/recept/procedure/lists/procedureInformation?_csrf=9eab81b8-c439-4de1-84db-c5dd211bbabc&search=%2Frecept%2Fprocedure%2Flists%2Fsearch&procedureInfo=%2Frecept%2Fprocedure%2Flists%2FprocedureInformation&applyByProcIdOrGroupId=%2Frecept%2Fprocedure%2Flists%2FapplyByProcIdOrGroupId&pagingPath=%2Frecept%2Fprocedure%2Flists%2Fpaging&backView=%2Frecept%2Fprocedure%2Flists%2FbackView&class1Path=%2Frecept%2Fprocedure%2Flists%2Fclass1&class2Path=%2Frecept%2Fprocedure%2Flists%2Fclass2&deleteBookmark=%2Frecept%2Fprocedure%2Flists%2FdeleteBookmark&registBookmark=%2Frecept%2Fprocedure%2Flists%2FregistBookmark&errorPath=%2Frecept%2Fshinsei-system-error%2F&_csrf=9eab81b8-c439-4de1-84db-c5dd211bbabc&pagingType=&pageNum=1&totalPageNum=1&gtaTetCd=4950013520731&procId=&groupId=&groupName=&urlParameter=&partSignGroupFlag=false&methodFlag=true&gtaTetName=%E6%9C%88%E9%A1%8D%E5%A4%89%E6%9B%B4%E5%B1%8A&officeId=&gtaEveCd=&gtaTbuCd=&gtaTguCd=&pageNum=1&displayNum=20&pageNum=1&DSCTOKEN=">健康保険・厚生年金保険被保険者報酬月額変更届（単記用）（２０１９年５月以降手続き）</a></li></ul></li></ul><h2 id=ホットクックのレシピ作り>ホットクックのレシピ作り</h2><p>基本的に肉じゃがは砂糖とみりんを入れて甘くすると思うけれど、ダイエットに糖分は微妙かなと思って砂糖とみりんを除いたレシピに挑戦している。代わりにかぼちゃを入れて野菜の甘みを足してみた。水曜日に1度作ったものの、なにかひと味足りなくて肉じゃがっぽくない気はした。オイスターソースもまだ残っているから次はそれを入れてみようと思う。もう少し試行錯誤する必要がある。</p><ul><li><a href=https://getupnote.com/share/notes/3ztcTpBat7RA2IpEjuoFzq1JKMf2/a24095ce-e099-43b0-b4a6-4c91ad649ccf>肉じゃが</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0412/>今期の予算づくり</a></h1><div class=post-meta><time class=post-date>2024-04-12 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;
#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,散歩,バスケットボールをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。</p><ul><li>税理士さんの変更に伴ういろいろな共有</li><li>第6期の予算共有</li><li>課題管理の働き方についての認定証を個人に与えるなにか</li><li>(時間があれば) 社宅の契約のいろいろ</li></ul><p>まだ本格的にスタートするのは半年ほど先になる予定だが、先月から顧問を1人増やしている。はらさんは ui/ux の専門家であり、1人で20年以上会社を経営してきた個人経営の専門家としても私は評価していて、うちのようなマイクロ法人の経営についてアドバイスしてもらうのは最適だと考えている。先月に追加した顧問はさらに技術寄りの、一般的に言えば技術顧問に相当する。その方はある sier の cto を何年も務めているので実績も十分にある。本格的に始動するのがもう少し先なのはよいとして、技術顧問から課題管理ビジネスについて、いまから準備してやっていけることもあるのではないか？という意見が出た。</p><p>それは正しくはあるのだけど、私の時間がないというのが現状になる。</p><p>課題管理に関する情報収集も、現実の開発における poc も、この3-4年ずっとやってきたことの累積があるから十分にインプットを蓄積できている。これからやらないといけないのは、そういった溜め込んだ1次情報を見直し、整理し、体系化し、会社の戦略として練り直せないといけない。資料を読み、考え、フィードバックを得て洗練させる。地道で時間のかかる作業が必要になる。この時間が私にはいまない。体重を減らすために運動に時間を費やしているのもある。もう一つ、いまのお手伝い先の受託開発で私が開発の実務もやってしまっているというのがある。開発の実務をやると途端に時間がなくなる。なぜならば、プログラミングというのは製造業における設計に相当する業務なので、開発に終わりはないし、無限に品質を上げるための取り組みに注力してしまえるから。お手伝い先の受託開発で実務から離れない限りは課題管理のビジネス作りに時間を割く余裕がないというのが現状になる。</p><p>スクラムという開発方法論について調査した issue はいくつもある。そして、たとえば「スクラムのよくないところ」といった話題ではらさんと軽く話し始めたら20分は議論が尽きない。この話題で私はいくらでも話せるが、やらないといけないことは、そこからさらに洗練させて言語化しないといけない。そういったノウハウや概念の体系化や整理には得てして時間がかかる。</p><p>今期の予算を策定して現時点ではざっと500万円弱の赤字を見込む。今期から投資フェーズへ移行したいと考えている。役員報酬はすべて役員借入金にして会社のキャッシュアウトをなくせば、ほぼとんとんで会社は維持できる見込みで想定している。他社の実務は受けないけど、付加価値の高いコンサル案件なら多少は受けて赤字を減らすための施策はできないか？と思ったりもするけれど、なかなか難しいかなとも考えている。</p><h2 id=バスケットボール>バスケットボール</h2><p>近所にある <a href=https://kobe-machiguide.com/park/minatonomori-park/>みなとのもり公園</a> でバスケットボールをしてきた。<a href=/diary/posts/2024/0404/#バスケットボール受け取り>先日購入したバスケットボール</a> をもって行った。幸いコートが1つ空いていて自由にドリブルやシュートの練習をしてみた。個別に自由練習できるからボールを2個買っておいてよかった。2人で練習していたら、途中から3人グループがやってきて、混ざって練習していた。私は別に独占する意図はないから人数少なかったらこうやって一緒に混ざって練習するのもいいかもなと思えた。それなら3つのコートが空いていなくても、人数の少ないコートに行って入れてもらってもよいかもしれない。もしくはミニゲームを申し込んでやってもよいのかもしれない。</p><figure><img src=/diary/img/2024/0412_ball.jpg></figure><p>1時間ほど練習したり1on1したりした。相手がわざわざ西明石から出てきてくれたので晩ご飯も食べにいった。夜に行ったことのない <a href=https://tabelog.com/hyogo/A2801/A280101/28049335/>ISOGAMI餃子バル TOMAKO</a> へ行ってみた。お客さんよく入っているし、お店の雰囲気もおしゃれだし、女性客も多い。よいところなのだろう？と勝手に思っていたけれど、実際に行ってみるとそれほど特別とも感じなかった。もちろん個々の単品はおいしかったし、十分に平均以上のお店ではあるのだけど、なにか小さくまとまった感があって、前を通る度に外からみて人気店なのだろうと上がっていた私の期待値に応えるほどではなかった。でも、軽く晩ご飯を食べて1-2時間ですぐ帰るといった用途にはよさそうに思えた。</p><div class=video-container><iframe src=https://www.youtube.com/embed/A26OpOoQCTU allowfullscreen title=燃える餃子></iframe></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0411/>リーダーの教え方</a></h1><div class=post-meta><time class=post-date>2024-04-11 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;</span><div class=post-content><p>今日の運動は腕立て,スクワット,縄跳び(両足跳),散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=まとめ運動>まとめ運動</h2><p>先週末から体調を崩していたり、週明けが雨降りだったり、お仕事が積み重なって余裕なかったりであまり運動できていなかった。運動できていないぐらいだからご飯も作る余裕もなくてあまり食べてもいなかった。食べてないから結果的に体重は減ったんだけど。今日は天気もよかったし、お仕事や雑多な事務手続きも一段落したので、早めにお仕事を終えて公園へ行って縄跳びしたり散歩したり日課分はこなしてきた。</p><h2 id=トヨタイムズ>トヨタイムズ</h2><div class=video-container><iframe src=https://www.youtube.com/embed/rv517-OzHPY allowfullscreen title="トヨタグループの現場×豊田章男 不正判明後に本音で語ったコトバ｜トヨタイムズニュース"></iframe></div><p>知人に教えてもらった動画をみた。有名人だからちょくちょく豊田章男会長の動画をみる機会がある。章男会長は創業者一族ながら、若いときは不遇の環境を過ごしてきたことで特異なリーダーになったようにみえる。うまくいかなかった実践の経験の中から話すから話しも説得力があっておもしろい。動画をみていていくつか気付いたことをメモに残しておく。</p><ul><li>孤独感について<ul><li>みんなモリゾウに憧れや羨ましさがある<ul><li>次の段階になると僻み・やっかみになる<ul><li>その次は憎しみになる</li></ul></li><li>羨ましいと思っていた人を痛めつけることに自己陶酔になる<ul><li>これが世間の冷たい風の正体ではないか</li></ul></li><li>リーダーが説明しない世の中はどうなのか？</li></ul></li><li>そうは言っても孤独は辛い<ul><li>1人になれる場所が大事</li><li>会社とは関係ない友人をもつことが大事</li></ul></li></ul></li><li>日本のものづくりの強みの1つはエンジンである</li><li>新規事業でなにをやってよいか分からなければ、いま困っていることを解決する<ul><li>困っている人たちを助けていると、もっといろいろなアイディアが集まってくる</li></ul></li><li>責任を取るということは実務でしっかり作り直すこと<ul><li>トップが辞めるだけでは改善しない</li></ul></li><li>最後に実際に車を乗ってみてたのがよかった<ul><li>車を作っているのだから自分たちで車を体験する</li><li>その楽しさを大事にしていく</li><li>この延長上にリーダーが生まれていくのかな</li></ul></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0410/>go の generics に慣れてきた</a></h1><div class=post-meta><time class=post-date>2024-04-10 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/programming/>programming</a>&nbsp;</span><div class=post-content><p>今日の運動は腹筋ローラー,スクワット,縄跳び(両足跳)をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=go-の-generics-の扱い>go の generics の扱い</h2><p>今日はほぼまる一日コードを書いていた。あるデータ型のリファクタリングをしていて次のような constraint とメソッドの組み合わせで型チェックできることを理解した。generics 使って1年以上開発しているので感覚的にも慣れてきた。User と Group のどちらかを受け取る constraint とそのデータストアの定義は次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>UserOrGroup</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>User</span> | <span style=color:#a6e22e>Group</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>GetPrimaryID</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>UserOrGroupStore</span>[<span style=color:#a6e22e>E</span> <span style=color:#a6e22e>UserOrGroup</span>] <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>generic</span>.<span style=color:#a6e22e>Store</span>[<span style=color:#a6e22e>E</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>FindByPrimaryID</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>primaryID</span> <span style=color:#66d9ef>string</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>E</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>この型定義を使う関数では次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>find</span>[
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>E</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>UserOrGroup</span>,
</span></span><span style=display:flex><span>](
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>store</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>UserOrGroupStore</span>[<span style=color:#a6e22e>E</span>], <span style=color:#a6e22e>primaryID</span> <span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>E</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>e</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>FindByPrimaryID</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#a6e22e>primaryID</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ee</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>e</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ee.PrimaryID はコンパイルが通らない
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>ee</span>.<span style=color:#a6e22e>GetPrimaryID</span>() <span style=color:#75715e>// 現時点ではメソッド呼び出しが必要
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>ここで UserOrGroup に <code>GetPrimaryID()</code> というメソッドを追加している。本来は両方の構造体に保持するメンバー属性ではあるものの、現時点の go のコンパイラはメンバー属性を正しくチェックできない。そのため、メソッドにして generics の型チェックが正しく通るようにしないといけない。go の issue にも上がっているのでいずれはメンバー属性を解決できるようになるのだろうと推測する。</p><ul><li><a href=https://github.com/golang/go/issues/48522>proposal: spec: permit referring to a field shared by all elements of a type set #48522</a><ul><li><a href=https://github.com/golang/go/issues/63940>spec: investigate if we can remove (most or all) needs for the concept of a core type #63940</a></li></ul></li></ul></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/page/18/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/posts/page/20/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>