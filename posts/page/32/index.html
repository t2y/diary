<!doctype html><html lang=en><head><title>Posts :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1118/>ジョブチェンジのアドバイス</a></h1><div class=post-meta><time class=post-date>2023-11-18 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;</span><div class=post-content><p>能をみて帰ってきた後に晩ご飯を食べたらオフィスへ戻ってもよかったんだけど、なんかだらだらしているうちに22時になって、もういっかという感じでさぼってた。それから寝て1時に起きて4時に起きて7時過ぎに起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週はのんびりしていた気がする。お昼もずっと自炊していて健康によいような感じがあった。実際ストレッチを受けていて、いつもよりも負荷も疲労もないように感じた。強いて言えば、左ふくらはぎと二の腕の辺りがやや張りがあったぐらい。あとコロナワクチンを接種して2週間以上経って、いまの自分は無敵だと思うストレスの無さもあってか、体調がよい。今日の開脚幅は開始前155cmで、ストレッチ後157cmだった。お尻の筋肉を鍛えるエクササイズを教えてもらった。</p><h2 id=もくもく会>もくもく会</h2><p><a href=https://study-kobe.connpass.com/event/299620/>神戸でもくもく会</a> に参加した。<a href=https://onpaper.jp/>ON PAPER</a> というコワーキングスペースで開催された。うちの会社から徒歩2分ぐらいの場所にある。窓際は西日でやや光が気になったが、10階で外を眺めながら作業できるのはそれなりに快適で、広くて設備が新しくて雰囲気のよい施設だった。またイベントがあれば参加してみたいと思う。主催者がこのコワーキングスペースのメンバーまたは関係者なのかな？よく分かっていないけど、とくに参加料は受け取らずにコミュニティイベントを開催されていた。もくもく会のイベントを今後も続けるかどうかはまだ分からないとのこと。</p><p>主催者の関係者で異業種からジョブチェンジを考えている方が2人いていくつかやり取りした。1人は26歳でまだ若いので実績がなくても第2新卒枠でいけばいいのではないかと思う。もう1人は30歳でちょっと第2新卒は厳しそうだが、プログラミングスクールに通ってちゃんと勉強していて、自分で cms っぽい web アプリケーションを rails で開発されていた。デモもみせてもらったが、web アプリケーションでよく実装する機能を一通りは実装されていて、パッとみた感じはよさそうにみえた。</p><p><a href=https://runteq.jp/curriculum>RUNTEQ</a> というプログラミングスクールで勉強しているとのこと。話を聞く分には浮ついたスクールではなく、自分で調べて考えて作れというスパルタ的な方でキーワード以外あまり教えてくれないといったことを話していた。それはそれで自分で調べて理解して実装しないといけない。あと chatgpt に聞きながらも実装していると話していて、いまどきの未経験者は chatgpt に頼るのもよいと思う。最初は誰もがコピペで振る舞いを検証しながらそのコードが正しいかどうかを自分で理解して書けるようになればよい。未経験から半年ちょっと学んで、rails でここまで動くものが作れるなら十分に自分で学んで作る能力はあると思う。ポテンシャル採用でよい会社に入れればうまくステップアップできるのではないかと思う。</p><p>IT 業界へジョブチェンジしたい人たちも増えたように思う。未経験の方々が最初に経験を積むよいお仕事はないだろうか。前にもこの話題を誰かにしたか、どこかで書いた気がする。お金をもらう以上、発注者がいて、責任をもって成果物の納品を期待している人がいる限り、いくら価格調整をしても未経験者にシステム開発してほしくないだろうし、してもよいけど責任者が品質を担保してほしいと思うのは自然だと思う。普通の会社なら先輩がついて経験の浅い開発者の面倒をしっかりみている (はず) 。私もいま若い開発者を少なくない割合の時間を割いて指導している。経験の浅い開発者を同時に面倒をみることは物理的にできない。せいぜい2-3人といったころだろうか。教えるというドメインは労働集約になるのでスケールしない。実務のシステム開発を教えるビジネスというのはちょっと成り立たないとは思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1117/>フロントエンドのビルドツールと vite</a></h1><div class=post-meta><time class=post-date>2023-11-17 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/vite/>vite</a>&nbsp;
#<a href=/diary/tags/svelte/>svelte</a>&nbsp;
#<a href=/diary/tags/noh/>noh</a>&nbsp;</span><div class=post-content><p>22時に寝て0時に起きて2時間ほどネットで遊んで寝て5時に起きて7時に起きた。16時半にお仕事を終えて、雨降りの中、芦屋まで出掛けて能をみてきた。</p><h2 id=sveltekit-と-vite>svelte/kit と vite</h2><p>水曜日から <a href=https://vitejs.dev/>vite</a> の機能や振る舞いについて調べている。厳密には svelte/kit (svelte と svelte kit の両方を指している) はどうやって <code>.svelte</code> ファイルや他のソースコードをコンパイルしているのかを調べ始めた。kit のコードを調べても svelte のコンパイルをしているようにはみえない。vite.config.ts には次のように kit が提供しているプラグインを使っているようにみえる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>sveltekit</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@sveltejs/kit/vite&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>defineConfig</span>({
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>sveltekit</span>()]
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>このコードを追っていくと、次のように <a href=https://github.com/sveltejs/vite-plugin-svelte>vite-plugin-svelte</a> からプラグインを設定するコードがある。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>svelte</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@sveltejs/vite-plugin-svelte&#39;</span>;
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sveltekit() {</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [...<span style=color:#a6e22e>svelte</span>(<span style=color:#a6e22e>vite_plugin_svelte_options</span>), ...<span style=color:#a6e22e>kit</span>({ <span style=color:#a6e22e>svelte_config</span> })];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>vite-plugin-svelte のコードを調べていくと、<a href=https://vitejs.dev/guide/api-plugin.html#universal-hooks>load や transform といったフックポイント</a> に svelte のコンパイラを呼び出すコードがみえてくるようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>compileData</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>compileSvelte</span>(<span style=color:#a6e22e>svelteRequest</span>, <span style=color:#a6e22e>code</span>, <span style=color:#a6e22e>options</span>);
</span></span></code></pre></div><p>svelte のコンパイルは vite の仕組みを使って vite-plugin-svelte に実装されている。それなら vite はどうやってフレームワークのコンパイルを実現しているのだろうか？という疑問に行き着く。その背景を調べたり、ドキュメントを読んだり、実際にサンプルコードを動かしながら検証したりをこの3日間やっていた。自分なりの仮説はできたけれど、本当にその仮説のような振る舞いをしているかの実証がまだできていない。週末に余裕があれば、それをやっていきたい。</p><h2 id=2階席からの能鑑賞>2階席からの能鑑賞</h2><p>行きは三ノ宮から JR で8分、帰りは阪神電車で12分の芦屋駅から徒歩10分ほどで芦屋ルナホールへ着く。<a href=https://yarai-nohgakudo.com/archives/11286>第二十二回芦屋能・狂言鑑賞の会</a> へ行ってきた。前月に <a href=/diary/posts/2023/1021/#能楽の勉強>蝉丸の予習</a> をして準備万端で臨んだ。芦屋ルナホールに着いたら17時過ぎで受付をしてエレベーターで4Fまで。ホールの2階席が物理的には4Fにあった。芦屋ルナホールの2階席は見晴らしがよくて、能を斜め上から俯瞰してみるという、これはこれで独特の視点をもってみれておもしろい。ホールは能舞台ではないので、普通の舞台に高座の床を敷いて周りに松をいけて、簡易の能舞台をこしらえていた。</p><p>ちょうど一調の「花月」が終わったところで、2つめの演目の狂言「濯ぎ川」をみて、芦屋市長挨拶して、能の蝉丸という順番だった。芦屋市長と言えば <a href=https://www3.nhk.or.jp/news/html/20230424/k10014047281000.html>歴代最年少26歳で市長になった</a> 方で挨拶を聞いていても生徒会長が挨拶をしているような雰囲気で若い。こういった若くて優秀な方が若い感性で活躍してほしいと思う。</p><p>蝉丸が始まった。シテは逆髪で、ツレが蝉丸になるという。どちらも能面をしていた。ワキは能面をつけないことは知っていたが、ツレは能面をつけていいんだということを知った。</p><ul><li><a href=https://www.the-noh.com/jp/trivia/042.html>Question42 ワキ方はなぜ能面をつけない？</a></li></ul><p>ストーリーを知っていると謡や詞章が聞き取れるかと期待したが、まだまだそんなことはなくて、紙に書いたものがないと付いていけない。「能のことばを読んでみる会」でもらった詞章をもっていけばよかった。あとイヤホンがあれば朝原さんのスマホ解説を聞けるのだが、それを聞きたいと思いつつ、いつもイヤホンを忘れてしまって聞けない。次回こそイヤホンを忘れないようにしたい。</p><p>それでも所々、記憶に残っている内容と演者が話しているところは理解できて、普段よりも能の物語の展開を理解できたと思う。一方で地謡 (横に座っていて集団で謡う人たち) が能の所々で謡が始まるとき、シテやワキがずっと待っていて時が止まっているかのような感覚になる。いままでもそういう展開だったはずだけど、今回はストーリーが頭も中に入っているので、逆髪、蝉丸、清貫のやり取りが止まってしまって、続きが待ち遠しいように思えた。テレビをみていて CM が入るような感覚。</p><p>囃子は笛・大鼓・小鼓の3人体制だった。これも物語の要所で盛り上がりを演出している。囃子の盛り上がりを聞いていると、ここが見せ場の場面なのだと自然に観客を引き込むことができる。最後の逆髪がじゃあまたねって、あっさり帰るところに蝉丸がもう帰っちゃうの？と嘆くところとか、囃子が盛り上げるのかと思ったらそうでもなかった。途中のどこかの場面が一番盛り上がりを演出していた。</p><p>予習してこんな物語の展開になるのかな？と予想していたものと、実際の能をみているとイメージ通りではなかった。それは地謡の謡いの合間が私の頭の中には入っていなかったから。次に「能のことばを読んでみる会」へ行くと地謡のところがこんな雰囲気なのかとイメージできるようになる。いずれにしても、詞章と能の関係における解像度は少し上がったように思う。まだまだ能をみていて幻視をみるというのはほど遠い。こうやって少しずつ解像度を上げていければと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1116/>ボラティリティとビジネスの展望</a></h1><div class=post-meta><time class=post-date>2023-11-16 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/economy/>economy</a>&nbsp;</span><div class=post-content><p>1時に寝て何度か起きて8時に起きた。朝起きれなくなってきた。</p><h2 id=オプトランのボラティリティ>オプトランのボラティリティ</h2><p><a href=https://www.optorun.co.jp/>オプトラン</a> というオプトナノテクノロジーによる光学薄膜成膜のプロセスソリューション提供を生業にしているメーカーがある。光学薄膜装置という装置がデジカメやスマホを作る上で必要なものらしい。数年前 <a href=https://www.radionikkei.jp/personality/personality/tomiosugimura.html>杉村 富生</a> さんがラジオの「ザ・マネー」でオプトランという会社がよいと解説していたのをきっかけに株を購入した気がする。いまチャートで調べると2017年の終わり頃だったと思う。</p><p>それ以来、ずっとホルダーというわけではないが、<a href="https://finance.yahoo.co.jp/quote/6235.T/chart?styl=cndl&frm=mnthly&scl=stndrd&trm=10y&evnts=volume&ovrIndctr=sma%2Cmma%2Clma&addIndctr=">チャート</a> をみながら、買ったり売ったりをしながらかなりの期間をホルダーとして会社の成長を期待している株主の1人でもある。チャートをみてもらえばわかるが、全体としてはいまは右肩下がりであまり評価されていないようにみえるが、売り買いの波がはっきりしている会社でもある。もしかしたら他の会社もそんなものかもしれないが、私はこの会社を上場直後からずっと観測してきているので、ボラティリティの波が推測できるようになってきたかもしれない。</p><p>11月13日に第3四半期の決算発表があった。内容は <a href=https://www.optorun.co.jp/ir/library/library_12.html>決算説明会資料</a> をみてほしい。私の所感は決算自体は普通の内容で良くも悪くもない。しかし、株価は大きく下がるだろうと予測して、1731円のところに窓が空いていたのでそれを埋めるような1600円台まで下がると予想した。もともと下がった価格で買い増しするつもりだった。</p><p>実際の今週の時系列の株価が次になる。</p><table><thead><tr><th style=text-align:center>日付</th><th style=text-align:right>始値</th><th style=text-align:right>高値</th><th style=text-align:right>安値</th><th style=text-align:right>終値</th><th style=text-align:right>出来高</th><th style=text-align:right>調整後終値</th></tr></thead><tbody><tr><td style=text-align:center>2023-11-13</td><td style=text-align:right>1,826</td><td style=text-align:right>1,840</td><td style=text-align:right>1,791</td><td style=text-align:right>1,797</td><td style=text-align:right>347,100</td><td style=text-align:right>1,797</td></tr><tr><td style=text-align:center>2023-11-14</td><td style=text-align:right>1,570</td><td style=text-align:right>1,579</td><td style=text-align:right>1,420</td><td style=text-align:right>1,548</td><td style=text-align:right>1,330,800</td><td style=text-align:right>1,548</td></tr><tr><td style=text-align:center>2023-11-15</td><td style=text-align:right>1,575</td><td style=text-align:right>1,636</td><td style=text-align:right>1,544</td><td style=text-align:right>1,631</td><td style=text-align:right>555,100</td><td style=text-align:right>1,631</td></tr><tr><td style=text-align:center>2023-11-16</td><td style=text-align:right>1,671</td><td style=text-align:right>1,674</td><td style=text-align:right>1,636</td><td style=text-align:right>1,668</td><td style=text-align:right>377,800</td><td style=text-align:right>1,668</td></tr><tr><td style=text-align:center>2023-11-17</td><td style=text-align:right>1,658</td><td style=text-align:right>1,668</td><td style=text-align:right>1,631</td><td style=text-align:right>1,647</td><td style=text-align:right>272,400</td><td style=text-align:right>1,647</td></tr></tbody></table><p>翌日の株価は1,791円から1,570円寄り付き、ストップ安手前の1,420円まで下落した。5年以上観測している私にとってはたまに見慣れた現象で、オプトランの株価は仕手筋で操作されるようなことが起きる。よい決算でもトレンドで大きく売り込まれることがある。オプトランの経営陣もそれがわかっているのか、予算を保守的に見積もって終わってみれば超絶よい決算に終わることもある。そのせいか、コンセンサスもとんでもないハードルをあげて、決算資料だけをみたらよい決算なのに、コンセンサスに届かずで悪い決算であるかのように売り込まれたりする。その波が明らかなボラティリティになっていて、もう数年それをみてきたので決算の数字にあまり関係なく、決算後の株価の推移の予測がしやすくなってきている。もちろん、たまに超絶によい決算が出て、非のうちどころのない状況に仕手筋を打ち負かすときもある。しかし、超絶によい決算が出るのは稀なので大抵は予定調和のような推移になる。</p><p>今回の1,420円というのは上場来最安値になる。<a href=https://www.optorun.co.jp/ir/library/library_12.html>決算説明会資料</a> を自分の目で見直してほしい。赤字でもなく、ビジネスも好調で、過去と比べて受注残が減っていることからたしかに昔ほどの勢いは失われつつあるのは否めないが、ストップ安に近い評価を受けるような決算ではない。それをみて、今回はいつもより多めに買い増しした。1,420円をつけた後に今週だけでもどれだけ買い戻されているか分かるだろう。</p><p>今後の推移について予測してみる。この四半期がトレンド転換する時期だと私は考えていて、1ヶ月ほど1,600-1,500円を行ったり来たりしながら、次の決算へ向けて少しずつ上げていくだろう。次は本決算になるが、おそらく少しよい決算が出てそれが大きな上昇トレンドに変わるのではないかと予測している。但し、もし普通の決算だと1,420円以下に売り込まれる可能性も2割ぐらいはある。いまこの株を買うとしても、目論見が外れてさらに株価が下がってもまだ買い足せるぐらいの余裕をもって買う方が良い。そして、2年後ぐらいには30%程度は収益を期待できるのではないかと予測している。</p><p>戦争やインフレなどによって世界経済の動向はまだまだ混迷している。中国の2大不動産大手が倒産したことがどんな影響を及ぼすのかも未だよくわかっていない。生きているだけでリスクはたくさんある。現時点ではオプトランの株は買いだと私は考えているが、また本決算が終わったときに予測が当たったか外れたかをふりかえる。そのときのためにこの記事を残しておく。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1115/>銀行のサービス</a></h1><div class=post-meta><time class=post-date>2023-11-15 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>22時に寝落ちして0時頃に起きて1-2時間ネットをみながらだらだらしているうちに眠れなくなって5時に寝て8時に起きた。生活のリズムがおかしい。</p><h2 id=paypay-銀行の設定機能>paypay 銀行の設定機能</h2><p>先日 <a href=/diary/posts/2023/1110/#paypay-証券のつみたて>paypay 証券でつみたて</a> をやってみようと書いた。その入金のための銀行口座を登録しておこうと思って調べてみた。</p><blockquote><p>振込先口座の登録（4月27日～）</p><p>振込先口座の登録はご利用いただけません。</p><p><a href=https://help.paypay-bank.co.jp/hc/ja/articles/900001941843--%E6%8C%AF%E3%82%8A%E8%BE%BC%E3%81%BF-%E3%82%AB%E3%83%BC%E3%83%89%E3%83%AD%E3%83%BC%E3%83%B3-%E4%B8%80%E9%83%A8%E6%A9%9F%E8%83%BD%E3%81%AE%E5%A4%89%E6%9B%B4-%E4%B8%80%E6%99%82%E5%81%9C%E6%AD%A2%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6-9%E6%9C%8819%E6%97%A5%E6%9B%B4%E6%96%B0->【振り込み・カードローン】一部機能の変更・一時停止について</a></p></blockquote><p>なんと！振込先口座の登録機能が一時停止されていることに気付いた。「フィッシング等被害防止の観点から」ということらしい。振込先口座の登録を停止することがフィッシング被害の防止にどう役立つのかはよく分からないが、なにかしらその機能が利用されて犯罪が行われているのだと推測する。こんな一般的な機能が一時停止になるんやなと驚いた。</p><p>その際に、昔調べたときになくてがっかりした機能が追加されていることにも気付いた。</p><ul><li><a href=https://www.paypay-bank.co.jp/payment/auto-transfer.html>自動振込サービス</a></li></ul><p>自動送金でも自動引き落としでもない、自動振り込みサービス。おそらくイメージとして cron のようなもので毎月の振り込み処理を登録するだけなんだろうと推測する。そのせいか、サービス利用料も無料と気前がよい。これまで家賃を毎月1ヶ月前に振り込み予約するというのを手作業でやっていたのを移行した。ついでに paypay 証券への入金もこのサービスで毎月振込することにした。つみたてなのでそれで構わない。</p><p>同種のサービスを調べてみると、ufj 銀行でも <a href=https://www.bk.mufg.jp/tsukau/furikomi/teigakujidosoukin/index.html>定額自動送金サービス</a> というのがあり、これは取扱手数料という形で100円ほど徴収している。しかし、他行あての振込手数料がやたら高いので、なにか作為的なものを感じて印象がよくないが、数百円の手数料を取っているというのは同じ。<a href=https://a-i-u.jp/aiu0000712-post/>家賃の自動引き落としの手数料はいくら？ufjやみずほを比較</a> によると、「自動引き落とし」と「定額自動送金」は似て非なるものにみえる。自動引き落としもやはり数百円の手数料が必要になる。paypay 銀行が提供している自動振込サービスは無料なので良心的だと思う。顧客の「そうそう。こういうのでいいんだよ」をサービス化した感じ。ネットバンクは既存の銀行との差別化に、システム上の簡単なことを無料で提供して、古い銀行システムから顧客を奪えばいいと思う。</p><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>月例のカフーツさんのオンラインイベントに参加した。<a href=/diary/posts/2023/1025/#コワーキングのオンラインイベント>前回の所感はここ</a> 。<a href=https://my-st.fun/>マイスタ加古川</a> というコワーキングスペースを運営しているなかたさんという方がいる。そのなかたさんがレンタルキッチンのようなサービスをコワーキングスペースで提供するにあたって、行政の許可をとるときの背景やコワーカーからの採用についてお話しをされた。</p><p>レンタルキッチンをするときは飲食店の許可をとる必要があるらしい。保健所的にはレンタルキッチンという業態を許可する制度が現時点ではなく、飲食店において実業務を委託された誰かがやっているとみなすことで飲食店として許可を出すという理屈になるみたい。食品衛生責任者は1つの店舗において1人という制度設計なので、レンタルキッチンのような不特定多数の調理人がいるような業態を想定していない。この場合はなかたさんが責任者としてそのリスクを引き受けて、コワーカーがレンタルキッチンでお菓子や軽食を作って販売するといった体制になるらしい。</p><p>また飲食店向けの共済保険がめっちゃ安いことに気付いた。</p><ul><li><a href=https://www.n-shokuei.jp/kyousai/anshin_food.html>あんしんフード君・スーパーあんしんフード君</a></li></ul><p>普通に運営していたら食中毒なんか起こらんでしょ？という話しなんだと思うけれど、年間売上3,000万円以下で1口8,500円/年の保険料で、食中毒があっても最大1億円まで保証してくれる。委託する業者ごとにこの保険に加入してもらうといった仕組みにしてもよいのかもしれない。飲食店向けの保険は想像以上に安いものみたい。日本人の衛生意識が高いせいかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1114/>エッセイと世界観</a></h1><div class=post-meta><time class=post-date>2023-11-14 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/world-view/>world view</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;</span><div class=post-content><p>0時に寝て2時半に起きて4時に起きて7時に起きた。昨日は本を読みながらいろいろ考えていた。</p><h2 id=頁をめくる音で息をする>頁をめくる音で息をする</h2><p>先日の <a href=/diary/posts/2023/1025/#コワーキングのオンラインイベント>オンラインイベント</a> でいとうさんに教えてもらった <a href=https://20db.stores.jp/items/61869c960548e03fb98a95ac>頁をめくる音で息をする</a> を読んでいる。ジャンルで言えばエッセイになる。著者の日常や日々の所感などを綴っている。<a href=https://en.wikipedia.org/wiki/Paul_Graham_(programmer)>Paul Graham</a> 以外であまり読んだ記憶がないぐらい、私にとってエッセイという読みものは珍しい組み合わせになる。私がいま日々書いている日記も、ちょっと技巧を凝らしたり、お洒落な文章に変えてみたらエッセイにならないだろうか？と考えてみる。</p><p>この日記は「書くこと」を目的としているものの、ここで書き溜めたものは将来の自分を助けるコンテンツになることを確信している。それは過去の私が書いたコンテンツがいまの私を助けているし、書き溜めたコンテンツを評価してくれるサイト、例えば <a href=https://lapras.com/public/t2y>LAPRAS スコア</a> をみると、高い評価値になっていたりする。いまのところ、このスコアを何かに使っているわけではないが、15年以上も書いてきたコンテンツはそう簡単に真似できるものではないし、一朝一夕で身につくスキルでもない。</p><p>過去にある会社のトライアルを受けたとき、ある技術の調査結果を wiki にまとめたところ「長文がちゃんと書ける」という評価をその会社の CTO から受けたことがあった。私はきょとんとして「そんなの開発者なら誰でも書けるでしょ？」と感想を述べたところ「いや、そうでもない。」と返ってきて、それから私もちゃんと考えてみたところ、言語能力を高めやすいプログラマーであってもちゃんとした文章を書けるのは全体の半分ぐらいしかいないことに気付いた。文章を書く練習をしない生活を何年も続けていると、驚くほど文章を書くスキルを退化させてしまうことに意識的に気付いていない人も多い。「本気出せば書ける」と思っている人ほど、その自信以上に文章を書けないことに気付いていない。</p><p>閑話休題。本書を読んでいると、日々のたわいもないエッセイがまったく無駄ではないことを伺える。それは本書そのものが売りもののコンテンツとして値段がついていて、私がそれを買っていて、ふわっと読み進めながら自分なりに消化して思うことがいくつかあるからだ。いくつか思いついたことをアイディアそのままに書く。</p><h3 id=中原中也がいい>中原中也がいい</h3><p>いま <a href=https://www.aozora.gr.jp/cards/000026/files/894_28272.html>山羊の歌</a> をぱっと眺めるだけでもその天性を伺える。詩の冒頭を読むだけでもなにか違うと思わせる。著者は学生時代に中原中也を研究していたらしく、中也の作品には死を歌ったものが多くあるという。本書でもいくつか詩の引用がある。中也は <a href=https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%80%E3%82%A4%E3%82%B9%E3%83%A0>ダダイズム</a> と呼ばれる思想に影響を受けているらしい。</p><pre tabindex=0><code>トタンがセンベイ食べて
春の日の夕暮は穏かです
</code></pre><pre tabindex=0><code>幾時代かがありまして
　　茶色い戦争ありました
</code></pre><pre tabindex=0><code>丘々は、胸に手を当て
退けり。
</code></pre><pre tabindex=0><code>私の聖母 (サンタ・マリヤ)！
　　とにかく私は血を吐いた！ ……
</code></pre><pre tabindex=0><code>汚れつちまつた悲しみに
今日も小雪の降りかかる
</code></pre><p>よく技術書などで章節の初めに著名人の言葉を引用していたりする。日本人なら過去の文学者の詩を引用するというのもよさそうな気がした。</p><h3 id=エッセイを配布する>エッセイを配布する</h3><p>一昔前は本という成果物をつくるのが大変な労力を伴うものだった。しかし、現代は文章は電子データでインターネット経由でダウンロードできる。日記を書き溜め、お気に入りの内容を脚色して、メッセージや想いをのせたものをエッセイ本としてつくってみるのもおもしろいかもしれないと、本書を読んで思うようになった。それはエッセイの中で著者の人となりや考えを知るきっかけになる。それを誰かに読んでもらうためというよりは、自分がどういった考えで日々の創作をしているかというのを歴史のように残すという意味合いが強い。例えば、年単位で整理して残しておく。おそらくはそれがまた将来の自分を助ける日がくるような気がする。もしうちの会社に関心をもつ人が出てくれば、電子データは自由にダウンロードして読めばいいし、何冊か紙の本に装丁してノベリティにしてもよい。</p><h3 id=エッセイがその人の世界観を表す>エッセイがその人の世界観を表す</h3><p>本書を読んでいて著者の世界観が本書から伝わってくる。いや、ちょっとそれは言い過ぎでそんな大層なものでもない。著者は仕入元やお客さんとやり取りしながら本を扱うというスタイルを好んでいるようにみえる。ただ本を売り買いしてお金を稼ぐことをよしとしていない。もちろん生活費は必要だから売れてもらわないと困るという文章もちらほらあるが、それ以上に本に関わる人たちとのエピソードを紹介してこんなやり取りがあって嬉しかったということが綴られている。なんとなく私も共感することだが、大きいプロダクトの、大多数の利用者がいるプロジェクトほど、個々の利用者と接する機会や意見をやり取りする機会は少ない。多くの人に影響を与えているはずなのにその実感の乏しい労働体験になる。ただの数字でしかない。少ない関係者が関わるお仕事の方が世の中の役に立っている実感は大きい。</p><p><a href=/diary/posts/2023/1008/#イスラエルとハマスの戦争>イスラエルとハマスの戦争</a> 以来、ずっと考えていた (というほどでもないが) ことの1つに世界観を共有することの難しさがある。おそらく人類のうち戦争を望む人はほとんどいないはずだが、自分たちと住んでいる世界とは異なる世界の思想、価値観、秩序、経済、宗教といった世界観を共有できないばかりに争うことが絶えない。こんな大きな話しをしなくても、身近な周りの人たちとでも自分とは違う価値観をどうやって知り、どのような理解を示すことができるだろうか。エッセイは他者の世界観を表す1つの手段になりそうに思えた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1113/>経済的且つ健康</a></h1><div class=post-meta><time class=post-date>2023-11-13 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;</span><div class=post-content><p>22時頃から寝てしまって24時に起きて2時間ほどネットみたりしてまた寝て4時に起きて7時に起きた。</p><h2 id=健康によさそうな紅生姜>健康によさそうな紅生姜</h2><p><a href=/diary/posts/2023/1112/>昨日の続き</a> 。業務スーパーの紅生姜は 1kg 338円、賞味期限も9ヶ月、とお得ではあるものの、中国産且つ合成保存料／着色料を使っているところに懸念がある。日常的に食べるものならもう少し健康に注意を払いたい。amazon で購入できる商品で <a href=https://sakatashop.jp/pages/company>坂田信夫商店</a> という生姜専門店をみつけた。「合成着色料・保存料 不使用」なのがよい。この紅生姜も色はついているものの、野菜色素で色付けしているらしい。この商品は 1kg 1,800円、賞味期限は製造日から4ヶ月になる。健康に気を遣うと割高になるが、普段食べるものはそれで構わない。amazon の定期便で食べる量にあわせて送ってもらうのがよさそう。</p><p><a href=https://amzn.to/47r3HVA target=_blank><img src=https://m.media-amazon.com/images/I/51dzpO1MqVL._AC_.jpg width=320></a></p><h2 id=お昼ご飯の行方>お昼ご飯の行方</h2><p>週末にスーパーのポイントカードの振る舞いをチェックするためにいつもより食材をたくさん買い込んでしまった。冷蔵庫が膨らんでいるので土日の両日とも自炊して、今日のランチも外食ではなく、お昼に帰って自炊した。オフィスと家の距離が徒歩3分なのですぐ帰れる。家で自炊してお昼ご飯を作るメリット・デメリットを考えてみる。</p><p>メリット</p><ul><li>外食するよりも自炊した方が安い<ul><li>物価が上がっているので外食すると1,000円前後になる</li><li>自炊なら高めに見積もっても500円もあれば済む</li></ul></li><li>野菜を多く採れる<ul><li>基本的に外食のランチは野菜が足りない</li><li>野菜は値段が高いのでランチやお弁当ではしばしば省略される</li></ul></li></ul><p>デメリット</p><ul><li>自炊するのが面倒くさい</li><li>家だと仕事の合間の気分転換にならない？</li></ul><p>基本的に私が労力さえ払えば、経済的にも健康的にもメリットしかない。自炊すればするほどスーパーのポイントも多く貯まる。毎日じゃなくても、たまに多めに買い込んでお昼も自炊してみようと思う。</p><h2 id=go-の-set-型の導入予測>go の set 型の導入予測</h2><p>コードレビューをしていて、ある処理の実装を集合演算でやった方がよいとアドバイスした。go の型システムや標準ライブラリには set 型に相当するものがない。しかし、map を使って簡単に実装できるので実際の開発で問題になることはほとんどない。いまは generics と comparable があるので、汎用の set 型を map で実装することもできるはず、と思って調べたら次の記事をみつけた。</p><ul><li><a href=https://bitfieldconsulting.com/golang/generic-set>A generic Set type in Go</a></li></ul><p>私のイメージとも合致して、こういったものをユーザー定義型で実装すればよいと reviewee とやり取りしていた。generics で汎用の set 型を実装できるなら、当然、それを標準ライブラリに導入しようという話しも出ているはずで軽く調べてみた。次の issue がその議論らしい。</p><ul><li><a href=https://github.com/golang/go/discussions/47331>proposal: container/set: new package to provide a generic set type (discussion) #47331</a></li></ul><p>で、私は issue を読んでいないのだけど、どうやらユーザー定義の iterator 機能に依存しているらしい。従って iterator 機能が導入された後に set 型が導入されるといった流れになるだろう。</p><ul><li><a href=https://github.com/golang/go/issues/61405>spec: add range over int, range over func #61405</a></li></ul><p>iterator 機能は早ければ次の 1.22 ともみられているが、まだマイルストーンがついていないので開発状況によっては見送られるかもしれない。これから1-2年後あたりには go 本体が提供する set 型が支えるようになっているのではないかと推測する。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1112/>紅生姜とポテトサラダ</a></h1><div class=post-meta><time class=post-date>2023-11-12 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>1時に寝て4時ぐらいに吐き気で起きてしばらく休んで寝たら12時に起きた。変な寝方した。</p><h2 id=業務スーパー>業務スーパー</h2><p>昨日 <a href=/diary/posts/2023/1111/#イオン-オーナーズカード>よく行くスーパー</a> について書いたが、もう1つ補足しておく。日常的に行くスーパーではないが、隔週に1回ぐらい行くところに <a href=https://www.gyomusuper.jp/>業務スーパー</a> がある。年末に帰省したときになにかの番組で業務スーパーの創業者が地熱発電に取り組んでいて、そのための学校も自前で作り、エネルギー問題という難しい課題に対して政府に頼らず、自分たちで課題解決しようとしている姿勢に共感した。</p><ul><li><a href=https://www.bloomberg.co.jp/news/articles/2023-07-27/RY9XYDT0G1KW01>業務スーパー創業者が描く日本の地熱発電の未来－スピード感が鍵</a></li></ul><p>それ以来、業務スーパーでちょくちょく買いものをするようになった。運営会社の <a href=https://www.kobebussan.co.jp/>神戸物産</a> は加古川市の総合商社らしい。神戸市じゃなかったのか (´・ω・`) 兵庫県という括りで地元支援の意図もあって買いものをしている。アプリの電子マネーにチャージするときに0.5%のポイントが付き、購入時にもいくらかポイントが付くらしい (店舗によって異なるみたい) 。イオン系列スーパーの買いものを最適化したタイミングで業務スーパーもそうしようと思ってアプリをダウンロードしてアカウントを作った。100ポイント溜まったら100円として使える。</p><p>現時点ではアプリであっても店舗の専用ハードウェアでチャージしないといけない。ちょっと不便。なんでこんな機械がいるのだろう？と疑問に思ったけど、おそらく物理カードのチャージのためかなと推測する。アプリなら、いずれはオンラインでチャージできるようになるのだろうと思う。</p><figure><img src=/diary/img/2023/1112_gyoumuca.jpg></figure><p>昨日、千切り紅生姜 1kg を買ってみた。</p><ul><li><a href="https://www.gyomusuper.jp/product/detail.php?go_id=4464">紅千切生姜</a></li><li><a href=https://gyousu.love/shredded-red-pickled-ginger/>業務スーパーの紅生姜は高コスパ！料理のアクセントにおすすめ！</a></li></ul><p>よく行くお店に紅生姜が置いてあって、紅生姜っていろんな食材にあう味変のトッピングだと思う。お昼によく食べに行くお店に紅生姜のポットが置いてあって、ナポリタンや鶏チーズ丼にもかけてよく食べている。食べ過ぎると塩分と添加物の懸念があるものの、生姜なので基本的には健康によい。家でももっと食べようと思い始めた。</p><ul><li><a href=https://botanica-media.jp/4715>紅しょうがに栄養はある？効果・効能や栄養素、カロリーまでご紹介！</a></li></ul><p>赤102という合成着色料は少量では発がん性はないと認められているものの、アレルギー症状を引き起こす懸念から国によっては規制している国もあるみたい。</p><ul><li><a href=https://wacoms.jp/media/column/food_additive/>添加物は危険？食べすぎ注意の食品添加物一覧をご紹介</a></li></ul><p>買ってから気付いたが、業務スーパーの千切り紅生姜は中国産、且つ赤102という合成着色料を使っている。日常的に食べるものなら赤色である必要はない。無着色な生姜の梅酢漬けを探した方が健康によさそう。</p><h2 id=ポテトサラダ専門店>ポテトサラダ専門店</h2><p>私はポテトサラダが好きだ。居酒屋へ行くと、ほぼ必ずポテトサラダを注文する。どこの居酒屋のポテトサラダもオリジナルなものでおもしろい。ポテトサラダにこだわりのある居酒屋でもそうでないお店でも、まったく同じポテトサラダに出会うことはほぼない。それはポテトサラダが日持ちする料理ではないため、既製品を使うよりも、それぞれの店舗で手作りしているからではないかと推測する。手作りするため、それぞれのお店のアレンジが加わる。ポテトサラダはじゃがいもだけであれば、冷蔵庫で3-5日ほどもつ。しかし、具材を入れると、とくに水分が出る野菜を入れてしまうと痛みやすくなり、2-3日程度の賞味期限になってしまう。これは在庫リスクが高くて専門店には向かない商品だと思う。ググると <a href=https://icotto.jp/presses/3051>ポテトサラダ専門店「ポテトクリーム」</a> というのが1件だけみつかった。皆無ではないが、メディアで珍しく取り上げられる程度には成り立つビジネスではない。</p><ul><li><a href=https://tabelog.com/tokyo/A1317/A131703/13164350/>食べログ: Potato Cream</a></li></ul><p>ふと、お金あったらポテトサラダ専門店を作って、いろんなポテトサラダの味見がしたいと思った。居酒屋で食べられるポテトサラダは基本は1-2種類しかない。ポテトサラダをたくさん集めていろいろ味見ができればいいなと思えた。主成分がじゃがいもという性質上、ポテトサラダはたくさん食べられない。少量を5種類とか、食べながらお酒が飲めれば、私のようなポテトサラダ大好き人間にはそれだけで嬉しい。そんなお店があったらいいなと思えた。別にポテトサラダすべてがオリジナルではなくても、その辺のコンビニやスーパー、居酒屋さんで売っているポテトサラダでも構わない。違う種類のポテトサラダをいろいろ試してみたい、もしくは日替わりでポテトサラダの種類が変わるようなものでもよい。常時50種類ぐらいのポテトサラダがあって、いろいろ試して食べられれば嬉しい。</p><p>扱う種類が増えると在庫リスクが高くなる。飲食店とサブスクリプション的に提携して賞味期限が切れる前にポテトサラダを配ったり、廃棄するのはもったいないから捨てるぐらいなら無料で突き出しやサラダの添えものに出してもよいかもしれない。1,000円ぐらい払って、ポテトサラダをおつまみにビールを飲んで、それからオフィスへ戻ってお仕事するようなスタイルにあうポテトサラダ専門店がほしい。</p><ul><li><a href=https://chisou-media.jp/posts/1089>ポテトサラダは日持ちしない？賞味期限の目安は？冷凍・冷蔵庫など別に！</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1111/>ポッキーの日</a></h1><div class=post-meta><time class=post-date>2023-11-11 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;</span><div class=post-content><p>なんか深夜にお腹空いて2時から冷凍食品の横綱ラーメン作って食べた。深夜に食べるラーメンはおいしかった。それから寝て6時に起きて8時に起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>先週は筋肉痛で大変な状態だったが、今週は十分に休養して元に戻った。今日の開脚幅は開始前156cmで、ストレッチ後157cmだった。いつも通り。とくにどこかの部位が極端に疲労したり張りがあったりする感じはなかったが、左ふとももの後ろと左腰がやや張りが強かったように感じた。私のお気に入りのストレッチの部位としてふとももの後ろの筋を伸ばすのが痛気持ちいい。これは自分では伸ばせない筋なのでトレーナーさんにお願いしないといけない。張りがあっても痛気持ちよい。トレーナーさんと話していて今日が「ポッキーの日」だと教えてもらった。スーパーのクーポンでポッキーお奨めされているなと思っていたけど、そういうことだったのか。</p><h2 id=イオン-オーナーズカード>イオン オーナーズカード</h2><p><a href=https://www.aeon.info/ir/stock/benefit/>イオンの株主優待制度</a> としてオーナーズカードがある。イオン系列のスーパーなどで買いものしたときに半年後にキャッシュバックを受けられる。持ち株数に応じて 3, 4, 5, 7% のキャッシュバックになる。<a href=/diary/tags/sightseeing/>6月末に四国旅行</a> へ行ったときに同室に泊まった方と話していて、イオンのオーナーズカードがお得だよと教えてもらった。私が普段買いものしているスーパーは3つある。</p><ul><li><a href=https://www.kohyo.co.jp/>KOHYO</a></li><li><a href=https://www.hankyu-oasis.com/>阪急オアシス</a></li><li><a href=http://www.lifecorp.jp/>ライフ</a></li></ul><p>このうち、もっともよく行くスーパーが KOHYO である。その理由はもっとも家から近いから。KOHYO はイオン系列になる。オーナーズカードをもつとお得になることに気付いてイオンの株を購入してみた。8月末と2月末の年2回、権利確定が行われる。私の場合、8月末に権利確定され、いろいろ手続きをして、オーナーズカードが10月末に届いた。</p><p>カードを持ち運ぶのは面倒なので調べてみると <a href=https://www.aeon.com/aeonapp/>iAEON アプリ</a> でオーナーズカードを連携すれば代用できることに気付いた。iAEON アプリの会員証にオーナーズカードを連携できる。スーパーで買いものするときにスマホでオーナーズカードの認証ができる。このアプリでオーナーズカードを連携するには waon ポイントカードが必要にある。これも名前がおかしいのだけど、カードを作るという手続きをするが、物理カードを作らなくてもよくて、アプリ上で waon ポイントを管理できる。</p><p>waon とはイオンが提供している電子マネーのことで waon で書いものしたときに貯まるポイントが waon ポイントである。しかし、オーナーズカードで購入しても waon ポイントを貯めることができる、現金で支払ったとしても。これも名前が混乱してしまうが waon ポイントは waon 以外の決済でもポイントが貯まるのである。waon とは別に <a href=https://aeon.co.jp/service/lp/aeonpay/>AEON Pay</a> もある。iAEON アプリ上で AEON Pay が使える。AEON Pay は paypay のようなバーコード決済で、イオンカード以外にも銀行口座からもチャージできる。paypay 銀行は選択できなかったが、都市銀行や地方銀行などを選択して銀行口座から直接チャージできた。AEON Pay には waon ポイントを貯めるという仕組みはなく、AEON Pay の支払いをイオンカードにすることでイオンカードの利用によって waon ポイントが還元されるという仕組みになるため、銀行口座からチャージすると本来は waon ポイントが貯まらない。しかし、オーナーズカードの支払いは waon ポイントが貯まるので、オーナーズカードの認証をした上で AEON Pay をする分には waon ポイントが貯まっているようだ。</p><p>たまたま iAEON アプリで近所の KOHYO を登録すると、その店舗で使えるクーポンが発行されていることに気付く。なぜかクーポンを選択という手作業の登録をする必要がある。クーポンは商品ごとにたくさんあって、1つずつ選択して登録するのが面倒なので「一括選択」というボタンがある。このボタンをタップするとすべてのクーポンが選択済みになって登録される。いま選択済みのクーポンが46個ある。この次は「一括選択」をタップしなくても自動的にクーポンを選択済みの状態にしてほしい。クーポンを選択済みの状態で iAEON アプリで会員証の認証をしてから決済をするとクーポンが適用されて割引を受けられる。クーポンには何度も使える装備タイプと1回使うとなくなる道具タイプがある。そして、KOHYO のクーポンに何度でも使える全品3%引きの装備タイプのクーポンがある。さらに土曜日はそれが5%引きクーポンにクラスチェンジする。つまり、土曜日に KOHYO で買いものすれば、オーナーズカードで3%キャッシュバック、装備タイプのクーポンで5%引き、その上で waon ポイントがつくという、おそらく一番よい装備が整ったという雰囲気だ。</p><p>試しにポッキーのクーポンを使ってみようと、夜にスーパーへ行ったらすべて売り切れていた。仕方なく同じクーポンが適用されるプリッツを買ってきた。トマトプリッツ118円が、5%割引で112円になって、さらに別クーポンのバフがかかって10円引きで102円になる。この時点で 102/118 ≒ 86% なので14%引きになっている。さらにオーナーズカードで3%キャッシュバックになるので17%引きになる。なるほど、物価の上昇を吹き飛ばすような効果がありそうだ。</p><p>今週はここまでの設定をするのにいろいろ調べていた。waon なにそれ？みたいな人間がアプリダウンロードして、アカウント作ったり、waon ポイントカードを作ったり、オーナーズカードを連携したり、あれこれやって理解できた。</p><h2 id=ふるさと納税>ふるさと納税</h2><p>いつも年末に購入している。このぐらいの時期になると急に思い出して、思い出したときに購入しないと忘れてしまうので一気に買いものした。私は2019年から毎年ふるさと納税をしている。いつも食べものをいくつか、工芸品を1つぐらい選択している。気に入るものがなかったら食べものしか買わないときもある。とくに深い意図はなくて、適当に検索して今年は次の4つに決めた。</p><ul><li><a href="https://www.satofull.jp/products/detail.php?product_id=3163482">[北海道清水町] 十勝スロウフード 牛とろ丼セット</a></li><li><a href="https://www.satofull.jp/products/detail.php?product_id=1368233">[長崎県壱岐市]クラフトビール 6本詰め合わせ(3種類×2本)</a></li><li><a href="https://www.satofull.jp/products/detail.php?product_id=1320793">[大阪府泉佐野市]コンパクトバスタオル6枚&lt;シックグレー> 速乾中厚の泉州タオル 010B962</a></li><li><a href="https://www.satofull.jp/products/detail.php?product_id=1053132">[滋賀県甲賀市]信楽焼・明山のとなりのトトロ totoro-01</a></li></ul><p>普通にサラリーマンとして働いている人はふるさと納税のメリットがある。寄付金控除の限度額まで、実質2,000円で好きな返礼品をもらうことができる。私は毎年確定申告をしているのでワンストップ特例制度を利用する必要もなく、手続き上の手間暇もほぼないと言っていい。ふるさと納税の問題点としては次のようなことが指摘されている。</p><ul><li>(一般的に) 都市から地方へ税金が流出するので都市の自治体の税収が減る</li><li>収入の高い人ほど寄付金控除の限度額が高いために得をする傾向がある</li><li>寄付金 (税金) の3割以下 (返戻率と呼ぶ) のお金が本来の使途ではなく返礼品として流出する</li></ul><p>問題や懸念があることは私も知っているが、私のような人間は、こういう機会がないと本来使わないお金を使っていたりするので購買意欲を換気するという側面もある。どのみち、都市に住む人が納めた税金を地方交付税という形で国が地方自治体へ分配している。ふるさと納税が地方交付税の割合に影響を与えているかどうかは知らないが、都市に住む人が納めた税金が地方へ分配されるのはそう変わらないのではないかと思ったりもする。都市に住んでいる人の大半は地方出身者であり、私もそうだが、地方出身者が都市で働いて税金を納めることで都市を支えているとみなすこともできる。都市も地方から働きに来てもらわないと都市を維持できなない。地方と都市は共依存の関係でもある。そして、返礼品を購入してもそのお金は地方の地元企業の経済活動に使われる。それ自体に問題があるわけでもないのではないか。本来の税金の使途が返礼品という、どちらかと言えば、嗜好品に使われているのがやや懸念ではあるが、地方の経済をまわすことに役立っていれば、それはそれで別の意義も出てくるのではないかと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1110/>資産運用の新たなツール</a></h1><div class=post-meta><time class=post-date>2023-11-10 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;
#<a href=/diary/tags/failure/>failure</a>&nbsp;</span><div class=post-content><p>3時に寝て6時半に起きた。晩ごはん食べて、夜の作業して、寝る前に paypay 証券の積立の仕組みを調べて設定したりしていた。昨日あまり寝ていなかったせいか、今日は17時でお仕事を終えて、帰ってきて晩ごはんを食べて、すぐ1-2時間寝落ちした。あまりこういう居眠りは少ない。21時過ぎに起きてまたオフィスへ戻って作業していた。</p><h2 id=決算後の評価>決算後の評価</h2><p><a href=/diary/posts/2023/1109/#ソフトバンクグループ-第2四半期-決算>昨日の続き</a> 。おそらくネガティブな評価になるだろうという予測通り、寄り付きの価格は大きく下落して場中もどんどん下がって次のような結果になった。</p><table><thead><tr><th style=text-align:center>日付</th><th style=text-align:right>始値</th><th style=text-align:right>高値</th><th style=text-align:right>安値</th><th style=text-align:right>終値</th><th style=text-align:right>出来高</th><th style=text-align:right>調整後終値</th></tr></thead><tbody><tr><td style=text-align:center>2023-11-09</td><td style=text-align:right>6,152</td><td style=text-align:right>6,333</td><td style=text-align:right>6,098</td><td style=text-align:right>6,305</td><td style=text-align:right>7,250,900</td><td style=text-align:right>6,305</td></tr><tr><td style=text-align:center>2023-11-10</td><td style=text-align:right>6,000</td><td style=text-align:right>6,016</td><td style=text-align:right>5,721</td><td style=text-align:right>5,790</td><td style=text-align:right>27,804,300</td><td style=text-align:right>5,790</td></tr></tbody></table><p>寄り付きの成り行き、指値、前場引け、後場引けと段階的に空売りの返済が進んで1日で約 77% を返済した。今月中には完済してしまおうとは考えているものの、今日1日で思ったより捌けたのは予想以上にザラ場でも価格が落ちていったから。十分な収益にはなったので来週中には適当なタイミングで完済してしまう。</p><h1 id=paypay-証券のつみたて>paypay 証券の「つみたて」</h1><p>口座を開設していたものの、ずっと放置していた paypay 証券のアプリを久しぶりにたまたま開いてみた。だいぶアプリも改善されたようで機能が増えているようにみえる。適当に触っていて、投信や外国株の購入オプションに「つみたて」があることに気付いた。定期的に決められた金額を購入できる。paypay 証券のよいところは最低1,000円から購入できるところ。これなら財形貯蓄のような用途に使える。</p><ul><li><a href=https://www.paypay-sec.co.jp/news/20230403_2.html>PayPay証券アプリに機能追加！ 〜米国株式つみたてができる！さらに見やすく・使いやすく！～</a></li></ul><p>私は2016年ぐらいから株式投資を始め、もう5年以上は継続している。そのぐらいやって気付いたことはたった1つで、私には投資運用のスキルもなく、そのモチベーションも高くない。資産運用の効率を考慮して貯金に懸念があるから株式投資をしているに過ぎない。あとは経営の勉強の延長で投資や経済の先行きを自分なりに組み立てて予想したりするのにも応用している。それはともかく、これまであまりうまく投資運用してこれなかった経験から、私にとっての株式投資の最適解は <a href=https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%AB%E3%83%BB%E3%82%B3%E3%82%B9%E3%83%88%E5%B9%B3%E5%9D%87%E6%B3%95>ドル・コスト平均法</a> になる。中二病の1つだと思うが、自分ならもっとうまく資産運用できると思ってあれこれやった結果、普遍的なドル・コスト平均法の凄さを理解しただけだった。一番よくない投資は一度に大きなお金を動かすことだと思う。一方で、自分の好きな会社に投資したいという思いはあって paypay 証券のような、会社を指定して「つみたて」というドル・コスト平均法のようなオプションはもっとも望ましいとずっと考えていて、これまで手動でやっていた方法だった。</p><p>試しに毎週1,000円ずつ購入する「つみたて」をいくつか設定してみた。どうやら外国株もすべてが選択できるわけではなさそう。アトラシアンやアームは検索結果に出てこなかった。</p><ul><li>ファイザー</li><li>クラウドフレア</li><li>アマゾン・ドットコム</li></ul><p>あと投信も1つぐらい設定しておこうと思って、これも同じように「つみたて」してみた。</p><ul><li>ひふみプラス</li></ul><p>とりあえず1,000円から始めて、世の中の状況をみながら期間や金額を調整するぐらいの、その程度のカスタマイズで十分。いままでも証券会社のアプリケーションでそういったことができたのかどうか、私はよく知らないけど、スマホアプリだと、ちゃちゃっと触って操作できるのでお手軽でよい。自分が詳しくないものを扱うのはスマホアプリが便利でよい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1109/>儲かっていない会社に中間申告はない</a></h1><div class=post-meta><time class=post-date>2023-11-09 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/management/>management</a>&nbsp;
#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;</span><div class=post-content><p>0時に寝て何度か起きて7時過ぎに起きた。髭を剃っていて唇を切った。</p><h2 id=ソフトバンクグループ-第2四半期-決算>ソフトバンクグループ 第2四半期 決算</h2><p>孫さんが決算発表の場に出てこなくなってまったく関心がなくなっている。ここ数ヶ月ほどタイミングを見計らって少しずつ空売りしてきた。ちょうど年の暮れだしこのタイミングで空売りの返済をしてしまおうと考えている。昨今の雰囲気からまだまだ投資の時期ではなく、なんとなくソフトバンクグループの決算は悪いのだろうと予測していた。虎の子の ARM も上場してしまって他に材料もないだろうと。</p><ul><li><a href=https://group.softbank/event/earnings_2023q2>ソフトバンクグループ 2024年3月期 第2四半期 決算</a></li></ul><p>とくにみるつもりはなかったけれど、作業しながら CFO の説明を聞いていて、「守り」がうんたら、財務が健全だと何度か話していることに気付いた。周りから財務を不安視されて懸念を持たれていることの裏返しように聞こえた。普通、投資会社なら投資の成果をもっとアピールすればいいと思えるが、財務の健全性をアピールするというのがおもしろおかしく聞こえた。arm が上場したにも関わらず、現在の株価と <a href=https://group.softbank/ir/stock/sotp>1株当たりNAV情報</a> の差も前回の決算時よりも開いてしまったと説明していた気がする。それが市場の答えにも思えた。</p><p>おそらく明日の寄り付きの価格は下がると推測するけれど、明日はマイナー SQ だし、この決算でどのぐらい下がるのか、やや楽しみ。11月中には空売りを返済してしまうつもり。</p><h2 id=中間申告>中間申告</h2><p>前期は黒字決算だったので自動的に中間申告が必要なのだと思い込んでいた。しかし、例年ならすでに納税のための通知やデータが届いているはずが一向に来ない。</p><p>昨日、消費税の中間申告の通知が届いた。2年前から消費税を支払っているはずだけど、昨年は中間申告の通知が来てないような？まぁいいや。e-tax のメッセージボックスには中間申告のデータも届いていて、それを使って申告書を作成して pay-easy でそのまま納付した。作業時間は15分といったところ。中間申告はめっちゃ簡単。</p><p>本題の法人税などの中間申告の通知が来ないので厳密な中間申告の条件について調べてみた。</p><blockquote><p>中間申告が必要なのは、前事業年度の法人税額が20万円を超える場合です。中間申告が必要となったとき、その提出期限と税金の納期限は、事業年度開始後6月を経過した日から2月以内です。なお、法人税の中間申告の対象となる人は、地方税（都道府県税、市町村民税、事業税等）についての申告も必要です。</p><p><a href=https://keiriplus.jp/tips/houjinzei_cyukansinkoku/>法人税の中間申告とは？目的や申告方法を基礎から解説！ | 経理・会計業務を効率化「経理プラス」</a></p></blockquote><p>法人税が20万円を超えないと中間申告は不要だという。前期の法人税を調べたら 187,800 円だった。これで法人税と地方法人税の中間申告は不要であることがわかった。</p><blockquote><p>また、事業年度が6カ月を超える法人で法人税の中間申告義務のある法人は、その事業年度開始の日から6カ月を経過した日から2カ月以内に原則として前事業年度の税額の半分の額を予定（中間）申告して納めます。</p><p><a href=https://web.pref.hyogo.lg.jp/kk22/pa04_000000008.html>法人県民税・事業税、特別法人事業税・地方法人特別税</a></p></blockquote><p>次に法人県民税も「法人税の中間申告義務のある法人」とあるので法人税の判定基準と同じになる。</p><blockquote><p>予定申告は、法人税において前事業年度の確定法人税額に前事業年度の月数で除し6を乗じて計算した金額が10万円以下の場合はその年度の申告の必要はありません。</p><p><a href=https://www.city.kobe.lg.jp/a35984/kurashi/tax/houjin/200.html#unker6>神戸市：法人市民税に関するQ&amp;A</a></p></blockquote><p>実際に計算してみると、187,800 / 12 * 6 = 93,900 円となって10万円以下なので中間申告は必要ないとのこと。</p><p>要約すると、あまり納税していない会社は中間申告しなくてよいってことだと理解できた。前期は iphone 14 pro, m2 macbook, 社用車、デスクトップマシンといろいろお金を使ったので納税額が少なかったみたい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1108/>rbac なロールでの動的な権限チェック</a></h1><div class=post-meta><time class=post-date>2023-11-08 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/auth/>auth</a>&nbsp;</span><div class=post-content><p>23時に寝て何度か起きて7時に起きた。夜に作業するつもりが、<a href=http://miabyss.com/>メイドインアビス</a> を見ながら寝落ちした。</p><h2 id=ldap-で認証したユーザーの権限管理>ldap で認証したユーザーの権限管理</h2><p><a href=/diary/posts/2023/1026/>rbac なロール管理</a> の仕組みを api サーバーに実装した。初期実装したときは静的にリソース (url) に対して acl から権限が許可されているかどうかのみをチェックするだけでよかった。ldap で認証したユーザーは自分の情報は更新できるが、他人の情報は更新できないといったリクエスト単位に権限が許可されているかどうかをミドルウェアで判別したい。いわば、リクエスト時に動的にリソースの情報をチェックしないといけない。</p><p>いくつか試行錯誤して、あーでもないこーどもないとやった結果、次のように落ち着いた。</p><ul><li>リソースは動的な権限チェックのために AuthorizeFunc を取得するための AuthorizeKey をもつ</li><li>AuthorizeFunc は Context から取得する</li><li>AuthorizeFunc が true を返す場合は権限を付与する</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Role</span>) <span style=color:#a6e22e>CanAccess</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>resourceName</span>, <span style=color:#a6e22e>target</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>ac</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>ACL</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>ac</span>.<span style=color:#a6e22e>Resource</span>.<span style=color:#a6e22e>Match</span>(<span style=color:#a6e22e>resourceName</span>) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>perm</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>ac</span>.<span style=color:#a6e22e>Permissions</span> {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>perm</span>.<span style=color:#a6e22e>IsGranted</span>(<span style=color:#a6e22e>target</span>) {
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>authorize</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>Value</span>(<span style=color:#a6e22e>ac</span>.<span style=color:#a6e22e>Resource</span>.<span style=color:#a6e22e>Key</span>).(<span style=color:#a6e22e>AuthorizeFunc</span>); <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>authorize</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#a6e22e>resourceName</span>, <span style=color:#a6e22e>target</span>) {
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ロールに渡す Context にはあらかじめ、AuthorizeKey と AuthorizeFunc を登録しておく。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>ctx</span> = <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>WithValue</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#a6e22e>role</span>.<span style=color:#a6e22e>LDAPResource</span>, <span style=color:#a6e22e>role</span>.<span style=color:#a6e22e>IsLDAPResourceOwner</span>)
</span></span></code></pre></div><p>リソースを生成するときに AuthorizeKey をセットしておく。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>ldapUserResource</span> = <span style=color:#a6e22e>rbac</span>.<span style=color:#a6e22e>NewResource</span>(
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;ldap-user-specific-operation&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;(/api/ldap/entry|/api/ldap/entry/.*)&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>LDAPResource</span>,
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>ちょっと設定は煩雑になるが、ひとまずこれで要件を満たせた。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/page/31/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/posts/page/33/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>