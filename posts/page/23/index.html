<!doctype html><html lang=en><head><title>Posts :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/posts/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:url" content="/diary/posts/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/posts/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0725/>小さい冷蔵庫が届いた</a></h1><div class=post-meta><time class=post-date>2023-07-25 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;
#<a href=/diary/tags/failure/>failure</a>&nbsp;</span><div class=post-content><p>0時半に寝て1時半と4時に起きて7時に起きた。やや吐き気がして気分が悪くてうまく眠れなかった。</p><h2 id=小さい冷蔵庫>小さい冷蔵庫</h2><p>先日の <a href=/diary/posts/2023/0721/>暑さ対策委員会</a> の施策の1つ。冷たい飲みものを常備して暑さを紛らわす。</p><p><a href="https://www.amazon.co.jp/gp/product/B0BS651YSN?ie=UTF8&th=1&linkCode=li2&tag=t2y-diary-22&linkId=4e78831605139607a13592a2c64484d6&language=ja_JP&ref_=as_li_ss_il" target=_blank><img border=0 src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0BS651YSN&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=t2y-diary-22&language=ja_JP"></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&language=ja_JP&l=li2&o=9&a=B0BS651YSN" width=1 height=1 border=0 alt style=border:none!important;margin:0!important></p><p>購入した冷蔵庫の容量は31Lながら敷居を取り外せるので用途にあわせて使いやすい。うちのオフィス向けには十分に大きい。1人でしか使わないならもう1まわり小さいサイズでもよかったかもしれない。</p><ul><li>2lペットボトル: 5本</li><li>500mlペットボトル: 14本</li><li>350ml缶: 25本</li></ul><p>冷凍もできるスペックなので冷蔵で使うなら十分過ぎる性能。直冷式なのでコンプレッサーの動作音がある。それでも静音 28db なのでうるさくはない。寝室に置くなら音は気になると思われるが、オフィスならパソコンやサーキュレーターの動作音、周りの雑音などもあるからほとんど気にならない程度だと思う。うちのオフィス向けには許容できる動作音だった。あとは冷却中に側面の放熱板はわりと熱くなる。これによって部屋温度が上がってしまう。もともと32℃あるのでちょっとぐらい暑くなっても焼け石に水といった感覚。</p><p>2lのお茶を冷蔵庫に保管しておいて、いつでも冷たいお茶が飲めるというのは想像以上に快適さをもたらしてくれた。これまでその時々においてコンビニに買い出しへ行ったり、ぬるくなったコーヒーやお茶を普通に飲んでいた。</p><h2 id=ビッグモーターの記者会見>ビッグモーターの記者会見</h2><p>以前からストレッチのトレーナーさんにすごいことになっていますよとニュースを聞いていたけど、全然知らなくてよく分かってなかった。ちょうど晩ご飯食べた後に社長の記者会見があるというのでみた。2時間あって長かったけど、なんだかんだで最後までみてしまった。せっかくなので所感を書いてみる。</p><p>社長は71歳ということでこの年代の人は、その会社の企業風土や文化を普通だと思っていて、大きな不正が起こってしまったことに昔からそうやってきたのにどうして？といった気持ちなのではないかと思う。メディアでは (おそらく忖度して) 「保険金の不正請求」という言葉になっているが、内容からは保険金詐欺に近く、金額も大きいことから刑事罰なら大きな量刑になるという意見もある。にも関わらず「どうしてこんな不正をしてしまったのか？」と他人事にように話してしまうところから本心を垣間みえた気がした。もちろん当人も責任は自分にあると何度も回答していて、それ自体を否定しているわけではない。昔からのやり方でやってきて大きな不正に発展してしまった経緯や背景を、本当の意味で理解できないのだろうと伺えた。「厳しいノルマを課しても不正をしていない社員もいる」とも答えていたが、いま話していることは「なぜ不正が起きてしまったか」なのでそういう自己弁護になってしまうところが本音だったのだろうと思えた。世界的にも長期間務めた偉大なリーダーが懸念を抱く行動を取っているが、時代が変わったときに年寄りがトップにいるべきではないのだと言うのも感じた。</p><p>その後、youtube で2017年に退職した元幹部社員でこの事件についてコメントされていた動画もみた。その動画によると、社長の息子が副社長になって、実質的に経営の代替わりが始まったときに会社の制度やノルマなども大きく変化して、今日に至るような不正のきっかけになってしまったのではないか？と考察されていた。その真偽はわからないが、記者会見でも副社長はなぜ出席しないのか？といった質問も多く出ていた。社内で大きな影響力があったのは間違いないのだろう。その視点からは社長は息子の泥をかぶって非難を一斉に浴びて家族を守ったという見方もできた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0724/>マイルストーン終了直前の余裕</a></h1><div class=post-meta><time class=post-date>2023-07-24 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/project-management/>project management</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;</span><div class=post-content><p>0時に寝て3時に起きて5時に起きて7時に起きた。足のしびれは治ったみたい。</p><h2 id=マイルストーン終了直前の-issue-整理>マイルストーン終了直前の issue 整理</h2><p>明日の火曜日がマイルストーン終了日でインフラ系や外部ライブラリの重たい issue は一通り完了したのでプロダクトの方に注力できるようになった。自分の issue よりもメンバーの issue や次マイルストーンの issue の整理などを主にしていた。自分の issue をやるよりも、メンバーやチームのサポート系の方に注力しようと思ってプロジェクトマネジメント的なところの作業をしていた。自分が開発や調査をやり始めると、どうしても注意力や認知を issue の方に取られてしまって全体を眺めたり管理したりといった側面が疎かになる気がする。会議を減らして自分の時間を増やしても、メンバーの都合でサポートする機会をみていないといけないのでこのバランスを取るのはなかなか難しいなと思う。少し時間的な余裕をもった方がよいかなといったことも思わないでもない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0723/>オフィスは夜の方が涼しい</a></h1><div class=post-meta><time class=post-date>2023-07-23 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/scim/>scim</a>&nbsp;</span><div class=post-content><p>22時からオフィスで作業していたのもあり、そのまま夜通しで作業して、6時に帰ってきて寝て9時に起きた。こんなことやっているから体調が悪くなりそうな気がする。宅急便を受け取る必要があったので午前中はのんびりしてた。なぜか宅配ボックスは毎日埋まっていてまったく使えない状態になっている。今後はコンビニ受け取りかオフィスに送るようにしよう。</p><h2 id=ジモティー検索>ジモティー検索</h2><p>以前 <a href=/diary/posts/2023/0505/#ジモティーで椅子の受け取り>ジモティーで椅子を購入</a> してよかったので実家で使う家具でよさそうなもの、具体的にはダイニングテーブルを探している。</p><p>ジモティーとヤフオクの違いとして、ジモティーはオークションじゃないから持ち主が処分したい品物はゼロ円で譲りますと出品されていたりする。その代わり、送付はせず引き取りが必須となる。ダイニングテーブルのような大きいものだと粗大ゴミに出すにもお金がいるから持っていってくれるならそれでいいといった感覚だろうか。さらに地域に特化した引き取りを必須条件にするので誰もが応募できるわけでもない。常にみていなくてもタイミングがあえば格安で入手できる可能性がある。そこで社用車の荷室スペースのサイズを確認していた。後部座席を倒すことで荷室スペースを拡げられる。このサイズならたいていのダイニングテーブルは積載できそうに思える。</p><ul><li>長さ: 680-1,480mm</li><li>幅: 1,000mm</li><li>高さ: 850mm</li></ul><p>実家の離れオフィスのリモートワーク、さらには今後のコワーキングスペースとして使うときの家具をジモティーでのリサイクルも考慮しながら揃えていきたい。</p><h2 id=scim-向けの-urn-パーサーの拡張>scim 向けの urn パーサーの拡張</h2><p>先日 <a href=/diary/posts/2023/0706/#コードレビュー>チームのメンバーが実装した scim 連携のレビュー</a> をした。そのときに scim の urn のパース処理を自前で実装していた。それ自体は悪くないが、urn のような標準化されたものなら専用ライブラリを使った方がよいのではないか？と思って調べてみた。予想通り作っている人はいたものの、それほど煩雑なものでもないのでライブラリを使うほどでもないのかもしれない。</p><ul><li><a href=https://github.com/leodido/go-urn>github.com/leodido/go-urn</a></li></ul><p>例えば、次のような scim 向けの urn がある。</p><pre tabindex=0><code>urn:ietf:params:scim:schemas:core:2.0:User
</code></pre><p>go-urn は汎用の urn パーサーなので scim に特化した属性などをパースしてくれない。それについて issue で質問してみたら、scim 向けのサブパーサー作ったらいいんじゃない？というコメントが返ってきた。そこで <a href=https://datatracker.ietf.org/doc/html/rfc7643#section-10>rfc-7643</a> の urn の仕様を眺めながら試しに実装してみた。この機能がマージされてもこの用途のためだけに依存ライブラリを増やすかどうかはまだ懐疑的なところ。とはいえ、せっかく調査して実装したから誰かの役に立つかもしれないと思って pr を送った。</p><ul><li><a href=https://github.com/leodido/go-urn/pull/33>Add scim (rfc 7643) specific struct #33</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0722/>歩くと足がしびれるようになった</a></h1><div class=post-meta><time class=post-date>2023-07-22 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>1時半に寝て3時頃に起きて5時に起きた。だらだらしているうちに寝落ちして7時に起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週は月曜日を休んでしまった分、取り返そうと残りの平日をがんばって働いていたので座っている時間が長かった。だいたい毎日0時ぐらいまでオフィスで作業していたと思う。疲労の自覚症状はないものの、座っていた時間と身体の疲弊は比例するのでよからぬ予感がしていた。すると、ふくらはぎの張りがひどかった。とくに左のふくらはぎがパンパンでかなり苦しかった。あとおしりの後ろの筋肉などもいつもよりずっとよくなかった。下肢全体があまりよくなくて予想は的中した。あとオフィスが暑いから通常以上に体調に負荷をかけているのではないか？という懸念もある。今日の開脚幅は開始前154cmで、ストレッチ後157cmだった。調子の悪いときの数値という印象。</p><h2 id=lt-会>LT 会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/282356/>こんなことやってみましたLT会 (テーマフリー)</a> に参加した。オフライン・オンラインをあわせて10人ほど参加していた。5人発表して2時間ぐらいだったので LT と言いながら1人20-30分は話していた。</p><p>私は前に <a href=/diary/posts/2023/0616/#チーム勉強会>チーム勉強会で使ったスマートプラグと決済</a> の資料を再利用した。スマートプラグを tapo と amazon 社のものを間違えて持っていったのでデモできなかった。LT だから資料をかいつまんで話すのでもよいかなとは思っていたけど、ちゃんと準備せんとあかんかった。</p><p>おもしろかった発表に FileMaker を使ったモデラーズフリーというアプリケーションがある。作者はアニメをみながらガンプラを作るそうで、アニメみながらガンプラの製作過程を記録するためのツールだという。ガンプラ作るときに netflix や abema を即再生できますよと喧伝していたが、その時点で一般人は？？？がつくようなツールなのかなw</p><div class=video-container><iframe src=https://www.youtube.com/embed/TYoERvgSKVc allowfullscreen title=モデラーズフリー紹介></iframe></div><p>apple の子会社の claris 社が販売している <a href=https://www.claris.com/filemaker/>FileMaker</a> というパッケージがある。もともと <a href=https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%BC%E3%83%89%E5%9E%8B%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9>カード型データベース</a> というものだったが、いろいろあって、いまはローコードの開発プラットフォームになっているらしい。イメージとしては ms 社の visual basic と access が悪魔合体したようなツール。中小企業の業務システムなら大半のものを作れるらしい。ビジュアルプログラミングな仕組みも提供していて、その制御文は日本語で記述できて、海外のツールなのになんで日本語でプログラミングできるのだろう？と思ったら、そのインターフェイスは i18n 対応していて、フランス語でもロシア語でも変換できるという。プログラミング言語の予約語を i18n 対応しているのだと推測する。無駄にすごいなと感心した。プログラミングできない人が簡単にそれっぽいアプリケーションを作るための仕組みなのでプログラマーが使うツールではないが、40年近い歴史があるので独自のガラパゴス的な進化を遂げていて <a href=https://en.wikipedia.org/wiki/Feature_creep>Feature creep</a> を飛び越えてヤマタノオロチのようなプロダクトにみえた。</p><h2 id=足のしびれ>足のしびれ</h2><p>LT 会に出た後、なんかしんどかった。また歩いていて足がしびれることに気付く。体調悪そうと帰って18時頃から寝ていた。横になったり自転車に乗っているときはなんともない。軽くググってみると、歩いていて足がしびれるのは糖尿病、動脈硬化、その他の病気、熱中症の初期症状と様々な原因が考えられるらしい。どれもありそうな気がする。1週間ぐらい様子をみてみようと思う。22時頃に起きて、それからまたオフィスに戻って作業していた。足がしびれているのだから寝とけよっと思うところだが、やることもいっぱいあるので元気になったら動く。夜の方がオフィスが涼しいこともわかったのでその方が効率がよい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0721/>なにもしないうちに一週間が過ぎた</a></h1><div class=post-meta><time class=post-date>2023-07-21 (Fri.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/network/>network</a>&nbsp;</span><div class=post-content><p>2時に寝て何度か起きて6時に起きた。今週はゼロ時前後までオフィスで作業していることが多かったのであまり寝ていないが、月曜日にお休みをとった効果は抜群でほとんど疲労感はない。たまに休むことも大事なのかもしれない。</p><h2 id=温湿度計>温湿度計</h2><p>先日 <a href=/diary/posts/2023/0716/>暑さ対策委員会</a> を立ち上げて、まずは計測からだとエンペックスの温湿度計を購入したものが今日届いたので計測してみた。</p><figure><img src=/diary/img/2023/0721_meter.jpg></figure><p>11時頃は32℃、12時を超えると30℃過ぎぐらいに落ち着いた。夜になると28℃ぐらいまで下がった。ちなみにエアコンの温度設定は23℃となっている。午前中が一番暑いことに気付く。その理由は日当たりのよい部屋なので午前中は陽が窓から差し込むために窓付近があたためられるのだと推測する。幸いなのは湿度が40-50%と低いためにサーキュレーターで風を浴びているとなんとか暑さをしのげるところ。これで湿度が高い日はもうバテてお仕事とかできるんやろか？という気もする。</p><p>フロアの窓より遠いもっとも内側の区画は26℃になっている。エアコン設定の基本が25℃なので妥当な数値だし、普通に涼しい。私が感覚的に暑い、暑いと言っていたのが、私の感覚の問題ではなく、運営会社にクレームしても理解を得られるのではないかと思う。また週末か来週あたりに電話して相談してみようと思う。もしかしたらなにかしら対策を検討していてくれているかもしれない。</p><h2 id=iijmio-ギガプランの変更>iijmio ギガプランの変更</h2><p><a href=/diary/posts/2023/0626/#実家の離れスペースで働いてみた>先月の実家リモートワーク</a> で普通にお仕事すると1GiB/日ぐらいは使うことに気付いた。2GiB プランだと全然足りないことに気付いたので 5GiB プランに変更した。これなら月に1週間ほど帰ってもお仕事できそう。</p><ul><li><a href=https://www.iijmio.jp/gigaplan/>データeSIM ギガプラン</a><ul><li>2ギガ 440円</li><li>5ギガ 660円</li></ul></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0720/>最後は人のチカラがモノを言う</a></h1><div class=post-meta><time class=post-date>2023-07-20 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/operation/>operation</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>2時半に寝て寝たのかどうかよく分からないながら5時頃に寝落ちして7時半に起きた。</p><h2 id=差分比較のための機能>差分比較のための機能</h2><p>id 連携で運用のための非機能要件の1つとして更新された内容を確認できるようにしたい。非機能要件だから私が作るかと思ってあたためておいた issue に着手した。wikipedia によると差分という言葉には次の2つの用語があるのをみつけた。</p><ul><li><a href=https://en.wikipedia.org/wiki/Delta_update>Delta update</a></li><li><a href=https://en.wikipedia.org/wiki/Data_differencing>Data differencing</a></li></ul><p>数学やコンピューターの用語的には delta (ギリシャ語で変化を表す) という言葉を使う。os のパッケージングシステムで一部のパッケージをアップデートするようなことをデルタアップデートと呼ぶ。一方でコンピューターサイエンスにおいて2つのデータセット間の差分については diff という用語を使う。データの差分においては diff でよいのではないかと思う。そういった用語の定義から始めた。mongodb のコレクションのデータ定義をしたり、結合テストを書いて動かしてみたり、インフラのレイヤーから開発に着手した。</p><h2 id=上司道-企業家として生き様と人として求められること>上司道 企業家として生き様と、人として求められること</h2><p><a href="https://www.facebook.com/events/1287346985493718?ref=newsfeed">第92回上司道 企業家として生き様と、人として求められること</a> に参加した。なんとなくタイトルに惹かれた。<a href=/diary/posts/2023/0228/#上司道-野村監督から学ぶリーダーの器のつくり方>上司道</a> に参加するのは3回目。</p><p>講師の牛島さんは昨日が誕生日だったらしく90歳だという。90歳になって zoom でオンライン勉強会の講師を務めるというのを、私はまったく想像できないけど、コンサルタントの第一線で活躍されてきた方の貫禄があった。もともとどういう主旨の勉強会だったのかよく分かっていないけれど、内容はビジネスの自己啓発セミナーに近いものになった。牛島さんが90年も生きてきて大事だと思える内容には普遍性や汎用性があるのだと思う。いくつか共感できる考え方もあった。</p><ul><li>これからは頭の良い人 (IQ が高い) よりも心が豊かな人 (EQ が高い) の方が大事で組織に貢献する</li><li>一番大切なのは幸せであること</li><li>楽しく生きる (働く)</li></ul><p>過去に働いた会社でも頭がよくて何でもよく理解しているのにプロジェクトにあまり貢献しない人がいることに気付いた。さぼっているわけでもない。その違いを「心が豊かな人 (EQ が高い) 人」という言葉でいくつか説明できるのではないかと思えた。新規プロジェクトのような、常に変化して、正解もわからないまま進める業務において、論理や頭のよさだけでうまくいくことはなくなってきつつあるのではないか。なんのためにそのプロジェクトをやるのか、自分はなぜここで働いているのか、といった問いに答えをもっている人は普通の社員とは行動が異なる。自身の価値観や展望と比較して、現状の課題や改善に気付くのでプロジェクトを前向きに進めていける。頭のよい人は「あれが問題」「これが問題」と問題を指摘してエスカレーションするだけで自らが課題をどう解決するかの答えをもっていない。そんなことを考えながらこの話しを聞いていた。</p><p>次の2つは最近の私の人生観や働き方と重なるところがある。私はもう無理してがんばったりしないし、自分が嫌なお仕事も一切しないように決めている。一般的にいう「働きたくない」という生き方を目指している。もちろん実際には働いているわけだけど、それはなるべく働く時間を、遊んでいる時間に置き換えられないかと模索している。その過程で辛いことやしんどいことも避けようと考えている。</p><p>なぜそれができるかというのも、20代30代と約20年働いてきて自身の価値観を育ててきたからだと捉えている。私はなにが楽しくて、なにが辛くて、なにをやりたくないか。これは人それぞれに違う。私には私にしかない価値観をもっている。それがわかってきたから、いま自分の会社を経営していて、毎日がとても楽しいし、自分の価値観にあわないことはすべて断るという判断基準も明確になっている。そんな勝手気ままでやっていけるの？という懸念を抱く人も多いと思う。ダメかもしれない。仮にやっていけなかったとしても、いまの自分は幸せで楽しいのだからそれでいいんじゃないかと思う。無理をしていまがしんどくても将来がよくなる保証なんてどこにもない。</p><p>牛島さんはマザーテレサとインドで実際に会って10日間ほど一緒に過ごしてその体験がその後の人生を大きく変えたように話されていた。マザーテレサに「社員を大事にしていますか？」と聞かれたときに「しています。」と答え、その後に「社員全員の名前を覚えていますか？」と聞かれたという。当時の牛島さんの会社の社員は300人以上いて全員は覚えていなかった。それで「愛情の反対は無関心なのですよ。」とマザーテレサに指摘されて大きな衝撃を受けたという。その後、帰国してから300人以上の社員全員の名前を覚え、日々の業務で社員の行動などに気を配ってすべての社員に声をかけたりするようになったという。このエピソードもなかなか私には効く話しで、私は他人にかなりのレベルで関心がない。もし自分の会社で社員を雇うことになったら待遇がどうとか以前に、その人そのものに関心をもつという姿勢を覚えておこうと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0719/>go-ldap の syncrepl 対応</a></h1><div class=post-meta><time class=post-date>2023-07-19 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/ldap/>ldap</a>&nbsp;
#<a href=/diary/tags/network/>network</a>&nbsp;</span><div class=post-content><p>2時に寝て2回ぐらい起きて6時半に起きた。お休みとったからいろいろ余裕がないけれど、体力だけはある。</p><h2 id=syncrepl-機能の実装>syncrepl 機能の実装</h2><p><a href=/diary/posts/2023/0703/#非同期の-ldap-検索の-api>go-ldap の非同期検索</a> の続き。<a href=/diary/posts/2023/0704/>persistent search という用語</a> も理解して、満を持して openldap の <a href=https://www.openldap.org/doc/admin25/replication.html>syncrepl</a> 対応に臨んでいた。syncrepl を用いた persistent search というのは、簡単に言えばメッセージキューで言うところの pubsub のコンシューマーに相当する。その通信のテストやデバッグをしているときに非同期検索のバグもみつけた。余計なことをして返って複雑なバグを混入したなと反省しながら修正の pr を送った。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/446>Fix a deadlock issue using search asynchronously #446</a></li></ul><p>go-ldap の ldap 通信の処理や設計を理解するのに2日、<a href=https://datatracker.ietf.org/doc/html/rfc4533>rfc-4533</a> を読みながら Control に関するプロトコル実装に1日、テストやデバッグ、その他の調査や設計に2日ぐらい、次の pr を作るのに1週間 (平日5日) ほどは工数を割いた。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/447>Add syncrepl (rfc-4533) consumer (persistent search) #447</a></li></ul><p>ローカル環境で単体レベルの動作は問題ないと思う。あとは私が知らない ldap プロトコルの振る舞いや単体レベルで検証できていない通信、実際の運用レベルの syncrepl の状態やエラーなどに耐えられるかどうかといったところだと思う。おそらく rfc を読みながらプロトコルの一部を私が実装したのは初めてかもしれない。もうサーバーサイドやバックエンドの領域で (スキルの多寡はあれども) 私が作れないものはそうないだろうという自信をもっている。実際に rfc で提案されたプロトコルを実装して、テストして、ちゃんと動いて、そういう日々がすごく楽しくて嬉しかった。根拠のなかった自信を確認できた。またレビューに時間かかるかな？マージのためのやり取りや修正に2週間から1ヶ月ぐらいを見込む。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0718/>1行のミスによる1行の修正</a></h1><div class=post-meta><time class=post-date>2023-07-18 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/operation/>operation</a>&nbsp;
#<a href=/diary/tags/debug/>debug</a>&nbsp;</span><div class=post-content><p>0時に寝て何度か起きて6時半に起きた。朝から外はめっちゃ暑い。冷房をつけっぱなしのオフィスも朝からやっぱり暑い。根本的な空調の問題。</p><h2 id=agent-アプリケーションのメモリリーク正体>agent アプリケーションのメモリリーク正体</h2><p><a href=/diary/posts/2023/0714/#agent-アプリケーションのメモリリーク調査>先週のメモリリーク調査</a> の続き。本当は週末にやればよかったんだけど、遊んでたりさぼってたりして放置してた。先週時点でリークしているのは <a href=https://github.com/go-zeromq/zmq4>go-zeromq/zmq4</a> 側だというのはわかっていたが、何が原因でリークしているのかは分からなかった。一通りソースも読んでみたけど、いまひとつよく分からない。仕方ないから動的デバッグでソースコードに手を入れながら調査していて、すぐにみつけた。socket 構造体が保持しているコネクションの map がどんどん肥大化していく。なにも使っていない map にコネクションの値を保持して解放する処理がないことに気付いた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sck</span>.<span style=color:#a6e22e>ids</span>[<span style=color:#a6e22e>uuid</span>] = <span style=color:#a6e22e>c</span>
</span></span></code></pre></div><p>修正するかと思ってリポジトリの最新ブランチをみてもそのコードが見当たらない。すると次の pr で4月に修正されていた。まだリリースされていないからうちらのアプリケーションで使っているリビジョンにはその修正が含まれていなかった。</p><ul><li><a href=https://github.com/go-zeromq/zmq4/pull/140>Deal with empty Identity for ROUTER socket #140</a></li></ul><blockquote><p>Additionally, remove sck.ids, which is unused and leaks *Conn.</p></blockquote><p>メモリリークの調査を始めたときに github issues/pr を leak で検索して一通りチェックしているので、先週もこの pr をみかけているはずだが見逃してしまった。タイトルが全然違うし、ほんの1行の typo に近いミスなので修正内容をみて気付かなかったのだと思う。自分の観察力の無さに気付いた。leak で検索ヒットしているのだから、それが自分たちのアプリケーションで使っているコードに入っているのかどうか、その内容をもっと注意して調べるべきだった。そうすればこの調査時間を数時間は短縮できた。これは私のミスだと認めて <code>Postmortem</code> のラベルを付けた。次回の定例会議でふりかえりに使う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0717/>夏休み</a></h1><div class=post-meta><time class=post-date>2023-07-17 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=post-content><p>23時に寝て8時に起きた。オフィス行こうか迷ったけど、たまには休むかと思ってドラクエタクトしながら1日ゆっくり過ごしていた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0716/>暑さ対策委員会の issue をあげる</a></h1><div class=post-meta><time class=post-date>2023-07-16 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/noh/>noh</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>23時に寝て何度か起きて7時に起きてから11時ぐらいまでだらだらしてた。近所の靴屋さんに紐なしスニーカーを探しに行ったが適当なものがみつからなくて結局オンラインで検索して購入した。</p><h2 id=オフィスの部屋が暑い>オフィスの部屋が暑い</h2><p>普通に作業ができないぐらいには暑くてしんどい。明らかにビルの内側と窓側で温度差がある気がする。サーキュレーターは昔から使っているものの、扇風機は汗を蒸発させて気化熱で涼しいという仕組み上、暖かい空気を冷やせないので温度が高いと効果が半減する。他に冷房機器を増設できないかを調べてみた。エアコン以外で増設する方法が次の2種類がある。</p><ul><li>スポットクーラー</li><li>冷風扇</li></ul><p>しかし、どちらも私の要件や状況を改善するものにはならない気がする。</p><p>スポットクーラーはエアコンと同じ仕組みのミニエアコンのようなもの。エアコンの室内機と室外機が1つになったものと言える。これは冷風を送れるが、冷却した熱を外に排出しないといけないため、排気ダクトから外へ暖かい空気を排出できないと意味をなさない。うちのオフィスは窓を開けられない仕様なので排気ができない。ちなみにスポットクーラーを密室で使うと、冷却する機器の放熱と排気の暖かい空気の分だけ温度が上がってしまうらしい。あとエアコンの室外機とは異なり、熱をもつ機器が一体化している分だけ冷やす効率も悪化する。名前の通り、冷風を送るところだけ涼しければいいといった用途に使うものらしい。</p><p>冷風扇は水の気化熱を利用して冷やすという仕組みで排気を必要としない。原理的には打ち水したところに風を送ればちょっと涼しいといったもの。タンクに水と氷を入れたり、保冷剤を入れたりすることで涼しい効果を強化できるものの、最大のデメリットは水を蒸発させて涼しくするため、湿度をあげてしまうことになるらしい。湿度が高くなって不快指数があがれば元の木阿弥になってしまう。またフィルターで水を蒸発させる仕組み上、水を扱うところはカビや菌が繁殖しやすく、さらにそれを扇風機でばら撒いてしまうのでちゃんと掃除しないと衛生面でもよくないらしい。氷や保冷剤を準備するところまでは我慢できるが、掃除は面倒だなと思えて導入を諦めた。</p><p>エアコンってよく出来た仕組みなんだということが理解できた。レンタルオフィスのサポートに問い合わせたら夏場はエアコンを切らなくてよいのでつけっ放しにしておくと少し改善するのではないかというので今日から試してみることにした。これまで毎日朝エアコンを ON にして夜帰るときに OFF にしていた。基本的に私が一番早くオフィスに来て一番遅くに帰る。</p><p>対策はまだわからないけれど、この不快さを計測しておいて改善のための施策に役立てるために温度計と湿度計がセットになった計測器を購入した。<a href=https://empex.co.jp/>エンペックス気象計</a> という会社の製品がよいとみかけたので次の2つを購入してみた。</p><ul><li><a href=https://www.amazon.co.jp/-/en/EX-2841-Thermometer-Hygrometer-Precision-Universal/dp/B0002OWY6W>EX-2841</a></li><li><a href=https://empex.co.jp/products/tm-2464/index.html>TM-2464</a></li></ul><p>近所のダイソーで同じような目安品というのも購入してみた。100円だと誤差があるそうでこれを厳密な値として信用するなと書いてある。パッケージに入ったものをいくつか比べても針の指す値にはブレがあるようにみえた。エンペックスの計測器が届いたらそれも比較してみようと思う。</p><h2 id=能楽の勉強>能楽の勉強</h2><p><a href=/diary/posts/2023/0702/>能: 敦盛</a> を観に行ったときに解説を朝原さんが行っていて、その内容がとてもよかったので朝原さん主催の読書会 (？) のようなイベントに参加してきた。</p><ul><li><a href=https://nohgaku-kyodo.com/repertoire/yondemiru-hanjo20230716>一途な恋心を、扇にからめて描き出す《班女》 第35回能のことばを読んでみる会</a></li></ul><p><a href=http://www.ashiya-nohbutai.com/>芦屋能舞台</a> という、外からみたら普通の家のようにみえて入ったら能舞台が現れるといった構造になっていた。能舞台って家の中にあるからびっくりする。初めて行ったからピンポンするのに躊躇する感じ。地図をみたらこの家になっているけど、本当にここなの？って感じで、他の参加者も集まってきて、そのうち常連さんがやってきてここであっていますよと案内してくれて中に入れた。中に入ったら立派な舞台があった。</p><figure><img src=/diary/img/2023/0716_noh-butai.jpg></figure><p>結論から行ってこの読書会はめちゃくちゃよかった。覚えていることをずらっと書き出してみる。</p><ul><li>班女は世阿弥作の能とみなされている</li><li>世阿弥が謡を書いたものに「五音」がある<ul><li><blockquote><p>班女、ゲニヤ祈リツ、</p></blockquote></li><li>そこにはこれだけしか記述されていない (失われてしまった？)</li><li>世阿弥の息子が世阿弥の芸談をまとめた「申楽談儀」に班女の謡い方についての記述があることからも世阿弥作だと考えてよいらしい</li></ul></li><li>謡は <a href=https://www.the-noh.com/jp/sekai/shite.html>シテ方五流</a> によっても異同がある<ul><li>観世流 (かんぜりゅう)</li><li>宝生流 (ほうしょうりゅう)</li><li>今春流 (こんぱるりゅう)</li><li>金剛流 (こんごうりゅう)</li><li>喜多流 (きたりゅう)</li></ul></li><li>能を完璧に理解しようとするのはすごく大変<ul><li>演劇を完全に理解しようといった見方はしないように、能も演劇の一種とみてそのぐらいの感覚の方が楽しめる</li><li>シテ方各流の謡本の異同を比べたり、併合したりしながらより正しい解釈に努める</li><li>大昔の能の謡の意味に正解などない、シテ方各流のそれぞれの解釈はある</li></ul></li><li>シテやワキの台詞や謡には歴史、和歌、漢詩、韻を踏むといった、さまざまな意図が含められている<ul><li>教養がないとその意図に気付くことができない</li><li>漢詩は <a href=https://ja.wikipedia.org/wiki/%E5%92%8C%E6%BC%A2%E6%9C%97%E8%A9%A0%E9%9B%86>和漢朗詠集</a> から引用されている</li></ul></li></ul><p>20人ぐらい参加していた。朝原さんによると、いつもは10人に満たないと話されていた。私のように敦盛の解説を聞いて行ってみようと思った参加者がたくさんいたのかもしれない。</p><p>読む会のやり方はいたってシンプルで、詞章のプリントが配られててそれを参加者が数行ずつ順番に音読していく。歴史的仮名遣いだから音読するのもちょっと難しいんやけど。参加者の音読を聞いていると、慣れた人から素人までいるようなので拙くてもそれほど迷惑をかけている感じはしないのでまぁいいんじゃないかと思う。音読した後に朝原さんがその数行の意味や背景や歴史やなんやらかんやらをわーっと解説する。その解説の精度がすごい。</p><p>例えば、次のような一節がある。</p><blockquote><p>花巾上 (はなきんしょう) に散りぬれば、</p></blockquote><p>昔の謡の本はカナで書かれていて「ハナキンショウ二 &mldr;」と書いてあった。それを豊臣秀次も能が好きで謡抄に書き換えるときに漢字を当てようとしたが、キンという漢字が分からなかったか、なんらかの要因で一時的に「巾」という文字を割り当てた。豊臣秀次はいろいろあって切腹してしまうわけだけど、謡抄の編纂はその後も続いていてそのまま「巾」という文字で残ってしまった。他のシテ方の謡では「花琴上」とあり、意味的にも「琴」で正しいと思われる。音は「キン」で同じなので謡う上では何も違いはない。</p><blockquote><p>秀吉をまねて秀次も能楽を自ら演じるようになったが、彼は公家・禅僧らに命じて最初の謡曲の注釈書である『謡抄』を編纂させ、後世の文芸に大きな影響を与えた。<br><a href=https://ja.wikipedia.org/wiki/%E8%B1%8A%E8%87%A3%E7%A7%80%E6%AC%A1>豊臣秀次</a></p></blockquote><p>ここには私は覚えていることをざっくり書いているが、もう少し詳細に説明されていた。謡の上でなんら重要でもないこんな歴史の話しを知っている人いるの？と思ってしまった。すごい。</p><p>もう1つ紹介すると、地謡の歌に次のような節が出てくる。</p><blockquote><p>夏はつる。扇と秋の白露と。いずれか 先に 起臥 (おきふし) の床 (とこ) 。</p></blockquote><p>この一節は新古今集和歌集の次の和歌を引用している。</p><blockquote><p>夏はつる 扇と秋の白露と いづれかまづは 置かむとすらん 壬生忠岑</p></blockquote><ul><li><a href=http://jiuxia.web.fc2.com/Nohpage/NohWakan/Wakan03.html#P169>http://jiuxia.web.fc2.com/Nohpage/NohWakan/Wakan03.html#P169</a></li></ul><p>前に敦盛の詞章と一緒に観ていてなぜ単語の区切りがこのような感じになっているのか、まったく理解できなかった。それは私が和歌をまったく知らなかったからだと言える。謡や台詞の冒頭の一節は和歌を引用していることも多い。そのために和歌を知っていると謡をすんなりと聞き分けられるのだと思う。</p><p>このようにほんの数行の詞章にもたくさんの意図や背景があることを知った。朝原さんは能楽の研究者なので、詞章を読みながらそれぞれの文節の背景や意図を調べていることが伺えた。プロってこのぐらいやらないといけないなと。私は課題管理の文脈なら何気ないワークフローや作業にいろんな意図や背景を見出だせないといけないという気付きや示唆を受けた。</p><p>3ヶ月に1回のペースで開催している。次回は蝉丸という能を取り上げる。</p><ul><li><a href=https://nohgaku-kyodo.com/repertoire/yondemiru-semimaru20231021>『百人一首』で知られる蝉丸と、その姉・逆髪が出会い、別れる能《蝉丸》 第36回能のことばを読んでみる会</a></li></ul><p>その後に蝉丸の能を演じるイベントも開催されるらしい。次回は読む会で詞章を予習した上で能をみるようにしてみる。するとまた違った趣になるのではないかと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0715/>雑談について雑談した</a></h1><div class=post-meta><time class=post-date>2023-07-15 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/knowledge-management/>knowledge management</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;</span><div class=post-content><p>1時に寝て何度か起きて7時に起きた。昨日は遅くまで調べものをしていたわりには達成感がなくていまいちな金曜日になった。</p><h2 id=ストレッチ>ストレッチ</h2><p>東京出張から戻ってきたときはあまり体調がよくないことが多い。今日は右足全般の張りが強かった。すねの外側、太ももの後ろ、股関節の関節部位、あちこち硬いなと思えた。今日の開脚幅は開始前154cmで、ストレッチ後158cmだった。数値もよくはなかった。なんとなくだけど、あと何年かしたら右足が動かなくなるんじゃないかとすら思えるようになってきた。いまストレッチしているのはその寿命を伸ばす行為だと考えている。なにもしていないのに体調が悪くなるというのがこれからどんどん増えてくるのだと推測する。悪いことばかりでもなく、先週まで辛かった首の痛みは気付いたら治っていた。</p><h2 id=日本ナレッジマネジメント学会に加入申請を出した>日本ナレッジ・マネジメント学会に加入申請を出した</h2><p><a href=/diary/posts/2023/0711/#コパイロツトさんと雑談>先日の課題管理の雑談</a> のときに <a href=https://kmsj.org/>日本ナレッジ・マネジメント学会</a> という学会があることを教えていただいた。学術的なところでナレッジマネジメント (知識経営) についてどのようなことが研究されていて (あるいはされていなくて)、どういう知見が溜まっているのかを知りたかったのでちょうどうちの会社にとってよい機会だと思える。</p><p>さっそく web のフォームから加入申請を送って、法人会員になるのは申請書を郵送する必要があるとのことでその事務手続きも終えた。法人会員は10万円/年の費用がかかる。学会などの年会費は「諸会費」という勘定科目使い、不課税となる。まぁこのぐらいの金額ならよいだろうと即断即決で決めた。</p><h2 id=雑談の雑談>雑談の雑談</h2><p>毎月お手伝い先の会社に出張して経営陣とサポート部門トップを含めたトップ3に <a href=/diary/posts/2023/0712/>プロジェクトの進捗報告</a> をしている。</p><p>プロジェクトの初期の頃は情報共有を密にしたり親睦を深める意図から (言うても月1回だけれども) 毎月行くことには意味はあった。しかし、うちのチームはフルリモートで開発が進む体制になっており、私が物理的にオフィスに出向かなくてもプロジェクトの開発にはほとんど影響を与えない。ではなぜ出張しているのかの意義はプロジェクトの進捗報告をオフライン会議でやっていることの方が大きいのではないかと思うようになってきた。早いときは20分ほどで報告は終わるし、普通にやっても30分もあったら報告内容は終わる。そこから参加者でその時々の雑談が始まる。会議のうち報告と雑談の時間が半々ぐらいといったときもある。</p><p>この雑談の機会を作る大義名分として、私が出張して進捗報告の会議があるから「出しになっている」のではないか？という仮説を思いついた。その場では「プロジェクトには直接関係ないのだけど、、、」という話題もちょくちょく出る。会社の業務には誰の責任でも担当でもない宙ぶらりんになる業務も発生する。チームならそれはマネージャーがすべて巻き取るわけだが、部署単位になると浮いたままになることもある。そういう話題がこの会議の中ではちょくちょくあがってくる。</p><p>建前上の会議を「出しにして」話す機会のない人たちが雑談するという、別の価値を提供している会議もあるんじゃないかと、顧問のはらさんと雑談していたところ、次の記事を紹介された。</p><ul><li><a href=https://tech.stmn.co.jp/entry/2023/07/14/115639>なぜ雑談が重要か</a></li></ul><p>私も前日にざっと読んでこれはひどい記事だなと思ってスルーしていた。意外とこの記事の是非について盛り上がった。私がこの記事をひどいと思うのは次の点になる。</p><ul><li>目的と手段をベン図 (集合を扱う表現) で表すという奇妙さ</li><li>会議では重要な情報を得られず雑談でこそ得られるという極端な物言い<ul><li>そういうケースがあることは同意するが、大半は会議で重要な情報を得られているはずだ</li></ul></li><li>会議と雑談を別の空間や時間で行う対立軸のように書いているところ<ul><li>会議の中で雑談して、会議内の雑談で発見があったのならそれは会議で得られたのと同じこと (上述した事例が正にそう)</li><li>雑談は会議を補うものであって会議を置き換えるものではない<ul><li>会議で重要な情報を得られないなんてことは一般の業務においてあり得ない</li></ul></li></ul></li></ul><p>試しにこの記事の著者が書いた本のファンである友だちにも意見を聞いてみたところ、次のようなコメントが返ってきた。</p><blockquote><ul><li>目的と手段を同じ座標の集合にするのは無理がある</li><li>手段を「目的の役に立つもの」と独自定義を置き換えることへの懸念と分かりにくさ</li><li>本とブログとのギャップに驚いている。どちらかが本人でどちらかがゴーストライターなのか、とさえ思ってしまう</li></ul></blockquote><p>前半の大事な前提が受け入れられないからその続きの内容も入ってこないといったコメントをその友だちからもらった。そんな話しをしていると、はらさんが javascript と java を混同して話す人はなにを話しても聞く気にならないと解釈すれば理解できると共感していた。それぐらい冒頭の目的と手段について書かれた内容はわかりにくいと言える。</p><p>著者が言いたいことは、本質的な課題は最初からわかりにくいもので顧客自身も気付いていないことが多い。いくつか調査したりヒアリングしたり、その結果を分析したりしながら徐々にわかってきたりすることがある。<a href="http://www.eijipress.co.jp/book/book.php?epcode=2085">イシューからはじめよ</a> ではそのことを「解くべき問題 = 課題を見極める」と表現している。私はそれを課題管理で解決しようとしているが、著者は雑談で解決しようというアプローチの違いについて書いてあるものだと意図は理解できる。しかし、記事の内容は分かりにくいので支持しないというのが私の立場である。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/posts/page/22/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/posts/page/24/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>