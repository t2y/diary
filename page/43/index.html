<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.109.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0720/>ノードグループと nodeSelector</a></h1><div class=post-meta><span class=post-date>2022-07-20 (Wed.)</span></div><span class=post-tags>#<a href=/diary/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#eks-クラスターのノードグループと-k8s-の-nodeselector>EKS クラスターのノードグループと k8s の nodeSelector</a></li></ul></nav></div><div class=post-content><p>1時に寝て6時に起きた。</p><h2 id=eks-クラスターのノードグループと-k8s-の-nodeselector>EKS クラスターのノードグループと k8s の nodeSelector</h2><p>先日 <a href=/diary/posts/2022/0711/>k8s の nodeSelector</a> の調査について書いた。いまテスト環境でその調査結果の運用検証中。当初は k8s の機能だけを使いたいと考えていたが、いま eksctl コマンドで EKS クラスターを管理していて、k8s ノードの実体である ec2 のプロビジョニングはノードグループがもつ起動テンプレートとオートスケールポリシーにより制御される。そのため、ノードグループを分割してそれぞれにノードラベルが必ず付与されるように管理する方が簡単だとわかってきた。要はアプリケーションサーバー向けのノードグループとバッチ処理向けのノードグループの2つを作った。あと覚えておくとよいのが、<a href=https://eksctl.io/usage/iam-policies/#adding-a-custom-instance-role>Adding a custom instance role</a> で任意のポリシーもノードグループの iam ロールに追加できる。設定例としてはこんな感じ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>  <span style=color:#f92672>iam</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>attachPolicyARNs</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>arn:aws:iam::${accountId}:policy/my-custom-policy</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore</span>
</span></span></code></pre></div><p>ノードグループの準備が整ったら nodeSelector を指定した pod をデプロイするだけ。k8s ノードがどんなノードラベルをもっているかは次のようにして確認できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl get node --show-labels
</span></span></code></pre></div><p>意図したノードラベルが付与された k8s ノードに pod がデプロイされたかどうかは次のようにして確認できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl get pod --output wide --field-selector spec.nodeName<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>ノードラベルをもつノード名<span style=color:#e6db74>}</span>
</span></span></code></pre></div><p>これらの環境構築、検証、wiki にドキュメントを書いて本番作業手順もまとめた。一通りきれいにまとまったインフラ作業を完遂できて気分がよい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0719/>サービスインとスプリント</a></h1><div class=post-meta><span class=post-date>2022-07-19 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/marketing/>marketing</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#2つ目のサービスイン>2つ目のサービスイン</a></li><li><a href=#もてなしだけではもう食えない>もてなしだけではもう食えない</a><ul><li></li></ul></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。</p><h2 id=2つ目のサービスイン>2つ目のサービスイン</h2><p>スプリントの最終日が今日になる。しかし、今日はサービスインの作業でバタバタしているので主要な開発者は運用サポートしたり、PO もシステムの切り替え対応で fix したタスクの検証ができないといった理由でこれ以上タスクを進捗できそうにないことを容易に想像できた。スプリントゴールに掲げたタスクのうち、9項目中2つしか完了してないという状況だった。ちょうど夕方にスクラムのふりかえりもあったので、今回のスプリントは一体何なの？みたいな懸念から始まって、やる必要があるのかないのか曖昧な優先度設定はよくないという意見が出ていた。サービスインする週にスプリントをやるのもおかしいというのは前回も私はコメントしていたんだけど、今回も全く同じことが話題に出ていて、過去の失敗から学ばないチームになってた。</p><p>個人的に、開発のマネジメントにおいて、できもしない (やる気もない) 納期を設定するのが嫌い。私が古い人間なのかもしれないけど、納期が設定されてそれが大事なんだと認識したらどんな手段を使っても納期に間に合わせようとする。例えば、泊まりがけで開発したり、深夜早朝・休日に開発したり、大事なんだったら間に合わせる。しかし、労力を払って間に合わせたものの、他のメンバーやタスクはそうじゃなかったりして、遅れても何も起きないとがんばってやった人がしんどかっただけで終わる。過去にそういう状況を何度も経験してきてやる気をなくすことが多かった。</p><h2 id=もてなしだけではもう食えない>もてなしだけではもう食えない</h2><h4 id=第6章-営業予算の使い方>第6章 営業予算の使い方</h4><p>米国帰りのマーケッターという新たな登場人物。学部から米国の大学に留学すると米国史を英語で学ぶのが大変みたいな余談が出てくる。日本史は2000年を長く薄く勉強するが、米国史は200年しかないから内容が濃いのと最近の話だから史料も多く細かい史実を学ぶ必要があるという。全然、本題じゃないけど、歴史好きの私としてはおやと思えて楽しめた。いくら敏腕なマーケッターでも業務知識がないと空回りしてしまう。マーケティングの精度をあげるために必要ならば、その教育コストもマーケティング予算から捻出すべきだといった話しも出てくる。普段、会計システムに勘定科目を調べながら経費を入力している私にとってはなるほどなぁと、またまた本題ではないところで感心してしまった。</p><p>統計学のp値が5%以下ということは95%の確率でそのデータ上の差が実際に起き得る確率を表す。統計学は大事だとか、エクセルを駆使してデータ処理しろとか、そういう話題も出てくる。あとは古典的なマーケティングの手法として AIDMA モデルが紹介されている。基本的な考え方として知っておいたら役に立つときもあるかもしれない。</p><ol><li>Attention (注目)</li><li>Interest (興味)</li><li>Desire (欲求)</li><li>Memory (記憶)</li><li>Action (行動)</li></ol><p>例えば、Attention は情報誌に広告を出してみてもらうようなフェーズを指す。みてもらったら Interest に移る。口コミの内容で興味をもってもらうとか。興味をもってもらったら Desire として実際のサービスを体験してもらったりしてより強い欲求をもってもらう。一般論として Desire から Action へは間があくこともある。記憶させておいてそれを呼び戻すためのフェーズが Memory になる。最後の Action で成約を得て収益になるといった一連の流れを指す。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0718/>業界研究を再開した</a></h1><div class=post-meta><span class=post-date>2022-07-18 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/accounting/>accounting</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#もてなしだけではもう食えない>もてなしだけではもう食えない</a><ul><li></li></ul></li></ul></nav></div><div class=post-content><p>23時に寝て9時に起きた。昨日の疲労でよく眠れなくてバテてた。午後から会社の雑務をしていた。</p><h2 id=もてなしだけではもう食えない>もてなしだけではもう食えない</h2><p><a href=/diary/posts/2022/0308/#もてなしだけではもう食えない>少しずつ読んでいく</a> と書いてから3ヶ月読んでなかった。ホテルに限らず、ビジネス一般論としても通じるところが多かったように思う。経営の一般論とでも言うべきか。</p><h4 id=第3章-お客さまは神様とは限らない>第3章 お客さまは神様とは限らない</h4><ul><li>ビジネスの世界は大学のケーススタディみたいに物事がきれいに整理されているわけじゃない</li><li>顧客満足度とは本来、企業収益と正の相関関係があるはず<ul><li>正の相関関係とはAが1増えたらBが1増える</li><li>相関係数は-1から1まで</li><li>1だと正の相関係数が最大で、0だと無関係、-1だとBが1減る</li></ul></li><li>顧客のロイヤリティとは、再訪するか、他者に推薦するか、商品やサービスに対する信頼や共感を指す<ul><li>ロイヤリティには2つの意味があって、これはマーケティングの分野で使われる意味</li></ul></li><li>従業員満足度の向上が対外サービスレベルを上げ、それが顧客満足度を上げ、結果としてオーナー満足度を上げる</li><li>放置できる不満は放置される、経営学的にみて正しい行い</li></ul><p>主人公は学生時代の成績が悪かったことから分からないと言えることが強みという説明文が出てきて、教授の説明が理解できないときにどんどん質問して丁寧に説明してもらうというやり取りになっている。この言葉を引き出すために主人公は仕事ができない人設定にしているのかとも考えられる。異世界モノにしてしまえば、こんな説明はいらないなとか読んでて思った。</p><h4 id=第4章-立ち入り禁止の向こう側>第4章 「立ち入り禁止」の向こう側</h4><p>会計は用途によって会計基準が異なる。</p><ul><li>財務会計: 損益計算書や賃借対照表といった財務諸表に集約される</li><li>管理会計: 経営者が経営状況を把握するための会計書類作成の基準となる<ul><li>部門別損益やセグメント別の分析などをする</li><li>会社ごとにばらばらでもよい</li><li>経営者が知りたい情報が指標になっていればよい</li></ul></li></ul><p>ユニフォームシステムという部門別損益を計算するホテル業界の標準的な会計基準について紹介されていた。米国発祥なので日本での普及率は低いらしい。この話題の中でマネージャーの業績考課やボーナス査定の話しが出てくる。そして、マネージャーのコントロール外の非配賦費用を部門別会計に含めないのはマネージャーの実績を測れないからだと説明されている。つまり、ユニフォームシステムという管理会計の仕組みと人事システムはセットでないと業績改善効果が薄いという話しにつながる。人事というのは本当に難しいことが伺える説明だと思えた。</p><p>管理会計によって部門別の損益の悪いところが明らかとなり、そこに対する改善案が進みそうなストーリー展開になってきた。小説風なのでストーリーが進むと、その先の展開も楽しみになってくる。</p><h4 id=第5章-数字を分解せよ>第5章 数字を分解せよ</h4><p>投資計画に対して懐疑的になる背景としてフィージビリティスタディの話題が出てくる。私は言葉を知らなかったので勉強になった。ここではセグメント別に分割して大雑把な小さい数字を推定していくことから始め、その数字の裏付けをより精度の高い手法で行うことで現実的な企画ができるみたいな組み立てになっていた。</p><ul><li>投資がどのぐらいの経済効果をもたらすのかを予測することをフィージビリティスタディ (feasibility study) と呼ぶ<ul><li>日本語では事業化可能性調査、または採算性調査と呼ばれたりもする</li><li>収益と投資額の2つの情報から利回りが何%かがわかる</li><li>できるだけ数字を分割して考えるのが基本<ul><li>フェルミ推定を使って大雑把な数字から算出するやり方もある</li></ul></li><li>投資によって「追加的な売上」ではなく「追加的な粗利益」を測るべき</li></ul></li><li>RFP (Request For Proposal): 提案提出依頼書を作る<ul><li>専門家へ依頼するときにコンセプトデザインを明確にする</li><li>コンセプトを専門家に正しく伝えないと適切な提案を受けられない</li></ul></li><li>自分の会社のリソースを確認し、その比較優位に従って企画を立てるのがマーケティングの王道の考え方</li></ul><p>主人公からなぜ横文字を多く使うのか？という質問に対して、コンサルタントの教授が答える。まだ定着していない概念を的確に表すには英語のまま使っておいた方がよいという説明が出てくる。私もこのことは全く同意で、もっと言うとカタカナにせずにアルファベットのまま英語で使うとよいと考えている。本題ではないけど、大型連休はプロジェクトの進捗に影響を及ぼすので考慮にしとけよというやり取りが急に出てきてリアリティがある。私がいま手伝っているプロジェクトは GW の休暇を考慮せずにロードマップを策定していて、私が2回ぐらい指摘してあるとき修正されたことがあった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0717/>1年ぶりの草刈り</a></h1><div class=post-meta><span class=post-date>2022-07-17 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/agriculture/>agriculture</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#草刈り>草刈り</a></li><li><a href=#ストレッチ>ストレッチ</a></li></ul></nav></div><div class=post-content><p>1時に寝て5時に半に起きた。朝から夕方まで田んぼの草刈りをしていた。</p><h2 id=草刈り>草刈り</h2><p>タイトルに1年と書いたけど、厳密には1年も経っていない。<a href=/diary/posts/2021/1004/>2021年10月以来の草刈り</a> になる。本当は小まめに田んぼの手入れをしていれば、草場になんかならない。</p><figure><img src=/diary/img/2022/0717_field1.jpg></figure><p>6時から草刈り機を使って草刈りを開始。もう1時間早く起きて5時から始めたらよかったと思った。夏は10時まわると暑さが厳しくなるので作業は10時までに終わらせるのがよさそう。今回は6時から11時前まで草刈りをやって6割程度を刈り込んだ。草刈り機は2サイクルエンジンなので混合ガソリンを燃料に使う。ちょうど燃料切れになったのと同じタイミングだったので午前中の作業を終えた。11時の時点での田んぼの状況。</p><figure><img src=/diary/img/2022/0717_field2.jpg></figure><p>昼間は暑いので長くお昼休憩をとって14時から再開。本当はもう少し遅くてもよいけど、私が神戸に戻らないといけないから少し早めに始めた。まだ7月だったせいか、14時でも想像よりは暑くなくそれでよかったとも言える。午後から母がパートから戻ってきたのもあり、交代して休みを取りながら草刈りをして16時にはほぼ完了できた。この後、少し残っているところを母にやってもらって私は17時の高速バスで神戸に戻ってきた。</p><figure><img src=/diary/img/2022/0717_field3.jpg></figure><p>この時期の草刈りは、草刈り機を使うことそのものの疲労に加えて暑さでバテる。2人いて交代で草刈りすると、休んでいる時間を有効活用できて効率がよいことに気付いた。草刈り機のエンジンの回転数も全開にするよりも、少し弱めた方が振動量が減って、腕の負担も燃料消費も少なくなってよいことに気付いた。いままで全開で刈った方が早く刈れるのではないかと考えていたが、それは誤りだった。疲労度を下げて草刈り機を扱った方が休まずに長時間作業できる分、全体として作業を速くできることに気付いた。</p><p>この後、草を干して乾燥したら焼いて、トラクターで田んぼを耕す。それは9月の連休にする予定。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前154cmで、ストレッチ後158cmだった。あちこち筋肉痛やら腰が痛いやらでストレッチできるような状態でもなかった。ストレッチへ行ったときは暑さにやられて頭痛がひどかったんだけど、ストレッチしているうちに徐々によくなってましになった。暑さで頭痛がするのは血行が悪くなるからだそうだけど、ストレッチして血行がよくなるんだと推測する。腰の張りがひどくてストレッチしてもらって少し楽になった。田んぼ仕事の後にストレッチを受けられるのは疲労回復のためによかったと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0716/>実家に帰る</a></h1><div class=post-meta><span class=post-date>2022-07-16 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#お見舞い>お見舞い</a></li><li><a href=#博士ちゃん>博士ちゃん</a></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。実家に帰ってお見舞い行ったり親戚訪問したりしてた。</p><h2 id=お見舞い>お見舞い</h2><p>午後から父のお見舞い。少し前まで直接面会できるようになっていた時期があったそうだけど、またコロナの感染状況が悪化したため、リモート面会に戻ったらしい。面会時間は20分。たまたま父はお風呂上がりの時間だったらしくてそれで疲れたのか、10分ほどしてそのまま眠ってしまった。もともと父は気管切開していて話せないので起きていても寝ていても面会でやることは変わらない。顔色がよいことは確認できたという感じ。</p><h2 id=博士ちゃん>博士ちゃん</h2><p>たまたま実家に帰っていたからテレビをみていたらおもしろかった。生物の標本や骨に関心のある小学6年生が、国立科学博物館の収蔵庫を見学するといった番組だった。著名な研究者の方々が案内しながら子どもに研究のおもしろさを知ってもらうような作りになっていたように思う。出演していた12歳の子どもが本当によく勉強していて詳しくて、この分野の研究が本当に好きなんだなという想いがみてとれてよかった。好きなことを突き詰めてやっているのをみると楽しくなる。</p><ul><li><a href=https://www.tv-asahi.co.jp/hakasechan/backnumber2/0037/>約480万点の資料が収められた 国立科学博物館の巨大収蔵庫潜入 完全版！</a></li></ul></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0715/>会社のテックブログは難しい</a></h1><div class=post-meta><span class=post-date>2022-07-15 (Fri.)</span></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/blog/>blog</a>&nbsp;
#<a href=/diary/tags/psychology/>psychology</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#煩雑な検証>煩雑な検証</a></li><li><a href=#会社のテックブログ談義>会社のテックブログ談義</a></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。</p><h2 id=煩雑な検証>煩雑な検証</h2><p>昨日の続き。午前中に pr を作成してレビューしてもらってマージしてデプロイして検証した。いくつか既存の設計には課題があると思いつつ、工数かけて直してくれという依頼は来ないのもわかっていて、煩雑なコードに煩雑な検証をやるだけにとどめた。テスト環境での検証自体は成功したので問題はなさそう。一部、本番環境でないと検証できないらしい。</p><h2 id=会社のテックブログ談義>会社のテックブログ談義</h2><p><a href=https://nulab.com/ja/blog/nulab/the-best-tech-blog-post/>最高のテックブログを書くために気をつけている3つのこと</a> というブログ記事をみかけた。内容はとても素晴らしいと思う。一方で会社のテックブログでこんな品質を求められたら、品質を満たせない執筆者のモチベーションを阻害しないかということがやや気になった。そんなもやもやを、こみやさんとまさひとさんに共有したらテックブログ談義が始まっておもしろかったのでまとめておく。会社のテックブログと言えばクラスメソッドさんが有名なので引用する。</p><blockquote><p>もちろん弊社では、ブログを書くことを業務上の成果としても評価していますので、このブログを書くこと自体が評価につながるモチベーションになっています。</p><p>&mldr;</p><p>どのように評価をしているかと言うと、1つは本数という指標です。弊社では月4本エンジニアがブログを書くことを推奨しています。これは罰則はないので、書けていないからといって減点をすることはありません。逆に書いてるからといって加点をすることもありませんが、月4本を推奨していますし、10本書く人は高評価ということで「ブログのプロ」と呼ばれることがあります（笑）。その月は「10本書いたからプロになったね」というようなことを社内で言われたりします。</p><p>&mldr;</p><p>業務上の評価ということで、先ほど「減点・加点しないよ」というお話をしたんですが、3ヶ月に1回、ブログの本数とSNSのシェア数とビュー数が多い人に対して表彰をしています。やはり継続的にアウトプットをしているとこういった場面で表彰される機会も増えるので、社内でも「この人はたくさんブログを書いてるんだ」「この人はすごく高いスキルを持ってるんだ」と認められ、評価にもつながります。もちろん上司からも、技術ブログを書いてアウトプットが多いことが高い信頼につながります。</p><p><a href=https://dev.classmethod.jp/jobs/saiyo-2018-09-18/>なぜ技術ブログを書きまくるのか？　『Developers.IO』のクラスメソッドが伝える、エンジニアの成長サイクル</a></p></blockquote><p>みよ！この評価しているのか、していないのか、はっきりしない曖昧な制度設計を！</p><p>「テックブログは開発者がやるべき業務とみなしていますか？」と尋ねると、多くの会社では業務時間に書いてもよいけど必須でもノルマでもないみたいな答えが返ってくるのではないだろうか。業務に含めたくないのは、本質的に優先度の低い業務だという事実と、一定以上のコストをかけてまでテックブログに価値があると会社も考えていないのではないかと思う。業務とは言い難いので区別のためにここではテックブログを書くという <strong>活動</strong> と呼ぼう。</p><p>そして、個人のモチベーションに期待した活動を安易に評価の対象にするのは想像以上に厄介な制度設計になる。<a href=https://note.com/t2y1979/n/n4713058f48ce>メタ認知で〈学ぶ力〉を高める：認知心理学が解き明かす効果的学習法</a> を読んで私は理解できたことなんだけど、おそらくクラスメソッドさんの (曖昧にみえる) 制度設計の裏には認知心理学の知見がある。</p><ul><li>外発的動機づけ: 金銭や物品などの物的報酬、よい評価を得るといった社会的報酬など</li><li>内発的動機づけ: 自分がそれをしたいからする、知的好奇心など</li></ul><p>外発的動機づけは内発的動機づけと比べてずっと弱い動機づけであることがわかっている。ここで外発的動機づけの業務から始めて内発的動機づけの活動に変わっていくこと自体は問題ない。スクラムで言及している自己組織化や自律的な行動というのは内発動機づけによる活動に変わっていくことを期待している。会社の制度設計として難しいのはこの逆はよくないという話しがある。内発動機づけで行動していた活動を外発的動機づけに置き換えてしまうことだ。テックブログのような、本人が自己学習やアウトプットを目的に自律的にやっていた活動に、安易に金銭的な報酬を与えてしまうと、お金のためにやっている業務に置き換わってしまってやる気をなくしてしまうという懸念がある。余談だが、褒めることそのものは副作用のない安全な報酬と認知心理学の研究からわかっているらしい。クラスメソッドさんが表彰という制度設計にしているのは、本人のやる気をなくしてしまわない報酬を考慮しているからかもしれない。</p><p>またコンテンツの所有権という側面からテックブログは会社のものだから、自身のブランディング戦略とは相性がよくない。これは <a href=https://ja.wikipedia.org/wiki/%E9%99%90%E5%AE%9A%E5%90%88%E7%90%86%E6%80%A7>限定合理性</a> の話しとも関係してくる。開発者に限らないが、転職を当たり前にする時代で個人ブログに記事を書く方が開発者にとってのメリットがある。「会社ブログに書く動機はなにか？」は、人それぞれの理由があるだろうけれど、その理由が明確でないと消極的に会社ブログは書かないという帰結になるのではないか。私の経験則においても、会社のテックブログを書く開発者は圧倒的に少数である。私は過去に会社のテックブログを書いてきたモチベーションは単純にアウトプットすることで自身の勉強になるなら書く場所はどこでもよいという考えがあった。補足としては、会社の利益 (採用) に貢献しようとか、会社のテックブログを書く開発者が少ないという希少性に着目して自身をアピールするとか、そういった考えもあったと思う。</p><p>若い開発者にアウトプットする習慣を付けてもらう取っ掛かりとしてテックブログはよいのではないかという話題も出た。開発者のスキルアップのために会社がどこまでコストをかけてサポートするかという話題でもある。その延長上に評価制度もあるなぁと voyage さんの技術力評価会の資料もみてたりした。会社のイベントや業務を通じて、自然とアウトプットに関するスキルが身に付いて行動できるようになるなら本人のキャリアにとってもよいことではある。私は <strong>書く</strong> という行為は開発文化から影響を受ける側面が強いと考えていたけど、voyage さんの制度はその下地を組織として支えていく仕組みになっているのかもしれない。</p><ul><li><a href=https://speakerdeck.com/makoga/understanding-voyagegroups-technology-assessment-in-5-minites>5分でわかる技術力評価会</a></li></ul></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0714/>意図がわかる設計とリファクタリング</a></h1><div class=post-meta><span class=post-date>2022-07-14 (Thu.)</span></div><span class=post-tags>#<a href=/diary/tags/github/>github</a>&nbsp;
#<a href=/diary/tags/ci/cd/>ci/cd</a>&nbsp;
#<a href=/diary/tags/refactoring/>refactoring</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#煩雑な保守>煩雑な保守</a></li><li><a href=#job-summary-を使ってみた>Job Summary を使ってみた</a></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。久しぶりに <a href=https://www.nbcuni.co.jp/rondorobe/anime/hellsing/>HELLSING</a> をみてた。アレクサンド・アンデルセンの狂信者ノリが好き。</p><h2 id=煩雑な保守>煩雑な保守</h2><p>昨日から着手した s3 とやり取りするアプリケーションの保守をしている。一通り機能は実装できたが、このアプリケーションの保守を今後どうやっていけばいいのかが私からはみえない。要件が変わる度に継ぎ接ぎで拡張してきて、意図をもった設計があるわけではないようにみえる。このまま保守することはできるかもしれないが、このロジックの説明もテストも検証もすべてが難しい。私がみても難しいのだから、経験の浅い開発者がみるともっと難しいのではないかと思う。</p><p>これを直すにはまず単体テストを直さないといけない。単体テストの大半がモックベースなので実際の振る舞いと異なる可能性がある。とくに s3 とやり取りするところの検証ができない。<a href=https://www.testcontainers.org/modules/localstack/>testcontainers の localstack</a> があるので単体テストはモックからこのモジュールを使うように代替できそう。まずはそこからやるべきだが、2-3日はかかると見込まれるのでチームで承認を得られるかどうか、ちょっと聞いてみてから考える。</p><h2 id=job-summary-を使ってみた>Job Summary を使ってみた</h2><p>ちょっと前に github actions のワークフローの実行画面にサマリを出力できるようになったという記事をみた。</p><ul><li><a href=https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/>Supercharging GitHub Actions with Job Summaries</a></li></ul><p>自動でよさげなサマリを出力してくれるわけではなく、自分でサマリを作らないといけないので面倒だなと思ってそのまま放置していた。先週末に <a href=/diary/posts/2022/0709/#github-actions-の-push-イベントワークフロー改善>モジュール別のビルド・デプロイのワークフロー改善</a> を行った。ふとワークフローの実行結果をみていて、選択したモジュール名が表示されているとわかりやすくていいなと思えた。それを出力する手段としてサマリがちょうどいいやということに気付いた。inputs などで動的に変更するパラメーターをワークフローの実行画面で確認できるといちいちログ確認する手間が省けてよいという場面が他の用途でもある気がしてきた。もっと積極的にサマリを使っていこうと思えた瞬間だった。</p></div></div><div class=pagination><div class=pagination__buttons><a href=/diary/page/42/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/page/44/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>