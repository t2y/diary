<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.123.1"><title></title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0116/>テスト環境を作り直す</a></h1><div class=post-meta><span class=post-date>2024-01-16 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#テスト環境の見直し>テスト環境の見直し</a></li><li><a href=#hugo-のハンズオン資料作り>hugo のハンズオン資料作り</a></li></ul></nav></div><div class=post-content><p>21時頃から寝て何度か起きて7時半に起きた。昨日は頭が痛かったら早く帰って安静にしてた。安静にしたら直ったので大したことはなかったみたい。</p><p>今日の筋トレは腹筋:15x2,腕立て:10x1,スクワット15x2をした。</p><h2 id=テスト環境の見直し>テスト環境の見直し</h2><p>いまどきの開発の定番としては ci/cd でコミット単位にテスト環境にデプロイする仕組みを構築している。テスト環境は1つだけになるのだけど、プロダクトの開発を1年以上やってきて機能が増えたことによって、1つのテスト環境で相容れない複数の要件や機能を混在させることで管理や運用が煩雑になってきた。気付いたタイミングがよい時期だと思うのでこの機会に1つのテスト環境を3つのテスト環境に分散させようと思う。既存データを確認するだけなら1つでもよいが、id 連携という機能の特性上、複数のシステム間でデータ連携するため、システム間での依存関係が発生する。それを整理しないといけなくなったという次第。今日のところは現状把握や移行に必要な段取りなどを設計していた。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0115/>昨日の続き</a> 。23時過ぎに外に出たついでにオフィスに寄り道して書き始めたらまた熱中してしまって2時ぐらいまで書いていた。ハンズオンで説明する内容は一通り書いたつもり。せっかくの機会だから上級者向けにもう少し知っていることを書いてみようとは思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0115/>頭痛でダウン</a></h1><div class=post-meta><span class=post-date>2024-01-15 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/document/>document</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ldap-エントリーの更新リクエストをランダムに行うツール>ldap エントリーの更新リクエストをランダムに行うツール</a></li><li><a href=#hugo-のハンズオン資料作り>hugo のハンズオン資料作り</a></li></ul></nav></div><div class=post-content><p>4時半に寝て7時半に起きた。深夜にハンズオン資料を作っていたらまた眠れなくなった。朝から頭痛くて調子が悪い。きっと生活のリズムが崩れているせい。早くお仕事を終えて帰って寝てた。</p><p>今日の筋トレは腕立て:10x1,スクワット15x1をした。</p><h2 id=ldap-エントリーの更新リクエストをランダムに行うツール>ldap エントリーの更新リクエストをランダムに行うツール</h2><p>先週末から作っていたテストツールがようやく一通り動くようになった。ldap エントリーを生成したり、既存のエントリーに対して更新、削除、パスワード変更のリクエストをランダムに自動生成して送る。常時 id 連携の処理を動かしたときの並行処理の問題であったり、やや負荷をかけたときになにかの敷居値を超えて不具合がないかといった検証に使える。8月末に開発に着手して、年末から再開して、1月明けでようやく完成した。テストツールの開発の優先度が低いので後回し後回しにしているうちにどんどん後ろに流れていった。悪い開発の典型例。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0114/>昨日の続き</a> 、、、をやろうと思っていたけど、頭痛でしんどかったので今日はお休み。イベントが公開された。</p><ul><li><a href=https://fin-py.connpass.com/event/307453/>静的サイトジェネレーター勉強会</a></li></ul><p>他のツールをみていて slate というツールは知らなかった。api ドキュメントを書くためのツールとある。</p><ul><li><a href=https://github.com/slatedocs/slate>https://github.com/slatedocs/slate</a></li><li><a href=https://slatedocs.github.io/slate/>https://slatedocs.github.io/slate/</a></li></ul><p>うちはいま <a href=https://redocly.com/>redocly</a> というツールを使って openapi のフォーマット (yml) で api ドキュメントを管理している。開発は openapi を使ってなくてドキュメントのためだけに openapi を使っている。量が増えてくると yml でドキュメントを書くのも辛くなってくるので markdown で api ドキュメントを書けるならそれもよいかもしれない。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0114/>ハンズオン資料を作って、出掛けて、ハンズオン資料を作って</a></h1><div class=post-meta><span class=post-date>2024-01-14 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#hugo-のハンズオン資料作り>hugo のハンズオン資料作り</a></li><li><a href=#もくもく会>もくもく会</a></li><li><a href=#hugo-のハンズオン資料作り-2回目>hugo のハンズオン資料作り (2回目)</a></li></ul></nav></div><div class=post-content><p>2時過ぎに帰ってなんか眠れなくて4時半に寝て8時に起きた。なんか夜型になってきて変な生活リズム。</p><p>今日の筋トレは腕立て:10x1,スクワット15x1をした。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0113/#hugo-のハンズオン資料作り>昨日の続き</a> 。</p><p>朝からいろいろ直していた。やり始めると凝ってくる。スタイルやシンタックスハイライトなどを修正していた。</p><h2 id=もくもく会>もくもく会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/305200/>新年もくもく会</a> に参加した。なぜか今回は参加者が多くて15人ぐらいほぼ満席だった。lt 大会の内容は新年なので今年はこんなことやりたいという抱負を発表する人が多かったように思う。一通り lt を聞いてから、午前中に引き続き、ハンズオン資料の調査をしていた。夕方眠くなって集中力がなくなっていた。軽く1次会だけ行って眠くてそのまま帰ってきた。</p><h2 id=hugo-のハンズオン資料作り-2回目>hugo のハンズオン資料作り (2回目)</h2><p>飲み会から帰ってきて2時間ほど寝て、それからまた再開して2時半ぐらいまでやってた。サイトの構築とテーマの設定のところを書き終えた。初心者向けにハンズオン資料を書いているが、テーマの設定はなかなか難しいなと思える。拡張を作り込んでいるテーマもあるが、設定方法のドキュメントはあまりないことが多い。デモ画面とそのソースの設定ファイルをみながら空気を読むみたいなところで初期設定をしていかないといけない。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0113/>ハンズオン資料の作成に着手</a></h1><div class=post-meta><span class=post-date>2024-01-13 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/pypi/>pypi</a>&nbsp;
#<a href=/diary/tags/iostat/>iostat</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#ハンガーラック受け取り>ハンガーラック受け取り</a></li><li><a href=#iostat-tool-のメンテナンス>iostat-tool のメンテナンス</a></li><li><a href=#ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーとの打ち合わせ</a></li><li><a href=#hugo-のハンズオン資料作り>hugo のハンズオン資料作り</a></li></ul></nav></div><div class=post-content><p>晩ご飯食べてくつろいでからまたオフィスに戻って作業してた。3時過ぎに寝て8時に起きた。寝不足のせいか、今日も夕方に眠くなって家に戻って3時間ほど寝てた。</p><p>今日の筋トレは腹筋:25x1,腕立て:10x0,スクワット15x1をした。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週もとくにお仕事で疲労や負荷はないものの、筋トレを継続しているせいか、やや腰が痛いかなといったところ。トレーナーさんによると、筋トレで筋肉痛になっていると体が硬くなるという。おそらくそのせいでやや硬めの印象になっているのだと思う。腰や太ももの前・後ろの筋に張りがあったのでこれらはスクワットの反動ではないかと思われる。今日の開脚幅は開始前152cmで、ストレッチ後157cmだった。先週と同じだ。</p><h2 id=ハンガーラック受け取り>ハンガーラック受け取り</h2><p>ジモティーで「ハンガーラック」を500円で購入した。これもコワーキングスペースで使う。この前帰ったときにジャケットを掛けるものがないと気付いた。引き取りに東灘区へ行く機会が増えてきてだいぶ道を覚えてきた。マンションの駐車場まで行って、そこでハンガーラックを受け取った。解体してくれていたので難なく荷室に積めた。丁寧な方で駐車場から車が出ていくときまでお見送りしてくれた。ジモティーだと受け渡しが終わったらすぐ帰る人の方が普通なので性格なのかホスピタリティの違いが出るなと思った。</p><h2 id=iostat-tool-のメンテナンス>iostat-tool のメンテナンス</h2><p><a href=/diary/posts/2021/0926/>日記を書こうと決めて初日に書いた内容</a> が iostat-tool の保守だったなと思い出した。2年半ほど前。一昨日からプルリクエストが届いていたのでレビューしたり、CI 環境の設定を更新したりしてマージした。</p><ul><li><a href=https://github.com/t2y/iostat-tool/pull/6>Use %H for output generated with iostat -t #6</a></li></ul><p>マージしてから 0.3.1 として <a href=https://pypi.org/project/iostat-tool/>https://pypi.org/project/iostat-tool/</a> にパッケージをアップロードした。</p><h2 id=ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーとの打ち合わせ</h2><p><a href=/diary/posts/2024/0106/#ファイナンシャルプランナーとの打ち合わせ>先週の続き</a> 。17時からの予定だったが、プランナーさんの前の予定が早く終わったそうで15時半からに変更になった。お昼以降ならいつでもよいと伝えていたのでこういった調整ができてよいと思う。卓上カレンダーをお土産にもってきてくれた。今日は次のような内容を話した。</p><ul><li>人生のキャッシュフローに問題ない</li><li>預貯金が多いのでもう少し運用にまわしたい<ul><li>どういった運用があるのかノーアイディアなので提案してほしい</li></ul></li><li>資産形成ではなく万が一のときのための役員向けの保険を提案してほしい</li></ul><p>先方もどうせ来るならもっと準備して来たらいいんじゃないかとも思うが、次は teams でテレビ会議にしましょうと提案した。30分の打ち合わせのために三ノ宮のオフィスまで来てもらうのも申し訳なく思えてきた。その際にメールアドレスを伝えていて「すべて小文字ですか？」と聞くのでメールアドレス (ドメイン名) は大文字小文字を区別せず、大文字でも届きますよと教えてあげたら思いの外驚かれていた。昔からある古い仕様は大文字小文字を区別しなかったりする。大文字小文字を区別しないというのは、多くのケースで百害あって一利なしだけれども、互換性のために変更することもできない。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0111/#静的サイトジェネレーターの勉強会の打ち合わせ>先日の打ち合わせ</a> を受けて資料作りに着手した。hugo のサイト構築やテーマ設定は一度行ったらそうそう変更することはないので久しぶりに設定したら忘れていて、これどうだったかな？とか、このフォーマットはどこからきているのか？とか、いろいろ調べて思い出しながらやっていた。</p><p>hugo は設定ファイルを yaml, toml, json で記述できる。フォーマットを複数対応するというのはよくないということに気付いた。json はみたことないけど、テーマのサンプルの設定ファイルを yaml と toml の、開発者が慣れた方を使う。そうすると、テーマのサンプルの設定ファイルを yaml で提供していて、hugo.toml でサイトの設定をしていた場合、テーマの設定を yaml から toml に変換する作業が発生する。コンテンツの markdown も toml と yaml の両方で記述できるからフォーマットの統一感もなかったりする。なによりも初心者が調べたときに設定ファイルが toml だったり、yaml だったりして混乱する。</p><ul><li><a href=https://gohugo.io/getting-started/configuration/>Configure Hugo</a></li></ul><p>デフォルト設定は toml になっているので hugo で yaml は使わない方がいいんだろうなと思えた。</p><p>さらに設定ファイルの名前も昔は <code>config.toml</code> だったのが、最近は <code>hugo.toml</code> に変わり、さらにどちらのファイル名でもよいという仕様になっている。こんなことになんの意味があるのかもわからない。</p><blockquote><p>With v0.109.0 and earlier the basename of the site configuration file was config instead of hugo. You can use either, but should transition to the new naming convention when practical.</p></blockquote><p>まずはサイト構築して github actions で github pages へアップロードする環境構築を完了した。</p><ul><li><a href=https://t2y.github.io/hugo-hands-on/>https://t2y.github.io/hugo-hands-on/</a></li></ul><p>徐々にコンテンツを追加していく。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0112/>RWMutex の試用</a></h1><div class=post-meta><span class=post-date>2024-01-12 (Fri.)</span></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/kobe/>kobe</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#go-の-rwmutex-を使う>go の RWMutex を使う</a></li><li><a href=#4年ぶりの神戸ルミナリエ>4年ぶりの神戸ルミナリエ</a></li></ul></nav></div><div class=post-content><p>0時に寝て3時半に起きてネットみたてたら6時半になってそれから寝て7時半に起きた。やっぱり生活のリズムがおかしい。</p><p>今日の筋トレは腹筋:20x1,腕立て:10x1,スクワット10x1をした。あと1kmほど散歩した。</p><h2 id=go-の-rwmutex-を使う>go の RWMutex を使う</h2><p>テストツールでちょっとしたプールを実装していて mutex を使うコードを書いた。書き込みはロックしないといけないけど、読み込みはロックする必要がないようなものは <a href=https://pkg.go.dev/sync#RWMutex>RWMutex</a> を使うと普通の Mutex よりは読み込みが並行に動くので効率がよくなる。実際に RWMutex を使ってコードを書いたことがなかったので試しに書いて単体テストを実行して振る舞いを確認してみた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>pool</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>l</span>  []<span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span>  <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>struct</span>{}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mu</span> <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>RWMutex</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>pool</span>) <span style=color:#a6e22e>exists</span>(<span style=color:#a6e22e>dn</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ldap</span>.<span style=color:#a6e22e>DN</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RLock</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RUnlock</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>m</span>[<span style=color:#a6e22e>dn</span>.<span style=color:#a6e22e>String</span>()]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ok</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>pool</span>) <span style=color:#a6e22e>get</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>ldap</span>.<span style=color:#a6e22e>DN</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RLock</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RUnlock</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>length</span> <span style=color:#f92672>:=</span> len(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>l</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>l</span>[<span style=color:#a6e22e>rand</span>.<span style=color:#a6e22e>Intn</span>(<span style=color:#a6e22e>length</span>)]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>mustParseDN</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>pool</span>) <span style=color:#a6e22e>put</span>(<span style=color:#a6e22e>dn</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ldap</span>.<span style=color:#a6e22e>DN</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>Lock</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>Unlock</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dn</span>.<span style=color:#a6e22e>String</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>l</span> = append(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>l</span>, <span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>m</span>[<span style=color:#a6e22e>s</span>] = <span style=color:#66d9ef>struct</span>{}{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=4年ぶりの神戸ルミナリエ>4年ぶりの神戸ルミナリエ</h2><p>たまたま <a href=https://www.feel-kobe.jp/kobe_luminarie/>第29回 神戸ルミナリエ</a> が1月の19日から28日にかけて行われるという記事をみかけた。そう言えば、いつも12月に開催されていたのが今回から1月に変わったみたい。毎年今回が最後みたいな含みをもたせて、なんやらかんやらでもう29回も続いているんやね。今回が第29回だからおそらく来年に第30回もやるのでしょう。「4年ぶりの開催が決定」と書いてあって、あれ？やってなかったっけ？と思ったらコロナ禍のために2020-2023年まで中止という意思決定はされていて、代替イベントとして小さいルミナリエっぽいイルミネーションをやっていたらしい。ルミナリエの展示場となる東遊園地がうちの近所なのでこれまでもやっていたような記憶があるのはそのせいかもしれない。今年は規模を拡張してやるのかな？久しぶりなので時間があるときに観に行ってみようと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0111/>仕事して打ち合わせしてレンタカーの手配</a></h1><div class=post-meta><span class=post-date>2024-01-11 (Thu.)</span></div><span class=post-tags>#<a href=/diary/tags/svelte/>svelte</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#sveltekit-のエラー制御>sveltekit のエラー制御</a></li><li><a href=#静的サイトジェネレーターの勉強会の打ち合わせ>静的サイトジェネレーターの勉強会の打ち合わせ</a></li><li><a href=#開発合宿の準備>開発合宿の準備</a></li></ul></nav></div><div class=post-content><p>0時に寝て何度か起きて6時半に起きた。ようやく生活のリズムが戻ってきた。</p><p>今日の筋トレは腹筋:15x1,腕立て:10x1,スクワット15x1をした。</p><h2 id=sveltekit-のエラー制御>sveltekit のエラー制御</h2><p>svelte のエラーハンドラーの仕組みを調べた。</p><ul><li><a href=https://kit.svelte.jp/docs/errors>sveltekit: エラー</a></li></ul><p><code>error()</code> ヘルパーの内部で例外を throw して <code>+error.svelte</code> ファイルがエラーハンドラーでその例外を捕捉してエラーの表示を制御する。とくに目新しくない、普通のフレームワークなら用意してあるであろう例外ハンドラーのようにみえる。公式ドキュメントを読みなさいと常々メンバーに言っているが、なかなか読んでくれなくて、例外ハンドラーを知らずに自前のエラー制御を実装してしまう。私からツッコミが入って作り直しになる。公式ドキュメントを一通り読んだ方が開発が速いと何度も指摘しているのだが。</p><h2 id=静的サイトジェネレーターの勉強会の打ち合わせ>静的サイトジェネレーターの勉強会の打ち合わせ</h2><p>fin-py で2月に静的サイトジェネレーターのハンズオンをやるそうで hugo なら私が使っているので紹介ぐらいできますよと言ったらそのままハンズオンの講師をやることになった。今日はそのための打ち合わせを行うことになった。だいたい次の内容になった。私以外にも4人ほど講師がいて、他の静的サイトジェネレーターのハンズオンも行う。</p><ul><li>ハンズオンは1人30分を持ち時間とする<ul><li>質問も込みで30分</li><li>時間に余裕があるので少しぐらいなら超えてもよい</li><li>デプロイ先やホスティングについての話しは個別にやらない<ul><li>静的サイトジェネレーターとは別のセッションで話す</li></ul></li><li>ローカルでビルドするまでをハンズオンで話す</li></ul></li><li>このハンズオンの対象とする参加者の要項を書く<ul><li>ターゲットの参加者層を決めないと、どのレベルで解説してよいかわからない</li><li>git/github は使えるという前提</li><li>ターミナルでコマンドライン操作もできるという前提</li></ul></li><li>1月20日までにハンズオンのドキュメントを書いて connpass の要項を完成させる</li></ul><p>hugo をインストールして、サイト環境を構築して、記事の生成／ビルドをする。あとはメタデータ付きマークダウンやテーマの設定ぐらいを説明するかなぁ。</p><h2 id=開発合宿の準備>開発合宿の準備</h2><p>ちゃくちゃくと準備を進めている。今回は神戸から4人、関東から3人の合計7人が参加する。うちの会社の社用車で行く予定だったが5人しか乗れない。みんなで移動するのに車が2台になるのも面倒なのでレンタカーでミニバンを借りることにした。スタッドレスタイヤのオプションを付けると2泊3日で11,880円になる。これはスタッドレスタイヤのレンタルとほぼ同じぐらいの料金にみえる。これによって社用車のスタッドレスタイヤ換装の難しい課題からも解放される。キャンペーン割引があって保険も追加して2泊3日で合計61,215円となった。ミニバンなら7-8名は乗れるし、荷物も余裕をもって積み込みできる。このアイディアはいいなと思って、きのいえの定員もそのぐらいの人数がちょうどよさそうに思う。今回の開発合宿では人数の上限はどうかという点にも注目して取り組みたい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0110/>vhs コマンドの使い方</a></h1><div class=post-meta><span class=post-date>2024-01-10 (Wed.)</span></div><span class=post-tags>#<a href=/diary/tags/svelte/>svelte</a>&nbsp;
#<a href=/diary/tags/cli/>cli</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#sveltekit-で-context-のデータを扱う>sveltekit で context のデータを扱う</a></li><li><a href=#アニメ-gif-をスクリプトから作る>アニメ gif をスクリプトから作る</a></li></ul></nav></div><div class=post-content><p>23時過ぎに寝始めて何度か起きて7時半に起きた。</p><p>今日の筋トレは腹筋:10x1,腕立て:10x1,スクワット15x1をした。</p><h2 id=sveltekit-で-context-のデータを扱う>sveltekit で context のデータを扱う</h2><p>ui 側でページに依存しない形で設定情報などを扱いたいとする。svelte の store と context api を組み合わせて sveltekit として context を管理するサンプルコードが紹介されている。</p><ul><li><a href=https://kit.svelte.jp/docs/state-management#using-stores-with-context>context と共に store を使う</a></li></ul><p>これだけですぐ動くのだけど、このときに <code>LayoutData</code> はサーバー側で作るとバックエンドの仕組みを隠蔽できて嬉しい。そういったときは <code>src/routes/+layout.server.ts</code> にバックエンドの api 呼び出しを隠蔽することで意図した振る舞いになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#66d9ef>type</span> { <span style=color:#a6e22e>LayoutServerLoad</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./$types&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>load</span>: <span style=color:#66d9ef>LayoutServerLoad</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>`localhost:18080/myapi`</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=アニメ-gif-をスクリプトから作る>アニメ gif をスクリプトから作る</h2><p><a href=https://zenn.dev/kou_pg_0131/articles/favorite-cli-tools>お気に入りのコマンドラインツールを淡々と紹介する</a> をみていて <a href=https://github.com/charmbracelet/vhs>vhs</a> という cli でアニメ gif を作ってくれることを知った。試しにやってみた。ターミナルを録画するようなやり方と比べて、録画時にタイプミスしてしまうようなミスを防げる。次のようなスクリプトファイルを新規作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ vhs new bf.tape 
</span></span></code></pre></div><pre tabindex=0><code>Output bf.gif

Require echo

Set Shell &#34;bash&#34;
Set FontSize 14
Set Width 800
Set Height 380

Type &#34;genact -m bruteforce&#34; Sleep 500ms  Enter

Sleep 10s
</code></pre><p>あとはこの設定でアニメ gif を作る。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ vhs bf.tape 
</span></span></code></pre></div><figure><img src=/diary/img/2024/0110_bf.gif></figure><p>これで 4.8 MiB なのでサイズはまぁまぁ大きい。サイズやカラーの調整をすればもう1桁は縮小できるかもしれない。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ls -lh img/2024/0110_bf.gif 
</span></span><span style=display:flex><span>-rw-rw-r-- <span style=color:#ae81ff>1</span> 4.8M  1月 <span style=color:#ae81ff>10</span> 19:48 img/2024/0110_bf.gif
</span></span></code></pre></div></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0109/>災害義援金を寄付してみた</a></h1><div class=post-meta><span class=post-date>2024-01-09 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/donation/>donation</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/blog/>blog</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#災害義援金の寄付>災害義援金の寄付</a></li><li><a href=#はてなブックマーク数の表示>はてなブックマーク数の表示</a></li></ul></nav></div><div class=post-content><p>2時半に寝て4時半に起きて6時半に起きて7時半に起きた。</p><p>今日の筋トレは腹筋:15x1,腕立て:10x1,スクワット10x1をした。</p><h2 id=災害義援金の寄付>災害義援金の寄付</h2><p>週末に災害の寄付をしようと思ったときに、ふと寄付を法人でやればいいんじゃないかと思い付いた。どちらも私のお金であることには変わりないのだけど、会社のお金は個人のお金という気がしないので個人よりも大きいお金を寄付できる。これは法人という人格を分けていることのメリットの1つかもしれない。</p><ul><li><a href=https://www.pref.ishikawa.lg.jp/suitou/gienkinr0601.html>令和6年（2024年）能登半島地震に係る災害義援金の受付について</a></li></ul><p>今朝から税理士さんに損金算入についての懸念がないかを確認して問題ないということだったので10万円を寄付した。領収書は電子フォームから申請したが、毎日それなりの数の人が寄付しているだろうから領収書が発送されるまで1ヶ月ぐらいはかかるのかもしれない。気長に待って領収書が届いたら軽く記事を書こうと思う。現時点での義援金の残高は 968,223,243 円とのこと。せいぜい集まるお金は数十億程度なのかな。</p><blockquote><p>現時点での暫定推計で被害総額は約8,000億円</p><p><a href=https://www.nri.com/jp/knowledge/blog/lst/2024/fis/kiuchi/0105>能登半島地震による経済損失について考える</a></p></blockquote><h2 id=はてなブックマーク数の表示>はてなブックマーク数の表示</h2><p>hugo ではてなブックマークの数を表示するためのカスタマイズを追加した。はてな社がそのための機能を提供しているのですぐできる。</p><ul><li><a href=https://b.hatena.ne.jp/help/entry/count>自分のブログに「○○users」を表示する</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ $url := .Permalink }}
</span></span><span style=display:flex><span>{{ if hugo.IsDevelopment }}
</span></span><span style=display:flex><span>  {{/* ローカル環境でブックマーク数の表示確認用途 */}}
</span></span><span style=display:flex><span>  {{ $url = &#34;https://kazamori.jp/&#34; }}
</span></span><span style=display:flex><span>{{ end }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ print &#34;</span><span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>hatena</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>ne</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>jp</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>entry</span><span style=color:#960050;background-color:#1e0010>/&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>url</span> <span style=color:#960050;background-color:#1e0010>}}&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ print &#34;</span><span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>hatena</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>ne</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>jp</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>entry</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>image</span><span style=color:#960050;background-color:#1e0010>/&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>url</span> <span style=color:#960050;background-color:#1e0010>}}&#34;</span> <span style=color:#a6e22e>alt</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;はてなブックマーク - {{ .Title }}&#34;</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;はてなブックマーク - {{ .Title }}&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>a</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>span</span>&gt;
</span></span></code></pre></div><p>呼び出し側はこんな風に使う。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ partial &#34;hatebu.html&#34; . }}
</span></span></code></pre></div><p>結果は <a href=https://blog.osstech.co.jp/posts/>記事一覧</a> で確認できる。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0108/>evernote から upnote への移行</a></h1><div class=post-meta><span class=post-date>2024-01-08 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/biztrip/>biztrip</a>&nbsp;
#<a href=/diary/tags/migration/>migration</a>&nbsp;
#<a href=/diary/tags/upnote/>upnote</a>&nbsp;
#<a href=/diary/tags/security/>security</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#サンライズ出雲の予約>サンライズ出雲の予約</a></li><li><a href=#upnote-への移行>upnote への移行</a></li></ul></nav></div><div class=post-content><p>6時に寝て8時半に起きた。オフィスで3時前ぐらいまで調べものして、帰ってからも眠れなくてネットしてたら朝になった。</p><p>今日の筋トレは腹筋:15x2,腕立て:10x1,スクワット10x1をした。</p><h2 id=サンライズ出雲の予約>サンライズ出雲の予約</h2><p>以前 <a href=/diary/posts/2023/1119/#サンライズ瀬戸・出雲>やまさきさんに教えていただいた夜行列車</a> を予約してみた。列車は瀬戸と出雲の2つがある。岡山〜東京間は瀬戸と出雲が連結して運行するそうなのでどちらを選択しても同じだと思うけれど、出雲で予約してみた。乗り込む車両が異なるのかな？</p><p>三ノ宮(00:11発) => 東京 (07:08着)</p><ul><li>特急サンライズ出雲（シングル）<ul><li>料金券部分 10,460円 (三ノ宮 - 東京)</li><li>乗車券部分 9,460円 (神戸市内 - 東京都区内 2月6日～2月9日まで有効)</li></ul></li></ul><p>前回に <a href=https://www.jr-odekake.net/goyoyaku/campaign/sunriseseto_izumo/form.html>専用の予約画面</a> があることを調査済みだったので迷わず予約を取れた。唯一、面倒なところがオンラインで予約した後に紙の切符を発行しないといけないところ。切符を発行するには緑の窓口・券売機へ行かないといけない。三ノ宮駅にはあるので問題はない。発行には次の3つが必要になる。初めてだから予約後、すぐに駅へ行って発行してみた。迷わず簡単にできたのでこれなら乗車する直前でもそう困らないように思える。</p><ul><li>予約したクレジットカード</li><li>電話番号の下四桁</li><li>予約番号</li></ul><h2 id=upnote-への移行>upnote への移行</h2><p>数年前から evernote のビジネスが安定していないのは既知になっていたが、ここ1-2年でフリープランをどんどん縮小して投資回収的な値上げを強行している。</p><ul><li><a href=https://forest.watch.impress.co.jp/docs/news/1550894.html>「Evernote」無料プランの上限変更が正式決定、導入は12月4日から</a></li></ul><p>値上げするだけならまだしも、アプリを開くたびに有料プランにアップグレードするためのダイアログを表示して、意図的にユーザー体験を悪化させて、フリープランのユーザーを退会させたいようにみえる。ここまで露骨にやって既存の課金ユーザーだけで十分にビジネスはペイするという目論見なのか、経営陣が短期的にV字回復させたという実績作りなのか。いずれにしても、私のようなちょっと使いのフリープランユーザーはターゲットではないらしい。どうやら2011年6月から使っていたらしいが、件数にすると216件のノートしかない。週に1-2回は使うのだけど、なくなったら別アプリに移行しても困らない程度の用途にしか使っていない。</p><p>ずっと移行したいと思いつつ、なおざりにしていた理由として移行先のアプリを選定していなかった。私の用途としては次のような使い方をしている。</p><ul><li>買いものの備忘録として思いついたときにパソコンから記録し、スマホでチェックしながら買いものする</li><li>法人番号、住所、家族の誕生日など、オンラインで手入力しないといけないときなどのコピペ元</li><li>郵便受けのダイヤルロックを忘れたときのメモ</li><li>パソコンやデバイスを購入したときのスペックを記録しておく</li><li>オンラインの記事やサイトを保管しておくときの web クリップ</li></ul><p>正直メモ帳アプリでなくても、他のアプリへ移行することもできるが、惰性で使っているのでできればそのまま移行したい。私の周りでは <a href=https://obsidian.md/>obsidian</a> を使っている人も多く評判もいいからこれでもよかったんだけど、いくつか記事を読んでいると <a href=https://getupnote.com/>upnote</a> の評判もよさそうにみえた。また upnote はサブスクリプションモデルではなく、パッケージライセンスなのでコストが安い。app store 経由でプレミアムのライセンスを購入する。為替によって値段が変わると思うが、いま買ったら3,500円だった。この値段で未来永劫 upnote のインフラコストを賄えるのかは懐疑的だが、3,500円ぐらいならそうなったときにまた別のメモ帳アプリへ移行するのでもよいかなというぐらいの気持ちで upnote を使ってみることにした。</p><ul><li><a href=https://ryob.net/upnote/>ノートアプリ難民必見！UpNoteが超気に入った理由を語りたい</a></li></ul><p>web 版はなくて、それぞれのデバイスごとにインストールする。linux は snap パッケージが用意されているので ubuntu なら次のようにインストールする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo snap install upnote
</span></span></code></pre></div><p>evernote から移行をするにあたり、<code>.enex</code> という xml ファイル形式でデータをエクスポートできる。これは macos または windows アプリでないとエクスポートできない。仕方ないから macos に evernote のアプリをインストールしてエクスポートする。ノートブック単位でエクスポートできる。</p><ul><li><a href=https://help.evernote.com/hc/ja/articles/209005557-%E3%83%8E%E3%83%BC%E3%83%88%E3%81%A8%E3%83%8E%E3%83%BC%E3%83%88%E3%83%96%E3%83%83%E3%82%AF%E3%82%92-ENEX-%E3%81%BE%E3%81%9F%E3%81%AF-HTML-%E5%BD%A2%E5%BC%8F%E3%81%A7%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88>ノートとノートブックを ENEX または HTML 形式でエクスポート</a></li></ul><p>その後、upnote の macos アプリでインポートしようと試みるも macos 版にはインポート機能が見当たらない。linux 版にはインポート機能があったので <code>.enex</code> ファイルを linux にコピーしてきて linux 版でインポートしたら移行を完了した。移行の制約事項は次の通り。216件のノートしかないので10分もあれば完了した。同期もかなり速くて、すぐに iphone, macos, linux でノートが同期された。</p><blockquote><p>最適なパフォーマンスを得るには、次の点に注意してください。</p><ul><li>多数のノートをインポートすると、アプリのパフォーマンスに影響を与える可能性があります。</li><li>20MBを超えるファイルはインポートされません。</li><li>300,000文字を超えるノートはインポートされません。</li></ul></blockquote><p>インストールしてから、このアプリの開発元はどこなんだろう？と調べてみるとベトナムの会社らしい。ややセキュリティは大丈夫なのかな？と不安に思ってしまう。<a href=https://getupnote.com/support.html>Frequently Asked Questions</a> から引用する。firebase を使っているならストレージは強固だし、同期も firebase に委譲すればおかしなことも起こらないだろう。</p><blockquote><p>アップノートはどのように私のデータを保存するのですか？</p><p>UpNoteは、アカウントにサインアップしなくても確実に動作するように設計されています。サインインしない場合、メモはあなたのデバイスにローカルに残ります。デバイス間でメモを同期したい場合は、アカウントにサインアップすると、UpNoteが中央サーバーにメモを保存し、他のデバイスと同期できるようになります。</p><p>お客様はご自身のデータを完全に管理することができ、アップノートがお客様のデータにアクセスしたり、お客様のデータを第三者に販売したりすることは決してありません。プライバシーに関する詳細は、プライバシーポリシーをご覧ください。</p></blockquote><blockquote><p><strong>アップノートのサーバーはどこにありますか？安全ですか？</strong></p><p>UpNoteはFirebaseサーバー（Googleが提供するサービス）にデータを保存します。Firebaseプラットフォームは、主要なプライバシーおよびセキュリティ基準で認定されており、EU一般データ保護規則（GDPR）およびカリフォルニア州消費者プライバシー法（CCPA）を完全にサポートしています。Firebaseは、HTTPSを使用して転送中のデータを暗号化し、静止時のデータを暗号化します。詳しくは <a href=https://firebase.google.com/support/privacy>https://firebase.google.com/support/privacy</a> をご覧ください。また、お客様のデータが安全に保護され、お客様だけがアクセスできるように細心の注意を払っています。</p></blockquote><blockquote><p><strong>アップノートはエンドツーエンド暗号化に対応していますか？</strong></p><p>エンドツーエンド暗号化（E2EE）は、データを暗号化・復号化するための高度なセキュリティ手法で、機密性の高い情報を保護するために設計されています。実装が複雑なため、アップノートでは現在E2EEをサポートする予定はありません。パスワードやクレジットカード番号などの機密情報を保存する場合は、機密情報を暗号化するために特別に設計されたパスワードマネージャーアプリケーションを使用することをお勧めします。</p></blockquote><p>e2ee に対応していないところは残念なところ。未対応のセキュリティリスクの懸念としては、upnote 社の社員が私のノートの内容を閲覧できる可能性があったり、攻撃者が upnote 社のインフラに侵入してしまった場合、メモ帳の内容が外部に漏洩してしまう可能性がある。とはいえ、値段も安いのだからそこは割り切って機密情報はすべてパスワードマネージャに移行せよという戦略は理解できる。私の用途だと、メモ帳に機密情報はほとんどないけれど、賃貸の部屋のインターネット接続のアカウント情報や wifi パスワードなどを書いていたりする。こういった内容もこの機会に整理して 1password へ移行していくのがよいように思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0107/>経営の価値観にもの思い</a></h1><div class=post-meta><span class=post-date>2024-01-07 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/management/>management</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#経営の価値観と財務>経営の価値観と財務</a></li></ul></nav></div><div class=post-content><p>2時に寝て途中起きて7時半に起きた。久しぶりによく眠れた。</p><p>今日の筋トレは腹筋:10x2,腕立て:10x1,スクワット15x1をした。</p><h2 id=経営の価値観と財務>経営の価値観と財務</h2><p>年末から読み進めて <a href=/diary/posts/2024/0106/#社用車の1年点検>昨日読み終えた本</a> の書評を書いた。こういったアウトプットをすることで学びを強化できるし、忘れてしまったときにまた自分の記事を読み返すこともできる。南原さんの経営の価値観に共感するところも多かった。</p><ul><li><a href=https://note.com/t2y1979/n/n5fffbeaf494b>「絶対無理」なんて「絶対」ない！</a></li></ul><p>以前読んだ <a href=https://note.com/t2y1979/n/n634abc4c3941>貧乏はお金持ち</a> にも書いてあったことだけれども、会社の資金繰りが厳しくなって、いざお金を借りようと思ったときに返済実績がないと借りられないことがあると書いてあった。余裕のあるときに借りて返済したという融資実績を作ることは会社の信用において意味があることだという。南原さんも同じことを指摘していて、その融資を受ける上で事業計画書が大事だという。これまで事業計画書を作るという考えが私にはなかったが、融資を受けるタイミングで試しに作ってみて外部の人たちが私の作った事業計画に対してどういった評価をするかで、やりたい事業の客観的な評価をするのもよさそうだと思い始めた。</p><p>2024年度中には投資フェーズに入り、その時点がもっともうちの会社の財務諸表の見栄えがよいと想定される。そのタイミングで事業計画書を作り、この先の5年程度の財務の安定化を図るというのも戦略の1つとして構想を進めていこうと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0106/>機械の調子がよいと嬉しい</a></h1><div class=post-meta><span class=post-date>2024-01-06 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#社用車の1年点検>社用車の1年点検</a></li><li><a href=#ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーとの打ち合わせ</a></li></ul></nav></div><div class=post-content><p>6時頃に寝て8時半に起きた。昔の <a href=https://ja.wikipedia.org/wiki/%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF_(%E3%83%86%E3%83%AC%E3%83%93%E3%83%89%E3%83%A9%E3%83%9E)>トリック</a> のドラマをみていたらついついみてしまった。</p><p>今日の筋トレは腹筋:10x1,腕立て:10x1,スクワット15x1をした。</p><h2 id=ストレッチ>ストレッチ</h2><p>お正月休みだったので疲労はないのだけど、だらけ過ぎたせいか全体的に体がちょっと硬かった。トレーナーさんと年始の災害や事故の話しなどをしながらいつも通りのストレッチのメニューをこなしていく。先月ぐらいか太もも後ろの筋に張りがずっとある。今日はとくに右太もも後ろの筋が張っていてかなりきつかった。年始から軽い筋トレを始めために、その影響もあって肩から胸周りは軽い筋肉痛で硬くなっていたのかもしれない。1ヶ月は継続して習慣化したいと共有した。今日の開脚幅は開始前152cmで、ストレッチ後157cmだった。</p><h2 id=社用車の1年点検>社用車の1年点検</h2><p>13時から1時間半の予定が12時12分にディーラーさんに着いてしまった。営業さんからは13時からの予約なのでそれまで待ってもらうとお断りがあり、それは全然構わないと <a href=/diary/posts/2023/1230/#絶対無理なんて絶対ない>年末から読みかけの本</a> を持ち込んで、ディーラーさんの待合室で本読みながら待ってますと伝えて、それから1時間半ほど読書していて、ちょうどその本を読み終えて、スマホを触っていたら13時38分には整備士さんから点検を終えたと一報があった。整備士さんによると、点検の順番を入れ替えて先にやってくれたみたい。</p><p>今回の点検で初めてのオイル交換となる。整備士さんから説明を受けると、なんの問題もなくて調子がよいという。私も1年間乗ってきて調子がよいですと答えた。ただのプラセボ効果だと思うけれど、整備を終えたばかりの車はさらに調子がよいように感じた。</p><p>走行距離の推移は次の通り。</p><ul><li>購入時: 49,426 km</li><li>6ヶ月点検: 50,156 km</li><li>12ヶ月点検: 52,594 km</li></ul><p>1年で 52594 - 49426 = 3,168 km 走ったことになる。学生の頃にバイクに乗っていた。そのときは1-2ヶ月で3000kmほど走ってオイル交換していた。もっともよく走ったのは北海道にツーリングへ行ったときで1週間で3000km走ったことがある。それと比べるとまったく走っていない。いまは月に1-2回実家へ帰るのが主な用途で片道約80kmとして往復で約160kmになる。3168 / 160 ≒ 20 回なので感覚的にも合致する。今後もコワーキングスペース作りのためにちょくちょく実家に帰るかもしれない。</p><h2 id=ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーとの打ち合わせ</h2><p>本当は点検の終了が14時半だったので15時から打ち合わせを入れていた。点検から家に戻ってきて、すぐにオフィスへ行ったら14時14分だった。</p><p>ファイナンシャルプランナーさんに電話して、もうオフィスにいるので早く来られるならいつでもよいと一言伝えた。すると、プランナーさんも14半過ぎには着く予定だという。これは私もそうなんだが、初めて行く場所で打ち合わせ時間ぎりぎりの時間にあわせて訪問するということはない。不測の事態に備えて20-30分は余裕をもって行き、ビルの場所を確認してから周りをうろうろしたりする。プランナーさんもそういう性格なのかどうかは知らないが、早めに来られていたので早く打ち合わせして早く終わる分には問題ないだろうと思えた。早起きは三文の得。その後14時33分にオフィスへ来られて、いろいろお話しして15時半頃には終えた。また来週、人生のキャッシュフロー表のようなものを作ってくれるそうなのでそれを踏まえて話しをしてくれるらしい。</p><p>そのプランナーさんは大阪支社に勤めている。「大阪からわざわざ来ていただいてすみません。」と伝えると、今日は西宮、姫路と2件まわってその帰りだという。その会社は47都道府県すべてに支社があり、兵庫県は、姫路と姫路中央、神戸、三宮と4つの支社があるらしい。兵庫県は広いので移動に時間がかかると話されていた。おそらく姫路支社の担当者は赤穂や加古川をカバーして、神戸や三ノ宮の担当者は三木や三田、丹波もカバーするのだと推測する。とはいえ、三ノ宮に支社があるので時間調整は行いやすいため、うちのオフィスに来るのは大した労力でもないと話されていた。</p><p>ファイナンシャルプランナーさんとの相談そのものは無期限・無料でいくらでも行ってくれるらしい。その際に保険を提案して、保険会社からバックマージンを得るようなビジネスモデルにみえる。私は保険とは無縁の人間なのでしがらみも競合もなく、相手からするとターゲットそのものにみえる。話しを聞いていて、会社の経費で役員向けの保険に入って、私が重病になって働けなくなったときにその保険を解約して、保険金を現物支給するといった取り組みは検討に値するように思えた。そのときの保険金は退職金として支給されるので税金も優遇されるという。</p><p>いまのところ、個人で保険に加入する気はない。一方で <a href=/diary/posts/2023/1124/#家族信託の打ち合わせ>家族信託を介して相続税対策における母の生命保険</a> に今後加入する可能性がある。軽く説明すると、プランナーさんも「はいはい」って感じですぐに意図を汲み取っていたようにみえた。あとは会社の損金になるのであれば保険に入るのもやぶさかではないかもしれない。しばらくファイナンシャルプランナーとの打ち合わせを継続してみようと思う。</p></div></div><div class=pagination><div class=pagination__buttons><a href=/diary/page/13/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/page/15/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>