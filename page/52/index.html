<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.101.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/assets/style.css><link rel=stylesheet href=/diary/assets/green.css><link rel=stylesheet href=/diary/style.css><link rel=apple-touch-icon href=/diary/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1114/>リーンキャンバスやってみた</a></h1><div class=post-meta><span class=post-date>2021-11-14</span></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/xr/>xr</a>&nbsp;
#<a href=/diary/tags/disease/>disease</a>&nbsp;</span>
<img src=/diary/img/2021/1114_lean-canvas.png class=post-cover alt=リーンキャンバスやってみた><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#リーンキャンバス>リーンキャンバス</a></li><li><a href=#データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</a></li><li><a href=#神戸駆動開発イベント>神戸駆動開発イベント</a></li><li><a href=#傾斜枕>傾斜枕</a></li></ul></nav></div><div class=post-content><p>2時に寝て8時に起きた。起きてからドラクエタクトのダイの大冒険コラボイベントをお昼前までやってた。午前中遊んでた割には今日はいろいろ作業した。ゆっくり寝たせいか、個々の作業は集中してできた。</p><h2 id=リーンキャンバス>リーンキャンバス</h2><p>友だちにプロダクトの設計についてレビューしてもらう機会を調整してたらリーンキャンバス作るとよいとアドバイスをもらった。全然やったことがないので試しに自分でもやってみることにした。<a href=https://monstar-lab.com/dx/solution/lean-canvas/>リーンキャンバス（Lean Canvas）を活用した企画書の書き方【テンプレート付】</a> を読みながら <a href=https://canvanizer.com/>Canvanizer</a> というツールで作成してみた。リーンキャンバスの利点の1つとしてA4サイズ1枚程度におさめるので短時間で作成できるというのがある。プロダクトの要件定義と設計はすでにできているので、リーンキャンバスは1時間も経たないうちにたたき台を作成できた。また友だちにレビューしてもらうときにフィードバックをもらいながら精度をあげていく。</p><h2 id=データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</h2><p>昨日から 9.4 分散トランザクションと合意の後半の3つの節を読んだ。第Ⅱ部、400ページを超えたので2/3ほど読み終えた。</p><ul><li>9.4.3 耐障害性を持つ合意</li><li>9.4.4 メンバーシップと協調サービス</li><li>まとめ</li></ul><p>合意の問題は、次のように形式化される。1つ以上のノードが値を <strong>提案（propose）</strong> し、合意アルゴリズムはそれらの値の中から1つを <strong>決定（deside）</strong> する。この形式化においては、合意アルゴリズムは次の性質を満たさなければならない。</p><ul><li>一様同意（uniform agreement） : 2 つのノードが異なる決定をしていないこと</li><li>整合性（integrity） : 2 回決定をしているノードがないこと</li><li>妥当性（validity） : ノードが値 v を決定したら、 v を提案しているノードがあること</li><li>終了性（termination） : クラッシュしていないすべてのノードは、最終的に何らかの値を決定すること</li></ul><p>耐障害性を持つ合意アルゴリズムで最も広く知られているのは、Viewstamped Replication（ VSR ）、Paxos、Raft、Zab であり、こういった合意のアルゴリズムは全順序ブロードキャストを実装しており、複数回にわたって合意が行われる。全順序ブロードキャストによって耐障害性を保ちながら線形化可能でアトミックな操作を実装できる。ZooKeeper のようなツールが、アプリケーションから利用できる合意、障害検出、メンバーシップの「アウトソーシング」サービスを提供する上で、重要な役割を果たしている。分散システムにおける様々な問題に耐えうるようなアルゴリズムを独自に開発するよりははるかによいといえる。合意へと落とし込めるような問題の処理が必要で、さらに耐障害性が求められるなら ZooKeeper のようなサービスを使うとよい。</p><h2 id=神戸駆動開発イベント>神戸駆動開発イベント</h2><p><a href=https://osaka-driven-dev.connpass.com/>大阪駆動開発</a> という xr (vr/ar/mr) のコミュニティがあって、いろんな地域に拡張しているようで、その支部？の1つに神戸駆動開発ができて、そのイベントとして <a href=https://kobe-driven-dev.connpass.com/event/230296/>【神戸】XR体験&交流会</a> に参加してきた。会場が <a href=https://www.kobedenshi.ac.jp/>神戸電子専門学校</a> だったのでどんなところかを見に行く意図でも出かけてきた。三宮.dev の主催者も神戸電子専門学校の中の人とつながりがあるらしく、今度オフラインの勉強会をそこでしようか検討しているといった話しもあった。bizpy もコロナが落ち着いたらオフラインの勉強会をやってもいいかなとは考えているので接点を作っておいてもいいかもしれない。神戸なんて狭い地域なのでコミュニティ関係者はすぐにつながるけど、神戸でオフラインの勉強会を開くに当たって適当な場所がないというのはあちこちで聞く話しでもあるので、神戸電子専門学校がそういったコミュニティをつなぐハブ的な場になるならそれはそれでいいのかもしれない。</p><p><a href=https://www.microsoft.com/en-us/hololens>HoloLens 2</a> と <a href=https://www.nreal.ai/light/>Nreal Light</a> と iphone や apple watch とレンズやミラーを組み合わせて作った手作りのデバイスなども体験させてもらった。HoloLens が思ったよりも映像がみえにくくて、ロボットを操作してロケットを発射させるコンテンツをやってみたんだけど、操作よりもコンテンツが明確にみえなくて難しかった。もしかしたら装着の仕方が悪かったのかもしれない。それに比べて Nreal Light はアイドルのライブみたいなコンテンツをみたんだけど、映像も音声もはっきりしていたので印象はよかった。</p><p>適当にスタッフの人と話していて、センサーを使って現実のモノや事象を vr 空間に持ち込むと vr コンテンツを作るのは簡単かも？という話しをした。なんかセンサーを探してもいいかもしれない。そのスタッフの人はピアノを弾くのでピアノ音を取り込んで加工したりしていると話していた。</p><h2 id=傾斜枕>傾斜枕</h2><blockquote><p>胃食道逆流症（英語表記Gastro Esophageal Reflux DiseaseからGERD（ガード）とも呼ばれています）は、主に胃の中の酸が食道へ逆流することにより、胸やけ（みぞおちの上の焼けるようなジリジリする感じ、しみる感じなど）や呑酸（酸っぱい液体が上がってくる感じ）などの不快な自覚症状を感じたり、食道の粘膜がただれたり（食道炎）する病気です。胸が詰まるような痛みを感じたり、のどの違和感や慢性的に咳が持続する患者さんもいます。胃酸の逆流は食後2～3時間までに起こることが多いため、食後にこれらの症状を感じたときは胃酸の逆流が起きている可能性を考える必要があります。</p><p>(&mldr;)</p><p>現在では成人の10～20％がこの病気にかかっていると推測されています。</p><p><a href=https://www.jsge.or.jp/guideline/disease/gerd.html>胃食道逆流症(GERD)</a></p></blockquote><p>ここ1-2年、睡眠がうまくとれなくなったことと関連して、寝ていて胃酸が逆流してむせるといったことも2-3ヶ月に1回ぐらいと稀ではあるけれど、起きるということに気付いた。2年ほど前、健康診断で胃カメラを受診したときに医師から胃の入り口の弁が、普通の人は逆流しないように閉じているものが私のは開いているという話があった。そのときは特に日常生活に困ってないからいいんじゃないで流してたんだけど、加齢とともに胃食道逆流症が起こっているのかもしれないと、いくつかの事象を認識して思うようになってきた。喉の違和感も気になるようになっていた。その症状の軽減に逆流しにくいように傾斜を付けて寝るとよさそうというのをみつけて、傾斜枕を買ってみた。しばらく試してみて寝心地や胃食道逆流症がどうなるかを観察してみる。</p><p><a href="https://www.amazon.co.jp/dp/B07VNDPD8Y?&linkCode=li2&tag=t2y-diary-22&linkId=f2a28286ce04219213b577e23c7d45c4&language=ja_JP&ref_=as_li_ss_il" target=_blank><img border=0 src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B07VNDPD8Y&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=t2y-diary-22&language=ja_JP"></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&language=ja_JP&l=li2&o=9&a=B07VNDPD8Y" width=1 height=1 border=0 alt style=border:none!important;margin:0!important></p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1113/>寝てた</a></h1><div class=post-meta><span class=post-date>2021-11-13</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#勉強会兼もくもく会>勉強会兼もくもく会</a></li></ul></nav></div><div class=post-content><p>1時に寝て8時に起きた。もっと早く目覚めてはいたけど、休日なんでゆっくりするかとのんびりしてた。本を読んで眠くなってきたので夕方から帰って寝てた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週は勉強会の発表や週の真ん中で飲みにいってバテてしまってウォーキングは4日ぐらいしかできてなかった。前の週よりはあまり運動ができていない。前週からの右足太もも後ろの筋が張りはまだ少し残っているものの、ちょっとよくなった気がする。今日の開脚幅は開始前168cmで、ストレッチ後169cmだった。前週よりは数値がよくなって、また170cmの大台にのりそうな雰囲気になってきた。</p><p>中殿筋 (ちゅうでんきん) という、お尻の横の筋肉があまりよくなくて、ここが悪いと腰痛の原因になるらしい。歩いたり走ったりするときにも使う筋肉だという。<a href=https://kaiseihp.jp/news/id_14953>中殿筋のストレッチとトレーニング</a> のようなストレッチはいまもやっているけど、トレーニングはやってなかったのでまたやってみようと思う。</p><h2 id=勉強会兼もくもく会>勉強会兼もくもく会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/227757/>【三宮.dev オンライン】ついに出たぜNuxt3！Nuxt.js LT大会</a> に参加した。LT 発表する人が少なかったのでもくもく会になって本を読んでた。70歳の参加者の方がいて web 開発をするのに vue.js と react.js のどちらを選べばいいか？といった話題で盛り上がりつつ、その方の背景などを聞いていた。技術の話しは通じたのである程度、開発の素養もあってちゃんと勉強している人にみえた。私と同じマイクロ法人をやっているようで、自分のビジネスのアプリケーションを自分で開発するといったスタンスで取り組まれていて、70歳になってもやっている姿勢に敬意をもてた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1112/>打ち合わせでズタズタ</a></h1><div class=post-meta><span class=post-date>2021-11-12</span></div><span class=post-tags>#<a href=/diary/tags/morning-activity/>morning activity</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#朝活-ミクロ経済学入門の入門>朝活: ミクロ経済学入門の入門</a></li></ul></nav></div><div class=post-content><p>1時に寝て5時半に起きた。体調はよいが、新しい環境で働き始めたのと勉強会が続いたのでややバテた。今日は軽めの活動で休むことにした。今日は打ち合わせが3つ入って、作業が途中でズタズタになって集中力を書いた。打ち合わせするなら固めて連続的にやらないとなかなか難しいな。今週は新しい環境での仕事もあって疲れてたので17時にお仕事を終えて、夕方にお昼寝して、夜にオンライン飲み会でだべってた。</p><h2 id=朝活-ミクロ経済学入門の入門>朝活: ミクロ経済学入門の入門</h2><p><a href="https://www.youtube.com/watch?v=ddTgbwdpRzg">[金朝ツメトギ] 2021-11-12 AM 6 金曜朝6時開催のもくもく会</a> で第8章のリスクと保険を読んだ。用語を次にまとめる。</p><ul><li>条件付き財: 将来に特定の条件が成立したときのみ特定の行為を可能とする財<ul><li>例) 保険、賭けごと、宝くじ、投資など</li></ul></li><li>確実性等価: 不確実な対価と、それと無差別になる確実な金額における経済価値<ul><li>例) 50%の確率で1万円もらえるくじを、千円払って購入するときのくじの価格を確実性等価という</li><li>人々のリスクへの態度を分類する上で便利な概念になる</li></ul></li></ul><p>ある人は、それぞれの金額 <em>m</em> について、満足度の指標 <em>U(m)</em> をもっているとする。このとき <em>U(m)</em> を効用、<em>U</em> を効用関数と呼ぶ。</p><p><em>m</em> が増えると <em>U(m)</em> 、つまり効用も高まるが、それには限界がある。増える量は <strong>限界効用逓減</strong> の形になる。次の図では <em>U(5)</em> から <em>U(10)</em> になると <em>m</em> は2倍になるが、効用は2倍にはならない。ここで <strong>期待効用理論</strong> では「人は条件付き財を、効用を発生確率で加重和した <strong>期待効用</strong> で評価する」と考える。この <strong>期待値</strong> は 0.5 * 1万円 + 0.5 * 0円 = 5千円となる。効用は 0.5 x U(10) + 0.5 * U(0) となる。</p><figure><img src=/diary/img/2021/1112_Um.png></figure><p>確実性等価が期待値より高いか低いかは個人によって異なり、少額でも確実にもらえるお金を好むと確実性等価が期待値より低くなる。これを <strong>リスク回避的</strong> と呼び、多くの人々がリスク回避的だからこそ保険という商品が成立する。その逆で確実性等価が期待値より高くなることを <strong>リウス愛好的</strong> と呼ぶ。また確実性等価が期待値が等しいときは <strong>リスク中立的</strong> と呼ぶ。そして確実性等価と期待値の差額を <strong>リスクプレミアム</strong> と呼ぶ。</p><p>保険会社がある疾病の保険を提供し、顧客が加入する。顧客は自分がその疾病にかかりやすいかどうかを知っているが保険会社からはわからない。そのため一律の価格で保険を販売する。これを <strong>情報の非対称性</strong> と呼ぶ。この状態で疾病のリスクが高い人たちが増えていくと、保険会社はさらに保険料を引き上げる。それによってリスクの低い人たちが加入しなくなり、さらにリスクの高い人たちの割合を高めてしまう。これを <strong>逆選抜</strong> と呼ぶ。逆選抜の解消方法は、個々人のリスクとは無関係に強制的に保険に加入させてしまう。これが日本の国民皆保険制度と言える。さまざまな人のリスクを社会全体でヘッジ (低減) する仕組みであり、リスクの社会化と言える。</p><p>民間の保険会社が遺伝子検査などにより、利潤の追求のため、ハイリスクな顧客を除外しようとすることは不当なのかどうか、保険倫理に関わる難問である。この難問の存在が公的保険制度の意義が高めている。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1111/>PMBOK セミナー</a></h1><div class=post-meta><span class=post-date>2021-11-11</span></div><span class=post-tags>#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/subcontract/>subcontract</a>&nbsp;
#<a href=/diary/tags/pmbok/>pmbok</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#スクラム談義>スクラム談義</a></li><li><a href=#紙の契約書に挑戦>紙の契約書に挑戦</a></li><li><a href=#pmbok-セミナー>PMBOK セミナー</a></li></ul></nav></div><div class=post-content><p>22時に寝て4時半に起きた。昨日は勉強会を連日でやって疲れ果ててからバテてすぐに寝た。久しぶりによく眠れた。起きてから1時間ほどドラクエタクトやって、ストレッチやって、7時半にはオフィスに行って8時からお仕事してた。</p><h2 id=スクラム談義>スクラム談義</h2><p>お仕事で本格的なスクラム開発に参加することになった。スクラムマスターのかわのさんと少しスクラムで雑談した。アジャイル、スクラム、チケット駆動、課題管理などの話題であれこれ話してた。かわのさんはスクラムやアジャイルのアーリーアダプターのようで、かなり昔からやっているから経験や実績が多そうなので私の疑問や懸念に的確に返答をくれた。実際の現場でどう応用するかは別の話題としても、スクラムはそもそも「良い結果」を出すためのものではく「現状をありのままに見る」ものらしい。うまくやろうと思ったらスクラムにプラクティスや開発方法論を組み合わせないといけないし、そのための軽量フレームワークになっているのに、スクラムだけ実践すればうまくいくと誤解している人たちもいるといった話題もあった。私がスクラムうまくいってなさそうなチームをみていて微妙だと感じたのは、自分たちの課題に向き合ったプラクティスや改善に取り組んでなくて、スクラムの方法論を守ることに注力しているようにみえたからかもしれない。</p><h2 id=紙の契約書に挑戦>紙の契約書に挑戦</h2><p>新しいお仕事の契約は紙の契約で結ぶ。実はこれまで <a href=https://www.cloudsign.jp/>クラウドサイン</a> で電子契約しかしたことなくて、紙の契約書は初めてでどきどきした。言うても印鑑を押すだけなんやけどな。でも、印鑑押すのってきれいに押したいという気持ちが出てちょっと緊張するからあまり好きではない。</p><h2 id=pmbok-セミナー>PMBOK セミナー</h2><p><a href=https://aitrainingcenter.axis-ing.com/pmbok-quick>PMBOK®ガイド第7版 Quick Review</a> に参加した。</p><p>参加者は60人で、すでに PMBOK ガイド第7版を購入またはダウンロードした人が十数人だったらしい。
PMBOK ガイドは4-5年ごとに更新されるものらしい。
本セミナーでは第6版と第7版の違いがどういったものかの概要を説明していた。第7版は第6版の拡張であり、実務で PMBOK ガイドが必要な人は依然として第6版も購入した方がよいと話されていた。</p><p>というのは、第7版は過去のガイドを更新したものではなく、PMP 試験は第6版の時点でアジャイルな要素も取り入れているため、第7版のために変更を加えるといった予定は現時点ではない。
つまり、少なくとも PMP 試験やプロジェクトマネジメントの国際規格である ISO 21500 は第6版をベースにした内容があるため、それらが急になくなったりすることはないらしい。第6版と第7版の違いとして次のような話しをされていた。</p><ul><li>プロジェクトマネジメントの節目の切り口が変わった？<ul><li>第6版: プロセスベース</li><li>第7版: 原理原則</li></ul></li><li>第7版でガイドに <strong>チーム</strong> が登場するようになった<ul><li>主語がチームとなり、チームが○○するための原理原則はこうであるといった内容に変わった<ul><li>主役はプロセスではなくチーム</li></ul></li><li>プロジェクトにチームが寄り添うようになった</li></ul></li></ul><p>これらの違いは、第6版と第7版をテキストマイニングして、共起ネットワークを構築して比較してみるとよくわかると分析されていた。あとおもしろかったのが、第6版と第7版ではページ数は半減したものの、文字数は3割減程度となっており、箇条書きが多かった内容が説明ベースの文章に変わったためだろうといった話しもあった。</p><figure><img src=/diary/img/2021/1111_pmbok-text-mining.png></figure></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1110/>低空飛行</a></h1><div class=post-meta><span class=post-date>2021-11-10</span></div><span class=post-tags>#<a href=/diary/tags/bizpy/>bizpy</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#bizpy-勉強会>bizpy 勉強会</a></li></ul></nav></div><div class=post-content><p>3時に寝て7時半に起きた。昨日2時まで呑んだくれてたので水曜日の朝活はお休み。完全に忘れてたし寝坊した。やや2日酔いでしんどかったけど、朝にはちゃんと起きれたので体調はよい。お仕事では会議体の見直しがあって、私が必要な会議に invite されてなくてバタバタしてた。</p><h2 id=bizpy-勉強会>bizpy 勉強会</h2><p><a href=https://bizpy.connpass.com/event/229091/>Python で Slack のインテグレーションをやってみる勉強会 #2</a> を開催した。10人ほど参加してくれた。資料は作ってあったし、内容も難しくないものだったので管理画面の設定とコードをみながら1時間ほどで説明して、30分ほど質疑応答や雑談をしながら8時半には勉強会を終えた。前日の睡眠不足でしんどかったので早く終えて帰りたかったのもある。あと一回 Block Kit の開発をやって slack インテグレーションの勉強会は終えようと思う。次は12月1日なので年内はそれで終わりでいいかな。いまのうちに忘年会やりたい気持ちがあるけど、神戸だと人が集まらんやろなぁ。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1109/>呑んだくれ</a></h1><div class=post-meta><span class=post-date>2021-11-09</span></div><span class=post-tags>#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/github/>github</a>&nbsp;
#<a href=/diary/tags/slack/>slack</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/drinking/>drinking</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#中間申告の納付>中間申告の納付</a></li><li><a href=#github--slack-integration>GitHub + Slack Integration</a></li><li><a href=#みんなの-python-勉強会>みんなの Python 勉強会</a></li><li><a href=#呑み>呑み</a></li></ul></nav></div><div class=post-content><p>1時半に寝て6時に起きた。夜にウォーキングに出かけようとしたらたまたま雨が降ってきて諦めた。そしたら寝付けなかった。やっぱり歩いて疲弊すると寝付けやすいのかもしれない。ストレッチしたりしてたら寝るの遅くなった。</p><h2 id=中間申告の納付>中間申告の納付</h2><p>法人税・地方法人税の申告用紙が届いていたので内容を確認しながら e-tax で申請して pay-easy で税金の支払いを完了した。国税は一番最後に書類が届く。今年の書類が届いた日はこんな感じ。毎年記録しているから届く時期に準備していて慌てなくて済む。</p><ul><li>法人市民税: 10月16日</li><li>法人県民税: 10月20日</li><li>法人税・地方法人税: 11月8日</li></ul><p>国税の納付をもって中間申告をすべて終えた。中間申告は税金の先払いだからキャッシュフローが悪いと払えないみたいなことが起きる可能性がある。そうすると仮決算して支払い金額を抑えるみたいなことが必要になるんだろうな。まさに貧乏暇無し。</p><h2 id=github--slack-integration>GitHub + Slack Integration</h2><p><a href=https://github.com/integrations/slack>integrations/slack</a> の内容をみて subscribe する内容を確認した。4月頃にアップグレードしてそれまでの設定の互換性をなくして、その影響でうまく動かなかったりしてた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>github の slack 連携のときの commits:all が commits:* に変更されたみたい。4月中旬のバージョンアップ以降に作ったリポジトリか設定だと commits:all だと連携されないみたい。<a href=https://t.co/mGVUyEbgGQ>https://t.co/mGVUyEbgGQ</a></p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1387999605959188481?ref_src=twsrc%5Etfw">April 30, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>その後、追いかけてなかったけど、いま README をみたら次の5つのイベントはデフォルトで有効になるみたい。</p><ul><li>issues</li><li>pulls</li><li>commits</li><li>releases</li><li>deployments</li></ul><p>必要に応じて他のイベントも追加するとよいみたい。私は次の3つかな。</p><ul><li>reviews</li><li>comments</li><li>commits:*</li></ul><p>デフォルトのイベントは指定しなくてもよいけど、コピペですべて明示的に設定するならこんな感じ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/github subscribe owner/repo issues,pulls,commits:*,releases,deployments,reviews,comments
</span></span></code></pre></div><h2 id=みんなの-python-勉強会>みんなの Python 勉強会</h2><p><a href=https://startpython.connpass.com/event/228136/>みんなのPython勉強会#75</a> で発表した。参加者は190人となっているけど、実際に zoom に参加していた人の最高値は110人ぐらいだったかな。190 * 0.6 = 114 なので無料イベントの参加者数は6割前後の法則に合致する。人数が増えるほどこの法則は精度が高いように思う。発表者は3人いて、私は2番目に発表して、持ち時間は30分だった。録画していたので後でアーカイブをみれるようにするみたい。私は録画否定派で録画すると参加者がオンタイムで見なくなるのと、いつでも見れるものは見ないということもあるので勉強会のレベルは録画しなくてもいいんじゃないかと考えている。もちろん大きなカンファレンスは録画があった方が参加できない人も後から興味のある発表を見返せていいとは思う。25分発表で質疑応答5分で発表の時間配分はうまくいった。あまり準備できなかった割には伝えたいことはだいたい話せたと思う。なんか質疑応答で「カザモリ社は python のお仕事を受けてくれますか？」といった質問があってちょっと驚いた。ここ数年 python をメインにしたお仕事してなくて、仕事は java, go が多いと言っているせいか、python の仕事はやってないようにみえてしまうのかもしれない。python, java, go の3つの言語のお仕事は受けますよと回答した。発表終わってから1時間ほど懇親会をした。ほとんどコミュニティの主催者と発表者で雑談してた。久しぶりに外部の勉強会でいろんな人とお話することができて楽しかった。たまには外に出かけていくことに重要性も認識できた。またネタがあったら発表したいなとは思う。</p><h2 id=呑み>呑み</h2><p>懇親会が終わったのが22時で、疲れと空腹から仲のよい焼き鳥屋さんのお店に寄って晩ご飯を食べることにした。時短が終わっているので22時からでも飲みに行ける。お店は翌2時まで営業している。22時過ぎに行ったらお客さんは誰もいなくて、野菜サラダと焼き鳥を注文してマスターと雑談してた。</p><p>時短が終わってから景気はどうかを聞いてみると、まだまだお客さんの戻りはコロナ前とくらべてまだまだだという。0時まわってから他の飲食店で働いている人たちが店内を埋まるぐらいは来てくれていたそうだけど、まだまだ余裕がないのか全然戻ってきてないと話されていた。0時半頃に2人組で「○○さんの紹介で来ました」みたいな既に酔っ払っているお客さんが来たりして、終電終わってからこういうお客さんが来たりしていたんだなと雰囲気は理解できた。マスターも2時に閉店して5時まで開いている他の飲食店に飲みに行くと話してた。そうやってお互いにお店に飲みに行って付き合いのようなものができているんだというのが理解できた。どこかのスナック行って3万円ほど使っても、必ずそのスナックの人がお店に来てくれて3万円以上使ってくれるという。お金をまわすってそういうことなんやなとマスターの話しを聞いていて理解できた。自分のお店を2時に閉店して、5時まで飲み歩いて、それから寝てまた次の日に仕事というのは体力的にすごくしんどそうで、マスター自身もコロナ明けは体調をみながら飲み歩いているとも話されてた。結局、2時前までマスターと雑談してて、私も22時から4時間弱ほど居座ってた。久しぶりに外で飲んでハイになっていたかもしれない。</p><p>マスターのお勧めで <a href=https://www.hamadasyuzou.co.jp/daiyame_brand>だいやめ</a> という芋焼酎をお湯割りで飲んだ。香熟芋という珍し？芋を使っていて、ライチのような香りのする芋焼酎でおいしかった。お土産によさそうなので覚えておこうと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1108/>Kubernetes 使い始めの雑感</a></h1><div class=post-meta><span class=post-date>2021-11-08</span></div><span class=post-tags>#<a href=/diary/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#udemy-kubernetes入門>udemy: Kubernetes入門</a><ul><li><a href=#セクション6-kubernetes実践>セクション6 Kubernetes実践</a></li><li><a href=#セクション7-kubernetesのdebug>セクション7 KubernetesのDebug</a></li></ul></li><li><a href=#k8s-の調査>k8s の調査</a></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。夜にウォーキングし始めてからよく眠れるようになった気がする。</p><h2 id=udemy-kubernetes入門>udemy: Kubernetes入門</h2><p><a href=/diary/posts/2021/1107/#udemy-kubernetes入門>昨日</a> の続き。今日はセクション6から最後まで。CI/CD のセクションだけスキップして、他は一通り目を通した。</p><h3 id=セクション6-kubernetes実践>セクション6 Kubernetes実践</h3><p>1つずつ書くのは大変だけど、数をこなして徐々に覚えていけばよい。手で書くのもよいが、別のやり方としてクライアント側で dry run すると、設定のひな型を作ってくれるのでそれに必要な設定を足すのもよい。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl create deploy mysql --image<span style=color:#f92672>=</span>mysql:5.7 --dry-run<span style=color:#f92672>=</span>client -o yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl exec -n database -it mysql-787f86d65c-nflxx -- mysql -uroot -ppassword
</span></span></code></pre></div><p>データベースとアプリケーションを異なる namespace にデプロイして、それらが通信できるような設定を行う。基本的には <code>--dry-run=client</code> でひな型を作りつつ、必要な設定を追加していくやり方が簡単そうにみえた。とはいえ、実際に設定していくときはどういう設定を追加するとどういう振る舞いになるかを調べながら作業すると思うのでこんな簡単にはできないとは思う。次のようなアプリケーションをデプロイする一覧の流れを理解できた。</p><ol><li>namespace 作成</li><li>Deployment 作成</li><li>ConfigMap 作成</li><li>Secret 作成</li><li>Deployment, ConfigMap, Secret 適用</li><li>Service 適用</li><li>port-forward でローカルからアクセス</li><li>(作成したリソースをすべて削除)</li></ol><h3 id=セクション7-kubernetesのdebug>セクション7 KubernetesのDebug</h3><p>基本は pod のステータスを確認しながら問題があれば、その箇所を追いかけていって原因を調査する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl get pod -A
</span></span><span style=display:flex><span>$ kubectl get pod -A --selector run<span style=color:#f92672>=</span>nginx
</span></span></code></pre></div><p>k8s 上で実行しているアプリケーションの依存先へ接続できない場合は Service の確認が必要となる。kubectl の get, describe, logs などのサブコマンドをあれこれみながらエラーの原因を把握して、yaml の設定を変更していく。k8s のアーキテクチャとコマンドを覚えていないとなかなか難しそう。</p><p>とりあえず動かした後にまとめて全部削除できるのがテストやデバッグに便利そう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl delete -f .
</span></span></code></pre></div><p>もしくは開発用に独自の namespace を作成して、あとで丸ごと namespace を削除するのでもよさそう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl delete ns mynamespace
</span></span></code></pre></div><h2 id=k8s-の調査>k8s の調査</h2><p>業務のアプリケーションを minikube で作ったローカル k8s クラスターで動かしてみた。ローカルの開発環境の構築方法をメンテナンスして、自分でも一通り k8s の yaml を書いて、デプロイして、振る舞いを確認したりしていた。最初なのでおもしろい。自分で一通りやってみて、k8s が難しいとみんなが言っているのは k8s クラスターを自前で構築するのが難しいのだとようやく理解できた。k8s クラスターがすでにある状態なら kubectl の使い方を覚えるだけで全く難しくない。GKE や EKS を使って運用するなら k8s の運用コストは大したことがないと理解できた。k8s クラスター向けの yaml はたくさん書かないといけないけど、どうせ ECS や EC2 でやっていても CDK や Terraform などのインフラ設定を書くのは同じなのでそこはあまり差がない。k8s はコンテナオーケストレーションをやってくれるメリットが大きいので minikube と EKS の環境の差異があまり問題にならないようなアプリケーション開発であれば、普通に使っていって問題ないように思えた。ローカルで環境作るのが大変なんじゃないかという先入観があったけど、全然そんなことはなかった。コンテナのイメージをビルドしないといけないのが追加のコストかな。</p></div></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=/diary/page/51/><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a></span>
<span class="button next"><a href=/diary/page/53/><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/diary/assets/main.js></script>
<script src=/diary/assets/prism.js></script></div></body></html>