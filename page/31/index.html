<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.109.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1031/>東京出張</a></h1><div class=post-meta><span class=post-date>2022-10-31 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/biztrip/>biztrip</a>&nbsp;
#<a href=/diary/tags/team-building/>team building</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#東京出張>東京出張</a></li><li><a href=#自己紹介大会>自己紹介大会</a></li><li><a href=#プロジェクトの情報共有>プロジェクトの情報共有</a></li><li><a href=#懇親会>懇親会</a></li></ul></nav></div><div class=post-content><p>1時半に寝て3時半に起きて4時半まで仮眠して準備して5時41分に家を出た。出張も3年振りで寝過ごすのが怖くてうまく眠れなかった。</p><h2 id=東京出張>東京出張</h2><p>3週間以上前に新幹線を予約すると <a href=https://smart-ex.jp/product/hayatoku/ex_21/>EX早特21ワイド</a> という割引サービスがあって
東京・品川から新神戸だと15,380円が12,630円と2,750円と18%もの割引でお得。6時55分の新幹線の予約をしていた。スマート ex の予約のやり方を忘れてたり、地下鉄のホームを間違えたりしていて朝ちょっと早く出掛けてちょうどよかった。段取りが読めないことは30分以上早く行動するのが安心できてよい。</p><h2 id=自己紹介大会>自己紹介大会</h2><p>お手伝い先のオフィスに到着し、一息ついてから自己紹介大会になった。1つの会議室に20人ぐらい、リモートからも10人ぐらい参加されていて全社員だったのかな？自己紹介大会をしていただいた。チーム内でのみ行うと考えていたのでたくさん参加者がいて緊張した。30人程度というのはそういうことができるぎりぎりの人数かもしれない。暖かい雰囲気の会社だなと思った。<a href=/diary/posts/2022/1030/#神戸お土産探し>お土産のお菓子</a> が16個入りで数が足りないことにこのとき気付いた。チームと関係者のみだったら16個もあれば十分と安易な考えだったと気付いた。失敗。</p><h2 id=プロジェクトの情報共有>プロジェクトの情報共有</h2><p>午後から数時間をとってチームメンバーとプロジェクトの情報共有を行った。いまみえてて伺っている内容だけなら私の経験から全体の技術体系ややりたいことも見通すことができて、全部自分1人で開発しても提示された期間内にはできるように思えた。しかし、今回はマネージャーというポジションで若い開発者に実務を担当してもらうことになる。自分が手を動かすのではなく他人にやってもらう新しいキャリアへの挑戦になる。私がビジネスとして取り組みたい課題管理の探求にも力を入れたい。今回のお仕事は千載一遇のチャンスなので集中して取り組んでいきたい。</p><h2 id=懇親会>懇親会</h2><p>初日は早々に業務を終えて関係者とチームで懇親会を3時間ぐらい行った。昔働いていた会社の同僚・先輩方がいて、やや平均年齢の高いメンバーだったので昔話や同世代の価値観のお話ができて楽しかった。40代以上の人が集まるとすぐ健康の話になって若い人がいると申し訳ない。運動しないと50歳ぐらいになると動けなくなるぞと念を押されたので注意しようと思った。初日は自己紹介、会議、懇親会とたくさんチームのメンバーと話すことができたので初日から随分打ち解けて話せるようになった。感謝。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1030/>速く巧く文章を書けるようになりたい</a></h1><div class=post-meta><span class=post-date>2022-10-30 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/kobe/>kobe</a>&nbsp;
#<a href=/diary/tags/gift/>gift</a>&nbsp;
#<a href=/diary/tags/document/>document</a>&nbsp;
#<a href=/diary/tags/information-exchange/>information exchange</a>&nbsp;
#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;</span>
<img src=/diary/img/2022/1030_richfield.jpeg class=post-cover alt=速く巧く文章を書けるようになりたい><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#神戸お土産探し>神戸お土産探し</a></li><li><a href=#開発者として効果的に伝える方法>開発者として効果的に伝える方法</a></li><li><a href=#課題管理の勉強会の資料作り>課題管理の勉強会の資料作り</a></li></ul></nav></div><div class=post-content><p>2時に寝て7時に起きた。タスクが全然消化できなくてしんどい。ただ燃え尽き症候群は落ち着いて次に向けての気力が出てきた。</p><h2 id=神戸お土産探し>神戸お土産探し</h2><p>3年ぶりに出張が増えそうなので神戸のお土産探しも始めようと思う。今回は <a href=https://www.rich-field.biz/>リッチフィールド</a> さんのバウムクーヘンと丹波みるく黒豆萬をもっていく。オンラインで注文すると取り寄せに1週間かかる。ちょうど発注するときのタイミングが悪くて間に合わない。店頭受け取りだとそのリードタイムが4日になる。明石駅に店舗があったので電車に乗って朝9時から受け取りに行ってきた。電車の待ち時間を含めて往復で約1時間で受け取れる。もっていくお土産は自分がおいしいと思うものをもっていきたいという考えもあって単品でも購入して食べてみた。バウムクーヘンはしっとりした食感で普通においしい。プレーンよりも黒糖の方が風味の自己主張が強いという特徴があって私は好きかな。丹波みるく黒豆萬は濃厚なミルク餡で丁寧で上品なお菓子という印象を受けた。甘いのが苦手な人はややしつこいかもしれないけど、普通においしいと思う。黒豆がちょこんとのっているのが他の乳菓子との差別化かな。(なんの認定にもならないが) 私の審査は軽く通るお土産だとわかった。</p><h2 id=開発者として効果的に伝える方法>開発者として効果的に伝える方法</h2><p>関心のあるタイトルをタイムラインでみかけたので読んでみた。</p><ul><li><a href=https://www.karlsutt.com/articles/communicating-effectively-as-a-developer/>How to communicate effectively as a developer</a></li></ul><p>期待したほど私にとって参考になることが書いてあったわけではないけれど、読んでみて参考になることはいくつかあった。著者は「効果的に伝えることを共感的に文章の解像度を高めること」と定義している。私の周りでもエンジニアリングの文脈で解像度の高低というキーワードをよく聞く。一方で共感というキーワードを私は意識していなかったのでこれは素直に参考になった。読み手を想像してその人が共感できるように書くことの重要性に言及している。empathically=「共感して、親身になって」という意味だから日本語らしく訳すと相手の気持ちに寄り添って書くとか、相手のために親身になって書くとか、それ自体はよいことのように思える。高解像度、且つ共感性の高い文章を書くことは労力を要するものの、次のことから win-win-win だと著者は表現している。</p><ul><li>読者はより深く理解し、レベルアップする</li><li>組織は知識の共有が進み生産性が向上する</li><li>自分の考えを伝えるのが上手になり、キャリアアップにつながる</li></ul><p>いまとなっては後の祭りではあるが、私がいまの3倍速く巧く文章を書ければたしかにもっとキャリアップできていた気がする。書こうと思いながら筆が進まずに断念した文章はいくつもある。最後の結びの言葉も気に入った。</p><blockquote><p>自分が相手の立場なら喜んで読んでくれるような文章を書きましょう。</p></blockquote><h2 id=課題管理の勉強会の資料作り>課題管理の勉強会の資料作り</h2><p>来週の出張で使うかもしれない課題管理の勉強会向けの資料の叩き台を作った。過去の資料を見返しながらスライドを作り直していた。過去に資料を作ったときは納得して作ったものを、いま見返すと誤解している箇所があったり、あまり重要とは思えなかったり、当たり前の話しだけど、スライドやドキュメントも時間が経って見返すと粗が目立つようになる。こういうとき私は自分を信じないと再確認できて慢心せずにすむ。常に課題管理システムに日々の学んだこと、考えたことを書き続け、チケットの構成を整理し直したり、チケットとチケットの関連を結びつけたりしているうちに過ちや無知に気付くきっかけになる。この暗黙知をいつか形式知として言語化できるようになりたい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1029/>出張の準備</a></h1><div class=post-meta><span class=post-date>2022-10-29 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/terminal/>terminal</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#wezterm-移行>wezterm 移行</a></li><li><a href=#コワーキングのオンラインイベント>コワーキングのオンラインイベント</a></li></ul></nav></div><div class=post-content><p>0時に寝て7時に起きた。今週は仕掛かりの開発タスクを完了させるのと送別会やら挨拶やらで終始バタバタしていた。終わったらちょっと気が抜けて一時的な燃え尽き症候群のような状態になった。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前157cmで、ストレッチ後161cmだった。まずまずの数値。右の股関節周りが張りがあるというか関節痛がある。とはいえ可動域は少しずつ増えている気はするのでこれまでのストレッチの成果が表れて良好であるようにも感じている。ストレッチを受ける前後でも股関節の違和感は随分解消されたので疲労も溜まっていたのかもしれない。</p><h2 id=wezterm-移行>wezterm 移行</h2><p>タイムラインで <a href=https://github.com/wez/wezterm>wezterm</a> がよさそうという記事をみかけたのでインストールしてみた。ターミナルにそんなこだわりはないけど、変わっていくことも大事なので余裕があれば新しいものは試すようにしている。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>たまたまみかけて、ちょうどマシンを移行したばかりなので wezterm をインストールしてみた。 <a href=https://t.co/ZnRaSgHfwO>https://t.co/ZnRaSgHfwO</a></p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1586279867632746496?ref_src=twsrc%5Etfw">October 29, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>まつのさんの設定に次の2つの設定を追加した。</p><ul><li>タブ移動とタブ選択のキーバインドを変更<ul><li><a href=https://wezfurlong.org/wezterm/config/keys.html>https://wezfurlong.org/wezterm/config/keys.html</a></li><li><a href=https://wezfurlong.org/wezterm/config/lua/keyassignment/MoveTabRelative.html>https://wezfurlong.org/wezterm/config/lua/keyassignment/MoveTabRelative.html</a></li><li><a href=https://wezfurlong.org/wezterm/config/lua/keyassignment/ActivateTabRelative.html>https://wezfurlong.org/wezterm/config/lua/keyassignment/ActivateTabRelative.html</a></li></ul></li><li>ターミナルのビープ音を無効<ul><li><a href=https://wezfurlong.org/wezterm/config/lua/config/audible_bell.html>https://wezfurlong.org/wezterm/config/lua/config/audible_bell.html</a></li></ul></li></ul><p>これまで一度も lua を書いたことがないので設定ファイルを lua で記述するのが新鮮。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> wezterm <span style=color:#f92672>=</span> require <span style=color:#e6db74>&#39;wezterm&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> act <span style=color:#f92672>=</span> wezterm.action
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>  keys <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    { key <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;LeftArrow&#39;</span>, mods <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;CMD&#39;</span>, action <span style=color:#f92672>=</span> act.MoveTabRelative(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) },
</span></span><span style=display:flex><span>    { key <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;RightArrow&#39;</span>, mods <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;CMD&#39;</span>, action <span style=color:#f92672>=</span> act.MoveTabRelative(<span style=color:#ae81ff>1</span>) },
</span></span><span style=display:flex><span>    { key <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;LeftArrow&#39;</span>, mods <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;OPT|CMD&#39;</span>, action <span style=color:#f92672>=</span> act.ActivateTabRelative(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) },
</span></span><span style=display:flex><span>    { key <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;RightArrow&#39;</span>, mods <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;OPT|CMD&#39;</span>, action <span style=color:#f92672>=</span> act.ActivateTabRelative(<span style=color:#ae81ff>1</span>) },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  audible_bell <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Disabled&#39;</span>,
</span></span><span style=display:flex><span>  use_ime <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  font_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>14.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- https://wezfurlong.org/wezterm/colorschemes/index.html</span>
</span></span><span style=display:flex><span>  color_scheme <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;OneHalfDark&#34;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>月例のカフーツさんのオンラインイベントに参加した。<a href=/diary/posts/2022/0913/#コワーキングのオンラインイベント>先月の所感はここ</a> 。いとうさんが長野県佐久市へ行かれたお話しが中心だった。現時点ではブログ記事は前編だけ公開されている。</p><ul><li><a href=https://note.com/kanzan10to9/n/nc06473c67dba>【前編】信州佐久で地域複業のココロを学んできた〜Beyond the Coworking Vol.18</a></li></ul><p>この内容もおもしろかったのだけど、ブログにも内容があるので関心があれば購入して読んでみるとよいと思う。余談だけど、いとうさんが旅程を写真でふりかえりながらラーメンの写真が出てきて「このラーメンはまずかった」と吐き捨てるようにつぶやいたのがおもしろかった。その後、長野県つながりで上田市のはたらクリエイトさんの話題に発展した。</p><ul><li><a href=https://hatakuri.jp/>株式会社はたらクリエイト ｜「はたらく」をクリエイトすることで仕事を楽しむ人を増やす</a></li></ul><p>主婦向けの受託仕事を行う場としてのコワーキングスペースから始まって、規模や組織が拡大していって、コワーキングスペースを株式会社化し、そこにいた人たち70名を社員にしたという。会社内に託児所もあり保育士も社員になっている。創業時は役員以外は女性社員のみだったらしい。その後、社員が130人まで増えていまは役員を除いた男性社員が3名。多くの男性は女性しかいないコミュニティに入っていけないと私は考えていた。そして、いとうさんが盲点だったと話しを続けて私も気付いた。この3名ともシングルファーザーだという。世の中の主婦が抱えている課題とシングルファーザーの課題は共通するところが多い。その共感が女性しかいないコミュニティに男性社員が入る余地をもたらしているのだと推測する。マイナーな属性の男性の存在は社会的に無視されやすい。この視点だけでも今日のオンラインイベントに参加してよかったと思えた。</p><p>はたらクリエイトさんの関連サービスで GoKaLab というものがあり、このキャッチフレーズはいいなと気持ちが揺れた。</p><blockquote><p>GoKaLab.（ゴカラボ）は、コワーキングスペースのような『研究所』です。</p><p><a href=https://gokalab.jp/>https://gokalab.jp/</a></p></blockquote><p>いとうさんがコワーキングスペースで働く人たちは仕事を楽しんでいる人が多いと話していた。たしかに普通の会社員よりも目的をもち、行動力がある人たちの方が多いように私も思える。「仕事を楽しむ」というコンセプトは行き過ぎた資本主義に対するアンチテーゼと言えるのかもしれない。はたらクリエイトさんの創業者の話しを伺う分には売上や利益を求めているようにはみえない。普通の会社にあるような売上や利益の目標に縛られるようなこともないのではないかと思えた。</p><p>会社は働きたい人が働きたいだけ働くような場所になればいいと私も常々考えていた。公平感と納得感を与えるために目標制度を設けることもないし、働きたくない人たちを監視したり、無理やり働かせるための施策を練ったりすることもない。そのヒントは「仕事を楽しむ」にもあるかもしれない。</p><p>フリーランスの話題のときに説明したら軽くうけた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>麻婆豆腐の素から作った麻婆豆腐でもそこそこおいしかったらそれで満足するお客さんもいる。すべてのお客さんが素材から作った麻婆豆腐を求めているわけでもない。</p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1586356897216860160?ref_src=twsrc%5Etfw">October 29, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1028/>1年間に渡ったお手伝いの最終日</a></h1><div class=post-meta><span class=post-date>2022-10-28 (Fri.)</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#隔週の雑談>隔週の雑談</a></li><li><a href=#プロジェクトの最終日>プロジェクトの最終日</a></li></ul></nav></div><div class=post-content><p>2時に寝て7時に起きた。昨日は23時ぐらいまで送別会やっててまた寝るのが遅くなった。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。</p><ul><li><a href=/diary/posts/2022/1025/#オフィスの引っ越し計画>オフィス引っ越し計画</a> の共有</li><li><a href=/diary/posts/2022/1005/#SECI-モデルのワークショップ>SECI モデルのワークショップ</a> の共有</li></ul><p>昨日の送別会で、システムはいくらでも社員を監視して効率や最適化を要求できるけれど、そんな働き方は嫌だろうし、幸せじゃないだろうと私が話した。それに対して次のような反論がきた。</p><blockquote><p>そんなことはなく誰か (何か) に管理されたいと考える人間の方が多数派だ</p></blockquote><p>私はまったく同意しないのだけど、はらさんにも聞いてみた。リスクの多寡や有無ではないかと。リスクを取りたくない≒管理されたいと考える人が多いのではないかと答えてくれた。上司の言うことさえ聞いていれば自分は何も責任を負わなくてよいと考える人たちが一定数いることは私も理解できるが、そんな卑屈な人たちが多数派になるのかな？とやはり懐疑的に思えた。</p><h2 id=プロジェクトの最終日>プロジェクトの最終日</h2><p>スプリントレビュー、送別会、今日のデイリースクラムと、今週は「最後なんで」の挨拶を3回ぐらいした。毎回話すことを用意しているわけでもなかったので即興で話すわけだけど、こういうところを私はもう少し準備してちゃんとした方がよいのかもしれないと反省もした。<a href=/diary/posts/2022/1019/#上司道-リーダーはレジリエンスを高める自己肯定感を学ぼう>自己肯定感のセミナー</a> でも書いたが、私は他人との比較をやめてから自分の尺度でしか生きていない。このプロジェクトで私が為したことはもちろん私の全力ではあるが、私がもてるスキルや知識のすべてを提供できたわけではない。それは組織の壁、業務の壁、伝えるスキルの稚拙さなど、様々な要因がある。一切の他責はなく、いまの成果物はすべて私の実力を反映しているものだけれども、その成果に自分自身では満足していない。10段階で言えば3ぐらいの成果だろう。自分では低い評価を下しているにも関わらず、他人からの賞賛を受け入れるのは難しい。辞めるときなので社交辞令もある。それも考慮して感謝の言葉をもらうときに、自分はそんな感謝を伝えられることをしていないというギャップに違和感を覚える。これは何を為しても満足できない、私が抱えている心の闇かもしれない。</p><p>それはともかくプロジェクトメンバーが <a href=https://www.yosetti.com/>オンライン寄せ書き</a> にメッセージを書いて送ってくれた。オンラインの寄せ書きは無料だけど1年経つと削除されてしまう。メンバーが私のためにわざわざ時間をとって書いてくれた寄せ書きが消えてしまうというのはみんなに申し訳ない気持ちになって、プリントしてお届けを購入 (2,948円) することにした。情に訴えるビジネスモデルは抗いがたい。せっかくなので内容を秘匿して会社の宣伝にも使うかなぁ。</p><p><a href=/diary/posts/2022/0917/#葬送のフリーレン>葬送のフリーレン</a> で勇者ヒンメルは依頼人とあっさり別れるといったエピソードが出てくる。</p><blockquote><p>旅をしてる以上また会うことだってあるだろう、また会った時恥ずかしいからね。</p></blockquote><p>依頼人から報酬を受け取って貸し借りなし。それでお終い。この感覚は私にもあって、いまの時代、一緒に働いた同僚と離れても転職やなにかの縁でまた一緒に働くことは多々ある。あまり仰々しくしたくないと私も思う。送る側も良かれと思って気遣いしてくれている。それもわかるのでこういう価値観を伝えるのはなかなか難しい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1027/>sql の group concat という組み込み関数</a></h1><div class=post-meta><span class=post-date>2022-10-27 (Thu.)</span></div><span class=post-tags>#<a href=/diary/tags/postgresql/>postgresql</a>&nbsp;
#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#本番リリース後の緊急対応>本番リリース後の緊急対応</a></li><li><a href=#送別会>送別会</a></li></ul></nav></div><div class=post-content><p>2時に寝て7時に起きた。昨日の hannali dao が盛り上がった影響で夜更ししてた。</p><h2 id=本番リリース後の緊急対応>本番リリース後の緊急対応</h2><p>昨日あるバッチ処理の本番リリースを行った。そのバッチ処理は本番環境のデータがないとテスト環境ではあまり有効な検証ができない。昨日は別のバグがあって実行できていなかったのを今日直して再実行したらまた別のバグを発見した。sql である集合を取得するときのグルーピングの条件が適切ではなかった。postgresql で <a href=https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html#function_group-concat>mysql でいうところの group_concat</a> に相当することをやりたい。<a href=https://bipp.io/sql-tutorial/postgresql/string_agg/>How to Use string_agg()</a> のチュートリアルをちょっとカスタマイズして引用する。次のようなデータがあると仮定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> teams ;
</span></span><span style=display:flex><span>  team_name  <span style=color:#f92672>|</span> team_member <span style=color:#f92672>|</span> num
</span></span><span style=display:flex><span><span style=color:#75715e>-------------+-------------+-----
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> Barcelona   <span style=color:#f92672>|</span> Messi       <span style=color:#f92672>|</span>   <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> Piquet      <span style=color:#f92672>|</span>   <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> (<span style=color:#66d9ef>null</span>)      <span style=color:#f92672>|</span>   <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Ronaldo     <span style=color:#f92672>|</span>   <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Benzema     <span style=color:#f92672>|</span>   <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span> Real Madrid <span style=color:#f92672>|</span> Ramos       <span style=color:#f92672>|</span>   <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>6</span> <span style=color:#960050;background-color:#1e0010>行</span>)
</span></span></code></pre></div><p>このときに team_name に対して team_member も集約して数値の合計を取りたいときがある。<code>string_agg</code> という組み込み関数を使うとできる。null があっても無視して数値の合計はしてくれる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> team_name, string_agg(team_member, <span style=color:#e6db74>&#39;,&#39;</span>), <span style=color:#66d9ef>sum</span>(num) <span style=color:#66d9ef>from</span> teams <span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> team_name;
</span></span><span style=display:flex><span>  team_name  <span style=color:#f92672>|</span>      string_agg       <span style=color:#f92672>|</span> <span style=color:#66d9ef>sum</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-------------+-----------------------+-----
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> Real Madrid <span style=color:#f92672>|</span> Ronaldo,Benzema,Ramos <span style=color:#f92672>|</span>   <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span> Barcelona   <span style=color:#f92672>|</span> Messi,Piquet          <span style=color:#f92672>|</span>   <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>2</span> <span style=color:#960050;background-color:#1e0010>行</span>)
</span></span></code></pre></div><h2 id=送別会>送別会</h2><p>プロジェクトの区切りの打ち上げと、私が今週末で契約終了となるので送別会を兼ねて催してくれた。感謝。実はこれまでプロジェクトの打ち上げに私は参加してこなかった。それは複数の意図があった。オンライン飲み会だと人数が多いほど話しにくいし、若い人たちだけの方が年長者に配慮しなくてたくさん話せていいんじゃないかと考えていた。私のような老い先短いメンバーがチームに馴染んでなくても日々の業務に変わりはないし、業務で発言しにくいといったこともないし、他に山ほど仕事の積み上げがあって他のことに時間を使えるならそれに越したこともない。過去に2-3回打ち上げしていたと思うけど、私は今回が最初で最後の参加となった。</p><p>都合のある人はばらばら抜けたりもしていたけど、9人ほどずっと参加していて20時から始めて23時過ぎまでやっていた。この人数だと、みんなが話せるというわけでもなくて、本当に2つのグループに分けて雑談した方がよかったのかもしれない。私は1-2割ぐらいの時間を話していたと思うけど、ほとんど聞いているだけで話さないメンバーも半分ぐらいはいたと思う。それは年長者がたくさん話せるように配慮して若い人たちが話しにくいというのは実際にあるのではないかなとも思えた。終わりの時間を決めておかないと延々話しが続いてしまう。チキンレースみたいになってしまって誰かが抜けると言わないと終わらない雰囲気になってしまった。それが23時過ぎで、ある人がそろそろ抜けますと宣言して「私も」「僕も」と続いて、じゃあお開きにしましょみたいなノリで解散となった。いろいろな話しができて楽しかった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1026/>hannali dao に参加した</a></h1><div class=post-meta><span class=post-date>2022-10-26 (Wed.)</span></div><span class=post-tags>#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/information-exchange/>information exchange</a>&nbsp;
#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/dao/>dao</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#最後のふりかえりイベント>最後のふりかえりイベント</a></li><li><a href=#hannali-dao-始動>hannali dao 始動</a></li></ul></nav></div><div class=post-content><p>23時に寝て1時に起きて2時間ほどだらだらしてて6時に起きた。</p><h2 id=最後のふりかえりイベント>最後のふりかえりイベント</h2><p>最終週なのでこのチームでのスプリントのふりかえりは今日が最後になる。メンバーが気を遣ってくれてこれまでの活動に感謝を伝えてくれた。いくつか出たコメントをあげる。</p><ul><li>インフラを整備した</li><li>チケット駆動開発の基礎を伝えた<ul><li>課題管理のよさもわかってきた</li><li>メンバーが課題管理を行う習慣化につながった</li></ul></li><li>社内でもっとも backlog を使いこなしているチームになった</li></ul><p>1年に渡って開発に参加して課題管理を見守ってきたので課題管理とは何ぞやの基礎をメンバーの大半は理解できるようになったと思う。(私からみて) ワークフローを洗練させるという視点で現状の運用は入門レベルではあるけれど、根っこの部分をちゃんと理解できているメンバーもちらほらみえてきたのであとは時間とともに上達していくのではないかと思う。このままもう2-3年取り組めばスクラムに頼らなくても高い生産性と迅速な情報共有ができるチームになるかもしれない。1年前はチームで課題管理がほとんどできていなかったのに、いまは大半のメンバーがやろうとするようになった。他のメンバーの行動を変えられたのが私としても嬉しい。いくつかの組織やチームで何度もやってきたことなので半年から1年あればできるというのは一定の信頼がおけて自信ももっている。今後の私の課題としてはこれを3ヶ月で達成する、1ヶ月で達成するための体系化やリーダーシップを作り上げていくことが考えられる。</p><h2 id=hannali-dao-始動>hannali dao 始動</h2><p><a href=https://hannari-python.connpass.com/event/262428/>Hannali DAO</a> に参加した。<a href=https://www.meta.com/ja-jp/help/quest/articles/horizon/getting-started-in-horizon-workrooms/migrate-to-meta-account-workrooms/>Metaアカウントへの移行(Workrooms向け)</a> によると、2022年8月30日以降は meta アカウントではないと workrooms にアクセスできないらしい。ここ2-3ヶ月 workrooms を使っていなかったのでまとめてシステムのアップグレードや meta アカウントの移行なども行った。まったく難しくなくて手順通り作業を進めればアップグレード作業も含めて1時間もあれば完了するぐらいの作業量。当初は workrooms で開催する予定だったが、諸事情あって zoom 開催になった。とはいえ metamask の設定などをいろいろやっていたので結果的に zoom でよかった。</p><p>おがわさんが作った dao で利用できる PROG という名前のカスタムトークンをメンバーに配って受け取る。受け取る方も metamask で <a href=https://wallet.polygon.technology/>wallet</a> と接続しないと受け取れない。polygonscan というサイトで自分のアドレスへの polygon ネットワークのトランザクションを次の uri で確認できる。PROG というカスタムトークンを 50 受領しているのがわかる。</p><ul><li><a href="https://polygonscan.com/token/0x14e1bd8689c150509a14db70b2d8c8cd33747cdf?a=0xe1688b4b017ae362261f14415cc0db72b8b53e10">https://polygonscan.com/token/0x14e1bd8689c150509a14db70b2d8c8cd33747cdf?a=0xe1688b4b017ae362261f14415cc0db72b8b53e10</a></li></ul><p>これだけのことをやるのにまったく作業の勘どころが働かなくてみんな四苦八苦していた。たったこれだけを2時間ぐらい。その後、dao や世の中の事例について雑談。お互いの情報共有になっておもしろかった。私は web3 関連に技術体系には否定的なスタンスを取る方だけど、技術そのものを否定しているわけではなく、なにかしら価値はあると考えているのでどういった用途に使うのがよいのかを探りたいという思いがある。最後にそれぞれのメンバーがもっている PROG トークンの比率に応じて投票権をもつ。みんなの投票結果を使って次の開催日を決めてみた。本当の投票は手数料がかかるトークンを使ったアプリになるのだろうけど、このアプリは手数料なしで使えるらしい。</p><ul><li><a href=https://snapshot.org/#/hannalidao.eth/proposal/0x2a0d62d602edc7b34e230e6cab4c63f0965e10b972aa78bc02ab6aa67e877dd8>次のDAO イベントいつやる？</a></li></ul></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/1025/>引っ越しタスクの計画に着手</a></h1><div class=post-meta><span class=post-date>2022-10-25 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#バッチ処理移行のリファクタリング>バッチ処理移行のリファクタリング</a></li><li><a href=#オフィスの引っ越し計画>オフィスの引っ越し計画</a></li></ul></nav></div><div class=post-content><p>2時過ぎに寝て7時半に起きた。眠れなくて夜更しした。</p><h2 id=バッチ処理移行のリファクタリング>バッチ処理移行のリファクタリング</h2><p>昨日の時点でスプリントのタスクを完了していたので空き時間に適当なリファクタリングを行う。k8s の cronjob を使い始める以前 <a href=/diary/posts/2022/0810/#アプリケーションからジョブへの移行>spring の Scheduled アノテーションを用いた定期処理</a> を使っていた処理のうち、優先度が低くて残っていた最後の1つを対応することにした。その処理を作ったのが私だったので私が移行した方が効率がよいだろうという話し。サーバーアプリケーション、バッチ処理 CLI、手動実行のためのフロント画面の修正と3箇所直す必要があったけれど、私がやれば半日もかからず移行できた。</p><h2 id=オフィスの引っ越し計画>オフィスの引っ越し計画</h2><p><a href=/diary/posts/2022/1020/#窓付きオフィスの契約>オフィスの引っ越し</a> が決まったので引っ越しタスクを整理していた。次の5つのタスクになる。契約はすでに完了しているので残りは4つ。</p><ul><li><del>引越し先オフィスの契約</del></li><li>引っ越し業者の手配</li><li>本店移転の行政手続き</li><li>現オフィスの退去の手続き</li><li>名刺の再作成</li></ul><p>オフィスを引っ越しすると、いくつか行政手続きにおける住所変更が必要になる。うちは就業規則を扱っていないので労働基準監督署とは関わりがない。たぶん3つだけ。</p><ul><li>法務局</li><li>税務署/都道府県税務所</li><li>年金事務所</li></ul><p>登記事項証明書を変更するとまた手数料に3万円かかる。それはともかくオンラインでできないかも調べてみた。<a href=https://www.moj.go.jp/MINJI/minji60.html>商業・法人登記のオンライン申請について</a> に手続きの方法が書いてあったけれど、この文章を読んで理解するよりも法務局行って書類に記入した方が速いように感じた。自転車で10分の場所に法務局があるので法務局のオンライン申請とか考えないことにする。</p></div></div><div class=pagination><div class=pagination__buttons><a href=/diary/page/30/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/page/32/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>