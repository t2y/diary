<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.109.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0602/>能と妄想力</a></h1><div class=post-meta><span class=post-date>2023-06-02 (Fri.)</span></div><span class=post-tags>#<a href=/diary/tags/noh/>noh</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</a><ul><li><a href=#第六章-能は漱石と芭蕉をこんなに変えた>第六章 能は漱石と芭蕉をこんなに変えた</a></li><li><a href=#第七章-能は妄想力をつくってきた>第七章 能は妄想力をつくってきた</a></li><li><a href=#第八章-能を知るとこんなにいいことがある>第八章 能を知るとこんなにいいことがある</a></li></ul></li></ul></nav></div><div class=post-content><p>22時に寝て何度か起きて7時に起きた。朝から雨降りで、お昼頃に緊急警報で高齢者は避難しろとか防災通知がたくさん来ていた。お昼は雨が強かったのでお昼ご飯を食べずにお仕事していた。前日の続きで go-ldap の調査とコードレビュー対応とコードレビューをして勉強会に参加したらいい時間帯になって業務を終了した。</p><h2 id=能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</h2><p><a href=https://www.shinchosha.co.jp/book/610732/>能―650年続いた仕掛けとは―</a> を読んでいる続き。一通り読み終えた。著者の見解に100%同意できるわけではないが、能を知るための入門本として読みやすく、歴史の流れも学べておもしろい構成になっていると思う。後日、総括する。</p><h3 id=第六章-能は漱石と芭蕉をこんなに変えた>第六章 能は漱石と芭蕉をこんなに変えた</h3><p>松尾芭蕉が能の謡から大きな影響を受けていることは <a href=/diary/posts/2023/0517/#コワーキングのオンラインイベント>別の本</a> も購入しているのでそちらで触れる。著者は芭蕉が旅に出た目的の1つとして鎮魂をあげている。能が江戸幕府を始め、それまでの室町幕府や戦国武将にも庇護をうけた背景として死者の、とくに敗者の鎮魂をあげている。というのは、当時の権力者は死者の怨霊が祟るということを怖れていたと考えられる。</p><p>夏目漱石やその周辺の交友関係において能に造詣が深かったという。漱石自身も能の稽古を積んでいたという。著者によると、<a href=https://www.aozora.gr.jp/cards/000148/files/776_14941.html>草枕</a> の冒頭に出てくるこの文章には能の影響がみられ、草枕全体が夢幻能の構造になっており、ワキがみる夢の世界さながらだという。</p><blockquote><p>智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。</p><p><a href=https://www.aozora.gr.jp/cards/000148/files/776_14941.html>草枕</a></p></blockquote><p>著者は草枕が、晩年に漱石が残した則天去私という言葉の原型ではないかと考察している。</p><h3 id=第七章-能は妄想力をつくってきた>第七章 能は妄想力をつくってきた</h3><p>能はそのシンプルさゆえに観る人の妄想力を必要とする。それが人によって様々な見方をもたらし、観る人を楽しませているという。したがって能を楽しむには一定の教養を必要とし、和歌、能、俳句、地理といった知識を要求する。その妄想力を象徴しているのが能の舞台であるという。能の舞台は背景に松の絵があるだけ。みえないものをみるには背景は単純なものがいい。そして、謡の存在も妄想力を促進する上で大きいという。</p><p>能にハマる人は幻視や幻聴を体験するという。著者は能を脳内で行う AR/VR のようなものだと書いている。能は消費の対象には適していないと著者も述べている。能を深く味わうには、能を観るだけでなく、能と共に生きる心構えを提案している。つまり、謡や仕舞などの能を稽古をして能を鑑賞するのがもっとも能を楽しむ方法だという。</p><h3 id=第八章-能を知るとこんなにいいことがある>第八章 能を知るとこんなにいいことがある</h3><p>この章は著者の経験による、能をしているとこんなよいことがあるよと説いている。</p><ul><li>健康になる</li><li>集中力を養う</li><li>ストレスをはね返す</li><li>無言で相手に気持ちを伝える</li><li>陰陽を整えられる</li><li>いい声を出せるようになる</li></ul><p>能を大成した世阿弥の考え方には禅に通じるものもあり、能そのものが体を無理なく動かす運動でもあり、それを継続することで身体や精神によい影響が出ることは理にも適っている。これらの効果の真偽はともかく、好きなことを無理なく継続していることは人生においてよさそうに私にも思えた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0601/>わかりにくさと能動的</a></h1><div class=post-meta><span class=post-date>2023-06-01 (Thu.)</span></div><span class=post-tags>#<a href=/diary/tags/ldap/>ldap</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/noh/>noh</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#チャンネルを用いた-ldap-検索の-api>チャンネルを用いた ldap 検索の api</a></li><li><a href=#能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</a><ul><li><a href=#第四章-能にはこんな仕掛けが隠されていた>第四章 能にはこんな仕掛けが隠されていた</a></li><li><a href=#第五章-世阿弥はこんなにすごかった>第五章 世阿弥はこんなにすごかった</a></li></ul></li></ul></nav></div><div class=post-content><p>22時に寝て何度か起きて7時に起きた。たまには早く寝てみた。</p><h2 id=チャンネルを用いた-ldap-検索の-api>チャンネルを用いた ldap 検索の api</h2><p>うちらの要件に足りない機能が go-ldap にある。私が機能拡張についての issue を作ったときにある開発者が先にこの機能が必要だとコメントしてくれた。もともと draft pr で実装されたコードがあったのでそれをベースに検証したら普通に動いた。あとは go のエンジニアリングとして開発者が使いやすいように、私の経験からのアレンジを加えて pr とした。テストも実装した。なにか問題があればレビューで指摘さえしてくれれば私がすぐ修正してマージできるはずと考えている。はてさて、どうなることやら。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/440>Add search with channels with context #440</a></li></ul><h2 id=能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</h2><p><a href=https://www.shinchosha.co.jp/book/610732/>能―650年続いた仕掛けとは―</a> を読んでいる続き。世阿弥の紹介をしている第五章に感化された。</p><h3 id=第四章-能にはこんな仕掛けが隠されていた>第四章 能にはこんな仕掛けが隠されていた</h3><p>能はシテ (主役) の役柄や内容で5種類にわけられる。</p><ol><li>初番目物 神: 神様が登場して颯爽 (さっそう) と舞う</li><li>二番目物 男: 修羅物とも呼ばれ、武将が修羅道に落ちた苦しみを描く</li><li>三番目物 女: 鬘物 (かずらもの) とも呼ばれ、優雅な美しいものが多い</li><li>四番目物 狂: 雑能とも呼ばれ、他の4つに分類されないもの</li><li>五番目物 鬼: 切能 (きりのう) とも呼ばれ、鬼や妖怪、精霊、霊獣などがシテになる</li></ol><p>さらにこの5つの分類に入らない翁という演目もある。翁を最初に置き、この順番に上演しながら、能と能の間に狂言を演じ、最後に祝言の短い能を演じるのがかつての正式な上演だったらしい。これだけ演じると朝から晩までかかってしまうので忙しい現代ではなかなかみれなくなってしまっているという。</p><p>ひと昔前は結婚式で仲人さんや親戚が謡を謡っていたという。たしかに古風な結婚式ではそうだったような、、、と私もうっすらとそういう記憶があるような気もする。</p><p>能の身体的な特徴の1つに摺り足がある。摺り足には重い二本の刀を腰に差して腰痛にならないという効能があるらしい。ほんとかな？</p><p>世阿弥が能の構造は序破急にせよと書いている。序はワキの登場、破はシテが登場して話をして去る、急は再びシテが姿を変えて登場するといった構造になる。水戸黄門や暴れん坊将軍のような時代劇の最後の展開が急に相当する。水戸黄門で例えると次になる。</p><ul><li>序: 現状把握と善人の窮状</li><li>破: 善人が騙される／襲われる</li><li>急: 印籠を出す</li></ul><p>そして、この後に書いてあることが個人的におもしろかった。水戸黄門は番組開始時点では印籠を出すようなシーンはなくて、当初は助さん角さんが敵をたたき斬っていただけだったという。そもそも印籠を出したぐらいで本物の水戸黄門かどうか分かるわけもなく悪人がひれ伏すはずがないw あるときから印籠を出すという急を作って、序破急が安定したことで人気が出て長寿番組となったと書いてある。ほんとかな？</p><h3 id=第五章-世阿弥はこんなにすごかった>第五章 世阿弥はこんなにすごかった</h3><p>能の大成に大きな影響を及ぼした世阿弥についていろいろ書いてある。</p><p><a href=https://db2.the-noh.com/jdic/2010/02/post_172.html>夢幻能</a> という能のジャンルを完成させた。念が残る、思いが残っているといった残念を昇華させる物語の構造になっている。世阿弥は特に敗者の無念をみせる舞台構造を作ることに成功したという。もともと日本人は死者を尊ぶ習慣があったことも要因としてあげている。</p><p>世阿弥は世襲で継いでいくという家元制度を作った。これは後世に必ず継ぐシステムを作ったと言える。現代まで能が継続されている背景の1つに家元制度はたしかにあげられると私も思う。しかし、現代では基本的人権 (職業選択の自由) に反することから家元制度の批判もあるようだ。著者はこの仕組みを称賛しているが、私は現代の感覚からすると個人の自由を制限して成り立っている古い制度のように感じてあまり著者の意見に同意できなかった。</p><blockquote><p>陰陽の和するところの境を成就とは知るべし</p></blockquote><p>昼や晴れた日には観客の気分が盛り上がり過ぎているので控え目に演じなさい。曇りや雨の日には逆に観客の気持ちが萎えているので派手目に演じなさいといったことを言っている。要は客の状態を見て演じ方を変えなさいと言っている。これは言うは易し、行うは難しだという。能ではこれを楽器の構造から音の力で解決していると説明がある。</p><blockquote><p>時に用ゆるをもて花と知るべし</p></blockquote><p>ともすれば絶対的な善し悪しがあるように思い込み、そのようなものを追求しがちであるが、実際はそのようなものはない。あるのは時との関係性だけだという。易経の時中も引用している。いまがどのような「時」であるかを知り、それがもっとも適合した時期であるか、行動できるか、それこそが「花」であるという。</p><blockquote><p>花と面白きと珍しきと、これ三つは同じ心なり</p></blockquote><p>現代の言葉とはちょっと意味が異なる。</p><ul><li>面白き: 目の前がパッと明るくなること</li><li>珍しき (愛ず): 愛らしいこと、まったく普通のことに感嘆を抱かせる工夫など</li><li>花: 秘すれば花、秘密にすることで偉大な働きをすること</li></ul><p>能では、演者はあまり観客に働きかけない。よくわからないことで、逆に観る人が能動的になり、見えないものが見え、聞こえない音が聞こえるようになる。これも秘することによって咲く花だという。師匠が弟子に教えないというのも、簡単なことでも秘することで、弟子が散々苦しみ抜いた上でその助言の価値に気付くこともあるという。</p><p>「老後の初心」という考え方。どの歳になっても初心はあるが、歳をとって体力が劣っていくからこそやることも変えていく。第一章にも出てきた能における「初心」という言葉の概念は本当におもしろい。能では体が動かなくなっていくのだから「しないというやり方も方法としてありえる」と考える。演じないことで演じる、歳を取ったときの表現方法がある。高齢な能楽師でしか演じられない境地があるから能楽師は歳を取ることを楽しみにする。この考え方はいまの時代にとてもあうように私は思えた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0531/>能の本を読み始めた</a></h1><div class=post-meta><span class=post-date>2023-05-31 (Wed.)</span></div><span class=post-tags>#<a href=/diary/tags/noh/>noh</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</a><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#第一章-能はこうして生き残った>第一章 能はこうして生き残った</a></li><li><a href=#第ニ章-能はこんなに変わってきた>第ニ章 能はこんなに変わってきた</a></li><li><a href=#第三章-能はこんなふうに愛された>第三章 能はこんなふうに愛された</a></li></ul></li></ul></nav></div><div class=post-content><p>1時に寝て何度か起きて7時に起きた。能の本を読みながら寝落ちした。新しい開発のマイルストーンに入って、初日からいくつかリファクタリングしたり、コードレビューしたりしていた。開発が始まったなーって感じ。</p><h2 id=能650年続いた仕掛けとは>能―650年続いた仕掛けとは―</h2><p>少し前から <a href=https://www.shinchosha.co.jp/book/610732/>能―650年続いた仕掛けとは―</a> を読み始めている。読んでいておもしろいので参考になりそうなことや気付いたことを忘れないように書いておく。著者の安田さんは能が本当に好きなんだなというのが伝わってくる文章で好感がもてる。</p><h3 id=はじめに>はじめに</h3><p>著者が能のとりこになったきっかけが書いてある。最初に観た舞台で著者は「幻視」を体験したという。著者は高校教師であったが、能の師匠に弟子入りして週末に習い始め、その後、能楽師としてプロになったという。著者が能の歴史を調べるうちにいまの社会は能から大きな影響を受けていると気付いた。たしかに650年も続いているのだからそれは容易に想像できる。個人的にこの序文は見事な内容だなと思う。私が本書に興味をもったのもこの序文の秀逸さを感じたから。</p><h3 id=第一章-能はこうして生き残った>第一章 能はこうして生き残った</h3><p>能は室町時代に観阿弥・世阿弥によって大成された芸能になる。それまでも猿楽や田楽と呼ばれていた芸能ではあるが、それらを洗練させ、ときの将軍の庇護もあり大成に至ったらしい。</p><blockquote><p>初心忘るべからず</p></blockquote><p>いまでも知られている世阿弥の有名な言葉であり、一般的には「始めたときの気持ちを忘れてはいけない」といった意味で使われる。それ自体も誤りではないが、世阿弥自身はそのような意図で使っていたわけではないらしい。</p><p>「初心」という言葉にも深い意味があり、変化が起こったときの境になる状況や心境を「初心」と表している。人は生きている限りさまざまな変化を経て成長していく。そのところどころに過去の自分を断ち切らないといけない状況がある。その断ち切りには痛みを伴うが、成長のためには避けて通れない。その選択を突きつける境こそが「初心」なのだという。</p><p>能の稽古にもその仕組みが含まれていて、稽古で師匠は決して弟子に及第点を与えることはない。ただ「ダメだ」と言うだけ。弟子はなにがダメかも分からず練習に励み、その状態で本番の舞台を迎えて、練習でダメなのだから本番でもうまくできなくて不本意な結果に終わるものの、本番を迎えたことでなにかしらその人の壁を乗り越えているはずだとみなす。舞台の前後におけるその人のなにかの変化を「初心」というらしい。そして、能を習う人はなにかしら新しい挑戦に立ち向かい、「初心」の壁を破ったときにある変化の快感を忘れられなくて能にはまるという。</p><h3 id=第ニ章-能はこんなに変わってきた>第ニ章 能はこんなに変わってきた</h3><p>能の歴史は次の4つに大別されるという。</p><ol><li>形成期 (奈良時代〜)</li><li>大成期 (室町時代〜)</li><li>展開期 (戦国時代〜)</li><li>式楽以降 (江戸時代〜)</li></ol><p>能の起源は、奈良時代に唐の大衆芸能である散楽 (さんがく) が日本に入ってきて、それが猿楽 (さるがく) になったとみられている。一方で日本古来の神楽 (かぐら) にも影響を受けている。世阿弥も「猿楽はもとは神楽なのだが、」という件を書き残しているらしい。世阿弥は能の始祖として <a href=https://ja.wikipedia.org/wiki/%E7%A7%A6%E6%B2%B3%E5%8B%9D>秦 河勝 (はた の かわかつ)</a> という人物をあげている。</p><p>戦国時代の能への大きな貢献は豊臣秀吉だという。秀吉が能に凝って推奨したことで劇的に広まったとみられている。</p><h3 id=第三章-能はこんなふうに愛された>第三章 能はこんなふうに愛された</h3><p>江戸時代に入り、家康も秀忠も能を好み、家光・家綱の頃から式楽として定着し、大きな影響を与えたのが5代将軍の <a href=https://ja.wikipedia.org/wiki/%E5%BE%B3%E5%B7%9D%E7%B6%B1%E5%90%89>綱吉</a> だという。生類憐みの令で有名な犬好きな将軍であるが「能狂い」と言われるほどの能を好んだ将軍であったという。将軍が並々ならぬ熱意で能を推奨するので大名や家臣も能を学ばざるを得ず、諸藩でも能が学ばれるようになっていったという。おもしろいのが能が盛んな藩は外様であり、譜代代表や徳川家の血筋である松平家ではあまり盛んでないことから関係性の厳しさも伺える。そんな背景もあり、武士の教養の1つとして能を学ぶようになっていった。また庶民にも 謡 (うたい) という能の詞章を謡うことが広まり、寺子屋でも教えられ、庶民の教養の1つになっていったという。大工さんの棟上げ式、縁起ものを納めるとき、結婚式などで謡われたという。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0530/>落ち穂を拾い集めて課題管理を促す</a></h1><div class=post-meta><span class=post-date>2023-05-30 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/project-management/>project management</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#落ち穂拾いの終了>落ち穂拾いの終了</a></li></ul></nav></div><div class=post-content><p>2時に寝て何度か起きて7時に起きた。能の本を読みながら寝落ちした。</p><h2 id=落ち穂拾いの終了>落ち穂拾いの終了</h2><p>4月末にリリースしてその後 GW に入って、5月は「落ち穂拾い」として <a href=/diary/posts/2023/0516/#半年間の開発のふりかえり>開発全体のふりかえり</a> をやったり、<a href=/diary/posts/2023/0518/#開発課題の打ち合わせ>次の開発の要件を整理</a> したりしていた。<a href=/diary/posts/2023/0526/#ドッグフードテストと運用談義>ドッグフードテスト</a> の導入もまだ作業中ではあるが、社内のシステム管理者にも協力していただいて進めている。私の作業でも十分な余裕をもって次の準備につなげることができたので開発の区切りで1ヶ月ぐらい準備期間があることはよいように思える。経営者はもっと働かせたがるかもしれないが。</p><p>これまでの開発は定例会議も 1on1 も毎週行ってきたが、次の開発ではこれらの会議を隔週にしてみる。口頭による同期コミュニケーションのコストを減らし、より開発そのものに時間を割いて注力できるようにする。もしかしたら、これによって私も開発に参加する時間を作りやすくなるかもしれない。もう1つ <strong>必要なときに必要な人とすぐに話す (会議の日まで待たない)</strong> という狙いがある。毎週会議があると、すぐ聞けばよいことを次の会議まで待ってしまうということがある。私もある。私ですら待つときがあるのだからおそらくメンバーにもそうしてしまうことがあると推測する。会議の頻度を下げることでこの待ち時間を削減して即時問い合わせ、即時解決するといったコミュニケーションに移行していきたいという狙いがある。開発者の自律性を高めるためにはこういった取り組みも必要だと思える。もっと言えば、毎週会議しないと情報共有できないというのは開発者を子ども扱いして堕落させるのではないかと考える。実際に意図したようにうまくいくかどうかはやってみてから考える。</p><p>うちの開発メンバーは半年前より見違えて課題管理に習熟したので次の開発がどうなるかが本当に楽しみだ。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0529/>エラーのラップと型階層</a></h1><div class=post-meta><span class=post-date>2023-05-29 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ラップしたエラーのチェック>ラップしたエラーのチェック</a></li><li><a href=#隔週の雑談>隔週の雑談</a></li></ul></nav></div><div class=post-content><p>0時に寝て何度か起きて7時に起きた。署名・押印を完了した相続の書類を朝一で郵便局へ言って送付した。これで後は弁護士さんや司法書士さんが残りの手続きをやっておいてくれるのかな？少し気が楽になった。</p><h2 id=ラップしたエラーのチェック>ラップしたエラーのチェック</h2><p>java でいうところの <a href=https://docs.oracle.com/javase/tutorial/essential/exceptions/chained.html>Chained Exceptions</a> を go では <a href=https://go.dev/blog/go1.13-errors>Wrap</a> という概念で表現する。Unwrap する interface を提供することで事実上の Chained Exceptions と同じようにオリジナルのエラーを辿ることができる。<a href=/diary/posts/2023/0527/#go-の学び直し>go はオブジェクト指向言語ではない</a> と先日の勉強会でも念押し確認してエラーの型階層という概念はないが、Wrap をみていると型階層の方が自然じゃない？と考えられなくもない。言語の設計を考えるよいお題だと思えた。</p><p>エラーチェックについては次の記事がわかりやすかった。</p><ul><li><a href=https://zenn.dev/msksgm/articles/20220325-unwrap-errors-is-as>Go の自作エラーを errors.Is と errors.As で wrap 元のエラーと識別するときには、Unwrap も実装しよう</a></li></ul><p>カスタムのエラーを定義する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MyError</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>message</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span>     <span style=color:#66d9ef>error</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>MyError</span>) <span style=color:#a6e22e>Error</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>MyError</span>) <span style=color:#a6e22e>Unwrap</span>() <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>このチェックのために <a href=https://pkg.go.dev/errors>errors</a> パッケージに次の2つの関数がある。</p><ul><li>errors.Is: エラーのインスタンスが同じかどうか</li><li>errors.As: エラーの型に代入可能かどうか (事実上はインスタンスの型が同じかどうか？)</li></ul><p>たしかにこれでもすぐに実装できた。型階層なんかなくてもこれで十分でしょというのが go の意見かな。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。</p><ul><li><a href=/diary/posts/2023/0522/#サイトデザイン打ち合わせ>サイトデザインの話し</a></li><li>能をみにいく話し</li><li><a href=/diary/posts/2023/0526/#開発合宿の日程確定>冬の開発合宿の話し</a></li></ul><p>週末は勉強会と実家に帰るので余裕がなかったのであまりネタがなかった。能の話しをしていて、子どものときに関心がなかったものを大人になって受け取り方が変わるものがあるのはなぜか？という話題で雑談した。はらさんも落語がわかるようになったという話しをされていた。この話しはストレッチのトレーナーさんとも盛り上がった。</p><blockquote><p>子どもだともっている情報が少な過ぎて情報を理解できないのではないか？</p></blockquote><p>情報や知識を蓄積することで対象への解像度があがるにつれて、みる視点が変わったり、興味が変わったりすることはあるかもしれないなと聞いていて思えた。課題管理の話しをしても、多くの開発者は無関心だったり共感を得られなかったりするが、そこにも通じるものがあるのかもしれないとなにかしらの取っ掛かりになるかもしれないと思えた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0528/>相続手続き書類の作成</a></h1><div class=post-meta><span class=post-date>2023-05-28 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/drive/>drive</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#相続の手続き>相続の手続き</a></li><li><a href=#布施畑-jct-経由の迂回路>布施畑 JCT 経由の迂回路</a></li></ul></nav></div><div class=post-content><p>昨日は夕方に一度帰ってきて疲れてうたた寝して21時過ぎに晩ご飯を食べてそのままだらだらしてた。ドラクエタクトやりながら本を読みつつたぶん0時頃に寝て7時に起きた。</p><h2 id=相続の手続き>相続の手続き</h2><p>先日 <a href=/diary/posts/2023/0501/#弁護士さんと相続打ち合わせ>弁護士さんと打ち合わせ</a> した書類の正式版ができた。関係者が同意しないといけない。次の3つの書類が必要になる。この書類作成と委任作業で弁護士さんは遺産の 1.1% を報酬として受け取る。成年後見人を要すると財産が弁護士さんに接収される気分になる。</p><ul><li>民事委任契約書</li><li>遺産分割協議書</li><li>委任状</li></ul><p>これらに相続権をもつ関係者 (母・姉・私) が署名、実印押印して印鑑証明を添付する。今日はそのために朝から実家へ帰ってきた。往路の途中で <a href=https://product.starbucks.co.jp/food/pastry/>スターバックスのドーナツ</a> を3種3個ずつ購入した。本当はケーキにしようと思ったのだけど、保冷剤がないというので暖かいから諦めた。私はスターバックスのドーナツを食べたことがない。ミスドよりも高い価格帯になっているけれど、その分おいしいんやろか？姉は喜んでたのでおそらくおいしいのだろう。</p><p>往路で姉から書類を受け取って実家へ着いた。トラクターで田んぼを耕してほしいというのでそれから1時間半ほど耕して畝を作ってお昼になった。そこで母に署名、実印押印してもらった。生涯に2回しか発生しない手続きなので直接行ってやり取りするぐらいの手間暇をかけてもよいだろうという所感。葬儀の当初から姉は相続に懸念を示していてすんなり押印してくれないかとも思ったけど、もう書類まで出来上がったので諦めて相続する気になったみたい。とくに揉めることなく同意してくれた。</p><p>ついでに離れのスペースをオフィスにするための備品を運んだり設置されたばかりのエアコンもみてきた。エアコンさえあれば夏でも作業できるし泊まることもできる。あと足りないものは机と椅子。コワーキングスペースのようにするなら大きなテーブルを購入してもよいかもしれない。</p><h2 id=布施畑-jct-経由の迂回路>布施畑 JCT 経由の迂回路</h2><p>15時過ぎには神戸に戻ってきた。車があるとほんと便利。朝から実家へ帰って田んぼして戻ってきてもまだ夕方前だった。今日は <a href=https://kobe-matsuri.com/>第５０回神戸まつり</a> なので住んでいる地域がお祭りをしていた。高速道路も混雑していたと思うし、時間もあったので <a href=/diary/posts/2023/0212/#帰路>垂水 JCT を抜けて布施畑 JCT 経由の迂回路</a> を使って帰ってきた。距離的には少し遠回りになるけれど、マイナーなルートだけに車が少ないので速く走れるために時間的にはほとんど変わらない。</p><p>どこの分岐の違いでルートが変わるかを実際に走って覚えた。明石大橋を渡ってすぐのトンネルを抜けた後で左折すると垂水 JCT から名谷 JCT の通常のルート、直進すると布施畑 JCT のルートになる。明石大橋を渡っているときに高速道路の渋滞情報を聞いてどちらのルートを選択するかを判断すればよい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0527/>go のジェネリクスと型の集合</a></h1><div class=post-meta><span class=post-date>2023-05-27 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;
#<a href=/diary/tags/programming/>programming</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#go-の学び直し>go の学び直し</a></li></ul></nav></div><div class=post-content><p>0時に寝て何度か起きて7時に起きた。22時頃に素麺を食べたら夜に吐き気がして食べるんじゃなかった。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週はいつも通りの普通の1週間を過ごした感じ。休養していたわけでもなく負荷が高かったわけでもない。私の感覚的には右太もも後ろの筋と右腰の張りが強かった。トレーナーさん的には腰は大丈夫そうに言っていて、股関節全体の硬さは常態化しているものだけど、すねの筋もやや張りがあったように話していた。私の感覚とトレーナーさんの感覚がちょっとズレていた。今日の開脚幅は開始前154cmで、ストレッチ後158cmだった。一時期の3-4月の疲弊した状態ではないので一番悪い時期は脱したようにもみえる。</p><h2 id=go-の学び直し>go の学び直し</h2><p><a href=https://tenntenn.connpass.com/event/282717/>Gopher塾 #5 - ジェネリクスが書けるようになろう</a> に参加した。</p><p>すでにうちのプロダクトはジェネリクスを使った開発を行ってはいるけれど、私自身まだ曖昧なところがあったり、どういった設計がよいのかの手探り状態である。go はオブジェクト指向言語ではない (それ自体は構わない) ところが java のジェネリクスとは異なっていて、なにがその根本的な違いになっているのかを、私の中ではまだ理解できていなかった。その答えがこの勉強会に出てわかった気がする。もう少し独学して理論的に理解する必要はあるが、私に足りなかった知識が参加前よりも明確になったのでこの後の学習は容易に思える。</p><p>イベントではワークシートに自分で理解したメモや課題の回答を書き出すよう tenntenn さんが促していた。私はメモを自社の課題管理システムに書いていたのでワークシートには書いていないが、自分の理解を書き出すことの重要性は同意できる。tenntenn さんは次のように説明していた。</p><blockquote><p>概念や理解したことを自分の言葉で表現できるか？を確認するために書くことは大事。</p><p>もし書いた内容が間違っていても、間違ったことを認識できることにも意味がある。</p><p>つまり、学んだことを書くことは正しくても間違っていても得られるものがある。</p></blockquote><p>この考え方は私が提唱する課題管理にも通じている。なぜ書くかの理由の1つは自分の理解を整理するためでもある。そして、その文章を外部から監視できることで上長が助言できる。私にとっては習慣として身に付いた事柄ではあるけれど、改めてこういうことをチームのメンバーに啓蒙したり、開発ガイドに書いておくとよいように思えた。go の勉強会に参加して課題管理で学ぶことがあるとは思わなかった。よいこと尽くめだ。</p><p>閑話休題。本題のジェネリクスについて3割ぐらい知らないことがあった。私が java のジェネリクスと比べて go のジェネリクスを完全に理解できていなかったところの要因は <a href=https://go.dev/blog/intro-generics>型の集合 (Type sets)</a> の概念を理解できていなかったところに起因する。go ではジェネリクスを導入するにあたってインターフェースに型の集合という概念を導入した。それまでのインターフェースはメソッドの集合を管理するだけだったが、型の集合も管理できるようになった。また go には <a href=https://go.dev/ref/spec#Underlying_types>Underlying types</a> という概念が当初から存在したが、それを意識してプログラミングすることはなかった。これを日本語にすると「基底型」となるが、オブジェクト指向言語で言うところの基底型とはまったく異なる。なにせ継承できないのだから。インターフェースに型の集合として次の記述ができるようになった。Underlying types はこれまで概念としてしか存在していなかったのがチルダを用いた文法で表現できるようになったため、その理解も強いられるようになった。</p><p><a href=https://zenn.dev/nobishii/articles/99a2b55e2d3e50>Go の &ldquo;Type Sets&rdquo; proposal を読む</a> によると、現時点での型の集合とは次の2つを指す。</p><ul><li>~T approximation element (近似要素)</li><li>T | U union element (合併要素)</li></ul><p>union 型のようなものは他言語でもある概念なのでイメージしやすいが、Underlying types をチルダを使って指定するのは go 独自？の概念なので新たに学び直す必要がある。</p></div></div><div class=pagination><div class=pagination__buttons><a href=/diary/page/30/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/page/32/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>