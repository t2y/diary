<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.109.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0904/>改革と革命</a></h1><div class=post-meta><span class=post-date>2022-09-04 (Sun.)</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/thought/>thought</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#40代は改革と革命>40代は改革と革命</a></li></ul></nav></div><div class=post-content><p>0時に寝て6時に起きた。たまたま見かけた記事から昔読んだ本を思い出した。</p><h2 id=40代は改革と革命>40代は改革と革命</h2><p>たまたまタイムラインでこんな記事をみかけた。</p><blockquote><p>30代のころは「改善」でいいと思うのです。30代のうちに仕事の基礎をガッチリ身につけ、40代以降は改革と革命に取り組む。私はいつも、40代以上の社員に「改善をするな」と言っているんですよ。</p><p><a href="https://gendai.media/articles/-/99207?page=4">ニトリ会長が斎藤佑樹にアツく語る、「30代にするべきこと」「40代にやるべきこと」</a></p></blockquote><p>私の生き方に近い考え方だったので印象に残った。私はもともと sier 出身なので働き始めた頃からマネージャー側にいた。たまたまトラブルプロジェクトに参加してひたむきに1年半ほど働き通したら大きな成果が出て、組織からプロジェクトマネージャーになることを嘱望されるようになってしまった。私はただの議事録係だったが、結果的に事実上のプロジェクトを仕切るようになった。それはそれで誇らしかったのはあるけど、それと同時にマネージャーはだいたい分かったという気持ちにもなった。そしてマネージャーの働き方は自分の意思ともあわなかったので潔く辞めた。おそらく自分がやったことのないことに挑戦するという生き方の基礎が最初の退職と同時に出来た。転職じゃなくて退職なのは辞めることを決めてから次のお仕事を探したから。閑話休題。30代のときにひたすらコードを読んで、ひたすらコードを書いてきた動機づけの1つとして、昔読んだ本の１つに <a href="https://www.php.co.jp/books/detail.php?isbn=4-569-64499-6">リーダーの易経</a> がある。著者によると、易経とは時の変化の原理原則が書かれていて、時を読むための専門書と言えるらしい。時の第三段階として次の言葉がある。</p><blockquote><p>君子終日乾乾 (けんけん) し、夕べに惕若 (てきじゃく) たり。厲 (あや) うけれども咎なし。</p><p>(要約)
朝から晩まで、繰り返し邁進して努力する。そして、夜、独りになったときに、1日を恐懼 (きょうく) して省みる。そのようであれば、危うい時ではあるが、咎めはない</p></blockquote><p>「乾乾 (けんけん) す」とは高揚感、充実感をもって進む、「厲 (あや) うけれども咎なし。」とは省みることを怠らなければ、危うい立場ではあるが、大きな失敗はないという意味になるらしい。</p><blockquote><p>自分の力、自分でないとできないことを創出するためには、なかったものを創り出すわけです。そのために必要なものは、毎日朝から晩まで同じことを繰り返すことです。継続は力なりというのは、この段階です。</p></blockquote><p>同じことを繰り返すことが創出につながるというのはおもしろい話しで、同じことを繰り返すうちにちょっとしたミスや失敗が創意工夫や技を磨くきっかけになるという。失敗したで終わらせずに省みることで気付きを蓄積していくことがオリジナリティを育てる。<em>乾乾 (けんけん)</em> という言葉の響きを気に入ったのか、おそらく2007年頃に読んだ本なのに15年経ってもいまも記憶に残っているというのは人生において影響を受けたと言っていいだろう。</p><p>若い頃からマネージャーをやってくれという依頼を断り続けて、いま満を持して次のお仕事ではマネージャーをやろうと考えている。メンバーとして経験を得た上でマネージャーとして自分が何をできるかを確認したい。一方でマネージャーの仕事を未経験／業務委託で探すのがなかなか難しくて苦戦している。私には課題管理というたった1つの武器しかないが、それをマネージャーとしてどう活用できるのか。組織で働く人は言われたことをやる人が多い。私は課題管理を用いて然るべきことをやることに重きを置いている。課題管理で業務を改革や革命のレベルまで昇華できるかどうかを実践の場で確かめたい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0903/>夏バテは解消しつつある</a></h1><div class=post-meta><span class=post-date>2022-09-03 (Sat.)</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#正史-諸葛亮孔明>正史 諸葛亮孔明</a></li></ul></nav></div><div class=post-content><p>1時に寝て7時に起きた。開発の作業しようかと思っていたけど、なんか気分が乗らなくて本を読んでただけだった。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前158cmで、ストレッチ後162cmだった。まずまずの数値でストレッチを受けていても調子がよかった。気温が下がって暑さが和らいできて体調もよくなってきた感じがある。以前から姿勢があまりよくないといったアドバイスを受けていて、前側の筋肉に比べて後側の方が相対的に強いから後側の筋肉を多用しようとして腰に負担がきているといった話しがある。姿勢を保つときに腹筋を使うように意識した方がよいといったアドバイスをトレーナーさんからもらった。</p><h2 id=正史-諸葛亮孔明>正史 諸葛亮孔明</h2><p>「第四章 赤壁の戦い」を読んだ。</p><p>孔明が軍事の指揮をとるのは劉備の死後になるので、劉備の生前に起こった赤壁の戦いで伝えられる孔明の逸話は基本的にすべて嘘になる。演義では十万本の矢、東南の風、龐統による連環の計までもが創作らしい。赤壁の戦いの功労者は呉の都督だった周瑜の戦略によるもので戦う前から結果がみえていた。周瑜が用意周到に準備した戦略通りに魏軍がはまり、そこに周瑜の部下である黄蓋が提案した火計が成功をおさめたという。これはこれでおもしろくて戦いとはその前の準備の段階で決着がついているという見方ができる。周瑜は都督で全体の戦略を描くものの、実際の戦場における戦術は積極的に部下に任せるというスタンスをとっていた。また実際にはこれは大きな戦ではなく、小競り合いと決定打だとなった火計はあったものの、魏軍で流行した疫病による撤退というのが史実だと言えるらしい。演義における赤壁の戦いが大創作になっている背景として、三国志演義が編纂された時代 (実際の赤壁の戦いから千年後) にあった <a href=https://ja.wikipedia.org/wiki/%E9%84%B1%E9%99%BD%E6%B9%96%E3%81%AE%E6%88%A6%E3%81%84>鄱陽湖の戦い</a> がモデルになっているのではないか。また孔明の神算鬼謀も朱元璋に仕えた <a href=https://ja.wikipedia.org/wiki/%E5%8A%89%E5%9F%BA>劉基</a> からきているのではないかという話しでもあるらしい。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0902/>非稼働日のお仕事探し</a></h1><div class=post-meta><span class=post-date>2022-09-02 (Fri.)</span></div><span class=post-tags>#<a href=/diary/tags/scrum/>scrum</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#運用対応の続き>運用対応の続き</a></li><li><a href=#次のお仕事探し>次のお仕事探し</a></li></ul></nav></div><div class=post-content><p>0時に寝て3時に起きて2時間だらだらしていて6時に寝て7時半に起きた。ここ1週間ほどこういう寝方が続く。</p><h2 id=運用対応の続き>運用対応の続き</h2><p>昨日からまだトラブルが続いているらしく運用対応がてんやわんやになっている。私は本番環境のログもデータもみれないから社員さんから伝え聞く分しか状況がわからない。そのため、現状の運用でうまくいっているのかと思ってたら、たまたま他の要因が重なって発生しているのかもしれないけど、大きな障害に発展しているのかもしれない。従来の正しいと思われていた運用ツールにも誤りがあったらしく、これまでの運用は正しかったんやろか？という懸念も出てきた。スクラムマスターからも、既知の課題を放置してトラブルが常態化して運用対応に工数を割いて他の仕事ができなくなっているのではないか、仮説の検証をちゃんとやってないんじゃないかとかツッコミが入ってた。PO が未熟と言ってしまえばそうなのだけど、スクラムの悪いところは問題が起こっても責任の所在を曖昧に終わらせることがうちのチームでは多々ある。責任の所在をちゃんとふりかえらないと、再発防止やその対応に誰も責任をもたないという状況が発生する。今回のふりかえりがどうなるのかは来週にならないとわからない。ちゃんと反省してチームとしてふりかえりできるかどうかも観察してみようと思う。</p><h2 id=次のお仕事探し>次のお仕事探し</h2><p>以前から勝手に私が応援している地元の会社の求人情報をみかけた。それは正社員しか募集していないのだけど、ダメ元で業務委託を雇っていないか問い合わせてみるかを迷っていた。そこで地元のコミュニティの知人が、地元の会社の中の人を知っていると話していたことを思い出して、その知人に業務委託で雇っているかどうかを試しに聞いてもらえるかを尋ねた。快く聞いてくれて、直接つながって問い合わせてくれて本当にありがたい。そしたら業務委託は採用していないらしいのだけど、一応は経歴はみるかも？といった返事だった。じゃあ、ダメ元で採用情報のページから応募しようかと考えていたら、その知人経由で経歴がわかるものがあったらそれでいいという話しになって linkedin と会社の事例紹介の url を転送してもらった。普通に応募するなら履歴書と職務経歴書をファイルで送らないといけない。仮に不採用になっても url を送るだけの手間しかかかっていない。わずか1時間ほどのやり取り。そう思うと人材求人プラットフォームに登録して、定型的な資料を用意して、手続きをとって、先方からの返信を待つといったワークフローはなんと無駄の多いことかとか考えたりしていた。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0901/>遊休の日々</a></h1><div class=post-meta><span class=post-date>2022-09-01 (Thu.)</span></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/career/>career</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#運用対応と遊休>運用対応と遊休</a></li><li><a href=#次のお仕事探し>次のお仕事探し</a></li></ul></nav></div><div class=post-content><p>0時に寝て4時に起きた。5時からドラクエタクトしてた。</p><h2 id=運用対応と遊休>運用対応と遊休</h2><p>今日も本番環境でトラブルがあったらしく、その対応で開発リーダーが忙しくて、お昼にあるチケットの仕様を決める小さい打ち合わせ (15分程度) を経て対応しようと思っていたのに、最終的にそれができたのは19時半になった。当然、実作業もやってない。昼間の3時間を休憩時間として別のお仕事をしていた。9月から新たにフロントエンド開発者が入って、チームの開発者が7人になって開発者が遊休する状態に拍車がかかった。本当はチームを分割すればいいけど、チーム事情でできず混乱している状態。権限委譲もできてないのでチームを任せられる開発者が他にいないのだと思う。人を教育せずに人数だけ採用して開発チームを拡充してきたのが垣間見える。古いプラットフォームの仕様を知っている人が1人しかいないといった状況は大変そう。そういう開発や組織を是としてきた先駆者の責任でもある。そんな組織の開発者が外部でいいことばかりを言っているのをみると、よい開発者が入ってきても騙されたと思って定着しないのではないかと思う。私がみえる範囲でもよい開発者がいないので組織における開発リーダーの重要性を実感する。</p><h2 id=次のお仕事探し>次のお仕事探し</h2><p>たまたま求人検索していて <a href=https://offers.jp/lp>Offers「オファーズ」 - エンジニア・デザイナーのための副業・複業・転職サービス</a> というサービスをみつけた。ちょっと前に求人プラットフォームを開発していたのでいくつかの求人サイトに登録して調査したりしていた。その中でもこのサイトは上位に入る優れた品質だと思う。一番嬉しいのが職務経歴を linkedin からインポートしてくれる。求人プラットフォームでもっとも嫌なことは、それぞれのサイトごとに職務経歴書を作らないといけないところ。プログラマー的に同じ作業を何度も繰り返すことに苦痛を感じる。比較的新しいサイトなのでどういったものか、わかっていないけど、サイトの使い勝手がよかったので縁があれば面談もやってみようと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0831/>コワーキングのオンラインイベントに参加した</a></h1><div class=post-meta><span class=post-date>2022-08-31 (Wed.)</span></div><span class=post-tags>#<a href=/diary/tags/vue.js/>vue.js</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#バッチ処理一覧と手動実行>バッチ処理一覧と手動実行</a></li><li><a href=#コワーキングのオンラインイベント>コワーキングのオンラインイベント</a></li></ul></nav></div><div class=post-content><p>0時に寝て6時に起きた。</p><h2 id=バッチ処理一覧と手動実行>バッチ処理一覧と手動実行</h2><p>2週間前からフロントエンドの画面作りを始めた。2つ作らないといけない画面があってそのうちの1つを作るのに1週間ちょっとかかった。最初に作る画面で次の順番で作業を進めた。</p><ol><li>web api のエンドポイントの整備</li><li>ページング処理</li><li>検索フォームのコンポーネント作り</li><li>v-data-table の slot 埋め込み</li><li>モーダルダイアログと更新処理</li></ol><p>やりたいところに関係する vuejs, next, vuetify の機能を調べたり、イベントの伝搬の仕組みを調べたりしながら作成した。一度理解したら簡単なので2つ目の画面は半日で完成して pr を出して、もうそのまま本番環境にデプロイした。1つ目の画面の方が要件が複雑で2つ目の方が簡単だったというのもあるけど、どちらもストーリーポイント5が割り当てられているチケットの作業工数は1週間強と4時間といったものになった。なんというか、ストーリーポイントは中長期でみれば、このような人間が成長して一定期間内に消化できるポイントが増えることを計測する狙いもあるけれど、短期でみたらまったくプロジェクトマネジメントには役に立たない。</p><p>最近フロントエンド開発者がチームに参加して、コードを読んだらだいぶひどいみたいなことを言ってた。開発リーダーもフロントエンドは基本的に動いたら OK とか答えてた。だから品質が悪い。</p><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>先日 <a href=/diary/posts/2022/0618/#カフーツさん訪問>カフーツさんのイベント</a> のイベントに参加した。それがきっかけとなり、いとうさんが手掛けている <a href=https://note.com/kanzan10to9/membership>Beyond the Coworking 〜移働の時代〜</a> という note のメンバーシップという有償コミュニティのようなものに入ってみた。記事を読むだけなら1,000円/月で、それ以上の付加価値サービス向けに2,000円/月という料金設定になっている。毎月 zoom でオンラインミーティングを行うというので参加してみた。いとうさんは少し前にコロナに感染して療養していたそうなので日程が急に決まったせいか、たまたま私しか参加者がいなかったので1on1みたいな感じで雑談した。コミュニティを運営するためのサービスとして何がいいかという話しをしたんだけど、たしかにこれとお勧めできるものがない。note も最近そういった機能を追加して sns になろうとしているように垣間見える。</p><ul><li>note のコミュニティ機能とメンバーシップ<ul><li>試しに掲示板を使ってみているが、メンバーはほとんど書き込まない<ul><li>いとうさんと私しか、ほとんど書き込みしていない</li><li>但し、メンバーに質問していると掲示板をみてはいるという</li></ul></li><li>掲示板はストックのサービスだからリアルタイムに返信をもらうことをそもそも期待していない</li><li>リアルタイム性の高いサービスならチャットツールがよいのではないか？<ul><li>slack, discord, ms teams など</li></ul></li><li>他のツールもどうか？<ul><li>note の掲示板, notion, trello など</li></ul></li></ul></li></ul><p>他にもコワーキングスペースをうまく運営するためにはコワーキングスペースマネージャーが必要だといとうさんは考えている。コミュニティマネージャーはコミュニティ形成を目的とするが、コワーキングスペースマネージャーは似て非なるものだという。あれもこれもできないといけないという話しをしてたら、基本的にスーパーマンを要求するポジションになるみたいw、とはいえ、求められる能力として3つをあげると次のような話しをされていた。</p><ul><li>利用者と話しができる<ul><li>利用者の居場所になるには、利用者の業界や業務をある程度は理解して話せないといけない</li><li>コワーキングだから協調のためにお互いの相互理解が必要になる</li></ul></li><li>人の紹介ができる<ul><li>コワーキングだから協調のために利用者同士、または自身の人脈からマッチする人を紹介できないといけない</li></ul></li><li>仕事の斡旋ができる<ul><li>ビジネスなので仕事を依頼したい人、仕事を受けたい人、仕事 (お金) がまわらないと継続できない</li></ul></li></ul><p>カフーツさんはうちのオフィスから一駅、自転車で10分の距離にオフィス兼コワーキングスペースがある。<a href=https://note.com/t2y1979/n/n84deed5fd934>1人でお仕事をしていると相談相手がいないことの弊害</a> がある。身近に信頼できる相談相手がいることは重要だと思う。今後もビジネス寄りのコミュニティやコワーキングの在り方を学んでいこうと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0830/>雰囲気だけで画面を作れた</a></h1><div class=post-meta><span class=post-date>2022-08-30 (Tue.)</span></div><span class=post-tags>#<a href=/diary/tags/vue.js/>vue.js</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#slots-で-v-data-table-のカラムを書き換える>slots で v-data-table のカラムを書き換える</a></li></ul></nav></div><div class=post-content><p>0時に寝て6時に起きた。</p><h2 id=slots-で-v-data-table-のカラムを書き換える>slots で v-data-table のカラムを書き換える</h2><p>昨日の続き。v-html で v-dta-table のカラム書き換えしてたら slots でやれと言われた続き。次のようなテンプレートのコードでカスタムカラムを配置するためのコンポーネントを作れば既存の vuejs の仕組みで保守もしやすそうに思う。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;my-wrapping-data-table&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;template</span> <span style=color:#960050;background-color:#1e0010>#[`item.data`]=&#34;{</span> <span style=color:#960050;background-color:#1e0010>item</span> <span style=color:#960050;background-color:#1e0010>}&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;my-custom-cell-layout</span> <span style=color:#a6e22e>:item=</span><span style=color:#e6db74>&#34;item&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/template&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/my-wrapping-data-table&gt;</span>
</span></span></code></pre></div><p>vuejs のテンプレートのこの構文はどういう評価をされるのかが理解できない。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;template</span> <span style=color:#960050;background-color:#1e0010>#[`item.data`]=&#34;{</span> <span style=color:#960050;background-color:#1e0010>item</span> <span style=color:#960050;background-color:#1e0010>}&#34;</span><span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><p>そしたら同僚がそれは次の構文のシンタックスシュガーだと教えてもらった。いずれにしても dsl 万歳って感じで私からは訳がわからない。雰囲気でテンプレート書いて動けばいいんだけど。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;template</span> <span style=color:#960050;background-color:#1e0010>v-slot:`item.data`=&#34;row&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;my-custom-cell-layout</span> <span style=color:#a6e22e>:item=</span><span style=color:#e6db74>&#34;row.item&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/template&gt;</span>
</span></span></code></pre></div><p>その後、要素の更新処理のモーダルダイアログ画面も作って1週間以上に渡って開発していた画面を一通り作り終えた。vuejs のことわかってない素人でも雰囲気だけで動く画面は作れた (pr のときにほとんどレビューで指摘を受けなかったので大半は間違ってはないのだろう) 。簡単と言えば簡単ではある。ちなみに私が作ったものが初のページング可能な一覧画面になる。検索フォームもページングに連動してクエリを実行できるようにすべてフルスクラッチでコンポーネントを作った。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0829/>v-html は使わなくてもよい</a></h1><div class=post-meta><span class=post-date>2022-08-29 (Mon.)</span></div><span class=post-tags>#<a href=/diary/tags/vue.js/>vue.js</a>&nbsp;
#<a href=/diary/tags/security/>security</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#任意のカラムの書き換え>任意のカラムの書き換え</a></li></ul></nav></div><div class=post-content><p>0時に寝て7時に起きた。また日曜日は寝てた。</p><h2 id=任意のカラムの書き換え>任意のカラムの書き換え</h2><p>v-data-table の、あるセルが複雑なデータをもっていて、単純にその値を表示するのではなく、一定の構造化やレイアウトを調整した状態で表示したい。セル内の構造を書き換える方法を私は知らなかったので <a href=https://v2.vuejs.org/v2/api/#v-html>v-html</a> という api を使って書き換えればよいのだと思った。しかし、これは間違いだった。間違いの訂正は翌日にやるとして仮に v-html を使うとしても xss の懸念があるのでスクリプトをエスケープしてあげないといけない。<a href=https://github.com/vuejs/vue/issues/6333>Sanitize v-html #6333</a> でも議論されていて vue3 はデフォルトでエスケープする仕組みが入るのかな？vue2 だと <a href=https://www.npmjs.com/package/sanitize-html>sanitize-html</a> を使って次のようにラップすればいいと書いてあった。実際に動かしてみるとスクリプトを実行できたので v-html は危険だというのはわかった。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;div</span> <span style=color:#a6e22e>v-html=</span><span style=color:#e6db74>&#34;$sanitize(value)&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>この仕組みを作って pr でレビューしてもらっていたら、カラムの構造を書き換えたいだけなら <a href=https://v2.vuejs.org/v2/guide/components-slots.html>slots</a> を使えば普通にできると教えてもらった。また明日へ。</p></div></div><div class=pagination><div class=pagination__buttons><a href=/diary/page/73/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/page/75/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>