<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.101.0"><title>forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/><link rel=stylesheet href=/diary/assets/style.css><link rel=stylesheet href=/diary/assets/green.css><link rel=stylesheet href=/diary/style.css><link rel=apple-touch-icon href=/diary/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content="t2y"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="forest nook"><meta property="og:description" content><meta property="og:url" content="/diary/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><link href=/diary/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1104/>新しい職場で働き始め</a></h1><div class=post-meta><span class=post-date>2021-11-04</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/subcontract/>subcontract</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#働き始め>働き始め</a></li></ul></nav></div><div class=post-content><p>0時に寝て6時半に起きた。朝活の日以外に6時に起きるのは難しいけど、だいたい6-7時の間には起きているような気がする。とはいえ、休日は8時に起きたりもしてたけど。<a href=/diary/posts/2021/1025/>10月25日</a> から生活リズムの移行を促してちょっとずつ近づいている気はする。</p><h2 id=働き始め>働き始め</h2><p>今日から新しい職場で働き始め。3ヶ月ほど自社のお仕事をしていたが、ずっとやっていると会社が倒産するので出稼ぎに行くことに決めた。まずは開発の定例会議に出てみた。最初なんで話していることがなんもわからん。3ヶ月ぐらいは業務のキャッチアップに集中する。intellij idea のコードフォーマッターで開発しているそうなので intellij idea を使うことにした。eclipse をやめて vscode に移行したいとは思っていたが、コードフォーマッターの問題は厄介なので仕方ない。コミュニティエディションを使う。</p><p><a href=https://www.rabbitmq.com/tutorials/tutorial-one-java.html>RabbitMQ のチュートリアル</a> を1から5までやった。チュートリアルのサンプルコードはそのままだけど maven でビルドできるようにして <a href=https://github.com/t2y/rabbitmq-sample>https://github.com/t2y/rabbitmq-sample</a> に置いた。今日のところはチュートリアルに書いてあることの振る舞いなどを確認していた。なんか調査や検証するときにまた使うと思う。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1103/>ASUS ROG Zephyrus G15 GA503QR</a></h1><div class=post-meta><span class=post-date>2021-11-03</span></div><span class=post-tags>#<a href=/diary/tags/morning-activity/>morning activity</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;</span>
<img src=/diary/img/2021/1103_rog-zephyrus-g15.jpg class=post-cover alt="ASUS ROG Zephyrus G15 GA503QR"><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#朝活-ミクロ経済学入門の入門>朝活: ミクロ経済学入門の入門</a></li><li><a href=#asus-rog-zephyrus-g15-ga503qr>ASUS ROG Zephyrus G15 GA503QR</a></li><li><a href=#データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</a></li></ul></nav></div><div class=post-content><p>1時に寝て6時に起きた。朝活があると起きれるな。</p><h2 id=朝活-ミクロ経済学入門の入門>朝活: ミクロ経済学入門の入門</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/229642/>【三宮.dev オンライン】リモート朝活もくもく会</a> で第5章の市場均衡と第6章の外部性を読んだ。</p><p>まず第5章から。用語を次にまとめる。</p><ul><li>完全市場: 誰もがプライステイカー (自分の生産量が価格に影響を与えられない) である市場</li><li>社会的余剰: 消費者余剰 (価格より多めに払ってよいと考える金額の和) と生産者余剰 (利潤の和) を足し合わせたもの</li><li>従量税: 販売する量に応じて一定の金額を納める税<ul><li>例) たばこ税、酒税、揮発油税 (ガソリン)</li></ul></li></ul><p>これまでの章で学んだ内容から価格は需要曲線Dと供給曲線Sが交差する点p*になる。この価格を <strong>市場均衡価格</strong> と呼ぶ。市場全体のよさを測るモノサシとして <strong>社会的余剰</strong> を使う。市場均衡価格に対して価格を上げたり下げたりしたときにできる社会的余剰の差額を <strong>死荷重</strong> と呼ぶ。次の図の C の面積に相当する。</p><figure><img src=/diary/img/2021/1103_market-equilibrium.png></figure><p>図から市場均衡価格は社会的余剰を最大化させた価格だとわかる。</p><p>生産者や消費者に従量税を課すと市場にどのようなことが起きるかを考察する。納税方法として、生産者が納税する方式 (価格に税を含める) と消費者が納税する方式 (価格と税は別) があるが、どちらも社会的余剰が C の分だけ減少するグラフとなり、社会的損失が発生していると言える。余剰の視点からはどちらの方式も全く同じだが、政府が徴税するしやすさの視点だと、相対的に数の少ない生産者から納税する方が管理しやすい。</p><figure><img src=/diary/img/2021/1103_specific-duty.png></figure><p>狙い撃ち課税のダメな点として酒税を例にあげている。ビールの酒税を逃れるために、メーカーは1990年代に発泡酒、2003年に第3のビールを開発した。2016年時点での350ml (1缶) あたりの酒税は、ビール77円、発泡酒47円、第3のビール28円となった。同年、政府はすべて55円へ統一していく方針を発表した。ビールへの従量税が与えた社会的損失として死荷重だけでなく、発泡酒や第3のビールのような劣化ビールの技術開発のコストがあげられる。特定の品目を狙い撃つ従量税は社会的損失を生みやすいと述べられてる。</p><p>次に第6章から。用語を次にまとめる。</p><ul><li>負の外部性: ある生産活動が他者へマイナスの影響を与える<ul><li>例) 公害や花粉症など</li></ul></li><li>正の外部生: ある生産活動が市場取引を経ずにプラスの影響を与える<ul><li>例) 電鉄会社が駅や路線を開通させるとその地域に経済効果をもたらすなど</li></ul></li><li>限界被害: 企業の生産活動が住民に与える被害の生産量に対する総和の金額</li><li>ピグー税: 住民に補償を与える環境税</li><li>ネットワーク外部性: SNS など、サービスの価値がユーザー数に大きく既存する性質</li><li>調整ゲーム: 何を選ぶかよりも、他人と同じものを選ぶことが重要な状況</li><li>ナッシュ均衡: 自分の行動を変えると損になるので誰も行動を変えない状況</li></ul><p>企業の生産活動が住民に被害をもたらせていた場合、その被害をピグー税を通じて企業が支払う。これを <strong>外部性の内部化</strong> と呼ぶ。負の外部性は社会問題となるが、対して正の外部性は社会問題とならない。</p><p>調整ゲームにおいて、一方がもう一方よりも好ましい状態を <strong>パレート優位</strong>、またその逆の状態を <strong>パレート劣位</strong> と呼ぶ。ネットワーク外部性においては優勝劣敗が必ずしも正しいとは限らない。先行者としてユーザー数を獲得し、ナッシュ均衡の座をつかむことが勝ちにつながる。</p><h2 id=asus-rog-zephyrus-g15-ga503qr>ASUS ROG Zephyrus G15 GA503QR</h2><p>今日届いたのでセットアップだけ終えた。Windows アップデートすると次々に更新が出てくる仕組みは昔と変わってなかった。4回再起動した。</p><p>前々から Windows マシンがほしいと思っていて、次のお仕事が決まったので思い切って購入することにした。買おうかどうしようかを迷っている心の中の動きのコストというか、検討事項としてずっと残り続けるのもあまり生産的ではないなと最近は思うようになっていた。私が Widnows マシンが必要になった背景はこれら。</p><ul><li>行政の電子申請・手続きはまだまだ Windows アプリが主流</li></ul><p>最近は Windows アプリ版とは別に、Web 版というブラウザベースのアプリケーションが提供されつつあるが、まだまだ黎明期で一部の機能しか対応してなかったり、不具合で macos だと動きませんと障害情報が出てたり、ひどい場合だとブラウザベースなのに Linux はサポートしてませんとか言われたりする。毎年この申請は Web 版で対応したやろか？と調べて、やっぱりまだできんかったと紙ベースの申請に切り替えるときの、調べるコスト (とがっかりするコスト) がしんどくなった。</p><ul><li>VR 系アプリケーションのプラットフォームは Windows</li></ul><p>Facebook 社が Meta 社になって、ややメタバースが盛り上がりをみせつつある。<a href=https://www.oculus.com/quest-2/>Oculus Quest 2</a> を買ったものの、VR 系アプリケーションは Windows がメインターゲットらしく macos や linux は、現時点ではサポートしていないことが多い。<a href=https://www.oculus.com/accessories/oculus-link/>Oclus Link</a> も Windows しかサポートしていない。せっかくヘッドマウントディスプレイを購入したので、そのデバイスをもっと活用するためにも Windows マシンがあった方がよいと考えた。</p><ul><li>Microsoft Teams を使いたい</li></ul><p>私の周りでも <a href=https://www.microsoft.com/ja-jp/microsoft-teams/group-chat-software>Microsoft Teams</a> を使うことが増えてきた。ゲストアカウントでも会議できるのでエージェントと打ち合わせするときは Teams を使ったりしていた。社内システムを MS 系のプロダクトで固めている企業は普通に Teams を使っているし、顧問さんから聞く話しでも Teams (と MS 製品とのインテグレーション) の評判はよい。チャットツールを対象としたプロダクトを作っていくにあたり、今後は Slack だけではなく Teams 対応も必須になっていく気がする。実際に私も Slack/Teams 両対応のプロダクトもみかけるようになりつつある。Microsoft Teams を Linux で使えるかどうかは調べてないのでわからないけど、Windows マシンが1台あった方が手っ取り早いと考えた。</p><ul><li>オフィスと自宅にパソコンを据え置きたい</li></ul><p>オフィスでは普段デスクトップマシンを使いつつ、macbook をサブマシンとして使っている。自宅で作業するときは macbook を持ち帰ったりしていた。人間はどんどん怠惰になるのでこの持ち運びが面倒になってきたり、持ち帰ってないときにパソコンで作業したくなったりしたときは、オフィスに出かけるといったことをするようになってストレスにもなってた。徒歩でも15分あれば行ける場所にオフィスがあるので、タブレットやスマホでの作業効率を考えたらオフィスに行ってしまう。ラップトップを自宅とオフィスに置いておけるといいなぁとは薄々思っていた。これを機にオフィスには asus マシンを、自宅には macbook を据え置くようにしたい。</p><h2 id=データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</h2><p>9.4 分散トランザクションと合意の前半の2つの節を読んだ。</p><ul><li>9.4.1 アトミックなコミットと2相コミット（2PC）</li><li>9.4.2 分散トランザクションの実際</li></ul><p>分散トランザクションという扱っているテーマが難しいけど、書いてある内容は1つずつ追っていけば理解できるのでそこまで難しくはない。一言で分散トランザクションと言っても次の2つに大別される。</p><ul><li>データベース内部の分散トランザクション</li><li>ヘテロジニアスな分散トランザクション</li></ul><p>前者は特定のデータベースシステムだけで動くので相対的に最適化ができたり、うまく運用できるケースもある。後者は複数のシステムを介した汎用の仕組みになるので2相コミットのような プロトコル を使って <strong>アトミックなコミット</strong> を保証しなければならない。2PC はコーディネータの障害が運用上の大きな問題となることがわかっている。ヘテロジニアスな技術間での2相コミットの標準を <strong>X/Open XA（eXtended Architecture の省略）</strong> と呼ぶ。多くの RDB やメッセージブローカーでもサポートされているらしい。Java EE アプリケーションの世界だと Java Transaction API （ JTA ）で実装されているらしい。全く聞いたことがなくて、私はいままでこの技術に関わることがなかった。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1102/>ワイヤレス REALFORCE</a></h1><div class=post-meta><span class=post-date>2021-11-02</span></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/subcontract/>subcontract</a>&nbsp;</span>
<img src=/diary/img/2021/1102_realforce.jpg class=post-cover alt="ワイヤレス REALFORCE"><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</a></li><li><a href=#realforce-のワイヤレスモデル>REALFORCE のワイヤレスモデル</a></li><li><a href=#契約書の確認>契約書の確認</a></li></ul></nav></div><div class=post-content><p>3時に寝て7時に起きた。ウォーキングから帰ってきて0時にベッドに入ったものの、選挙結果の総括記事を読んだり、<a href=http://yorimoi.com/story/>宇宙よりも遠い場所</a> をみたりしていたら3時になってしまった。全13話すべてみた。どちらかと言えばおもしろかったけど、ツィートみて期待値が高かった分、そこまで私の中に響くものはなかったかな。南極へ行く道中や南極の生活がわりと遊んでいるようにみえてあまり大変そうにみえなかった。とはいえ、実際の船上や南極でもやることなくて娯楽ないと持て余すのかなとも思えた。<a href=https://www.nipr.ac.jp/antarctic/>南極地域観測隊</a> って現実にあるんだなとみてた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>僕はだいたいプログラミングしてるときは既に内容を知ってるアニメを常に流してるんですが今週はまた「宇宙よりも遠い場所」を観ていました。これほどまでに13話すべて足すところも引くところもない完璧な作品は他に早々思いつかないです。</p>&mdash; 父 (@fushiroyama) <a href="https://twitter.com/fushiroyama/status/1453610090632663048?ref_src=twsrc%5Etfw">October 28, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</h2><p>9.3 順序の保証を読んだ。</p><blockquote><p>データベースや分散システムにおいて順序付けは重要な基本的概念である。順序と線形化可能性、合意との間には深い関係がある。順序付けが重要なのは <strong>因果関係</strong> を保つのに役立つことがあげられる。</p><p><strong>全順序</strong> があれば任意の2つの数を比較して大小関係を必ず判断できる。たとえば自然数には全順序があると言える。線形化可能なシステムは操作に全順序がある。一方で因果律には並行という概念があり、どちらが先に行われたかが重要ではない場合に操作が並行に行われたとみなせる。したがって、因果律は全順序ではなく、 <strong>半順序</strong> を定義すると言える。半順序とは、大小関係を比較できる場合もあるしできない場合もあることを指す。</p><p>因果律に基づく順序と線形化可能性との関係は、線形化可能性は因果関係を <strong>暗に含む</strong> といえる。線形化可能性を持つシステムは、因果律を正しく保持する。しかし、システムを線形化可能にすればパフォーマンスや可用性が損なわれる可能性がある。特にネットワークの遅延が大きい（たとえば地理的に分散している）システムで問題になる。そのため、分散データシステムの中には線形化可能性をあきらめることでパフォーマンスを向上させたものの、扱いが難しいものもある。因果律を保持する方法は、線形化可能性が唯一というわけではなく他の方法もある。多くの場合、システムに本当に必要なのは線形化可能性ではなく因果律における一貫性だけであり、これは線形化可能性よりも効率の良い実装が可能となる。</p><p>因果律における一貫性を保持する方法として次のものがあげられている。</p><ul><li>シーケンス番号またはタイムスタンプ</li><li>ランポートタイムスタンプ（Lamport timestamp）</li></ul><p>しかし、分散システムではネットワークを介して他のノードの状態を確認しないと因果律の一貫性を確定できない。たとえシングルリーダーアプリケーションであっても、リーダーに障害が発生したときにリーダーのフェイルオーバーが必要となる。この問題は <strong>全順序のブロードキャスト</strong> と呼ばれる。ZooKeeper や etcd のような合意サービスが全順序ブロードキャストを実装している。</p><p>詳細は省くが、ネットワークを介した分散システムで線形化可能な compare-and-set （あるいは increment-and-get ）を実装しようとすると、必然的に合意アルゴリズムに行き着く。これらと全順序ブロードキャストは等価であることが証明できる。したがって、これらの問題のいずれかを解決できれば、他方の問題の解決策に変換できるという点は重大な知見である。</p></blockquote><h2 id=realforce-のワイヤレスモデル>REALFORCE のワイヤレスモデル</h2><p>ユーザーから待望されていた REALFORCE のワイヤレスモデルがとうとう発売された。</p><ul><li><a href=https://weekly.ascii.jp/elem/000/004/073/4073042/>高級キーボードREALFORCEから待望のワイヤレス機「R3」が登場、見どころは？</a></li></ul><p>先週から amazon で予約販売を受け付けていたので <a href=https://amzn.to/3EJivAF>REALFORCE 東プレ R3 キーボード 静音 ハイブリッドモデル 日本語配列 91キー ブラック R3HC12</a> を予約して、本日届いた。私はとくに必要ないけど、bluetooth のマルチペアリングに対応していて最大4つまで接続できる。オフィスの机はそこそこ広いけれど、本とラップトップとモニター2台置いたらスペースが埋まってしまっている。ご飯を食べるときや書類を作成するときにキーボードを立てかけたりしてスペースを確保していて不便に感じていた。</p><p>ubuntu 環境での bluetooth の設定に少し手こずった。GUI の設定マネージャー (blueman) でペアリングしようとしても失敗する。キーボードの情報は取得できるけど、ペアリングは失敗する。試しに macos でペアリングしてみたらパスキーの入力画面が表示されて、6桁の数字を入力して ENTER した後に接続するとペアリングできた。blueman だとパスキーが表示されないなと気付いてググってたら <a href="https://bbs.archlinux.org/viewtopic.php?id=174239">[SOLVED] Bluetooth keyboard: Unable to pair (authentication timeout)</a> を見かけて、bluetoothctl でも設定できそうなのでやってみた。</p><pre tabindex=0><code>キーボードの情報を表示
[REALFORCE_3]# info F6:9D:A5:80:B7:1F
Device F6:9D:A5:80:B7:1F (random)
	Name: REALFORCE_3
	Alias: REALFORCE_3
	Appearance: 0x03c1
	Icon: input-keyboard
	Paired: no
	Trusted: yes
	Blocked: no
	Connected: yes
	LegacyPairing: no
	UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
	UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
	UUID: Device Information        (0000180a-0000-1000-8000-00805f9b34fb)
	UUID: Battery Service           (0000180f-0000-1000-8000-00805f9b34fb)
	UUID: Human Interface Device    (00001812-0000-1000-8000-00805f9b34fb)
	RSSI: -45
</code></pre><pre tabindex=0><code>ペアリングを実行
* エージェントからパスキーが表示されて、キーボードで入力して ENTER したらペアリングに成功した
[bluetooth]# pair F6:9D:A5:80:B7:1F
Attempting to pair with F6:9D:A5:80:B7:1F
[CHG] Device F6:9D:A5:80:B7:1F Connected: yes
[agent] Passkey: 323759
[CHG] Device F6:9D:A5:80:B7:1F Paired: yes
Pairing successful
[CHG] Device F6:9D:A5:80:B7:1F Modalias: usb:v08ACp0302d0001
[CHG] Device F6:9D:A5:80:B7:1F ServicesResolved: yes
</code></pre><pre tabindex=0><code>キーボードを信頼する
[REALFORCE_3]# trust F6:9D:A5:80:B7:1F
Changing F6:9D:A5:80:B7:1F trust succeeded
</code></pre><h2 id=契約書の確認>契約書の確認</h2><p><a href=/diary/posts/2021/1026/#選考面談>先日</a> の業務委託案件の契約書が届いたので内容を確認した。</p><p>これまで <a href=https://www.cloudsign.jp/>クラウドサイン</a> でしか契約したことがなくて、紙の契約書で契約を締結するのは初めての挑戦でもある。<a href=https://www.post.japanpost.jp/service/letterpack/>レターパック</a> を使って郵送するのがお作法？といったところから調べてた。明後日から働き始める。フルリモートなので物理的な職場は変わらないけど、新しい職場は緊張するな。うまく入っていけるやろか。フルリモートの経験もだいぶたまってきたし、体調も万全だし、憂うことは何もないはず。いまの状況は純粋に私ががんばるだけだ。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1101/>資料作り完了</a></h1><div class=post-meta><span class=post-date>2021-11-01</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/government/>government</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;</span>
<img src=/diary/img/2021/1101_learning.png class=post-cover alt=資料作り完了><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</a></li><li><a href=#神戸市長選>神戸市長選</a></li><li><a href=#データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</a></li></ul></nav></div><div class=post-content><p>4時に寝て8時に起きた。夜に資料作りに集中していたので家に帰ってきたのが3時頃で、くつろいだりアニメみたりしてから寝た。遅くに帰ってきてもすぐに寝るわけじゃなくて、だらだらして実際に寝るまで1-2時間はかかる。こういうところ、生活が堕落していて改善していくべきなのかもしれない。良かったこととして、ウォーキングのせいか、夜はよく眠れた。</p><h2 id=みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</h2><p>昨日の続き。一晩寝てから最後の仕上げをした。時間を置く、とくに一度寝てから資料を洗練させると改善点があちこち出てきてより良いものになっていく気がする。午前中に主催者に連絡したものの、午後になってから思い付いたことをちょくちょく修正したりもした。オンラインの資料だと、先方に連絡した後でも微修正できるところがよい。業務の資料だとさらに2-3日かけて洗練させていくけど、勉強会の資料だからこれでいいかな。タイトルはすごく気に入っているというわけではないけど「本と学びの段階」とした。ひとまず完成したので自分のやりたいことに取り組める。</p><h2 id=神戸市長選>神戸市長選</h2><p>神戸市は衆議院選挙とは別に市長選挙も一緒にあった。<a href=https://www.nhk.or.jp/senkyo2/kobe/17581/skh50331.html>神戸市長選</a> によると、投票率は53.79％で439,749 (67.7%)の得票を得た現職の市長が完勝した。3回目の当選になるらしい。私が神戸に戻ってきてから初めての市長選挙だった。起業してから手続きなどで行政が身近になったことから関心をもつようになってきた。自分ごとで考えるというのか、どんなものでも身近なことは関心をもつのかもしれない。</p><h2 id=データ指向アプリケーションデザイン>データ指向アプリケーションデザイン</h2><p>9.2 線形化可能性を読んだ。</p><blockquote><p><strong>線形化可能性</strong> とは、データのコピーが1つしかなく、そのデータに対する操作がすべてアトミックであるかのようにシステムにみせることを指す。古くなったキャッシュやレプリカからの値ではないことを保証する、<strong>最新性の保証（recency guarantee）</strong> と言える。トランザクションの章に出てきた <strong>直列化可能性</strong> とはまったく異なる。直列化可能性が保証するのは、複数のトランザクションが何らかの順序で実行された場合に同じ結果になることを保証するもの。</p><p>あと「役に立たない CAP 定理」というコラムもおもしろい。CAP 定理とは次の3つはすべて成り立たず、2つを選択することを強いる。</p><ul><li>一貫性（Consistency）</li><li>可用性（Availability）</li><li>分断耐性（Partition tolerance）</li></ul><p>CAP 定理は歴史的にデータベースのトランザクションのトレードオフについての議論の出発点として引用され、有名な定理ではあるが、分散データベースの研究者の中では1970年代から知られていたことであったらしい。そして、ネットワークを介した分散システムは、分断耐性が必須 (ネットワークが切断しないことはないから) であることから一貫性か可用性のどちらかを選択するしかない。ここで一貫性とは線形化可能なシステムを実装することだが、これはパフォーマンスのデメリットが大きい。そのため、現代の多くの分散データベースは線形化可能性を提供しないことを選択しており、結果として可用性と分断耐性を選択することになっている。したがって、CAP 定理から議論を始めることは無意味であると言う。</p></blockquote></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1031/>ほぼ一日資料作り</a></h1><div class=post-meta><span class=post-date>2021-10-31</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</a></li></ul></nav></div><div class=post-content><p>昨日はいつ寝たんだろう？たぶん0時ぐらいに寝て7時に起きたものの二度寝して9時に起きて、それでも眠くてそのままお昼前まで寝てた。今週はなるべく6時に起きる生活リズムの移行をやっていたのでそろそろ疲れたのかもしれない。お昼から起き上がって活動を開始した。昨日に期日前投票を済ませておいたから今日はゆっくり過ごせた。本当は夜に選挙の総括をみたかった気持ちもあったけど、また明日でもいいか。</p><h2 id=みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</h2><p>昨日の続き。午後からオフィスで資料を作り始めた。夕方に晩ご飯食べに帰ってくつろいでからまた夜にウォーキングの途中でオフィスに戻ってきて資料を作っていた。気付いたら3時間ほどやってて9割ほどできた。本と読者と学びの段階みたいな、何が言いたいのか自分でもまだ明確ではない、学びの視点を考慮したプログラミングの話しを組み立ててみた。まだふわふわしているのでもう少し洗練させて詰めようと思う。資料の中に3つの話題があるのでなんかうまくまとまっていないような気がしている。タイトルも決まらない。</p></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1030/>勉強会のコンテンツ思案</a></h1><div class=post-meta><span class=post-date>2021-10-30</span></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#消防設備点検>消防設備点検</a></li><li><a href=#ストレッチ>ストレッチ</a></li><li><a href=#みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</a></li><li><a href=#サバクトビバッタの研究>サバクトビバッタの研究</a></li></ul></nav></div><div class=post-content><p>0時からウォーキングに出て1時に帰ってきて軽くストレッチして <a href=http://yorimoi.com/story/>宇宙よりも遠い場所</a> を3話までみた。たまたまタイムラインでツィートをみかけて気になってみたら確かにおもしろい。3時ぐらいから寝て6時半に一度起きたものの、2度寝して8時ぐらいまで寝てた。夕方に期日前投票やって、初めて出口調査に声を掛けられたのでそれもやってみた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>僕はだいたいプログラミングしてるときは既に内容を知ってるアニメを常に流してるんですが今週はまた「宇宙よりも遠い場所」を観ていました。これほどまでに13話すべて足すところも引くところもない完璧な作品は他に早々思いつかないです。</p>&mdash; 父 (@fushiroyama) <a href="https://twitter.com/fushiroyama/status/1453610090632663048?ref_src=twsrc%5Etfw">October 28, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=消防設備点検>消防設備点検</h2><p>点検があるとのことだったので軽く部屋を掃除した。朝ゴミ捨てに行ったらたまたま管理人さんがいて、点検の時間帯でもしいなかったら勝手に部屋に入ってやってもらってよいですと連絡してたら、点検員さんに掛け合ってくれてすぐに設備点検してもらえた。部屋とキッチンにある火災探知機がちゃんと作動するかどうかをテストしてた。2分ぐらいで完了した。おかげで今日の家を出る予定を前倒しできた。感謝。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週はジョギングしてない代わりにウォーキングをして筋肉痛を軽減しつつ臨んだ。平日のストレッチも3回ぐらいやっているので現状維持ぐらいかな？と思ったけど、開始前166cmで、ストレッチ後167cmで前回よりも数値は悪くなってた。物理的な体調はよいつもりだったけど、数値が悪化したのでなにか不足があるのか、平日のストレッチの時間が足りないのかもしれない。もしくは、ストレッチを受けていると、まだ右股関節の違和感とお尻の筋肉の張りは根強い。今週は5日ぐらいウォーキングしているのでその疲労もあるのかもしれない。トレーナーさんに夜にウォーキングするとよく眠れるという話しをしたら、ジョギングよりもウォーキングの方がリラックスできて、ジョギングや筋トレ (激しい運動) は交感神経を刺激して睡眠にはよくないといった話だった。ググったら <a href=https://kenja-club.com/column/201605kobayashi/>ジョギングよりもウォーキングがお勧め</a> という記事も出てきた。</p><h2 id=みんなの-python-勉強会の資料作り>みんなの Python 勉強会の資料作り</h2><p>昨日の続き。発表の内容の構成を考えながら、過去に書いた本や資料、サンプルコードなどを見返していた。コンテンツはだいたい頭の中で固まってきた。あとは構成を練りながら実際にスライドとして仕上げていくだけ。いつもそうなんだけど、スライドの作り始めが一番難しい。何から書くか、どこから作り始めるのかに最も時間を割く。もう少し悩みながら考えておく。</p><h2 id=サバクトビバッタの研究>サバクトビバッタの研究</h2><p>たまたまタイムラインでみかけて <a href=https://otokomaeno.hatenablog.com/entry/2021/10/30/170343>『バッタを倒しにアフリカへ』行き、必殺技を見つけてきました</a> を読んでみたらすごくおもしろかった。国連にはバッタ予報官という専門職？があるのを記事などでみかけていた。日本だとイナゴになるんだろうけど、世界的にはバッタなんよね。そんなバッタの研究に、全然関係ない日本の若手研究者が、過去40年間誰もアフリカで腰を据えて研究しておらず、バッタ研究の歴史が止まったままであることに気付いて、何年もかけてシンプルな観察をメインにしたフィールドワークで成果をあげたという、ミドルエイジクライシスな自分にとっては痛快で元気がでる記事だった。著者のノリもおもしろいので、おそらく陽気な人なんだろうと思う。応援する意図でも <a href=https://www.amazon.co.jp/exec/obidos/ASIN/B072FGTM65/hatena-blog-22/>バッタを倒しにアフリカへ</a> を購入した。</p><div class=video-container><iframe src=https://www.youtube.com/embed/Eq1RP7t1ZOw allowfullscreen title=国連食糧農業機関（FAO）の上級バッタ予報官キース・クレスマンさんインタビュー></iframe></div></div></div><div class="post on-list"><h1 class=post-title><a href=/diary/posts/2021/1029/>フラクタルスプリントの調査</a></h1><div class=post-meta><span class=post-date>2021-10-29</span></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/scrum/>scrum</a>&nbsp;</span><div class=table-of-contents><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#connect-2021>Connect 2021</a></li><li><a href=#みんなの-python-勉強会>みんなの Python 勉強会</a></li><li><a href=#フラクタルスプリント>フラクタルスプリント</a></li></ul></nav></div><div class=post-content><p>2時から <a href=https://www.facebookconnect.com/ja-jp/>Connect 2021</a> のイベントをみてた。3時過ぎぐらいには眠くて耐えられなくなってそのまま寝落ちしたら7時に起きた。本当は6時から金朝ツメトギの朝活の日だったのに寝坊して参加できなかった。なんか疲れて家に帰って13時から17時まで寝てた。生活のリズムを崩すと大きく集中力がなくなる。その後、またオフィスに行って作業してた。</p><h2 id=connect-2021>Connect 2021</h2><p>マーク・ザッカーバーグの基調講演を聞いていると、機械学習の次のテックの波はメタバースなのかなぁとか思ったりもしたけど、あとで <a href=https://nianticlabs.com/blog/real-world-metaverse/>メタバースはディストピアの悪夢です。より良い現実の構築に焦点を当てましょう。</a> を読んでいて、やっぱり違うよなぁとも思った。自分がメタバースの世界で活動したり、アプリケーション開発をやってないから他人の意見に引っ張らられる。いずれにしても自分でちょっとやってみて、メタバースとの今後の付き合い方を考えないといけないということだけは理解した。今日の時点ではこのツィートがおもしろかった。</p><blockquote class=twitter-tweet><p lang=zxx dir=ltr><a href=https://t.co/4UHSycJ9HR>pic.twitter.com/4UHSycJ9HR</a></p>&mdash; seya (@sekikazu01) <a href="https://twitter.com/sekikazu01/status/1453963389420531714?ref_src=twsrc%5Etfw">October 29, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=みんなの-python-勉強会>みんなの Python 勉強会</h2><p>あべさんから依頼がきて <a href=https://startpython.connpass.com/event/228136/>みんなのPython勉強会#75</a> で発表することになった。いつだったか忘れたけど、コロナ禍になる前だったと思うけど、いつか発表してほしいみたいな話しをしたりしながら機会がなくていまに至るというのもあって、内容があうならいっかという感じで引き受けた。20-30分程度でできるPyとエキPy第3版の話しを半々ずつみたいな内容でやるつもり。週末に内容を詰めて資料を作るつもり。Python は普段使いのツールとして使っているものの、お仕事で Go や Java で開発するようになってからあまり深く関わらないようになってしまった。ずっと Python コミュニティの勉強会に行ってたから、いまでも Python の人とみられるのは仕方ないかなとも思う。</p><h2 id=フラクタルスプリント>フラクタルスプリント</h2><p>ある記事で <strong>フラクタルスプリント</strong> というキーワードをみかけて、なんのことか分からなかったので調べてみた。47機関というチームが実践しているスクラムをベースにした開発方法論と言えるのかな？次の発表動画をみて雰囲気は理解できた。</p><ul><li><a href=https://kyon-mm.hatenablog.com/entry/2020/10/18/171650>15分スプリントの具体的な進め方について動画で話した #15min_sprint</a></li></ul><p>フラクタルスプリントのやり方はこんな感じ。</p><ul><li>基本はスクラムのイベントをそれぞれのスプリントで行う</li><li>スプリントの中にスプリントを含めるという入れ子構造をとる<ul><li>1ヶ月 → 1週間 → 1日 → 1時間 → 15分の入れ子</li></ul></li><li>それぞれのスプリントの20%程度の時間は自由時間にしてバッファをとる<ul><li>例えば、1時間のスプリントに含むのは 15分 x 3 のスプリントと残り時間は自由なスプリントの時間にする</li></ul></li><li>15分スプリントは10分タスクを1つだけやるスプリントと言える<ul><li>残りの5分をスクラムイベントにあてる</li></ul></li></ul><p>極端にイテレーション期間の短いスプリントをすることで、通常のスクラムの開発方法論になかったイノベーションが起きるのではないか？といったところを狙いに47機関さんが業務で実践的にやっているプラクティスと言えるみたい。実際にやってみてうまくいったことなどを話しているので、ある種の学習コストを要求するものの、よいところもあるようには思える。おそらくは意図的に悪いところを話してなかったようには思える。例えば、それぞれのスプリントのイベントにおけるオーバーヘッドは大きくなるので作業時間が減るとか、10分タスクですべてチケット化すると、チケット数が増えるので必然的に過程の記録はチケットに残ってないはず。スプリントバックログを付箋の代わりに使うだけというのはスクラム開発一般の話ではあるけど、このやり方では開発者が何をやっているかを書く場所としてチケットは適切な場所ではなくなる。代わりに wiki にまとめるとは話してた。wiki だとフロー情報を監視するのが難しくなるが、その分、短いスプリントでのイベント (プランニング、レビュー、レトロスペクティブ) が頻繁にあるのでそれをフロー情報の監視の代替として機能するようにみえる。いわば強制で。</p><p>15分スプリントと聞いて先入観でイメージするよりも、合理的なところも理解できたのでチームの学習コストとスプリントイベントのオーバーヘッドを受け入れるなら悪くない開発方法論かもしれない。良い・悪いといった是非ではなく、47機関さんが大事にしているチームの価値観や文化、そしてチームをよくするための実践的な方法論と一緒に理解することでこの開発方法論は活きてくる。開発方法論だけをみてあれこれ言うのは適切ではないとも思えた。自分たちの業務や働き方にあった開発方法論を開発チームはずっと考え続けていくべきだと私は考えていて、47機関というチームはフラクタルスプリントという手法を編み出して、それ自体が素晴らしいなと思えた。</p></div></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=/diary/page/35/><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a></span>
<span class="button next"><a href=/diary/page/37/><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/diary/assets/main.js></script>
<script src=/diary/assets/prism.js></script></div></body></html>