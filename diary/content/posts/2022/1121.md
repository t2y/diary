---
title: "http フレームワークの選び方"
date: "2022-11-21T12:14:35+09:00"
dates: [2022/11]
cover: ""
tags: [life, go, design]
showFullContent: true
---

昨夜いろいろあって帰ってくるのが0時過ぎになった。23時過ぎから雨降りで雨の中、自転車で帰ってきた。2時に寝て5時に起きて7時半に起きた。危うく寝坊するところだった。

## 母の入院

昨夜のいろいろのすべて。最悪の事態を想定してお手伝い先にも今日休むかも？と昨日の夜時点で一報を入れていた。結論としては休む必要はなかった。「ろれつが回らない」という連絡を受けて姉が救急車で病院へいくことを指示して即検査で即入院した。母は過去に目がみえなくなって脳梗塞だったことがある。幸い一通り検査して問題はなかったものの、念のために2日間入院して明日退院する予定。姉に病院の付き添いとかいろいろやってもらったので、私も週末に帰って様子をみてくる。お仕事が立て込んでてんやわんやだけど、そのために神戸で自分の会社をやっているのもあるので仕方ない。母は車を運転しない方がよいだろうという見立てで週末にレンタカーも借りた。久しぶりに高速バスではなく、高速道路をドライブしながら実家へ帰る。

## echo と chi でサンプルコードを書いてみた

[go の http フレームワークの選定]({{< ref "posts/2022/1117.md#go-の-http-フレームワークの選定" >}}) の続き。明日、定例があるのでメンバーにソースコードを共有しつつ、http フレームワークの採用を決めようと考えている。特定のルーティングとミドルウェアの適用をする簡単なサンプル。

* https://gitlab.com/t2y/echo-sample
* https://gitlab.com/t2y/chi-sample

net/http のレイヤーであれこれカスタマイズしたいなら [chi](https://github.com/go-chi/chi) でよい気もするけど、web api のアプリケーションのレイヤーにのみ注力したいなら [echo](https://echo.labstack.com/) を使った方が楽そうという私の第一印象。web api サーバーを書いてて request のパラメーターを扱うことはあっても response writer を扱う必要性をあまり感じたことがない。json しか返さないのだし、構造体を返したら勝手に json に変換してくれたらそれでいいんじゃないかと私は考えている。
