---
title: "slack ペイロードの response_url にはまった"
date: "2021-11-28T09:40:22+09:00"
dates: [2021/11]
cover: ""
tags: [bizpy]
showFullContent: true
---

1時に寝て8時に起きた。昨日は喋り倒して疲れてよく眠れた。午前中は溜まった日記を書き殴って、お仕事でやっているカスタム github actions で気になったコードを修正して、午後から bizpy の勉強会の準備を始めた。なんか気乗りせずにだらだらやって最終的には出来上がった。たいていだらだらやるときは頭の中ではもう出来上がってて集中したら2-3時間でできるのを脳が把握していて、まだ時間に余裕があるから怠けるみたいなときがある。そういうときは作業やめて散歩に出掛けるようにしている。

## bizpy 勉強会の資料作り

次の [Python で Slack のインテグレーションをやってみる勉強会 #3](https://bizpy.connpass.com/event/229239/) のサンプルコードの実装をしていた。内容はだいたい次の通り。あとは資料をまとめるだけ。

* slash command の設定と実装
* ephemeral メッセージ (本人だけみえるメッセージ) の実装
* block kit でモーダルダイアログに入力した情報を使ってチャットに書き込む
  * [OpenWeather API](https://openweathermap.org/) を使って天気の情報を連携する

たまたまモーダルダイアログを取り上げただけなんだけど、モーダルダイアログを submit したときにチャットに書き込むのは、そのままではできなくて、なんらかの特別な処理が必要になって、そこにはまってた。response_url の扱いはわりとややこしいみたい。

* [Slack ペイロードに含まれる response_url を完全に理解する](https://qiita.com/seratch/items/ed29acd565af36e65072)
