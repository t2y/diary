---
title: "お仕事しかしなかった一日"
date: "2021-11-15T13:13:44+09:00"
dates: [2021/11]
cover: ""
tags: [kubernetes]
showFullContent: true
---

2時に寝て6時半に起きた。寝る前にウォーキングしてくるとよく眠れる気がする。お仕事で簡単に終わると思ってた作業にちょっとはまってトラブルシューティングしてたら疲れた。原因はわかって自己解決できたのはよかったけど、消耗して早くお仕事を終えて帰ってくつろいでた。

## ローカル開発環境の整備

お仕事でローカルの k8s 環境の保守の作業をしている。[minikube](https://minikube.sigs.k8s.io/docs/) でローカルの k8s クラスターを作成して [kubectl](https://kubernetes.io/docs/reference/kubectl/overview/) コマンドで制御する。k8s の yaml の設定ファイルのことをマニフェストと呼ぶのかな？そのテンプレート？ジェネレーター的なツールに [kustomize](https://kustomize.io/) を使っている。先週から1週間触っていたので cli の操作にはだいぶ慣れてきた。

まだ基本的な delete & apply みたいなことしかやってないけど、また余裕のあるときに細かいコマンドやロールバックのやり方なども学習しようと思う。デプロイで一番重要なのはロールバック、次にローリングアップデート、ローリングアップデートができればカナリアリリースもできるかな？その2つがあれば運用は大幅にコスト削減できるし、開発のアジリティも上げられる。たぶん k8s を使えば簡単にできるんだろうなというのは delete & apply だけみてもそう受け取れる。k8s クラスターさえマネージドならよく出来た仕組みだなと感心した。
