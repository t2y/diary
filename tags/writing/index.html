<!doctype html><html lang=en><head><title>writing :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/writing/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="writing"><meta property="og:description" content><meta property="og:url" content="/diary/tags/writing/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/writing/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1224/>無駄なものはそうそうない</a></h1><div class=post-meta><time class=post-date>2023-12-24 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/animation/>animation</a>&nbsp;</span><div class=post-content><p>0時に寝て4時に起きてアニメをみて5時半に寝て9時に起きた。午前中はだらだらしていた。</p><h2 id=旅のしおりのたたき台作り>旅のしおりのたたき台作り</h2><p>3月に予定している <a href=/diary/posts/2023/1027/#隔週の雑談>開発合宿</a> イベントの打ち合わせを次の木曜日に行う。そのための資料作りをした。昨年の記録があるのでその内容を見返したり、写真を貼り付けたりしながら、昨年作った資料よりも詳細な「旅のしおり」を作ることができた。</p><ul><li><a href=/diary/posts/2022/0603/>1日目</a></li><li><a href=/diary/posts/2022/0604/>2日目</a></li><li><a href=/diary/posts/2022/0605/>3日目</a></li></ul><p>しばらくは冬の城崎温泉の開発合宿を、うちの会社の年中行事として継続していきたい。</p><h2 id=コワーキングの価値の考察>コワーキングの価値の考察</h2><p>独りで活動する個人事業主やマイクロ法人の役員にとってコワーキングがもたらす価値は大きいのではないかと私は考えている。以前 <a href=https://note.com/t2y1979/n/n84deed5fd934>リモートワークと相談相手</a> という記事を書いた。そのふりかえりや考察の中から <a href=/diary/posts/2022/0927/>日記を書き続ける</a> ことに決めた。それは思考の外在化を強制的に行わないと、私はすぐに劣化するということを身をもって理解した。ひとえに人間が弱いのだと思う。思考の外在化とは次になる。</p><ul><li>書くこと</li><li>話すこと</li></ul><p>これらの活動が減ることで思考が鈍化したり脳が退化したりする。書くことは日記で補えたが、話すことは相手がいないと成り立たない。顧問のはらさんに隔週で相談しているのもそうだし、カフーツさんのオンラインイベントに参加しているのもそうだし、開発合宿に社外の人たちを呼ぶのもその一環になる。そして、このことは会社員時代にあまり感じたことはなかった。それは会社員時代にはこれらの活動を伴うイベント、つまり会議だったり、報告だったり、同僚との雑談などが自然に日々の生活の中に含まれていたからだ。</p><p>無駄じゃなかったんやと思ったら次のシーンを思い出した。</p><blockquote><p>初めて、成功したよ。800年か……全く、無駄な魔法だと恨んでさえいたが。ああ、意味はあったんだな。</p></blockquote><div class=video-container><iframe src=https://www.youtube.com/embed/eZ13oxXpbH4 allowfullscreen title=フェルズの気付き></iframe></div><p>意味のない無駄なことだと思いながらも長く続けていたことが、その意図をもって実施したかの如何に関わらず、なにかの役に立つことはあるし、なにごとも継続するに無駄なことはないという気付きでもある。古代の中国においても <a href=https://ja.wikipedia.org/wiki/%E5%AD%9F%E5%98%97%E5%90%9B#%E9%B6%8F%E9%B3%B4%E7%8B%97%E7%9B%97>鶏鳴狗盗</a> という故事がある。人それぞれに長く継続できていることがあるならそのことを大事にしたらよいと私は思う。それは継続した先にしかわからないこともある。</p><p>やや非科学的な仮説ではあるが、<a href=https://ja.wikipedia.org/wiki/%E5%B0%8F%E6%9E%97%E6%AD%A3%E8%A6%B3>小林正観</a> という人物が「ありがとう」を唱えると幸せになるという仮説を提唱している。「ありがとう」を一万回となえると幸せになり、二万五千回となえると涙があふれだし、五万回となえると奇跡がおきる、もしくは年齢×一万回となえると第一段階の奇跡が起きるという。仮にこういった現象が本当に起きるのであれば、他者への感謝を述べる言葉から脳が影響を受けて、感謝の行動や考え方が身に付いて、現実の生活にも影響が出てくるのだろうと推測する。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1206/>記事のレビューをしてもらえるサービス</a></h1><div class=post-meta><time class=post-date>2023-12-06 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/review/>review</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>疲れて18時過ぎにはお仕事を終えて、帰ってきて晩ご飯も食べずにそのまま寝てた。22時頃に起きてそれから晩ご飯を作って食べて、また夜に寝て6時に起きた。</p><h2 id=テックブログレビュー>テックブログレビュー</h2><p>顧問のはらさんに昨日書いたテックブログのレビューをお願いした。一通り、調査した内容の範囲内で書いてはいるが、私はフロントエンドについて明るくないため、大きな勘違いや誤りを含んだ文章を書いてしまう可能性がある。本来テックブログは会社のブランディングにつながるものだが、誤った記事を書いてしまうと逆効果になってしまう。自社なら私の責任で済むが、他社のテックブログでブランドイメージを毀損するのは申し訳ない。</p><p>私が書いた記事をレビューしてもらえる有識者を、報酬をつけて広く募るみたいなサービスがあってもいいなと思えた。うちの会社がもう少し財務的に余裕ができたら、いくつかの分野の有識者と顧問契約して、技術に限定せず、いろんな分野で私の書いた記事のレビューをお願いできるような体制にしたい。余談だが、レビュー依頼して誰もレビューしてくれないというのも書いていて寂しい。よい開発文化をもつチームならそんなこと起きない。私を書いた記事をメンバーが率先してレビューしないという時点でまだまだうちのチームには改善の余地がある。</p><h2 id=円形テーブル受け取り>円形テーブル受け取り</h2><p>ジモティーで「籐 ラタン 木製丸テーブル」を500円で購入した。使わないときは折り畳みできる。省スペースでよさそうにみえた。現物を受け取ってみて、使用感はあるが傷んではいない。まだ実家の離れで使うか、自分の部屋で使うかは決めていない。しばらく部屋で使ってみてその用途や感触で決めようと思う。問い合わせしてから2日後に近所のローソン前で待ち合わせをして受け取りできた。近所だと、引き取りの調整もしやすいし、軽いものだったので自転車の荷台に乗せて運んできた。これまでジモティーで6件の取引を行ったが、いまのところ、トラブルはない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1205/>全員採用のためのテックブログ</a></h1><div class=post-meta><time class=post-date>2023-12-05 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/svelte/>svelte</a>&nbsp;
#<a href=/diary/tags/blog/>blog</a>&nbsp;
#<a href=/diary/tags/recruiting/>recruiting</a>&nbsp;</span><div class=post-content><p>2時に寝て6時に起きて9時前に起きた。寝るのがどんどん遅くなってきて生活のリズムが乱れてきた。</p><h2 id=sveltekit-に関するテックブログ執筆>sveltekit に関するテックブログ執筆</h2><p><a href=/diary/posts/2023/1204/#kitvite-アプリケーションのデバッグ>先日の続き</a> の続き。</p><p>調査は一区切りついたのでテックブログを執筆することにした。今日はほぼ丸一日記事を書いていた。本当はマネージャーの私が1-2週間も技術調査して、テックブログを一生懸命書くみたいなことをやるよりも、他に大事なプロジェクトの遊撃やマネジメントに時間を割くべきではある。一方でメンバーに課題に取り組むにあたり、設計をどうするのか？設計をするためには調査が必要であること、調査した内容をアウトプットする重要性などの模範を示したいという意図で書いた。そして、メンバーにも開発の隙間にテックブログを書くことを業務として指示しようと考えている。</p><p>なんのためにテックブログを書くか？という目的は、業務においては明確で採用のために書く。プログラマーが採用において協力できることは限られる。その中でもテックブログというのは費用対効果が高く、会社のブランディングにもつながり、よい開発文化を醸成することにもつながる。プログラマーの採用がとても難しくなった昨今「全員採用」というキーワードもよく聞くようになった。一見プログラマーは採用において無関係だし、実際にそういった業務をやらなくても咎められることはない。しかし、自分のできることで採用に協力したいと考えたとき、できることの1つにテックブログを書くというのは悪くない選択肢だと私は考えている。少なくともテックブログを書けない (書かない) 人たちにとやかく言われたくない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1122/>テックブログレビュー</a></h1><div class=post-meta><time class=post-date>2023-11-22 (Wed.) ::</time></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/motivation/>motivation</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;</span><div class=post-content><p>この前の <a href=/diary/posts/2023/1120/#ガンダムに学ぶ経営学>テレ東の番組</a> に影響をうけて夜にファーストガンダムをみたりしていた。1時に寝て3時半に起きて何をしていたか覚えていないが、気付いたら5時半だった。その後、slack のメッセージに気付いて返信するために6時半に起きた。</p><h2 id=テックブログ執筆>テックブログ執筆</h2><p><a href=/diary/posts/2023/1121/#テックブログ執筆>昨日の続き</a> 。残り 1/3 の <a href=https://ja.vitejs.dev/>Vite</a> についての調査内容を書いて昼過ぎにはレビュー依頼のマージリクエストを送った。といっても、お手伝い先の社内にはフロントエンドに詳しい開発者はほぼいないと推測される。はらさんにもお願いしていて、このレビューは実質的にはらさんが担当することになると想定される。はらさんの OK が出たらそのまま公開してしまおうと考えている。できれば金曜日中には公開してしまいたい。</p><p>学生の頃、物理の先生が言ったかどうか定かではないが「物体が動き出す直前が最も摩擦が大きい」という言葉を気に入っている。先週に大半を調べていた内容を、週末、月・火と4日もまたいで水曜日に記事を書き終えるというのが、私の職務レベルからすると怠慢と指摘されたら認めるしかない。金曜日の夜に能鑑賞して、土曜日はもくもく会へ行って、日曜日は深夜コワーキングをしていた。要は遊んでいた、楽しかったんだけど。加齢でモチベーションコントロールが難しいから土日の両方を遊んでしまうと、やらないといけないことがなにも進まないといった状況に陥ってしまう。そして、やらなくても誰からも怒られないというのが悲しい現実だ。</p><h2 id=鶏もも肉-2kg-まとめ買い>鶏もも肉 2kg まとめ買い</h2><p><a href=/diary/posts/2023/1112/#業務スーパー>業務スーパーの買いもの</a> の続き。17時にお仕事を終えて、時間があったので業務スーパーへ買いものへ行った。オフィスから近所の業務スーパーへ行くのは20分ほどかかることから、19時閉店のお店へ平日行くのはやや難しい。今日の目当ては鶏もも肉まとめ買い。2kg を買うと1,780円 (税抜き) で7つの肉片が入っていた。100g あたりに換算すると89円になる。さっそく炒めて食べてみたが、とくに調理や風味に問題はない。</p><ul><li><a href="https://www.gyomusuper.jp/product/detail.php?go_id=6037">吉備高原どりもも肉</a></li></ul><p>(おそらく) 同じ鶏肉の肉片1枚入りに小分けした真空パックだと 100g 98円になる。通常の肉のパッキングの消費期限は2-3日といったところが、真空パックだと7日に延びる。この9円の差異を真空パック料金だと捉えることもできる。この前 KOHYO で購入した国産鶏もも肉は 100g 138円だった。格段に安い。</p><figure><img src=/diary/img/2023/1122_chicken.jpg></figure><p>2kg も一度に消費できないので肉片の2つを冷蔵庫へ、5つは冷凍保存する。冷凍保存すると2-3週間はもつらしい。冷凍保存するためのラップで包んだり、解凍したりするのが面倒でもある。仮に1日で肉片1つを消費するとして7日分の食材になる。1枚入りの真空パックを3-4個買って冷蔵庫で保存して7日以内に食べるのでもよいかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1121/>テックブログの書き始め</a></h1><div class=post-meta><time class=post-date>2023-11-21 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/project-management/>project management</a>&nbsp;
#<a href=/diary/tags/issue-management/>issue management</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;</span><div class=post-content><p>昨日は夜にいろいろ作業して、1時に寝て4時に起きて7時に起きた。</p><h2 id=テックブログ執筆>テックブログ執筆</h2><p><a href=/diary/posts/2023/1117/>先週から調査している内容</a> についてテックブログを書き始めた。マネジメントや実装をしていると筆が進まなくて書き始めるのが随分と遅くなってしまった。学校の試験前に、試験勉強やらずに部屋の掃除をやってしまったりするような感覚。午前中は昨日 go-ldap に送った pr がまとめてマージされた。その修正を取り込んだライブラリのバージョンで関連するところのコードをリファクタリングしていた。それでもようやく書き始めた。書き始めたら一気に 2/3 は書けた。本当は晩ご飯を食べた後にレビューできるところまで書いてしまおうと思っていたが、そこまで体力 (集中力) が続かなかった。なんとなく張り合いがなくて適当なところで妥協してしまう。</p><h2 id=試行錯誤から学ぶ開発スタイル>試行錯誤から学ぶ開発スタイル</h2><p>たまたまみかけた記事でひどい内容の記事をみた。一読しただけでもやもやしていたのを知人と議論していて言語化できるようになったので書いてみる。</p><ul><li><a href=https://yigarashi.hatenablog.com/entry/2023/11/20/093000>エンジニアが仕様案を手戻りさせるアンチパターンはもう終わりにしよう</a></li></ul><blockquote><p>もっと前段にエンジニアが議論に参加する、なんなら議論をリードするくらいのことをしていく必要があるでしょう。</p></blockquote><p>こういうこと言い出すマネージャー (PO) 多いし、意見そのものは一理あるんだけど、これをエンジニアがイニシアティブとってやっていたらマネージャーいらないでしょ？ということを自覚していない。もっと言うと、PO という責任のある立場の人が大変という理由で責任放棄しているようにみえてしまう。<a href=https://t2y.hatenablog.jp/entry/2023/09/03/011023>(翻訳) ビッグテックのプロジェクトマネジメントとスクラム不在の謎</a> という記事では実際にテックリードまたはエンジニアがプロジェクトのイニシアティブを取っていると書かれている。もしそうするなら、まず自身のスキル不足や未熟さを受け入れないといけない。</p><p>マネージャー (PO) にとって大きな役割は意思決定であって、仕様案や計画において技術的なところがわからないのであれば、エンジニアに委譲したり相談して事前にいくらでも調整できるはずだし、その調整作業そのものはマネージャーの仕事の1つと言える。そういった調整をマネージャーがやるからエンジニアは実開発の設計や実装に集中できる。結果的に生産性も上がる。この文章から伺えることはリファインメントや計画に臨んだときにダメ出しされてやり直すことを手戻り、大変、効率が悪いとネガティブに捉えている。逆に言えば、最初から完璧に仕様案を作れるはずだと思い込んでいるふしがある。</p><p>そして、誰もが知っていることだが、最初から完璧な仕様案や計画など作れるはずがなく、不確実性を許容しながらスクラムやアジャイル開発といった開発方法論の取り組みで調整していくというのが、モダンな開発のやり方である。その試行錯誤や手戻りは無駄なことではなく、チームやプロジェクトが学ぶべきことの1つだという考えがこの文章からは読み取れない。そして、自分が仕様案を適切に作れなかったのを自分のスキル不足だと認めず、チームのエンジニアが議論に参加していないからだと責任転嫁している。それはマネージャーが技術的に大事なことを理解できていなかったとふりかえり、計画を修正したり、次に計画するときは同じようなことが起こらないよう、努めていくというのがスクラム的なプロジェクトの進め方になるはずだ。手戻りはアンチパターンではなく、学びの過程や必要な試行錯誤であると認めて受け入れるところから始めるべき。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1114/>エッセイと世界観</a></h1><div class=post-meta><time class=post-date>2023-11-14 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/world-view/>world view</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;</span><div class=post-content><p>0時に寝て2時半に起きて4時に起きて7時に起きた。昨日は本を読みながらいろいろ考えていた。</p><h2 id=頁をめくる音で息をする>頁をめくる音で息をする</h2><p>先日の <a href=/diary/posts/2023/1025/#コワーキングのオンラインイベント>オンラインイベント</a> でいとうさんに教えてもらった <a href=https://20db.stores.jp/items/61869c960548e03fb98a95ac>頁をめくる音で息をする</a> を読んでいる。ジャンルで言えばエッセイになる。著者の日常や日々の所感などを綴っている。<a href=https://en.wikipedia.org/wiki/Paul_Graham_(programmer)>Paul Graham</a> 以外であまり読んだ記憶がないぐらい、私にとってエッセイという読みものは珍しい組み合わせになる。私がいま日々書いている日記も、ちょっと技巧を凝らしたり、お洒落な文章に変えてみたらエッセイにならないだろうか？と考えてみる。</p><p>この日記は「書くこと」を目的としているものの、ここで書き溜めたものは将来の自分を助けるコンテンツになることを確信している。それは過去の私が書いたコンテンツがいまの私を助けているし、書き溜めたコンテンツを評価してくれるサイト、例えば <a href=https://lapras.com/public/t2y>LAPRAS スコア</a> をみると、高い評価値になっていたりする。いまのところ、このスコアを何かに使っているわけではないが、15年以上も書いてきたコンテンツはそう簡単に真似できるものではないし、一朝一夕で身につくスキルでもない。</p><p>過去にある会社のトライアルを受けたとき、ある技術の調査結果を wiki にまとめたところ「長文がちゃんと書ける」という評価をその会社の CTO から受けたことがあった。私はきょとんとして「そんなの開発者なら誰でも書けるでしょ？」と感想を述べたところ「いや、そうでもない。」と返ってきて、それから私もちゃんと考えてみたところ、言語能力を高めやすいプログラマーであってもちゃんとした文章を書けるのは全体の半分ぐらいしかいないことに気付いた。文章を書く練習をしない生活を何年も続けていると、驚くほど文章を書くスキルを退化させてしまうことに意識的に気付いていない人も多い。「本気出せば書ける」と思っている人ほど、その自信以上に文章を書けないことに気付いていない。</p><p>閑話休題。本書を読んでいると、日々のたわいもないエッセイがまったく無駄ではないことを伺える。それは本書そのものが売りもののコンテンツとして値段がついていて、私がそれを買っていて、ふわっと読み進めながら自分なりに消化して思うことがいくつかあるからだ。いくつか思いついたことをアイディアそのままに書く。</p><h3 id=中原中也がいい>中原中也がいい</h3><p>いま <a href=https://www.aozora.gr.jp/cards/000026/files/894_28272.html>山羊の歌</a> をぱっと眺めるだけでもその天性を伺える。詩の冒頭を読むだけでもなにか違うと思わせる。著者は学生時代に中原中也を研究していたらしく、中也の作品には死を歌ったものが多くあるという。本書でもいくつか詩の引用がある。中也は <a href=https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%80%E3%82%A4%E3%82%B9%E3%83%A0>ダダイズム</a> と呼ばれる思想に影響を受けているらしい。</p><pre tabindex=0><code>トタンがセンベイ食べて
春の日の夕暮は穏かです
</code></pre><pre tabindex=0><code>幾時代かがありまして
　　茶色い戦争ありました
</code></pre><pre tabindex=0><code>丘々は、胸に手を当て
退けり。
</code></pre><pre tabindex=0><code>私の聖母 (サンタ・マリヤ)！
　　とにかく私は血を吐いた！ ……
</code></pre><pre tabindex=0><code>汚れつちまつた悲しみに
今日も小雪の降りかかる
</code></pre><p>よく技術書などで章節の初めに著名人の言葉を引用していたりする。日本人なら過去の文学者の詩を引用するというのもよさそうな気がした。</p><h3 id=エッセイを配布する>エッセイを配布する</h3><p>一昔前は本という成果物をつくるのが大変な労力を伴うものだった。しかし、現代は文章は電子データでインターネット経由でダウンロードできる。日記を書き溜め、お気に入りの内容を脚色して、メッセージや想いをのせたものをエッセイ本としてつくってみるのもおもしろいかもしれないと、本書を読んで思うようになった。それはエッセイの中で著者の人となりや考えを知るきっかけになる。それを誰かに読んでもらうためというよりは、自分がどういった考えで日々の創作をしているかというのを歴史のように残すという意味合いが強い。例えば、年単位で整理して残しておく。おそらくはそれがまた将来の自分を助ける日がくるような気がする。もしうちの会社に関心をもつ人が出てくれば、電子データは自由にダウンロードして読めばいいし、何冊か紙の本に装丁してノベリティにしてもよい。</p><h3 id=エッセイがその人の世界観を表す>エッセイがその人の世界観を表す</h3><p>本書を読んでいて著者の世界観が本書から伝わってくる。いや、ちょっとそれは言い過ぎでそんな大層なものでもない。著者は仕入元やお客さんとやり取りしながら本を扱うというスタイルを好んでいるようにみえる。ただ本を売り買いしてお金を稼ぐことをよしとしていない。もちろん生活費は必要だから売れてもらわないと困るという文章もちらほらあるが、それ以上に本に関わる人たちとのエピソードを紹介してこんなやり取りがあって嬉しかったということが綴られている。なんとなく私も共感することだが、大きいプロダクトの、大多数の利用者がいるプロジェクトほど、個々の利用者と接する機会や意見をやり取りする機会は少ない。多くの人に影響を与えているはずなのにその実感の乏しい労働体験になる。ただの数字でしかない。少ない関係者が関わるお仕事の方が世の中の役に立っている実感は大きい。</p><p><a href=/diary/posts/2023/1008/#イスラエルとハマスの戦争>イスラエルとハマスの戦争</a> 以来、ずっと考えていた (というほどでもないが) ことの1つに世界観を共有することの難しさがある。おそらく人類のうち戦争を望む人はほとんどいないはずだが、自分たちと住んでいる世界とは異なる世界の思想、価値観、秩序、経済、宗教といった世界観を共有できないばかりに争うことが絶えない。こんな大きな話しをしなくても、身近な周りの人たちとでも自分とは違う価値観をどうやって知り、どのような理解を示すことができるだろうか。エッセイは他者の世界観を表す1つの手段になりそうに思えた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1102/>論理の通じない人たち</a></h1><div class=post-meta><time class=post-date>2023-11-02 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/sns/>sns</a>&nbsp;
#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/design/>design</a>&nbsp;</span><div class=post-content><p>23時に寝て何度か起きて8時に起きた。ホテルの部屋が暗いと朝になった気がしなくて2度寝したら寝坊した。</p><h2 id=組織の対応と-sns-の議論>組織の対応と sns の議論</h2><p><a href=/diary/posts/2023/1030/>先日の sns 騒ぎ</a> の続き。公式からの声明も出たので軽くまとめておく。</p><ul><li><a href=https://pyconjp.blogspot.com/2023/11/pyconapac2023-statement.html>PyCon APAC 2023におけるNOCコンテンツに関するご指摘について</a></li></ul><p>簡潔な文章に事実の記述、責任の所在、関係者への配慮が含まれていて十分な内容にみえる。法律なども関係するため、弁護士チェックが必要なことを考慮すると、こんな短期間で組織の見解を出せたことは運営側の体制を鑑みることができる。それが適正かどうかは人によって判断は異なるかもしれないが、私はコミュニティ運営というボランティア主体の組織であれば十分なものだと思えた。その後のネット上の議論も、ちゃんと終えてはいないが、様々な見解で議論は進んでいるようにみえる。</p><p>今回みていて感じたことの1つに、コミュニケーションが成り立たない人が世の中にはたくさんいるということ。議論の前提や論理の出発点が異なる人たちは、一定の論理を含む全体や大局を理解できず、細部や詳細のところだけを拠り所に自身の論理を組み立てる。意見の差異があることはなんら問題はないが、論理が通じないのは議論の余地すらないようにみえた。そういう人たちを会話するときは前提条件を同じにしたり、思想の背景を共有したり、もっと時間をかけて丁寧にすり合わせていく作業が必要になる。そして sns のような、流れが速い不特定多数の議論はそういった丁寧な作業にまったく向いていない。だから sns で議論することは時間の無駄である。</p><h2 id=コネクションを共有しないプール>コネクションを共有しないプール</h2><p>go の非同期処理であまり使われることはないが、<a href=https://pkg.go.dev/golang.org/x/sync/semaphore>semaphore</a> が準公式ライブラリとして提供されている。私はセマフォを気に入っていてたまに使う。</p><p>ldap プロトコルではコネクションの確立とログインに相当する bind の操作が分かれている。コネクションを確立したまま、ログアウトに相当する処理ができればプールを設けることでコネクションの再利用ができる。</p><ul><li><a href=https://ldap.com/the-ldap-unbind-operation/>The LDAP Unbind Operation</a></li></ul><p>しかし、このドキュメントの説明によると、unbind という操作は用意されているものの、ログアウトに相当する機能ではなく、クローズする前に通知するといった用途だと書いてある。unbind のリクエストをした後にはクローズするしかないといったものになる。それを踏まえて、プールはセマフォで同時接続数のみを制御するのでよいのではないかと思う。そんなワーカープールを実装してみた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ClientPool</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>config</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>LDAP</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>sem</span>    <span style=color:#f92672>*</span><span style=color:#a6e22e>semaphore</span>.<span style=color:#a6e22e>Weighted</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ClientPool</span>) <span style=color:#a6e22e>Get</span>(
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>,
</span></span><span style=display:flex><span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>LDAPClient</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>sem</span>.<span style=color:#a6e22e>TryAcquire</span>(<span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to acquire, wait and get later&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>client</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>NewLDAPClient</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>config</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Connect</span>(<span style=color:#a6e22e>ctx</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>sem</span>.<span style=color:#a6e22e>Release</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to connect: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>client</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ClientPool</span>) <span style=color:#a6e22e>GetAuthenticated</span>(
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>,
</span></span><span style=display:flex><span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>LDAPClient</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>client</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#a6e22e>ctx</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to get: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>dn</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>BindDN</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>passwd</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>BindPasswd</span>.<span style=color:#a6e22e>String</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Bind</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#a6e22e>dn</span>, <span style=color:#a6e22e>passwd</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>sem</span>.<span style=color:#a6e22e>Release</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to bind: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>client</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ClientPool</span>) <span style=color:#a6e22e>Close</span>(<span style=color:#a6e22e>client</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>LDAPClient</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>sem</span>.<span style=color:#a6e22e>Release</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewClientPool</span>(<span style=color:#a6e22e>cfg</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>LDAP</span>) <span style=color:#f92672>*</span><span style=color:#a6e22e>ClientPool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>ClientPool</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>config</span>: <span style=color:#a6e22e>cfg</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>sem</span>:    <span style=color:#a6e22e>semaphore</span>.<span style=color:#a6e22e>NewWeighted</span>(<span style=color:#a6e22e>cfg</span>.<span style=color:#a6e22e>ClientPoolSize</span>),
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/writing/page/2/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>