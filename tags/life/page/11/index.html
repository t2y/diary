<!doctype html><html lang=en><head><title>life :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/life/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="life"><meta property="og:description" content><meta property="og:url" content="/diary/tags/life/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/life/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0219/>docker の勉強</a></h1><div class=post-meta><time class=post-date>2022-02-19 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/docker/>docker</a>&nbsp;
#<a href=/diary/tags/github/>github</a>&nbsp;</span><div class=post-content><p>0時に寝て6時に起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>ここ1ヶ月ほどお仕事に集中しているのもあるけど、あまりストレッチに意識を割いていない。やるときは集中して注力するのだけど、飽きてくると怠ける性格的なところがある。とはいえ、やめずに続けているといいことがあると経験則からわかっているのでなるべく継続していきたい。今週も特別なことはなにもしていないのだけど、右足の股関節周りに張りがあってあまり調子がよくなかった。今日の開脚幅は開始前163cmで、ストレッチ後167cmで先週よりも数値が悪化している。良くなるときもあれば悪くなるときもある。毎週ストレッチを受けて計測しているとそういう気付きがあること自体、この機会は健康のために役立っているように考えている。</p><h2 id=github-packages-で-docker-イメージを公開する>github packages で docker イメージを公開する</h2><p>docker が流行りだした頃に勤めていた会社の貸与端末が docker 禁止だったので私は docker に乗り遅れて、これまでも誰かが用意してくれたコンテナを使うだけでよかったため、最低限の docker コマンドや docker-compose の使い方しか知らなかった。ちょうどインフラの運用を見直す過程で docker コンテナの作成方法から見直すお仕事ができたのでこの機にいろいろ勉強する。いまどき当たり前なんだろうけど、docker の <a href=https://matsuand.github.io/docs.docker.jp.onthefly/develop/develop-images/multistage-build/>マルチステージビルド</a> をやってみる。</p><p>最初に go のバイナリを選択したのは間違いだったのかもしれない。go のビルド環境を作るベースイメージの選択が難しくて、ビルドはできるけど、作成したバイナリが動かないという状況にはまった。<a href=https://dev.classmethod.jp/articles/how-to-fix-standard-init-linux-error/>ECSのタスク起動時に「standard_init_linux.go」関連のエラーが出た場合の対処方法</a> であるように、いろんな不具合がある。ベースイメージの選択やビルドに必要なライブラリがないとそういうエラーになるんだと気付くまでに時間がかかった。</p><p>最終的に次のような <a href=https://github.com/kazamori/go-sql-executor/blob/main/Dockerfile>Dockerfile</a> でマルチステージビルドができた。builder としてのベースイメージの選択によってやり方はいろいろ変わってくるように思える。</p><pre tabindex=0><code>FROM golang:alpine as builder
RUN apk add --no-cache git make gcc musl-dev
WORKDIR /work
COPY . .
RUN go mod download
RUN make build

FROM alpine:latest
WORKDIR /
COPY --from=builder /work/bin/sql-executor .
CMD [ &#34;/sql-executor&#34; ]
</code></pre><p>Dockerfile ができたら <a href=https://docs.github.com/en/actions/publishing-packages/publishing-docker-images>Publishing Docker images</a> を読みながら github actions で自動的に docker イメージを github packages に公開する設定をやってみた。リリースを作成したときに docker イメージをビルドして公開する <a href=https://github.com/kazamori/go-sql-executor/blob/main/.github/workflows/publish.yml>workflow yml</a> を作成した。ほとんどドキュメントのまま。</p><p>github actions の実行結果。</p><ul><li><a href="https://github.com/kazamori/go-sql-executor/runs/5258037718?check_suite_focus=true">https://github.com/kazamori/go-sql-executor/runs/5258037718?check_suite_focus=true</a></li></ul><p>github packages 上で公開された docker イメージ。</p><ul><li><a href=https://github.com/kazamori/go-sql-executor/pkgs/container/go-sql-executor>https://github.com/kazamori/go-sql-executor/pkgs/container/go-sql-executor</a></li></ul><p>リリースのタイミングじゃなくてコミットのタイミングでも docker イメージを生成できると思うけど、docker イメージのタグに相当するものをどう付けるかというところは工夫する必要がありそう。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0212/>mysql のデータ移行</a></h1><div class=post-meta><time class=post-date>2022-02-12 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/docker/>docker</a>&nbsp;
#<a href=/diary/tags/mysql/>mysql</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>23時に寝て2時前に起きて5時に起きて8時に起きた。あんまり眠れなくなってきた。</p><h2 id=もくもく会>もくもく会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/235747/>【三宮.dev】もくもく会</a> に参加した。もともとオフラインの予定だったけど、オミクロン株の流行でオンラインに変更された。</p><p>お仕事である開発環境の構築をしていて docker-compose を使って mysql の環境構築や共有の開発環境にある db2 に接続するために <a href="https://www.ibm.com/docs/en/db2/10.5?topic=commands-command-line-processor-plus-clpplus">clpplus</a> のインストール方法などを wiki にまとめてた。コンテナにある mysqldump や mysql コマンドを使ってこんな風にデータ移行もできた。</p><p>共有の開発環境からデータをエクスポート。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose exec -T mydb mysqldump -h $DB_HOST -C --set-gtid-purged<span style=color:#f92672>=</span>OFF --skip-triggers $DB &gt; dump.sql
</span></span></code></pre></div><p>ローカルの mysql にデータをインポート。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose exec -T mydb mysql -h localhost -u root -proot $DB &lt; dump.sql
</span></span></code></pre></div><blockquote class=twitter-tweet><p lang=ja dir=ltr>コンテナにある mysqldump と mysql コマンドを使ってデータのインポートするには -T を指定すればいいみたい。そうしないと WARNING とかの文字列が sql ファイルに含まれてしまってインポートできない。<a href=https://t.co/JGeDNsWjhx>https://t.co/JGeDNsWjhx</a></p>&mdash; Tetsuya Morimoto (@t2y) <a href="https://twitter.com/t2y/status/1492391598612959234?ref_src=twsrc%5Etfw">February 12, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=ストレッチ>ストレッチ</h2><p>いつもは11時からなんやけど、今日は17時40分からだった。カレンダーの予定を変更し忘れてて11時に行って間違えた。今週は2日間ぐらいストレッチしたかな。今日の開脚幅は開始前164cmで、ストレッチ後168cmだった。いつも時間帯が違うので数値も変わる。今日は右太ももの内転筋や内側やらがすごく張ってた。あまり調子はよくない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0205/>見積もりの考察</a></h1><div class=post-meta><time class=post-date>2022-02-05 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;</span><div class=post-content><p>23時に寝て8時半に起きた。夜中に胃酸が逆流してむせてしんどかった。</p><h2 id=ストレッチ>ストレッチ</h2><p>先週の日曜日に自転車でこけて胸を強打してまだ治りきっていない。トレーナーさんに伝えたら主に足のストレッチを重点にしてくれた。今週は2日間ストレッチをやったんだけど、今日の開脚幅は開始前166cmで、ストレッチ後169cmだった。先週と同じなので現状維持といったところ。悪くない数字ではある。今日は左のお尻の後ろの筋肉の張りと右太ももの後ろの筋肉の張りが強かった。</p><h2 id=見積もりとは>見積もりとは</h2><p>昨日の <a href=/diary/posts/2022/0204/>バーンダウンしないチャート</a> に関連して「見積もりとはなにか」というタイトルでつらつらと書き始めたら6000文字ほど書いてた。当初はお手伝い先の wiki に書こうと思って書き始めたものの、アウトラインと言いたいことをまとめたら、とくに機密情報はほとんどないことに気付いて、自分のブログのどこかにまとめ直そうと思った。社内向けに書こうとすると、実務の具体例をベースにして自分の論理や考察を展開し、最終的には提案の説得力を高めようと構成する。一方で社外向けに書こうとすると、社内の関係者に対してハラスメントにならないように配慮して書くのをやめた内容を一般論という立て付けで構成できる。文章を書くときに誰向けに書くかは、内容が同じでも話の展開や構成に影響を与えるということにふと気付いた。また数日以内にはどこかのブログに書き直す。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0130/>3ヶ月フィードバック書いた</a></h1><div class=post-meta><time class=post-date>2022-01-30 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>1時に寝て7時半に起きた。昨日も半日ぐらいはコードを書いてて pr の草稿を作って帰ってきたら23時ぐらいだった気がする。</p><h2 id=3ヶ月フィードバック完了>3ヶ月フィードバック完了</h2><p>先日、書き始めた <a href=/diary/posts/2022/0123/>3ヶ月フィードバック</a> を書き終えた。平日少しずつ書こうと思ってたんだけど、平日は疲れて書かなくて、休日にまとめて書いた。最終的には1万文字ほどになった。見出しはこんな感じ。実質2日しか作業していないけど、2週間かけた。</p><ul><li>開発プロジェクトに参加して気付いた3つの大きな課題</li><li>初めてスクラム開発をやってみた所感<ul><li>所感</li><li>スクラムのよいところ</li><li>スクラムのわるいところ</li></ul></li><li>課題管理システム (チケット駆動開発) と情報共有<ul><li>情報共有とは</li><li>課題管理と情報共有</li></ul></li><li>情報共有とコミュニケーションコスト</li><li>Pull Request のレビューと開発の生産性</li></ul><p>明日プロジェクトのメンバーに共有してみる。反響があるのかどうか？もしかしたら誰も読まないかもしれないけど、私自身の思考の整理にもなっている。ここで書いた内容を洗練させてコンテンツとして再利用できるようにもしていきたい。</p><h2 id=ストレッチ>ストレッチ</h2><p>本当はこの週末に <a href=/diary/posts/2022/0115/#ワーケーション延期>ワーケーションへ行く予定だったが延期した</a> 。いつもは土曜日の午前中に通っているストレッチを日曜日の夜に変更していた。</p><p>最近は日曜日をだらだら過ごす日が多いのだけど、今日は夜にストレッチの予定が入っていたので午前中は自分でストレッチして、午後から3ヶ月フィードバックを書き終えて、夜に Dr.stretch さんでトレーナーさんにストレッチしてもらうといった、平日のような充実した1日となった。休日も予定を作った方がきびきび動ける。いかに自分が怠惰かを思い知る。今日の開脚幅は開始前166cmで、ストレッチ後169cmだった。今週も全然ストレッチしなかった割にはまぁまぁよかった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0122/>バーで会食</a></h1><div class=post-meta><time class=post-date>2022-01-22 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/drinking/>drinking</a>&nbsp;
#<a href=/diary/tags/bizpy/>bizpy</a>&nbsp;</span><div class=post-content><p>4時に寝て10時に起きた。昨日は体調悪くて夕方仮眠して、体調よくなった22時頃から作業を再開したので3時ぐらいまでやってた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週もあまりストレッチができなかったものの、今日の開脚幅は開始前172cmで、ストレッチ後170cmだった。特別なことは何もしてないのだけど、数値がよくなった。開脚の仕方によって3cmぐらいは変わってきたりするのかな。開始前に測ったときに172cmになった理由もよくわからなかった。太もも後ろの張りは先週よりよくなっていたものの、腰の疲労は溜まっていて毎週毎週コンディションが違うなというのを実感する。</p><h2 id=会員制バーでふりかえり>会員制バーでふりかえり</h2><p>先日 <a href=/diary/posts/2022/0118/#会員制バー予約>予約した会員制バー</a> へ行ってきた。バーとか連れられてしか行ったことないので慣れる意図もある。<a href=/diary/posts/2022/0119/#bizpy-勉強会>bizpy の機械学習勉強会</a> のふりかえりも兼ねてわたなべさんと行ってきた。ビジネスパーソンという対象者の属性や前提知識などを確認したり、コンテンツの細分化や進め方、次回の予定など幅広くわいわいやってた。</p><p>バーについては思ったより店内は広くて10席ほどのカウンターのみだけど、幅広の椅子が置かれているのでパーソナルスペースが広くてゆったり過ごせる空間な気がした。19時に行ったら他のお客さんは誰もいなくて21時までいて誰も他のお客さんは来なかった。貸し切りみたいな感じだった。オミクロン株が流行も関係しているのだろう。うちらにしたら他のお客さんがいないから感染リスクが減ってよかったと思う。コース料理を頼んでいた。一品一品凝った感じの料理で接待にはちょうどよい。普通の晩ご飯に食べるにはお洒落過ぎて私には無用のものだと思う。量がたくさんあるわけでもないけど、1品ずつ出てきて2時間かけて食べるので割とお腹はいっぱいになって満足した。それなりの値段もするので当然おいしかった。</p><p><figure><img src=/diary/img/2022/0122_dish1.jpg></figure><figure><img src=/diary/img/2022/0122_dish2.jpg></figure></p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0117/>国民健康保険の保険料</a></h1><div class=post-meta><time class=post-date>2022-01-17 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て4時に起きて2度寝して7時に起きた。こんなこと滅多にないんやけど、朝からずっと頭痛があってしんどかった。早めにお仕事を終えて帰ったら少しよくなってそのまま寝てた。</p><h2 id=国民健康保険の保険料>国民健康保険の保険料</h2><p><a href=/diary/posts/2022/0114/#明石市の調査>以前にも書いた明石市長</a> の次のツィートをみかけた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>国民健康保険の保険料。<br>均等割の金額も、今は自治体ごとの判断。<br>（明石市48830円、神戸市60600円、西宮市53400円など）<br>県からは、増額（56936円への引き上げ）を求められているが、<br>明石市長としては、コロナ禍での増額には反対だ。<br>次年度も増額しないことを、今ここで約束する。<a href="https://twitter.com/hashtag/%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA?src=hash&ref_src=twsrc%5Etfw">#国民健康保険</a> <a href=https://t.co/1SQYbQeXLW>pic.twitter.com/1SQYbQeXLW</a></p>&mdash; 明石市長　泉 房穂（いずみ ふさほ） (@izumi_akashi) <a href="https://twitter.com/izumi_akashi/status/1482904883506212864?ref_src=twsrc%5Etfw">January 17, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>国民健康保険って自治体ごとに保険料が違うんだとか思って、健康保険の仕組みを調べ直した。健康保険制度は大きく分けて2通りある。会社に勤めていない人のための国民健康保険と、会社に勤めている人のための会社の健康保険。うちの会社の健康保険は <a href=https://www.kyoukaikenpo.or.jp/>全国健康保険協会 (協会けんぽ)</a> に加入している。中小企業のデフォルトが協会けんぽなのかな？健康保険の運営者を保険者と呼び、どんな会社でも加入できる保険者として協会けんぽがある。有名な保険者として関東ITソフトウェア健康保険組合があるけど、<a href=https://www.its-kenpo.or.jp/kanyu/kijun.html>関東ITソフトウェア健康保険組合の加入基準</a> を満たさないと加入できない。例えば「被保険者数が20名以上であること」という条件があるので社員数が少ない企業は加入できない。一般論として、健康保険組合の方が協会けんぽよりも保険料が安いという利点があるらしい。そうでなければ、健康保険組合を作ったり、そこに加入する利点も小さくなるし。</p><p>会社を辞めたり、定年退職したりすると75歳まで国民健康保険に入る必要があるみたい。住むところにこだわりがなければ、保険料の安い自治体に住んでもよいのかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0115/>ワーケーション延期</a></h1><div class=post-meta><time class=post-date>2022-01-15 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/drinking/>drinking</a>&nbsp;</span><div class=post-content><p>1時に寝て8時に起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週も開発に集中していてあまりストレッチができなかった。今日の開脚幅は開始前165cmで、ストレッチ後166.5cmだった。先週と同じぐらい、もしくはちょっとよくなったぐらい。先週から引き続き、ふくらはぎとふとももの後ろが張っている。ここ最近は開発に集中していて1日あたり10-12時間ぐらい椅子に座っているので疲労しているのだと推測する。毎週ストレッチを受けていると疲労改善になってよい。</p><h2 id=ワーケーション延期>ワーケーション延期</h2><p>これまで <a href=/diary/posts/2021/1225/#ワーケーション準備>準備を進めてきたワーケーション</a> が2週間後になった。もともとこの企画はオミクロン株が発見される前だったので1月末に予定していた。年末年始を挟んでオミクロン株の感染流行を今週みてきて延期することに決定した。<a href=https://web.pref.hyogo.lg.jp/kf16/coronavirus_data.html>兵庫県 新型コロナウイルスの検査・陽性者の状況</a> によると、直近の陽性者数は次のように推移している。2週間後は5,000人ぐらいの陽性者数になるのではないか。諸外国の推移をみていると兵庫県のピークの陽性者数は1日1万人ぐらいまで増える可能性がある。</p><ul><li>1/10: 167</li><li>1/11: 113</li><li>1/12: 511</li><li>1/13: 903</li><li>1/14: 929</li><li>1/15: 1191</li></ul><p>残念だけど、次回の目処は5-6月ぐらいに3回目のワクチン接種を終えてからになるだろう。</p><h2 id=呑み>呑み</h2><p>21時から勉強会に参加して23時過ぎに終わって晩ご飯食べてなかったので、帰りに仲のよい焼き鳥屋さんのお店に寄って晩ご飯を食べた。26時までやっているので24時頃に言っても普通に食べものを出してくれる。1時間ほど飲み食いして法人決算や消費税、共済のこととかを話してた。マスターも個人事業主から法人成りしたようで、話してみたら私と同じで創業2年だった。業界は違っても行政手続きは共通点も多いだろうから情報共有できそう。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/life/page/10/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/tags/life/page/12/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>