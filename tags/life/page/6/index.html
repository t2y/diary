<!doctype html><html lang=en><head><title>life :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/life/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="life"><meta property="og:description" content><meta property="og:url" content="/diary/tags/life/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/life/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0813/>戦略シミュレーションと特性</a></h1><div class=post-meta><time class=post-date>2022-08-13 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/game/>game</a>&nbsp;</span><div class=post-content><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前158cmで、ストレッチ後161cmだった。先週よりやや数字が悪くなった。それでも先週はストレッチを受けていても体全体のだるさのようなものを感じていたのが、今回はちゃんと筋を伸ばしている感覚があって先週の体調の悪さはなくなったように思える。右股関節周りの詰まりに加えて、右前ももの張りがいつもより大きかった気がする。毎週ストレッチを受けていると物理的な体調の良し悪しもわかるのがよい。</p><h2 id=わざと負ける理由>わざと負ける理由</h2><p><a href=/diary/posts/2022/0812/#ドラクエタクトのリアルタイム対戦>一昨日からリアルタイム対戦</a> にはまっている。数をこなしていてわかってきたことがたくさんある。戦略シミュレーションゲームはやればやるほど学びがある。</p><ul><li>パーティーの特性によって相性のよい対戦相手とそうじゃないのがある<ul><li>リアルタイム対戦のマッチングは選択できないのでマッチングしないと相手がわからない</li><li>相性の悪い相手だとマッチング時点で辞退する (負けを認める) 相手もいる</li></ul></li><li>こっちの戦略に呼び込むための布石がいる<ul><li>3つぐらい戦略を用意して最終的にどの戦略に呼び込むかを相手の動きをみながら考えないといけない</li><li>キャラを動かす制限時間が15秒なのでわりと忙しい</li><li>こちらの布石にはめて最終的に勝てると達成感がある<ul><li>中盤まで負けていて向こうに勝ったと思わせて逆転できるとなお嬉しい</li><li><a href=https://game8.jp/dqtact/395606>ダークドレアム</a> は奇数ターン (1, 3, 5, 7 &mldr;) ごとに攻撃力・守備力・すばやさ・かしこさが1段階上がるバフがかかる<ul><li>ダークドレアムはすばやさが低いので徐々にすばやさが上がっていって先制できるようになると最後の1手違いで勝つ状況が出来上がる</li><li>ダークドレアムで5ターンまで戦闘を継続できれば勝率が高い</li></ul></li></ul></li></ul></li><li>すばやさの高いパーティーには何もできないから勝てない<ul><li>高すばやさ (且つ、高火力または状態異常) パーティーには絶対に勝てない<ul><li>リアルタイム対戦でダークドレアムがあまり使われていない理由だと思う</li></ul></li><li>初手前にパーティーの半分ぐらいがやられている</li><li>相手の攻撃が届かない初期配置がないので絶対に防げない</li></ul></li><li>状態異常攻撃の主体パーティーは対戦していておもしろくない<ul><li>混乱・麻痺・眠り・魅了といった状態異常になると2ターン何もできない</li><li>状態異常攻撃 + 高すばやさのキャラの攻撃を防ぐ方法はない<ul><li><a href=https://game8.jp/dqtact/455291>創造神マデサゴーラ</a> が出てきたら高い確率で勝てない</li></ul></li></ul></li><li>パーティー編成のウェイト制限がうまく調整されている<ul><li>高ランク (ステータス高い) のキャラばかりを編成できないようにウェイト制限がある</li><li>これにより、パーティー編成が4人か5人かにわかれる</li><li>低ランク (ステータス低い) のキャラはウェイトも低いので5人目には入れやすい<ul><li><a href=https://game8.jp/dqtact/390466>たたかいのベホイム</a> が使える <a href=https://game8.jp/dqtact/344037>ホイミスライム</a> が活躍したりする</li></ul></li></ul></li></ul><p>本題のわざと負ける理由だが、わかってきた。リアルタイム対戦のマッチングは同じランク内で行われる。上位のランクになればなるほど、対戦相手も強くなる (強くなければ上位のランクに上がれない) 。一定量のポイントを獲得するとランクアップしていけるが、負けるとポイントが下がるペナルティがつく。一定のランクで勝ち負けを繰り返すとそのランクに留まり続けるということができる。私も自分の限界までランクアップしてみて気付いたのは周りも強いので限界に到達すると勝ったり負けたりを繰り返す。ここで別のルールで勝った回数に応じてコインが支払われるボーナスがある。強い人が低いランクで勝ち数を稼ぐのは限界に近いランクで勝ったり負けたりを繰り返すよりもはるかに効率がよい。それはリアルタイム対戦のマッチングに時間制限があるからなおさらそうなる。実力が均衡した相手と時間をたくさん使って2勝3敗を繰り返すよりも、わざと負けながら弱い相手に勝ち続ける5勝?敗を繰り返す方が絶対数としての勝ち数を稼ぐには効率がよい。おそらく負けたときのペナルティがあるランクからわざと負ける人が現れ始めていると思う。なるほどなぁ。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0806/>Kubernetes Clients のサンプル実装</a></h1><div class=post-meta><time class=post-date>2022-08-06 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=post-content><p>23時に寝て7時半に起きた。夜中も2回ぐらい起きる。暑さでまいってきた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前159cmで、ストレッチ後162cmだった。数字は悪くない。いつもはストレッチを受けていると疲労しているところが伸びることで体が軽くなっていく感覚があるのだけど、今日は体全体がだるくてストレッチを受けていてもなんかしんどいなぁとだるさを感じていた。コロナに感染してないと思うけど、夏バテの状態をそのままストレッチにも持ち込んだような感覚があった。腰の張りや肩甲骨の硬さなどが少し気になったかな。トレーナーさんには立ったときの姿勢が少し前よりで重心のバランスがよくないといったアドバイスをされた。とくにどこが悪いというわけでもないのになんかしんどい。</p><h2 id=kubernetes-clients-のサンプル実装>Kubernetes Clients のサンプル実装</h2><p><a href=/diary/posts/2022/0804/>Kubernetes Clients の調査</a> の続き。java クライアントを使って minikube でいくつか動かしてみた。openapi で生成した rest api クライントが提供されている。デフォルト設定でも minikube で普通に動いたのでおそらく裏で <code>$HOME/.kube/config</code> をみたり <code>/var/run/secrets/kubernetes.io/serviceaccount/token</code> を読み込んで認証ヘッダーに設定してくれたりするのだと推測する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> ApiClient <span style=color:#a6e22e>getKubernetesClient</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    var client <span style=color:#f92672>=</span> Config<span style=color:#f92672>.</span><span style=color:#a6e22e>defaultClient</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    io<span style=color:#f92672>.</span><span style=color:#a6e22e>kubernetes</span><span style=color:#f92672>.</span><span style=color:#a6e22e>client</span><span style=color:#f92672>.</span><span style=color:#a6e22e>openapi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Configuration</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setDefaultApiClient</span><span style=color:#f92672>(</span>client<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> client<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>このクライアントを使って <a href=https://github.com/kubernetes-client/java/tree/master/kubernetes/docs>java/kubernetes/docs/</a> 配下にある api インスタンスを生成する。例えば、cronjob や job を扱うならば <code>BatchV1Api</code> というドキュメントがある。BatchApi だけでも3つのドキュメントがあるのでちょっとやり過ぎな気もする。</p><ul><li>BatchApi.md</li><li>BatchV1Api.md</li><li>BatchV1beta1Api.md</li></ul><p>kubectl コマンドで使う cronjob から手動で job を設定するのを実装してみる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ kubectl create job --from<span style=color:#f92672>=</span>cronjob/my-schedule-job my-manual-job
</span></span></code></pre></div><p>細かい設定はちゃんと調べないといけないけど、一応はこれで動いた。cronjob のオブジェクトを取得して job のオブジェクトを生成して create するだけ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>var api <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BatchV1Api<span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getKubernetesClient</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>var cronJob <span style=color:#f92672>=</span> api<span style=color:#f92672>.</span><span style=color:#a6e22e>readNamespacedCronJob</span><span style=color:#f92672>(</span>cronJobName<span style=color:#f92672>,</span> NAMESPACE_DEFAULT<span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>var ann <span style=color:#f92672>=</span> Map<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;cronjob.kubernetes.io/instantiate&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;manual&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>var metadata <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> V1ObjectMeta<span style=color:#f92672>().</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span>newJobName<span style=color:#f92672>).</span><span style=color:#a6e22e>annotations</span><span style=color:#f92672>(</span>ann<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>var spec <span style=color:#f92672>=</span> cronJob<span style=color:#f92672>.</span><span style=color:#a6e22e>getSpec</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getJobTemplate</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSpec</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>spec<span style=color:#f92672>.</span><span style=color:#a6e22e>setTtlSecondsAfterFinished</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>var job <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> V1Job<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span><span style=color:#a6e22e>apiVersion</span><span style=color:#f92672>(</span>cronJob<span style=color:#f92672>.</span><span style=color:#a6e22e>getApiVersion</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span><span style=color:#a6e22e>kind</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Job&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span><span style=color:#a6e22e>spec</span><span style=color:#f92672>(</span>cronJob<span style=color:#f92672>.</span><span style=color:#a6e22e>getSpec</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getJobTemplate</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSpec</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span><span style=color:#a6e22e>metadata</span><span style=color:#f92672>(</span>metadata<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>var result <span style=color:#f92672>=</span> api<span style=color:#f92672>.</span><span style=color:#a6e22e>createNamespacedJob</span><span style=color:#f92672>(</span>NAMESPACE_DEFAULT<span style=color:#f92672>,</span> job<span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><p>手動で作成した job の pod は終了後にゴミとして残ってしまうので ttl を設定すれば自動的に削除できることに気付いた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>spec<span style=color:#f92672>.</span><span style=color:#a6e22e>setTtlSecondsAfterFinished</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><p>k8s クラスターの内部、つまり pod 内からリクエストするには <a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/#service-account-permissions>ServiceAccount permissions</a> を適切に設定しないといけない。ひとまずローカルの minikube で super user 権限にしたらリクエストはできた。実運用では適切なロールを定義して適切に権限設定しないといけない。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create clusterrolebinding serviceaccounts-cluster-admin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --clusterrole<span style=color:#f92672>=</span>cluster-admin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --group<span style=color:#f92672>=</span>system:serviceaccounts
</span></span></code></pre></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0730/>不思議の国のスモールオフィス</a></h1><div class=post-meta><time class=post-date>2022-07-30 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;</span><div class=post-content><p>23時に寝て7時に起きた。今週は不規則な生活をしたのでバテた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前156cmで、ストレッチ後160cmだった。先週よりちょっと数値が悪くなった。自覚症状はなかったけど、ストレッチをしてみると右腰の張りがそこそこあることに気付いた。自覚症状のない疲労に気付けるのがストレッチのよいところの1つでもある。</p><h2 id=スモールオフィスの内覧>スモールオフィスの内覧</h2><p>たまたま <a href=https://www.kigyoplaza-hyogo.jp/>起業プラザひょうご</a> さんのスモールオフィスに空きがあるのをみつけたので内覧に行ってきた。電話したらとくに予約は取らなくてよいのでいつでも来てくださいと言われたのでアポなしで17時頃に行くことにした。現地のビルに行ってみたが、ビルが工事していて入れる状態ではない。なんかおかしいと思って調べたら地図には全然違う場所が示されていた。後で知ったことだが、<a href=https://www.kigyoplaza-hyogo.jp/news/%E7%A7%BB%E8%BB%A2%E3%81%AB%E4%BC%B4%E3%81%86%E4%B8%80%E6%99%82%E4%BC%91%E6%A5%AD%E3%81%AE%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/>2020年8月に移転していた</a> 。前に起業プラザひょうごさんに2-3回行ったことがあったけど、それは移転前だった。その後、移転したことを全く知らなかった。</p><p>このコワーキングスペース兼レンタルオフィスが三井住友銀行神戸本部ビルという旧居留地の真ん中に18F建ていう、この付近ではトップレベルの高層ビルと言える。そんなビルの2Fという「ん？」という場所にある。おそらくビルの名前から三井住友銀行の自社ビルだろう。1Fには銀行の窓口があり、窓口の前を横切る形でエスカレーターを上がると起業プラザひょうごさんのコワーキングスペースがあった。入り口には警備員さんが立っていて入ろうとすると「会員証をみせて」と止められた。内覧にきた旨を伝えると通してくれた。銀行のビルなので休日でも警備員さんが控えている。</p><p>2Fにエスカレーターで上がり、受付で内覧にきたことを伝えるとそのまま (おそらくアルバイトの) 若いお兄さんがあちこち案内してくれた。興味本位で「素朴な疑問なんだけど、どういう経緯で銀行の自社ビルの2Fの空きスペースみたいな場所を間借りできたんですか？」と聞いみたら、さすがにそれは分かりませんと返ってきたw</p><p>普通のオフィス (5.6㎡) と広いオフィス (8.4㎡) の2つに空きがある。</p><p><figure><img src=/diary/img/2022/0730_office1.jpg></figure><figure><img src=/diary/img/2022/0730_office2.jpg></figure></p><p>空きスペースをパーティションで区切っただけの簡易的なオフィスではあるけど、家賃は税込でそれぞれ 23,595 円と 33,275 円になる。登記さえできれば、オフィスの体裁は私にとってそこまで重要ではない。物理的なセキュリティの懸念として壁の上によじ登ることができるのはあるけれど、扉には鍵がかかる。床面積から比較するとレンタルオフィスとしては周りの平均よりも半額から1/4ぐらいの破格の価格設定と言える。一通り話しを聞いてみて引越し先として検討できるかどうかを確認していた。私にとっての一番の課題はこのビルに入れる時間帯が制限されていること。私は平日は7時台にはオフィスにいるし、夜も遅かったら3時ぐらいまで作業をするときもある。外的要因で時間の制約を課せられるのが私にとってはストレスとなる。22時をまわることは月に数回程度しかないからまだ譲歩できても朝9時というのは始業が遅過ぎる。</p><ul><li>平日: 9:00 - 22:00</li><li>土日祝: 10:00 - 20:00</li></ul><p>顧問のはらさんとも相談して懸念がなければ、審査を受けるだけ受けてみてもよいかもしれない。但し、三井住友銀行の拠点ビルとも言えるところにあるコワーキングスペースなのでうちみたいなマイクロ法人は審査が通らない可能性も高いと思われる。過去に三井住友銀行で法人口座開設の申請を出してお断りされた実績もあるのでそれを思い出してた。</p><p>外部の人を招いて無償の勉強会を開催してよいかどうかを確認したところ、会議室の予約さえとれれば開催してよいとのこと。さらに会議室の利用料は無料とのこと。会議室は定員6名が2部屋、10名が1部屋、20名は1部屋の合計で4部屋ある。定員20名の会議室と聞くと「はぁ？」って感じでそこもみせてもらった。広い部屋のスペースを贅沢に浪費した構成だった。「こんな広い部屋の会議室って普段使うんですかね？」と質問したら使っているところをみたことないと返ってきて笑ってしまった。定員20名の会議室でどんな会議をやるねん？オフラインの外部勉強会をやるとしたらスペースが広くて快適そうな場所ではあった。あと後ろの方はモニターみえないよね、おそらく。</p><figure><img src=/diary/img/2022/0730_office3.jpg></figure></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0723/>コーポレートファイナンスの入門</a></h1><div class=post-meta><time class=post-date>2022-07-23 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/book/>book</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;</span><div class=post-content><p>0時に寝て6時に起きて7時半に起きた。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前158cmで、ストレッチ後162cmだった。まだ右腰と右股関節、両腕の張りは少し残っているものの、先週末の田んぼ仕事の疲労はかなり抜けた。今週は暑くて家に帰ってきたらエアコンをつけてだらだらしていたのであまり数値はよくならないんじゃないかと思っていて、実際に開始前の数値はいま一つだったんだけど、ストレッチを受けたらいつも通りに戻った。トレーナーさんと雑談しているときにふと「毎日パソコンを使いますか？」と質問を受けた。トレーナーさんからプログラマーの自分にとってそんな質問をされるとは予想外で思わず吹き出して笑ってしまった。その質問は「毎日水を飲みますか？」と私にとっては同じですよと答えた。トレーナーさんも愚問だったと理解して一緒に笑ってた。</p><h2 id=もてなしだけではもう食えない>もてなしだけではもう食えない</h2><h4 id=第7章-ホテルが客を動かせ>第7章 ホテルが客を動かせ</h4><p>ホテル側が自分たちの問題を解決するために客の行動を制御するといった展開になっている。米国のスーパーマーケットでは Express Lane という、購入品目が少ない客向けに手早く決済するためのレジが設けられているらしい。日本にはないのかな？この運用には客に学習コストを強いるのが欠点となる。キャパシティ問題の問題解決のアプローチは次の3つになる。</p><ol><li>キャパシティを増やす</li><li>供給を変える</li><li>需要を変える</li></ol><p>本章の展開としては3番目の客側の導線や行動を変えてしまう方法で需要を変える手法が説明されている。本題ではないけど、さらっと出てくる説明にも納得感がある。ダメなホテルの共通点として、他社でうまくいった改善策、ベストプラクティスに飛びつき、それ以上考えようとせず、問題の本質を理解しようとしない。そういうホテルはコンサルタントが去ってしまうといずれでダメな経営に陥るとある。ホテルに限らず、ダメな会社の特徴だと思う。</p><p>客にピーク時の利用を避けてもらうための施策として次の2つがある。</p><ul><li>混雑することをあらかじめ伝えておく</li><li>混雑を避けることのインセンティブをつける</li></ul><p>ホテル側が客の行動をコントロールするのは構わないが、客にとってそれが不利益にならないように配慮する必要がある。人間の心理として混雑することがあらかじめわかっていればクレームにならず許容できたりする。人は不意に混雑に出くわして不満をもつことが多いという。そういった人の心理を利用して人の行動を制御して経営に生かすという考え方は比較的新しい研究領域である。行動経済学などもその分野の1つで、古典経済学では人は合理的に行動するとされてきた。しかし、現実では必ずしもそうではないことも行動経済学によってわかってきた。</p><h4 id=第8章-リスクを知らないリスク>第8章 リスクを知らないリスク</h4><p>親会社の不動産会社からリスク管理報告書を提出しろという業務に沿ってリスクマネジメントについての話題が出てくる。契約の話しだったり、建築に関する話しだったり、あまり一般的な経営とは異なる内容にみえる。余談だけど、過去にうちの会社で業務内容が変わったにも関わらず、契約内容を更新せずに更新された新たな業務を継続してうまくいかなかった経験がある。うまくいかなかったときに原点に立ち戻る場所が契約であり、契約を曖昧に扱うと後でしっぺ返しがあるという失敗をまさに経験した。ふりかえりをするときにそもそもの基準が適切でないとその反省や改善点も曖昧になってしまうという話し。</p><p>さて、リスク管理報告書のアウトラインとして次の用語が出てくる。</p><ul><li>ハザードコントロール<ul><li>ハザードとは危険を生じさせるもののこと</li><li>ホテル経営だと、食中毒を防ぐ施策とか、横領できないように決済承認に2名以上必要とか</li></ul></li><li>ペリルコントロール<ul><li>ペリルとは事件・事故のこと</li><li>起きてしまった事件・事故から最小限の損害・被害に食い止める施策</li></ul></li><li>ロスコントロール<ul><li>ロスとは事故発生時に発生してしまった経済的損失のこと</li><li>具体的には保険購入であり、どんな保険にどのぐらいの補償額で加入するかになるが、これがなかなか難しい</li></ul></li></ul><p>peril という英単語の辞書を引くと、差し迫った危険という意味が出てくる。リスク管理の文脈の用語と英語の意味はやや違うのかもしれない。</p><h4 id=第9章-タイムバリューを理解せよ>第9章 タイムバリューを理解せよ</h4><p>親会社に投資ファンドからホテルの買収提案があり、ホテルの事業価値を測るコーポレートファイナンスの話題が出てくる。上場企業であれば株価 x 発行済株式数で時価総額がすぐにわかるが、未上場企業の価値を査定するのは難しいという説明からその手法が紹介される。</p><ul><li>類似業種比準方式<ul><li>上場している同業者の株価を参考にする</li><li>但し、ビジネスモデルを無視して業種だけで比較しようとしても単純比較はできない</li></ul></li></ul><p>不動産を所有しているかどうかで株式評価は大きく異なる。単純に不動産をもっていればよいというわけでもなく、資産と負債のバランスが取れているかが大事。「また貸し」のことを業界用語で転貸 (サブリース) と呼ぶ。</p><ul><li>純資産方式<ul><li>会社のもっているものを全部売って借金を返した残りのお金という評価方法</li><li>貸借対照表の資本がマイナスになっているとすべてを換金しても負債が残る = 債務超過</li></ul></li></ul><p>株価の利回りを株価収益率 (Price Earnings Ratio: PER) と呼ぶ。時価総額 / 純利益で計算される。この計算式から時価総額を知りたければ、純利益 x PER で計算できる。比較可能な会社の PER がわかれば未上場会社の株価を計算できる。但し、PER は会社が未来永劫事業を継続させることを前提としている。会社の継続性に疑義があると PER を用いる根拠がなくなる。株主に説明するときの利益とは、正式には <strong>税引き後当期利益</strong> になる。この金額から配当がなされる。うちの会社だとざっくり粗利から20-30%ほど (法人税 + 消費税) 引いたものが税引き後当期利益になる。会社が予定する配当額は同じだが、株価をディスカウントすることで配当の利回りをよくするという考え方を <strong>リスクプレミアム</strong> と呼ぶ。会社の展望や事業の不確実性を数値化したとみなすことができる。</p><ul><li>株価1000円で配当額が20円だと、利回りは2.0%</li><li>株価500円で配当額が20円だと、利回りは4.0% (この 2.0% の差がリスクプレミアム)</li></ul><p>いま現在もらえる現金の1万円は1年後もらえる1万円よりも価値が高いと言える。それは1年後にはもらえないかもしれないリスクや運用機会損失リスクが含まれるから。その価値をどの程度低く見積もるかを <strong>割引率</strong> と言う。この割引率を用いて将来の現金をいまの現金価値に置き換える評価方法を <strong>DCF (Discounted Cash Flow) 法</strong> と呼ぶ。仮に割引率を10%とすると、1年後の100万円をいまの価値にすると、100 / (1 + 0.1) = 90.9 万円になる。2年後の100万円だと 100 / (1 + 0.1)^2 = 82.6 万円になる。</p><figure><img src=/diary/img/2022/0723_dcf-expression.png></figure><p>本文中ではこの計算式を使って年間の利益と割引率を考慮した現在価値をエクセルでモデル化している。python で書くと次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(profit, discount_rate, year):
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>   <span style=color:#66d9ef>return</span> profit <span style=color:#f92672>/</span> pow((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> discount_rate), year)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#66d9ef>for</span> i, profit <span style=color:#f92672>in</span> enumerate([<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>120</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>130</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>145</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>155</span>, <span style=color:#ae81ff>160</span>, <span style=color:#ae81ff>165</span>], <span style=color:#ae81ff>1</span>): i, round(f(profit, <span style=color:#ae81ff>0.1</span>, i), <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>...</span> 
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>90.9</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>99.2</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>93.9</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>88.8</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>83.8</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>79.0</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>74.4</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>70.0</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>65.7</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>61.7</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>57.8</span>)
</span></span></code></pre></div><p>例えば、割引率が10%で5年後の利益が135万円ならば、その現在価値は83.8万円になる。本文の中ではこの金額が投資ファンドが提示している金額だとだいたい一致していることから、これ以上の精度の高いモデルを作らないといけないみたいなストーリー展開になっている。いずれにしてもパラメーターの変数の精度が高くないと適切なモデルとは言えない。割引率を用いた現在価値を計算する考え方を <strong>タイムバリュー (時間の価値)</strong> と呼ぶ。意思決定が遅れるほどプロジェクトの収益化も遅れるため、割引率を計算する現在価値が小さくなっていくという考え方ができる。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0717/>1年ぶりの草刈り</a></h1><div class=post-meta><time class=post-date>2022-07-17 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/agriculture/>agriculture</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>1時に寝て5時に半に起きた。朝から夕方まで田んぼの草刈りをしていた。</p><h2 id=草刈り>草刈り</h2><p>タイトルに1年と書いたけど、厳密には1年も経っていない。<a href=/diary/posts/2021/1004/>2021年10月以来の草刈り</a> になる。本当は小まめに田んぼの手入れをしていれば、草場になんかならない。</p><figure><img src=/diary/img/2022/0717_field1.jpg></figure><p>6時から草刈り機を使って草刈りを開始。もう1時間早く起きて5時から始めたらよかったと思った。夏は10時まわると暑さが厳しくなるので作業は10時までに終わらせるのがよさそう。今回は6時から11時前まで草刈りをやって6割程度を刈り込んだ。草刈り機は2サイクルエンジンなので混合ガソリンを燃料に使う。ちょうど燃料切れになったのと同じタイミングだったので午前中の作業を終えた。11時の時点での田んぼの状況。</p><figure><img src=/diary/img/2022/0717_field2.jpg></figure><p>昼間は暑いので長くお昼休憩をとって14時から再開。本当はもう少し遅くてもよいけど、私が神戸に戻らないといけないから少し早めに始めた。まだ7月だったせいか、14時でも想像よりは暑くなくそれでよかったとも言える。午後から母がパートから戻ってきたのもあり、交代して休みを取りながら草刈りをして16時にはほぼ完了できた。この後、少し残っているところを母にやってもらって私は17時の高速バスで神戸に戻ってきた。</p><figure><img src=/diary/img/2022/0717_field3.jpg></figure><p>この時期の草刈りは、草刈り機を使うことそのものの疲労に加えて暑さでバテる。2人いて交代で草刈りすると、休んでいる時間を有効活用できて効率がよいことに気付いた。草刈り機のエンジンの回転数も全開にするよりも、少し弱めた方が振動量が減って、腕の負担も燃料消費も少なくなってよいことに気付いた。いままで全開で刈った方が早く刈れるのではないかと考えていたが、それは誤りだった。疲労度を下げて草刈り機を扱った方が休まずに長時間作業できる分、全体として作業を速くできることに気付いた。</p><p>この後、草を干して乾燥したら焼いて、トラクターで田んぼを耕す。それは9月の連休にする予定。</p><h2 id=ストレッチ>ストレッチ</h2><p>今日の開脚幅は開始前154cmで、ストレッチ後158cmだった。あちこち筋肉痛やら腰が痛いやらでストレッチできるような状態でもなかった。ストレッチへ行ったときは暑さにやられて頭痛がひどかったんだけど、ストレッチしているうちに徐々によくなってましになった。暑さで頭痛がするのは血行が悪くなるからだそうだけど、ストレッチして血行がよくなるんだと推測する。腰の張りがひどくてストレッチしてもらって少し楽になった。田んぼ仕事の後にストレッチを受けられるのは疲労回復のためによかったと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0716/>実家に帰る</a></h1><div class=post-meta><time class=post-date>2022-07-16 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=post-content><p>1時に寝て7時に起きた。実家に帰ってお見舞い行ったり親戚訪問したりしてた。</p><h2 id=お見舞い>お見舞い</h2><p>午後から父のお見舞い。少し前まで直接面会できるようになっていた時期があったそうだけど、またコロナの感染状況が悪化したため、リモート面会に戻ったらしい。面会時間は20分。たまたま父はお風呂上がりの時間だったらしくてそれで疲れたのか、10分ほどしてそのまま眠ってしまった。もともと父は気管切開していて話せないので起きていても寝ていても面会でやることは変わらない。顔色がよいことは確認できたという感じ。</p><h2 id=博士ちゃん>博士ちゃん</h2><p>たまたま実家に帰っていたからテレビをみていたらおもしろかった。生物の標本や骨に関心のある小学6年生が、国立科学博物館の収蔵庫を見学するといった番組だった。著名な研究者の方々が案内しながら子どもに研究のおもしろさを知ってもらうような作りになっていたように思う。出演していた12歳の子どもが本当によく勉強していて詳しくて、この分野の研究が本当に好きなんだなという想いがみてとれてよかった。好きなことを突き詰めてやっているのをみると楽しくなる。</p><ul><li><a href=https://www.tv-asahi.co.jp/hakasechan/backnumber2/0037/>約480万点の資料が収められた 国立科学博物館の巨大収蔵庫潜入 完全版！</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2022/0712/>カンバンの弊害</a></h1><div class=post-meta><time class=post-date>2022-07-12 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/issue-tracking-system/>issue tracking system</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;</span><div class=post-content><p>0時に寝て8時に起きた。起きたら豪雨だった。梅雨明けが早かったから水不足の土地には恵みの雨だなとか思った。</p><h2 id=緊急対応という種別>「緊急対応」という種別</h2><p>先週のリリースに際して発生した問題に「リリース時緊急対応」という種別が設けられた。当時、私はその種別を設けることそのものに否定的なコメントを発したのだけど、誰かがすでにその種別を作ってしまっていて、いくつかのチケットに設定されていたので成り行きで使うことになった。そして、もうリリースしてから1週間も経つのに未だに「緊急対応」というチケットがいくつも作られている。1週間も運用しているのに緊急もへったくれもないだろうと指摘して、明日から新しいスプリントが始めるので「緊急対応」という種別を付けるのはやめようと提案した。一般的な課題管理システムは緊急度と重要度の2つをもっているけど、backlog は優先度しかない。それでも優先度があるのだからそれを設定すればいいだけなのに優先度を使った運用をしていないのと、課題一覧をフィルターするのではなく、大半のメンバーがカンバンしか使えないといったスキル不足もあって、なくてもよい無駄な種別をまた増やしてしまった。</p><p>カンバンはシンプルな要件に使うならよいけど、一定以上の複雑さをもつ普通の会社の開発プロジェクトに使えるようなキャパシティをもっていない。それなら最初から使わない方がよいのではないかと考えるようになってきた。というのは、非開発者にとってカンバンは簡単に使い始められる分、そこからさらに高度な検索フィルターを使いこなすスキルアップを阻んでしまう。複雑な要件をカンバンで実現しようと考えてしまってバッドノウハウ的なアプローチをしていく。その典型例が「緊急対応」という種別作ればいいやんみたいな考え方。</p><h2 id=クレジットカードの有効期限の更新>クレジットカードの有効期限の更新</h2><p>前に yj カードが paypay カードに置き換わったときに有効期限が更新されてクレジットカードの設定更新が必要になると書いてあった気がする。4月8日に paypay カードが届いたみたい。クレジットカードの引き落としタイミングのせいか、しばらくは有効期限が異なっていても paypay カード側で決済を許可していたのか、いずれにしても最近あちこちでクレジットカードの引き落としに失敗するという通知がくるようになった。気付いたら、クレジットカードによる <a href=https://2hj.org/>セカンドハーベスト・ジャパン</a> さんの寄付の引き落としも止まっていた。通常、有効期限前にクレジットカードが更新されることはないからサービス側で有効期限が近づいてきたときに更新依頼通知を送っているのだと推測する。寄付みたいなところは引き落とし失敗になると督促しないのかもしれない。もう1つ <a href=https://www.msf.or.jp/>国境なき医師団</a> さんにも寄付しているが、こっちは銀行口座からの引き落としだった。クレジットカードと銀行口座の違いとして有効期限の有無が違う。どちらもメリット・デメリットがあるからずっと払い続けるつもりなら銀行口座、自分が死んだ後にいずれ停止してほしいならクレジットカードを使った方がよいといった考え方もできると気付いた。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/life/page/5/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span></a>
<a href=/diary/tags/life/page/7/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>