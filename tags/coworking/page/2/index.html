<!doctype html><html lang=en><head><title>Coworking :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/coworking/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Coworking"><meta property="og:description" content><meta property="og:url" content="/diary/tags/coworking/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/coworking/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><h1>Posts for: #Coworking</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0415/>このワークアウトの名前はお風呂ウォーキング</a></h1><div class=post-meta><time class=post-date>2024-04-15</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>今日の運動はスクワット,散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><p>お仕事がいろいろ忙しくてテンパっていながらも、夜は散歩に行くからまぁいっかみたいな微妙な1日を過ごした。本当は帰ってきてから一仕事すべきだったのだけど、もうだらけてしまってそのまま休んでいた。</p><h2 id=お風呂ウォーキング>お風呂ウォーキング</h2><p>ながいさんとやまさきさんと散歩してきた。<a href=/diary/posts/2024/0326/#晩ご飯を食べて温泉へ入ってくる散歩コース>前回の所感はここ</a> 。今日は三宮から歩くにはちょっと遠い <a href=https://aguro-no-yu.com/>あぐろの湯</a> へ行ってきた。途中まで電車で移動して、1時間以内で歩ける適当なところから散歩してきた。必ずしも三宮から目的地まで歩かなくてもよい。これなら行けるお風呂の候補も増えてあちこち行ける。三宮近辺のお風呂を目的に歩くのがよさそうと話していた。歩いていて、カフーツさんの話題になって、いとうさんがやっているのはコワーキングのホスピタリティというより徹子の部屋じゃないか？とながいさんが指摘して、本当にその通りだなと納得した。ゲストの話しを聞いているようで、気付いたらゲスト放っておいて自分の話しばかりしている的な。ゲストをもてなしているのかどうか、よくわからんところが黒柳徹子さんと重なっておもしろかった。</p><p>晩ご飯はとんてき定食を食べた。運動目的で歩いているのにカロリーの高いものを食べるのはよくないのだけど、初めて来た場所だし、食べたいと思ったものを食べた方がストレスが溜まらなくてよい。週に4食は開放食として好きなものを食べたらよいと <a href=/diary/posts/2024/0204/>格闘家に学ぶ体脂肪コントロール</a> 本にも書いてあったので注文してみた。量もガッツリあって味付けも濃かったので運動して消費したカロリーよりも高かったんじゃないかと思う。普通のレストランでとんてきというメニューをあまりみかけなくなった気がする。とんてきを久しぶりに食べた。大阪で働いていた頃はよく食べてた。おいしかった。</p><figure><img src=/diary/img/2024/0415_aguro.jpg></figure><p>お風呂もジェットバス、露天風呂、壺湯、寝転び湯、足湯といろいろな種類があって楽しめた。スーパー銭湯で寝転び湯をみかけたことはあったけど、実際に浸かってみたことはなかった。空いていたので試してみてこの体験は家ではできないお風呂の入り方だなという感想が最初に出てきて新鮮な気持ちになった。サウナもロウリュサウナと薬草サウナの2種類があった。ロウリュサウナがどういうものか、よく分かってなかったけど、広くて汗がどんどん出てきて爽快だった。暑いから私はすぐに出てきてしまうのだけど。</p><p>今日のルートは次の通り。これはマイマップの「ライン」機能を使って描いている。ルート選択すると、変な線引きになったり重ねて表示したりできないので普通にラインで描くのが簡単。</p><ul><li><a href=https://100kado.net/google-my-maps-lines-and-shapes>マイマップ便利機能。シェイプ機能で距離と面積を比較表示 【応用編①】</a></li></ul><a href="https://www.google.com/maps/d/edit?mid=1-CinjerzC80BPVncPF6vX7V_T5T4Mf0&usp=sharing"><figure><img src=/diary/img/2024/0415_mymap.png></figure>海岸通沿いのあぐろの湯</a></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0327/>スマート縄跳び試行</a></h1><div class=post-meta><time class=post-date>2024-03-27</time></div><span class=post-tags>#<a href=/diary/tags/blog/>blog</a>&nbsp;
#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;</span><div class=post-content><p>23時過ぎに帰ってきて歩き疲れてそのまま横になっていたら寝てしまった。2時に起きて5時に起きて6時に起きた。変な寝方をした。</p><p>今日の運動は腹筋ローラー,スクワット,縄跳び(両足跳)をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=ブログ談義>ブログ談義</h2><p>18時から知人たちとハドルで次の記事について議論した。</p><ul><li><a href=https://t-wada.hatenablog.jp/entry/canon-tdd-by-kent-beck>【翻訳】テスト駆動開発の定義</a></li></ul><p>私自身、自分がやっているのはテスト駆動開発の範疇だと思っているものの、昔から実装よりも先にテストコードを書けと声が大きい人たちがいたような気がする。私も多くのケースで実装と一緒にテストコードを書いているものの、別の視点から、これまた多くのケースで実装よりも先にテストコードを書くわけではない。実装がある程度、機能することを確認してからテストコードを書くことの方が多い。この記事では実装よりも先にテストコードを書く手法を「テストファーストプログラミング（Test-First Programming）」と呼び、それ自体はテスト駆動開発に含むものではないことを明言している。この事実だけでもこの記事の価値はあって教条的な人たちと一線を引くことにつながる。さすが t-wada さんで、記事についてとくに懸念もなく、素晴らしい内容だと思う。私の浅慮でツッコミできるようなところはなく、この記事の要旨に沿ってテスト駆動開発して実際の現場で困ることはないと思う。</p><p>知人の他の開発者たちと議論していると、用語の意図や解釈や開発方法論の実践について、それぞれの経験、考え方、実際の職場における開発課題があっておもしろい。私の考えが唯一の正解でもなく、他者の視点や気づきを聞いて考えること自体に価値がある。みんな大筋の概念は合意しているものの、小さいところではそれぞれに思うところはあったようにみえる。こういう、よい記事をみんなで議論してみるという、そういう場を会社イベントとして公式に作っていってもよいのかもしれない。</p><h2 id=スマート縄跳びの試行>スマート縄跳びの試行</h2><p>先日 <a href=/diary/posts/2024/0322/#スマート縄跳びの試用>LED の長さ調節できなかったことから SmartRope PURE を購入</a> した。PURE は普通に縄を切って長さ調節できる。雨だったり予定があったりでなかなか試す機会がなかったのだけど、昨日ようやく公園へ行って試すことができた。いま最も近い公園が芝生の養生中で土の上が全面使えない。なので少し離れた公園まで歩いて行って縄跳びする必要がある。アプリでカウントできるかのテストしながら、タイマーを置いて1分間跳ぶというのを4回やってみた。いまの私のペースだと1分で110回前後ぐらいの回数になる。同時にカロリー消費もみえる。本当は夜遅いから300回やったら帰ろうと思っていたものお、45kcal ぐらいだったので 50kcal を越したいなと思って追加でもう1分ほどやってみた。やっぱり数値がみえると切りのよいところまでやろうというモチベーションになる。PURE は長さとアプリの連動は問題なさそう。あとはどのぐらい使えるかの耐久性かな。amazon のレビューだとハードに使う人は数ヶ月で壊れたというコメントもあった。私は1回に数百回跳ぶ程度だろうから1-2年ぐらいもってくれればいいなと思うんだけど。</p><p>縄跳びした場所を写真に撮って SmartRope のアプリで合成してシェアできる。よい機能だと思う。</p><figure><img src=/diary/img/2024/0327_smartrope.jpg></figure></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0326/>夜散歩</a></h1><div class=post-meta><time class=post-date>2024-03-26</time></div><span class=post-tags>#<a href=/diary/tags/health/>health</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;</span><div class=post-content><p>23時から寝て0時に過ぎに起きて4時に起きて5時に起きた。昨日は雨降りで出掛けられないから家でゆっくりしてた。</p><p>今日の運動は散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=磯上体育館のチーム登録>磯上体育館のチーム登録</h2><p>先日 <a href=/diary/posts/2024/0324/>磯上体育館でバドミントン</a> してきたという話題を三宮.dev で共有しておいた。今日になってそのスレッドが盛り上がってきてチーム登録しようぜとなって、最低5人いるのだけど、呼びかけたらすぐに5人集まって、その勢いで磯上体育館へ行ってチーム登録してきた。磯上体育館のスタッフさんに利用についてのルールを聞いたら、想像以上に複雑な利用ルールになっていた。背景はよくわからないけど、論理的ではなく一貫性もなく訳のわからない利用ルールになっている。一部の人たちだけが得するようなルールにならないよう、あちこちに制約を加えていったら全体としてわかりにくい、誰にとっても使いやすくない利用ルールが出来上がったみたいな雰囲気。そんな懸念を抱きつつも、なんやらかんやらで三宮.dev という名前のチームが爆誕した。運動部というチャンネルを作って現時点で9名が参加してくれた。私が体重を落とすために運動やりたいだけなんだが、一緒に付き合ってくれる仲間がいるというのは本当にありがたい。感謝。</p><h2 id=晩ご飯を食べて温泉へ入ってくる散歩コース>晩ご飯を食べて温泉へ入ってくる散歩コース</h2><p>夜はながいさんとやまさきさんと散歩してきた。19時過ぎに出発して、<a href=https://tabelog.com/hyogo/A2801/A280103/28002405/>神戸摩耶食堂</a> で晩ご飯を食べて、それから <a href=https://nagisa-u.com/>HATなぎさの湯</a> でお風呂に入って、さらに歩いて帰ってきたら23時前ぐらいだったと思う。行きも帰りも歩いたから 8km 近く歩いたのではないかな。いつも1人で歩いているので、誰かと雑談しながら歩くのも雰囲気が違ってとても楽しかった。麻耶食堂の鮭の塩焼きをお勧めされて食べてみた。たしかに脂がのっていておいしかった。また行こうと思う。HATなぎさの湯もずっと行きたいと思いつつ、行けていなかった場所の1つ。高さの浅い露天風呂があって、周りに人がいなかったのでお風呂に浸かりながらストレッチをできたりしてよかった。</p><figure><img src=/diary/img/2024/0326_maya.jpg></figure><p>帰りにながいさんが運営している <a href=https://www.felicite-kobe.net/>レンタルサロンFELICITE神戸店</a> に案内してもらった。整体やマッサージなどを行うレンタルスペースにみえた。ながいさんは毎日、本業のお仕事を終えてからこのレンタルスペースの掃除を自分でしているらしい。今日も散歩から帰ってきて23時頃なのにこれから掃除して帰ると話されていた。人それぞれの考えやモチベーションがあって日々の生活を送っていると思うが、なにごとであれ、毎日ずっと継続できていることがあるのはすごいと素直に感心した。1年、3年、5年、、、継続しているうちに普通の人たちには負けないモノができてくるように思う。私も日記を継続できるようになってコンテンツを溜めていくことへの自信をもてるようになった気がする。</p><p>この散歩コースを記録しておいて三宮.dev のコミュニティにも共有しようと思って google map でマイマップを作ってみた。</p><a href="https://www.google.com/maps/d/viewer?hl=ja&mid=1CCeQVb2v9syuAEIygtJxOueyle1kmTM&ll=34.694666521514925%2C135.21131085&z=15"><figure><img src=/diary/img/2024/0326_mymap.png></figure>麻耶食堂とHATなぎさの湯コース</a></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0315/>家族信託の公正証書の作成</a></h1><div class=post-meta><time class=post-date>2024-03-15</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/postmortem/>postmortem</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/failure/>failure</a>&nbsp;</span><div class=post-content><p>2時過ぎに寝て6時に起きた。いつも通りよく眠れた。</p><p>今日の運動は腕立て,スクワット,縄跳び(両足跳)をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。1時間を10分ほど超えてしまった。</p><ul><li><a href=/diary/posts/2024/0313/#google-jamboard-の移行先>fun/give/learn を miro に移行した話し</a></li><li><a href=https://yorihiroi-frontend.engineer/ja/articles/3uCmvH0r56FI4UCNkyotLG>城崎温泉の開発合宿ふりかえり</a></li><li><a href=/diary/posts/2024/0312/#睡眠時無呼吸症候群-sas>睡眠時無呼吸症候群の重症だった話し</a></li></ul><p>はらさんが城崎温泉の開発合宿ふりかえり記事を書いてくれて嬉しい。参加者がもっとどんどん書いてほしいけれど、なかなか難しいみたい。私自身も書こうと思いながらまだ時間を取れていない。ざっくり次のようなことをふりかえりした。</p><ul><li>城崎温泉／きのいえはよいところなので今後も継続したい</li><li>最大13人泊まれるが、うちらは屋内で作業するので8人程度がちょうどよい<ul><li>みんなでご飯を食べに行ったり、外へ出掛けたりする上でもこのぐらいが限界</li><li>2つの鍋で晩ご飯を食べるのも8人がちょうどよかった<ul><li>量も味もよくて成功だったと思われるが、🦀は値が張る、近くの市場まで出掛けたらもう少し安くなる？</li></ul></li></ul></li><li>毎年イベントを開催するとしてメンバーをどうするか<ul><li>既存枠6人、新規枠2人といった内訳で新しい人も入れていきたい</li><li>イベントの半年前には予約しないといけないため、既存枠は先着にしてしまう</li></ul></li><li>一晩ですべての発表をやるのは時間がかかる<ul><li>発表の後にいろいろ質問する時間をもっと取りたい</li><li>1日目と2日目にわけて4人ずつ二晩かけて発表するのを次回試してみる</li></ul></li></ul><p>あと、なにかの話題から発散したときに余談で次のクソ記事について議論した。</p><ul><li><a href="https://blog.tinect.jp/?p=85681">「MPがすぐに尽きてしまう人」は、企業では救えない。</a></li></ul><p>私もいまマネージャーとして若いメンバーを指導したりしている。その中で人は個人差があって、画一的には扱えないことを実感している。こんな雑で横柄な論調で書けるわけがない。この記事で言及されている、仕事ができない人たちの背景はみんなバラバラだろうし、職種や業態、その人の得意・不得意によっても成果も変わってくるだろう。それを <em>「いわゆる MP」</em> のような、用語の定義もない意味不明なキーワードに括って論じてよいわけがない。著者の主張する重要なメッセージがボケているだから、周りの論理も成り立たない。久しぶりにひどい記事をみた。</p><h2 id=ふりかえり>ふりかえり</h2><p>一昨日から <a href=/diary/posts/2024/0313/#google-jamboard-の移行先>jamboard 移行</a> ならびに隔週のふりかえりの運用変更についてまとめていた。せっかくだからそのノウハウなどをテックブログに書いておこうと雰囲気で思い立って、木曜日の夜から着手して、金曜日の午前中いっぱいかかって書き終えた。うちの会社の顧問さんやお手伝い先でも任意でレビューをお願いして、あちこち推敲して次の記事を公開した。ふりかえりの手法ややり方に言及している記事はあまりみかけないから、にっちに受けたりするかな？と思ったものの、まったく受けなかった。いつもは数日寝かしてから sns に投稿したりしている。それは後になって内容の不備に気付いたときに修正する時間を取れるようにという意図でそうしている。今回は3人もレビューしてくれて、文章のわかりにくいところを推敲できたので公開と同時に sns にも投稿してみた。しかし、ほぼスルーだったのであまり関心をもたれる内容ではなかったようだ。残念。</p><ul><li><a href=https://blog.osstech.co.jp/posts/2024/03/ucidm-postmortem/>チームのふりかえりの改善</a></li></ul><h2 id=家族信託の公正証書の作成>家族信託の公正証書の作成</h2><p>15時30分から弁護士さんと母と公証役場で公正証書の作成を行う。旧居留地のど真ん中に <a href=https://kobe-koushou-center.jp/>神戸公証センター</a> がある。きらびやかなビルの雰囲気とは変わって、ビル内の公証役場の事務所は普通の役場のオフィスって感じだった。私は公証役場に入るのは初めて。</p><p>弁護士さんに作っていただいた家族信託の契約書の内容を、公証人がすべて読み上げ、母と私が正本を見聞きして、最後のその内容を承諾して署名・捺印するという儀式を行う。だいたい1時間弱で手続きが終わった。とくに大変でもなかった。契約書の原本は公証役場で保管するため、公証人から公正証書の正本 (原本と同じ効力をもつ書類) という書類を、母と私がそれぞれに受け取った。この契約書に関する手続きをするときはこの正本を使う。公正証書の保管期間は20年と規定されている。保管期間を過ぎた後に公証役場で破棄されたら無効になってしまう。もし保管期間を過ぎても実は保管し続けている場合もあるし、(理由があって) 連絡すればさらに延長して保管しておいてもらうこともできるらしい。家族信託の契約書が20年後も必要になるのかどうかはわからない。ひとまず1ヶ月以内に正本を使って信託銀行に信託口座を開設しないといけない。来週、三井住友信託銀行の担当者とやり取りする。</p><p>公証人と雑談していて、遺言の公正証書は特別な扱いだと教えてもらっておもしろかった。もともと公証役場における遺言の保管期限は120歳だったものの、遺言の場合は亡くなってからも親族でごだごだする可能性があるため <a href=https://www.tamaki-office.com/column/page82.html>公正証書遺言の保管期限は遺言者が170歳を迎える日まで</a> になったという。例えば119歳で亡くなったと仮定して、相続で親族が揉めてしまうと1年で決着がつかないかもしれない。そのときに遺言の効力がなくなってしまうと遺言者の意図とは変わってしまうため、遺言者の死後も十分に長い期間として50年足して170歳までとなっているらしい。</p><h2 id=バッテリー上がり>バッテリー上がり</h2><p>公正証書の作成し終えたので母を実家へ送り届ける。駐車場にある車に乗り込もうとしてエンジンが全く反応しない。ディーラーさんに電話して症状を伝えると、おそらくバッテリーが上がっているのだろうとのこと。保険会社のサポートセンター経由でロードサービスの方に来てもらった。17時前に保険会社のサポートセンターに連絡して、ロードサービスの担当者が来られたのが17時37分、それから30分ほどでバッテリーを復旧していただいた。エンジンがかからないことに私がパニクってから1時間半ぐらいでトラブルを解決できた。サポートの関係者さんに感謝。</p><p>バッテリー上がりの原因は数日前に私が車に荷物を積み込んだ際にルームランプを点けっぱなしにして消すのを忘れていたせいだった。ルームランプは車のロックをかけても消えないという。ロードサービスの担当者もバッテリーを上げてしまう原因として多い原因だという。こんな失敗をするんやなと自分自身でちょっとショックを受けた。今後はなるべく駐車場でルームランプを点けないようにしよう。夜間荷物の出し入れをやめたり、狭いスペースで出し入れせず、広くて明るいところに車を出すなりして、ルームランプを使わない運用にしようと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0303/>冬の城崎温泉の終わり</a></h1><div class=post-meta><time class=post-date>2024-03-03</time></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>2時半に寝て4時半に起きて6時半に起きた。寝る前から寝ているときも何度もトイレに行った。寒かったせいかな。</p><p>開発合宿期間中なので運動はお休み。</p><h2 id=開発合宿の最終日>開発合宿の最終日</h2><p>2泊3日はとても短い。今日は11時にチェックアウトして帰らないといけない。そして日曜日に帰るのも翌日からお仕事でしんどい。旅行の最終日を土曜日にしたい。この次の機会に出来るかどうかはわからないが、いずれ水曜日から土曜日までの3泊4日のイベントにしたい。土曜日に帰る。そうするとサラリーマンの人にとってはフル参加で3日、木曜日からでも2日休まないといけないから参加が難しいかもしれない。個人事業主やマイクロ法人の人たちが主に参加するイベントになっていくのかもしれない。とはいえ、私もお客さんのお仕事をフルタイムで請け負っていると3日休むというのは厳しいかもしれない。現実的には、まずは木曜日から土曜日までの2泊3日のイベントに移行するのが先になるかもしれない。</p><p>朝風呂を入ってきて、モーニングを食べて、その後にお土産店へ行っていくつかお土産を買った。私も歳をとって必要かどうかに関係なく、適当にお土産を買うようになった。要は自分が気に入ったものや観光地にお金を落とすことでこの空間や環境がなるべく長く続いてほしいという願掛けのようなものになってきた。</p><p>帰り準備も片付けも順調に進み、行きは6人で来たが、帰りは5人になる。荷物を積み込むのも少し余裕ができる。帰りは豊岡駅の近くでお昼にお蕎麦を食べて、丹波篠山の城跡を軽く散策して、16時20分には三ノ宮に戻ってきた。みんなを降ろして、レンタカーを返し終えたのが16時40分、17時前には私も家に帰れた。18時から用事があったのでちょうどよかった。2時間ほどの用事を終えて、今日はやりきった感の、疲れと達成感で少しぼーっとしてそのまま寝てた。</p><p>今回の開発合宿はうちの会社主催だったので、なんというかイベントそのものの責任のようなものを感じていた。初対面の人たちもいる8人でうまくいくのかという不安も少しあった。参加者みんなの協力もあって、仲良く過ごせて、いくらかの自信にもなった。帰ってきて一番に感じたのはトラブルなく終えられて本当によかったという安堵の気持ち。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0302/>冬の城崎温泉の中日</a></h1><div class=post-meta><time class=post-date>2024-03-02</time></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/statistic/>statistic</a>&nbsp;</span><div class=post-content><p>1時に寝て5時半に起きました。気をつけて寝たんだけど、やはりいびきがうるさかったらしい。加齢や肥満もあって昔よりひどくなっているようなのでこれから睡眠外来に通いながら直していく。たぶん年単位で時間がかかる。</p><p>開発合宿期間中なので運動はお休み。</p><h2 id=開発合宿の真ん中の日>開発合宿の真ん中の日</h2><p>あとで会社のブログにも開発合宿について記事を書くので日記は簡単に覚えていることを書く。</p><p>昨日から冷え込んで雨が雪に変わって、雪の城崎温泉をみることができた。昨日はまだ雨降りだったので浴衣の上に半纏 (またはどてら？) を羽織って外湯に行ったり、居酒屋さんに行ったりしていた。今日はさすがに雪降りの中を同じ格好で歩くのは寒いと思えて洋服に半纏を羽織って外湯に出かけたり、買い出しへ行ったりしていた。</p><p>朝風呂に入って、喫茶店でモーニングを食べて帰ってきたら、やぎさんから朝市やっていると教えてもらって、地元の人たちと話しながらお米と野菜と漬け物を買ってみた。これも余白の1つだと思う。</p><p>お昼はきのいえの設備のスクリーンチェックをする。デバイス操作、AirPlay 接続の確認。ここでずっと AirPlay 接続していると、広告をみないと5分ごとに切断されるようになった。これでは夜の親睦会の発表に支障が出る。宿のオーナーさんとも相談しながら、ワンタイムのサブスクリプションにお金 (382円) を払って切断されなくなった。こういう困ったときオーナーさんに line で連絡すると、すぐに返信が戻ってきて相談にのってくれる。親切なオーナーなので信頼できる。</p><h2 id=2つの鍋と調理>2つの鍋と調理</h2><p>夕方からお酒班、野菜班、魚・🦀班の3チームに別れて買い出しへ。これも順調に買い出しできて、18時過ぎから鍋作りを始める。2つの鍋を作る。魚鍋と🦀鍋。この時期、城崎温泉は🦀がメインなので魚はほとんど売っていない。たまたま鱈 (たら) だけ残っていて購入することができた。</p><p>どりらんさんが白菜を「そぎ切り」していて、そんな切り方があることを初めて知った。そぎ切りされた白菜を鍋で食べてとてもおいしかった。早く火が通り、味が染み込みやすい切り方だという。白菜なんて鍋の定番の具材で、いつでもどこでもよく食べるものなのに40年以上生きていて、私の人生で白菜をそぎ切りした人は誰もいなかった。今回の開発合宿で1-2を争う大発見だった。帰ったら私も白菜を買ってそぎ切り練習してみようと思った。その後、鍋を食べて21時20分頃から発表会へと移っていく。</p><ul><li><a href=https://www.kurashiru.com/recipes/e0d7de09-9036-4e11-82e5-f2d567a73a68>そぎ切り　白菜　レシピ・作り方</a></li></ul><h2 id=親睦会>親睦会</h2><p>参加者になんでもいいから発表してもらう。この開発合宿に参加するような人はそれぞれが個々に独自の働き方や専門的なことをやっている。誰の話もオリジナルで新鮮でおもしろい。はらさんは前回もこのイベントがとてもよかったと話されていたので、今回も踏襲して同じようにやってみた。8人いたから4人で前後半にするつもりが、話が長くなったり質疑応答が盛り上がったりして時間は後ろに押して、3人、3人、2人といった区切りになって、翌1時前ぐらいにようやく終わった。私は軽く眠くてふらふらしていた。</p><p>私はお正月から筋トレや運動をして fitibt でデータを記録していることを話してみた。いまの体重のグラフを共有してみると、それを率にして対数にして傾きを算出するとよいというアドバイスをもらった。要は体重が多いときはたくさん減るけど、体重が減った後ではだんだん減りにくくなるから減った量を単純比較してグラフに出すのは適切ではないということみたい。対数グラフは大きな変化と小さな変化を同時に表現するグラフのように感じていたが、体重の減り具合にも使えるのかと発見だった。また後で調べてみて fitbit のデータをエクスポートして作ってみようと思う。</p><ul><li><a href=https://controlabo.com/logplot/>片対数グラフ・両対数グラフとは？読み方・書き方・使い方を解説！</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0301/>冬の城崎温泉へ</a></h1><div class=post-meta><time class=post-date>2024-03-01</time></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>2時に寝て6時半に起きた。よく寝た。</p><p>今日から開発合宿なので運動はお休み。</p><h2 id=開発合宿へ出掛ける>開発合宿へ出掛ける</h2><p>あとで会社のブログにも開発合宿について記事を書くので日記は簡単に覚えていることを書く。</p><p>今回からこのイベントはうちの会社主催にした。具体的にはうちの会社が会場スポンサーとして宿泊費や交通費の一部を負担している。さらに参加者は8人になる。8人もいると、みんなで行動というのはかなり難しい。チームを分割するのか、それぞれが協調して動くのか、いろいろやってみないとわからないなと不安に思いながら試行錯誤してみた。さらに7人と私は面識があるものの、半分ぐらいの人同士がお互いに初対面で面識がない。そういった初めましての人たちが仲良くやれるか。</p><p>朝から <a href=https://toyota.jp/noah/>トヨタノア</a> をレンタカーで借りた。8人乗れる車を依頼して、荷物を積み込んでいて気付いた。荷室がかなり狭い。遠出の場合は8人 + 荷物があるから8人乗りの車に8人乗れるわけではないことに気付いた。もちろん8人乗れなくもないが、荷物を抱えて窮屈になってしまう。今回はたまたま乗る人が6人だったので事なきを得た。今後はワゴン車を借りたときに荷物も考慮して6人程度におさめることを前提にしておく。</p><p>あと付属のカーナビの予想到着時間が保守的に設定されていた。実際に走って目的地に近づくと予想到着時間が短縮されていく。うちの会社の車は走っていると、渋滞や信号待ちが考慮に入ってなくて予想到着時間がどんどん先延ばしになっていくように設計されている。カーナビによって予想到着時間が保守的だったり最短だったりすることを学んだ。ある地点から2時間と出た予想到着時間が実際には1時間20分だった。うちの会社の車と設計が異なっていたので2時間以上かかるんじゃないかと思って、その表示をみたときはやや焦った。</p><p>初めてワゴン車を運転してみて、サイズの大きさはそれほど気にはならなかったが、車重が重くて加速の遅さとブレーキが効かないところには少し慣れが必要だとわかった。合流や追い抜きをうまくできなかったり、信号待ちで止まるときに減速を見誤ってやや急停止になったりした。なんやらかんやらでワゴン車を運転してこれてよい経験になった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0227/>久しぶりや初めましての人たちと会う日</a></h1><div class=post-meta><time class=post-date>2024-02-27</time></div><span class=post-tags>#<a href=/diary/tags/communication/>communication</a>&nbsp;
#<a href=/diary/tags/community/>community</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/food/>food</a>&nbsp;</span><div class=post-content><p>3時に寝て6時半に起きた。なんかいろいろ忙し過ぎる。</p><p>今日の運動はレッグレイズ(椅子),スクワット,散歩をした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=マイクロ法人の仲間>マイクロ法人の仲間</h2><p>先日たまたま facebook で白ヤギ時代の、ある顧客の会社に勤めていたわかばやしさんが起業していたことを知った。創業して1年経ったという。わかばやしさんとは同い年なので応援の意図も含めてコメントしたら久しぶりなので近況報告会しましょうとなって、さらに <a href=https://www.honeycome.biz/>honeycome</a> さんという会社がうちの近所ということもあって、そこも含めて雑談会やりましょうとなった。4人で雑談会が始まったわけだけど、誰がホストで何を話すのかも段取りがなかったので最初はぐだぐだだった。私は呼ばれて行っただけなので、これは私のせいじゃないから。とはいえ、徐々に打ち解けていって、お互いのビジネスでやっていることや関心事などを共有したりした。昨年末に作った <a href=/diary/posts/2023/1210/#2023年ふりかえり>2023年ふりかえりのスライド</a> は私の関心事を紹介する、よいスライドに仕上がっていて、これを共有すれば自己紹介を省けて楽なことにも気付いた。昨日書いた <a href=/diary/posts/2024/0226/#社内版テックブログを読む会の紹介>テックブログを読む会</a> についても共有した。</p><p>4人の雑談会が終わってから、延長線でわかばやしさんとも軽く話して、近況やマイクロ法人のあれこれを共有した。マイクロ法人の相談相手がいないという弱点はコワーキングが補ってくれるという、私のプラクティスも共有した。わかばやしさんとは白ヤギ時代にお仕事してから8年経つかな。またいつかどこかで縁があるかもしれない。私は facebook を年賀状みたいなものに思っている。そこに発信しておけば、あるとき戻ってきた誰かがみつけて連絡をくれたりする。お仕事の依頼も年に数回は来る、大半はお断りするのだけれども。先のことは本当にわからないからつながった縁は大事にしていきたいと思う。</p><h2 id=coworking-day-2024>Coworking Day 2024</h2><p><a href=https://office-campus.life/>OFFICE CAMPUS</a> という古民家を改造したコワーキングスペースへ行って次のイベントに参加してきた。</p><ul><li><a href=https://office-campus.life/archives/program/coworkingday>コワーキングデイ「オフィキャンで仕事してそのあとみんなで飲もうさ」</a></li></ul><p>このイベントは毎月どこかのコワーキングスペースでやっているらしい。イベント自体も1日やっていて、朝やお昼にコワーキングに関する発表があって、夜は飲み会になっていた。私は昼間、普通のお仕事があるので夜の飲み会だけ参加してきた。カフーツさん経由で知っている人が2人いるから大丈夫かな？と行ったら、やまさきさんは帰った後でむかいさんは居られていろいろ案内してもらった。むかいさんとは zoom 会議で毎月みかけてはいるけれど、初めてお会いしてご挨拶できてよかった。</p><p>着いて早々に伊丹市でシェアオフィスを運営されているふくださんに酒粕チーズスプレッドという食べものをごちそうになった。酒粕とチーズの組み合わせ、酒粕の香りがする斬新なスィーツに仕上がっていて、これも外国人がびっくりするような天才の所業にみえた。</p><ul><li><a href=https://choujugura.com/collections/amazake/products/46040>白雪 酒粕チーズスプレッド</a></li></ul><p>名刺交換しただけでも5名の方とお話して、交換していない方も3人ほどお話できて、コワーキングやコミュニティのこと、うちの会社のビジネスや課題管理の話題などをざっくばらんに話した。コワーキングへ行くとだいたい話しを聞いてくれる。みんな親切で丁寧な方々ばかりだった。ここにいる人たちは大半がコワーキングスペースの運営に関わっている人たちだから当然と言えば当然なんだけど、これは it 業界のコミュニティとも少し違う特殊な空間だなと思えた。</p><p>そんなことを考えながら帰ってきて、たまたまいとうさんの記事をみかけたら <a href=https://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%B8%E3%83%BC%E3%83%AB>アジール</a> というキーワードをあげていて、これもおもしろい表現だなと納得した。</p><blockquote><p>「日本って通常、縦社会。企業も、部活動も。コワーキングで一番いいなと思ったのは、コワーキングって横の関係なこと。年齢が離れてても本当のコワーキングに来る人ってそんなの関係ないですよね」</p><p><a href=https//note.com/kanzan10to9/n/n06a7da11fa04>今日のアウトテイク#99（日曜無料版）「ぼくの中ではコワーキングってアジールなんですよ ほか」【メンバーシップ特典】（2024-02-25）</a></p></blockquote><p>私が今日行ったコワーキングの空間はまさに初対面なのに歓迎してくれて、いろんな人たちの話しを聞けて、まさにこんな感じやったなぁと読んでいた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0221/>デジタルノマドがもたらす未来の議論</a></h1><div class=post-meta><time class=post-date>2024-02-21</time></div><span class=post-tags>#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>23時に寝て2時に起きて5時に起きた。少しずつよく眠れるようになってきた。</p><p>今日の運動はレッグレイズ(椅子),腹筋ローラー,スクワットをした。統計を <a href="https://docs.google.com/spreadsheets/d/1bg85QtM-LciUgey8I79uI7vW2PEwsP6TVdeIRVkACBg/edit?usp=sharing">運動の記録</a> にまとめる。</p><h2 id=コワーキングのオンラインイベント>コワーキングのオンラインイベント</h2><p>月例のカフーツさんのオンラインイベントに参加した。<a href=/diary/posts/2023/0117/#コワーキングのオンラインイベント>前回の所感はここ</a> 。</p><p>接続するために zoom を起動したら新しいバージョンがあるからアップデートしろと言われて、パッケージをアップデートしたらすごいレベルのメモリリークに遭遇した。あからさまだったのでググったらキャッシュを削除すればよいと書いてあって、これで直った。</p><ul><li><a href=https://community.zoom.com/t5/Meetings/Zoom-Mint-Client-5-17-5-2543-Memory-Leak-and-Crash-on-Startup/m-p/167354>Zoom Mint Client 5.17.5.2543 Memory Leak and Crash on Startup</a></li></ul><p>なぜかその後もマイクとビデオが有効にならなかったので聞くだけしていた。</p><p>小さいイベントに参加するような人たちは自分なりの課題をもっている人が多い。ただ講師の話しを聞きに来る人たちだけではない。イベントに参加した人たちに話してもらう。なにかイベントのための役割を担ってもらうというったお膳立てをすればうまくいくことが多い。</p><ul><li><a href=https://news.yahoo.co.jp/articles/48a035846a86767e1be5c043976752f4e2a466e6>日本が年収1000万円以上の外国人にデジタルノマドビザ発給開始へ</a></li></ul><p>日本でもデジタノマドビザが発行されるようになるらしい。6ヶ月滞在して仕事もしてよい。仕事をしてよいという点が観光ビザと異なる。一方でデジタルノマドに詳しい人の話では、デジタルノマドが長期滞在するということは現実的にあまりないそうで、せいぜい1つの国に2ヶ月程度しかいないらしい。滞在期間を年単位にしたところで1年とかずっといるわけではないというのが、海外の先行事例からも伺えるという。アジア圏でもデジタルノマドビザは韓国、台湾、バリ、タイなどの競合がいるため、あちこち移動するでしょうとのこと。</p><p>全体のお話しを聞いていてちょっと違うなと思ったのが、コワーキングの文脈の課題に関して行政がやるべきといった話題がちらほら出た。これは it 業界特有なのかもしれないけど、なぜ行政なんかに自分たちのビジネスややりたいことの支援ができると期待できるのか、私の経験則からは不思議に思ってしまう。行政なんかなにもしないし、厳しい言い方をしたら税金をそれっぽい会社にばら撒いてやった感を出しているだけ。行政の補助金がほしいというのは、世の中の役に立たなくてもお金をもらえるなら働きますよと言っているようなもので、ここに参加しているような人たちはそうじゃないと思うので、行政なんかに頼らずに自分たちでどんどんやっていったらいいんじゃないかと思えた。行政にお願いしたいのは、自分たちは新しいことをやるので、その邪魔はしないでくれということだけ。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0130/>午後半休と西へ南へ</a></h1><div class=post-meta><time class=post-date>2024-01-30</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/investing/>investing</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;</span><div class=post-content><p>3時頃に寝て4時半に起きて7時半に起きた。いろいろやっていたら眠れなかった。</p><p>今日の筋トレは腕立て:20x1をした。午後半休で出掛けて実家へ寄って疲れたので休トレーニング日にした。</p><h2 id=家族信託の契約書の読み合わせ>家族信託の契約書の読み合わせ</h2><p><a href=/diary/posts/2023/1124/#家族信託の打ち合わせ>前回の打ち合わせ</a> を経て、弁護士さんと三井住友信託銀行の担当者との契約書レビューを行い、契約書の叩き台が出来上がってきた。</p><p>午後半休をとって明石市の弁護士さんの事務所へ母と姉と私の3人で訪問してきた。目的は契約書の読み合わせで内容を確認しつつ、この契約は基本的に1度作ったら母が亡くなるまで10年や20年といった長期間に渡って効力をもつため、3人の利害関係者が本当に契約に合意しているかどうかの最終確認を弁護士さんが確認するという意図も含まれていたように思う。私の考えとしても姉はいまも今後も基本的に関わらないため、母に不利な契約の建付けをしているわけではないことを確認してもらう意図もあった。</p><p>母の財産を私 (と姉) が管理するという目的であり、母から私に必要なお金の送金を依頼するという形になる。母自身はその財産を自由に扱うことができない。母から私が依頼を受けて、契約内容の範疇で正当であれば、私が信託銀行の口座から母の口座へ振り込む。その際に大きなお金であれば、信託銀行の担当者から私に監査が入る。必要に応じて見積書や注文書などを求められるかもしれない。私は信託報酬として3万円/月を受け取る。年間で36万円になる。この金額は一般的な相場になる。信託報酬は生前贈与の代替として機能する。私が急死したり、病傷で入院して管理できなくなれば姉が引き継ぐ。</p><p>現時点において家族信託における資産の運用手段として NISA や投資信託は不可であるという。将来的に解禁される可能性はある。将来を見越して契約書に抽象的な表現で一応書いておくという話しにはなっているが、それを書いておいたところで将来 NISA や投資信託が容認されたとしても具体的な内容がないからダメだと信託銀行の担当者から拒否される可能性は高いとのこと。私の意図としては財産の一部を NISA の投資上限である360万円/年に追加していきたい。いまのところ、他の投資運用を考えるのが面倒でもあるので、NISA がダメならなにもせず預金として置いておくだけになるのかもしれない。</p><p>契約書を読み合わせしていておもしろかったのが、信託銀行の口座からの出金を私の口座に入れるのは不可だという。それが建て替えであっても。必ず母の口座、または請求者の口座でないといけないという。たとえば家が老朽化して新築し直したとしたら、信託銀行の担当者が工務店や建築会社の担当者とやり取りして直接支払ってくれるという。</p><p>この後の流れとして、作成した契約書を公証役場へ送り、弁護士さんと母と一緒に公証役場へ行く必要がある。そして公証人の前で契約書を作る。このときに公証人の前で母が契約内容の説明を求められる可能性もあるとのこと。契約書の手続きを完了したら私が三井住友信託銀行へ行って口座を開設する。口座を開設したら弁護士さんへ連絡して、父の遺産 (母の相続分) をその口座へ振り込むといった流れになる。</p><h2 id=送迎とコワーキングスペースの荷物運び>送迎とコワーキングスペースの荷物運び</h2><p>明石市で打ち合わせを終えて、そのまま母と姉を実家まで送って帰った。その際にコワーキングスペースで使う小物や家具なども一緒に運んで離れのスペースに設置した。<a href=/diary/posts/2024/0113/#ハンガーラック受け取り>ハンガーラック</a> を組み立てるのに少し時間がかかった。一通りの荷物運びを終えたらそのまま神戸まで戻ってきた。実家に泊まってもよかったが、週の中日だし、お仕事も溜まっているし、他にもいろいろある。20時半には神戸に戻ってきていたものの、あまり寝ていなかったせいか、眠気と疲労でそのまま寝てしまった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0119/>年明けからコーポレート業務いろいろ</a></h1><div class=post-meta><time class=post-date>2024-01-19</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/tax/>tax</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;
#<a href=/diary/tags/coworking/>coworking</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/debug/>debug</a>&nbsp;
#<a href=/diary/tags/network/>network</a>&nbsp;</span><div class=post-content><p>23時に寝て4時半頃に起きてそのまま6時半までだらだらして起きた。早寝早起き。</p><p>今日の筋トレは腹筋:20x1,腕立て:15x1,スクワット20x1をした。</p><h2 id=隔週の雑談>隔週の雑談</h2><p>顧問のはらさんと隔週の打ち合わせ。今日の議題はこれら。内容が多くて1時間超えた。</p><ul><li><a href=/diary/posts/2024/0105/#事務処理規定の叩き台作成>電子帳簿保存法対応の事務処理規定の共有</a><ul><li>まだ始まったばかりで税理士さんの温度感も低い</li><li>事務処理規定が省令に沿っているかどうかの判断はプロセス監査で行われる</li><li>電子帳簿保存法には規定されていないため、事務処理規定の妥当性の検証は行われない</li></ul></li><li><a href=/diary/posts/2024/0107/#経営の価値観と財務>融資を受ける構想作り</a><ul><li>日本政策金融公庫のみで検討していたが、融資実績を作りたいなら信用金庫も加えた方がよい</li><li>借金のメンタリティ、担当者との折衝や審査など余裕のあるときに経験を積んでおくことはよいように思えた</li></ul></li><li><a href=/diary/posts/2024/0113/#ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーさんとのやり取り</a><ul><li>会社の経費で役員のための保険に入ろうと考えている</li><li>個人の保険控除は8万円らしい</li></ul></li><li><a href=https://note.com/kanzan10to9/n/n49d8fe09ad5b>ローカル複業化プロジェクトの考察</a><ul><li>IT コミュニティに老人や子どもたちは入りにくい。農業なら老若男女誰でも入れる気がする</li><li>農業や地元の特産品を切り口にコワーキング (コミュニティ) で街の人たちと田舎の人たちをつなげるのはすごいことだと思う (関係人口の創出)</li><li>地元の有力者と仲良くなると、行政の口利きもしてくれて活動しやすくなる</li></ul></li></ul><p>はらさんが <a href=https://yorihiroi-frontend.engineer/ja>よりひろいフロントエンド</a> を始めたそうでその話しも聞いていた。個人のブログサイトにするのか、複数人で記事を共有するサイトにするのかもまだ曖昧だという。<a href=https://www.contentful.com/>Contentful</a> + Next.js + Cloudflare Pages という構成らしい。Contentful というツールを私が知らなかったのでまた時間のあるときに調べてみようと思う。</p><p>母が一人暮らしをしていて体調もよくないことから要介護状態になるリスクがそこそこあると考えている。最悪の場合、会社を休眠させてしばらく介護をするかもしれない。はらさんが仰るには休眠はよいアイディアだという。会社員に例えると退職した日の帰り道を想像するとよいと話されていたのだけど、私は過去の記憶があまりないというのもあるが、これまで6回も退職してきたのに退職日を特別に思ったことはあまりない。退職日と他の日に大きな違いはなくて、次のお仕事の準備や調査をしていることが私は多かったと思う。それでも退職にあわせて有休を1-2ヶ月とってゆっくり過ごしていたことには変わりない。私もそういう、メリハリのある働き方が好きだ。</p><h2 id=smtp-接続のタイムアウト>smtp 接続のタイムアウト</h2><p>たまたまメンバーが誤った設定で smtp サーバーに接続したときにタイムアウトするまで5分ほどかかるという現象を発見した。タイムアウトの設定をせずに接続しようとするからそんなことが起きるのかな？と考えて smtp クライアントのタイムアウト設定を調べてみると <a href=https://pkg.go.dev/net#DialTimeout>net.DialTimeout</a> を使えばよいという。</p><ul><li><a href=https://github.com/golang/go/issues/16436#issuecomment-233829112>https://github.com/golang/go/issues/16436#issuecomment-233829112</a></li></ul><p>多めに見積もって30秒のタイムアウトを設定して接続するようにして再度メンバーに再現検証してもらったら直っていないという。接続そのものは出来ていたのだ。ソースを読んでみると、smtp クライアントを生成するときに <code>220</code> というレスポンスを読むことがわかる。誤った接続設定でもコネクションは確立するが、レスポンスが返ってこなくて待ち状態になっていた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewClient</span>(<span style=color:#a6e22e>conn</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Conn</span>, <span style=color:#a6e22e>host</span> <span style=color:#66d9ef>string</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>text</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>textproto</span>.<span style=color:#a6e22e>NewConn</span>(<span style=color:#a6e22e>conn</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>ReadResponse</span>(<span style=color:#ae81ff>220</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Client</span>{<span style=color:#a6e22e>Text</span>: <span style=color:#a6e22e>text</span>, <span style=color:#a6e22e>conn</span>: <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>serverName</span>: <span style=color:#a6e22e>host</span>, <span style=color:#a6e22e>localName</span>: <span style=color:#e6db74>&#34;localhost&#34;</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>tls</span> = <span style=color:#a6e22e>conn</span>.(<span style=color:#f92672>*</span><span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Conn</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>調べてみると Conn インターフェースにデッドラインを設定する API が提供されている。注意事項としては接続した後にデッドラインをリセットしないといけない。</p><blockquote><p>デッドラインとは、I/O操作がブロックされずに失敗する絶対時間のことである。デッドラインは、ReadやWriteを呼び出した直後のI/Oだけでなく、将来の保留中の I/O すべてに適用される。デッドラインを超過した後は、未来にデッドラインを設定することで、接続をリフレッシュすることができる。</p><p>デッドラインを超えた場合、ReadやWrite、その他のI/Oメソッドの呼び出しは、os.ErrDeadlineExceeded をラップしたエラーを返します。これは、errors.Is(err, os.ErrDeadlineExceeded)を使用してテストすることができます。errorのTimeoutメソッドはtrueを返しますが、期限を超過していなくてもTimeoutメソッドがtrueを返すエラーが他にもあることに注意してください。</p><p>アイドルタイムアウトは、ReadまたはWrite呼び出しに成功した後、デッドラインを繰り返し延長することで実装できる。tの値が0であれば、I/O操作はタイムアウトしない。</p><p><a href=https://pkg.go.dev/net#Conn>https://pkg.go.dev/net#Conn</a></p></blockquote><p>次のように <code>SetReadDeadline()</code> を使ってタイムアウトを5分から30秒に短縮できた。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Clinet</span>) <span style=color:#a6e22e>connectWithReadDeadline</span>(<span style=color:#a6e22e>conn</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Conn</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>smtp</span>.<span style=color:#a6e22e>Client</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>SetReadDeadline</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>dialTimeout</span>)); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to set read deadline: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>smtp</span>.<span style=color:#a6e22e>NewClient</span>(<span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>Host</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to connect to the smtp server: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#75715e>// clear read deadline
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>SetReadDeadline</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Time</span>{}); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to reset read deadline: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/coworking/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>最近の日記</span>
</a><a href=/diary/tags/coworking/page/3/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>