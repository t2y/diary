<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Llm on forest nook</title><link>/diary/tags/llm/</link><description>Recent content in Llm on forest nook</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>© 2021 Tetsuya Morimoto</copyright><lastBuildDate>Fri, 11 Aug 2023 08:12:53 +0900</lastBuildDate><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/tags/llm/index.xml" rel="self" type="application/rss+xml"/><item><title>休日だったとは思えない多忙な日</title><link>/diary/posts/2023/0811/</link><pubDate>Fri, 11 Aug 2023 08:12:53 +0900</pubDate><guid>/diary/posts/2023/0811/</guid><description>2時に寝て6時に起きて8時過ぎに起きた。昨日の夜に書いたコードにバグがあると朝からチャットをみかけて慌てて起きてオフィスへ行くことにした。夕方に一度帰って仮眠してまた夜に涼しくなってからオフィスへ行って作業していた。祝日とは思えない忙しさでほぼほぼフルで働いていた。
podcast の内容チェック 一昨日に収録した podcast の音声データが仕上がったと昨日の夜に連絡をもらった。本当は昨日の夜に聞いて内容チェックするところが、昨日はコードを書いていてそれで疲れてしまったので朝から聞いて内容チェックしていた。2時間話したので聞くのも2時間かかる。
今回はスクリプトも付いていた。日本語の音声データからの llm 技術を使ってスクリプトを自動生成している。そのテキストをみながら聞いていた。てらださんが言うには音声データによってスクリプトの精度は大きく変わるらしいが、今回の私の雑談はうまくいった方で7割ぐらいの精度で正しかった。ところどころの単語は間違っているものの、ざっとテキストを見返してもなにを話したのかの雰囲気は類推できる。これがあると、どの時間帯にどういった内容を話しているかを知ることができるため、自分の関心のあるところだけ聞くときに参考になる。その程度の要件であれば7割の精度で構わないという。その後、当日にもともと予定していなかったことを話したことの、ショーノート向けのリンクを探してきて追記したりしていた。
ダイニングテーブルの交渉成立 以前から ジモティー検索 で実家の離れでリモートワークするためのテーブルを探していた。出品されても大抵は1時間以内で取引相手が決まってしまうため、勝負は時の運のような雰囲気になっていた。たまたま今晩も検索してみて、近所でみつけて、どうせ交渉済みかなと諦めモード満開で問い合わせたところ、まだ引き取り先が決まってなくて無事に交渉が成立した。明後日の午前中に明石市まで引き取りに行ってくることになった。なにが嬉しいって中古のダイニングテーブルを無料で譲り受けられる。うまいこといくときはトントン拍子だった。</description><content>&lt;p>2時に寝て6時に起きて8時過ぎに起きた。昨日の夜に書いたコードにバグがあると朝からチャットをみかけて慌てて起きてオフィスへ行くことにした。夕方に一度帰って仮眠してまた夜に涼しくなってからオフィスへ行って作業していた。祝日とは思えない忙しさでほぼほぼフルで働いていた。&lt;/p>
&lt;h2 id="podcast-の内容チェック">podcast の内容チェック&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0809/#podcast-収録">一昨日に収録した podcast&lt;/a> の音声データが仕上がったと昨日の夜に連絡をもらった。本当は昨日の夜に聞いて内容チェックするところが、昨日はコードを書いていてそれで疲れてしまったので朝から聞いて内容チェックしていた。2時間話したので聞くのも2時間かかる。&lt;/p>
&lt;p>今回はスクリプトも付いていた。日本語の音声データからの llm 技術を使ってスクリプトを自動生成している。そのテキストをみながら聞いていた。てらださんが言うには音声データによってスクリプトの精度は大きく変わるらしいが、今回の私の雑談はうまくいった方で7割ぐらいの精度で正しかった。ところどころの単語は間違っているものの、ざっとテキストを見返してもなにを話したのかの雰囲気は類推できる。これがあると、どの時間帯にどういった内容を話しているかを知ることができるため、自分の関心のあるところだけ聞くときに参考になる。その程度の要件であれば7割の精度で構わないという。その後、当日にもともと予定していなかったことを話したことの、ショーノート向けのリンクを探してきて追記したりしていた。&lt;/p>
&lt;h2 id="ダイニングテーブルの交渉成立">ダイニングテーブルの交渉成立&lt;/h2>
&lt;p>以前から &lt;a href="/diary/diary/posts/2023/0726/#法要の調整">ジモティー検索&lt;/a> で実家の離れでリモートワークするためのテーブルを探していた。出品されても大抵は1時間以内で取引相手が決まってしまうため、勝負は時の運のような雰囲気になっていた。たまたま今晩も検索してみて、近所でみつけて、どうせ交渉済みかなと諦めモード満開で問い合わせたところ、まだ引き取り先が決まってなくて無事に交渉が成立した。明後日の午前中に明石市まで引き取りに行ってくることになった。なにが嬉しいって中古のダイニングテーブルを無料で譲り受けられる。うまいこといくときはトントン拍子だった。&lt;/p></content></item><item><title>年一ゲストの podcast 収録</title><link>/diary/posts/2023/0809/</link><pubDate>Wed, 09 Aug 2023 23:43:36 +0900</pubDate><guid>/diary/posts/2023/0809/</guid><description>夕方に寝て晩ご飯食べてきて23時に寝て7時に起きた。起きてから podcast のネタ帳を書いていた。本当は前日の夜に書くと宣言したものの、夜は眠くて普通に寝てた。
mongodb のインデックス追加 テスト環境の履歴テーブルにドキュメントが135万件ほど入っている。管理画面の履歴一覧を表示すると、一覧がレンダリングされるのに約1秒かかるようになった。遅い。インデックスなしでフルスキャンしているのでデフォルトのソートキーのインデックスが必要なことはすぐに想定できた。実際に compass でクエリを explain で実行してみるとフルスキャンしていることと、どのぐらいの時間がかかっているのかを計測できた。
デフォルトのソートキーのインデックスを追加すると explain の画面で数十 msec かかっていた時間が解消された。ソートキーに対して自動的にインデックスが使われることもわかった。
管理画面からも数十 msec で一覧が表示されるようになった。私の感覚ではひと昔のデータベースは10万件を超えたら1秒ぐらいかかった気はするが、いまはマシンスペックもミドルウェアの性能も上がっているのでそれが100万件超になったんだなという印象。実運用だとすぐに発生する問題が普通の開発をしていると気付きにくくなる懸念があることを学んだ。
podcast 収録 お仕事を終えてから、年一ゲストとして出演している terapyon channel の podcast の収録へ行ってきた。本当は6月頃に出演依頼が来ていたのを、私がお手伝いしている開発のプレスリリースや事例紹介が終わってからの方が話せる内容が多くてよいということで延期してもらっていた。事例紹介はまだ公開できていないけれど、別に事例紹介なくても先方にうちの会社が手伝っていることを公開してよい許可はもらっているので podcast の中で話してもまったく問題ない。
昨日てらださんとたまたまやり取りしていたときに、せっかく東京に来ているのでオフラインで収録しては？と言ったらその方向になって、翌日即収録という行き当たりばったりやっつけ計画で話しが進んだ。非商用の podcast で話すのでそこまで品質に責任をもつ必要もない。19時半にてらださんの会社のオフィスへ伺い、20時頃から収録を始めて、なんやらかんやら盛り上がって言いたい放題言って、2時間経っていた。オンラインで収録するよりも、オフラインの方がずっと多くのことを短い時間で話せるように感じた。相槌うったり会話の掛け合いがしやすいので間が短い気がする。内容的にはちょっと話し過ぎで聞く人は疲れて最後まで聞いてもらえないかもしれない。その後、近くの居酒屋さんへ飲みに行って1時間ほど飲んで24時前にはホテルへ戻ってきた。楽しかったー。
てらださんの近況の中に llm を使ってサービスを開発するときに LangChain というツールがあって、これを使うと簡単にいろんな言語処理ができて楽しいといったことを共有してもらった。いまは触る余裕がないけれど、覚えておきたい。</description><content>&lt;p>夕方に寝て晩ご飯食べてきて23時に寝て7時に起きた。起きてから podcast のネタ帳を書いていた。本当は前日の夜に書くと宣言したものの、夜は眠くて普通に寝てた。&lt;/p>
&lt;h2 id="mongodb-のインデックス追加">mongodb のインデックス追加&lt;/h2>
&lt;p>テスト環境の履歴テーブルにドキュメントが135万件ほど入っている。管理画面の履歴一覧を表示すると、一覧がレンダリングされるのに約1秒かかるようになった。遅い。インデックスなしでフルスキャンしているのでデフォルトのソートキーのインデックスが必要なことはすぐに想定できた。実際に &lt;a href="https://www.mongodb.com/ja-jp/products/compass">compass&lt;/a> でクエリを explain で実行してみるとフルスキャンしていることと、どのぐらいの時間がかかっているのかを計測できた。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0809_mongodb-explain1.png"/>
&lt;/figure>
&lt;p>デフォルトのソートキーのインデックスを追加すると explain の画面で数十 msec かかっていた時間が解消された。ソートキーに対して自動的にインデックスが使われることもわかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0809_mongodb-explain2.png"/>
&lt;/figure>
&lt;p>管理画面からも数十 msec で一覧が表示されるようになった。私の感覚ではひと昔のデータベースは10万件を超えたら1秒ぐらいかかった気はするが、いまはマシンスペックもミドルウェアの性能も上がっているのでそれが100万件超になったんだなという印象。実運用だとすぐに発生する問題が普通の開発をしていると気付きにくくなる懸念があることを学んだ。&lt;/p>
&lt;h2 id="podcast-収録">podcast 収録&lt;/h2>
&lt;p>お仕事を終えてから、年一ゲストとして出演している &lt;a href="https://podcast.terapyon.net/">terapyon channel&lt;/a> の podcast の収録へ行ってきた。本当は6月頃に出演依頼が来ていたのを、私がお手伝いしている開発のプレスリリースや事例紹介が終わってからの方が話せる内容が多くてよいということで延期してもらっていた。事例紹介はまだ公開できていないけれど、別に事例紹介なくても先方にうちの会社が手伝っていることを公開してよい許可はもらっているので podcast の中で話してもまったく問題ない。&lt;/p>
&lt;p>昨日てらださんとたまたまやり取りしていたときに、せっかく東京に来ているのでオフラインで収録しては？と言ったらその方向になって、翌日即収録という行き当たりばったりやっつけ計画で話しが進んだ。非商用の podcast で話すのでそこまで品質に責任をもつ必要もない。19時半にてらださんの会社のオフィスへ伺い、20時頃から収録を始めて、なんやらかんやら盛り上がって言いたい放題言って、2時間経っていた。オンラインで収録するよりも、オフラインの方がずっと多くのことを短い時間で話せるように感じた。相槌うったり会話の掛け合いがしやすいので間が短い気がする。内容的にはちょっと話し過ぎで聞く人は疲れて最後まで聞いてもらえないかもしれない。その後、近くの居酒屋さんへ飲みに行って1時間ほど飲んで24時前にはホテルへ戻ってきた。楽しかったー。&lt;/p>
&lt;p>てらださんの近況の中に llm を使ってサービスを開発するときに &lt;a href="https://www.langchain.com/">LangChain&lt;/a> というツールがあって、これを使うと簡単にいろんな言語処理ができて楽しいといったことを共有してもらった。いまは触る余裕がないけれど、覚えておきたい。&lt;/p></content></item></channel></rss>