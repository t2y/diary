<!doctype html><html lang=en><head><title>hugo :: forest nook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/hugo/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="hugo"><meta property="og:description" content><meta property="og:url" content="/diary/tags/hugo/"><meta property="og:site_name" content="forest nook"><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/hugo/index.xml rel=alternate type=application/rss+xml title="forest nook"></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0115/>頭痛でダウン</a></h1><div class=post-meta><time class=post-date>2024-01-15 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/document/>document</a>&nbsp;</span><div class=post-content><p>4時半に寝て7時半に起きた。深夜にハンズオン資料を作っていたらまた眠れなくなった。朝から頭痛くて調子が悪い。きっと生活のリズムが崩れているせい。早くお仕事を終えて帰って寝てた。</p><p>今日の筋トレは腕立て:10x1,スクワット15x1をした。</p><h2 id=ldap-エントリーの更新リクエストをランダムに行うツール>ldap エントリーの更新リクエストをランダムに行うツール</h2><p>先週末から作っていたテストツールがようやく一通り動くようになった。ldap エントリーを生成したり、既存のエントリーに対して更新、削除、パスワード変更のリクエストをランダムに自動生成して送る。常時 id 連携の処理を動かしたときの並行処理の問題であったり、やや負荷をかけたときになにかの敷居値を超えて不具合がないかといった検証に使える。8月末に開発に着手して、年末から再開して、1月明けでようやく完成した。テストツールの開発の優先度が低いので後回し後回しにしているうちにどんどん後ろに流れていった。悪い開発の典型例。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0114/>昨日の続き</a> 、、、をやろうと思っていたけど、頭痛でしんどかったので今日はお休み。イベントが公開された。</p><ul><li><a href=https://fin-py.connpass.com/event/307453/>静的サイトジェネレーター勉強会</a></li></ul><p>他のツールをみていて slate というツールは知らなかった。api ドキュメントを書くためのツールとある。</p><ul><li><a href=https://github.com/slatedocs/slate>https://github.com/slatedocs/slate</a></li><li><a href=https://slatedocs.github.io/slate/>https://slatedocs.github.io/slate/</a></li></ul><p>うちはいま <a href=https://redocly.com/>redocly</a> というツールを使って openapi のフォーマット (yml) で api ドキュメントを管理している。開発は openapi を使ってなくてドキュメントのためだけに openapi を使っている。量が増えてくると yml でドキュメントを書くのも辛くなってくるので markdown で api ドキュメントを書けるならそれもよいかもしれない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0114/>ハンズオン資料を作って、出掛けて、ハンズオン資料を作って</a></h1><div class=post-meta><time class=post-date>2024-01-14 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;</span><div class=post-content><p>2時過ぎに帰ってなんか眠れなくて4時半に寝て8時に起きた。なんか夜型になってきて変な生活リズム。</p><p>今日の筋トレは腕立て:10x1,スクワット15x1をした。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0113/#hugo-のハンズオン資料作り>昨日の続き</a> 。</p><p>朝からいろいろ直していた。やり始めると凝ってくる。スタイルやシンタックスハイライトなどを修正していた。</p><h2 id=もくもく会>もくもく会</h2><p><a href=https://kobe-sannomiya-dev.connpass.com/event/305200/>新年もくもく会</a> に参加した。なぜか今回は参加者が多くて15人ぐらいほぼ満席だった。lt 大会の内容は新年なので今年はこんなことやりたいという抱負を発表する人が多かったように思う。一通り lt を聞いてから、午前中に引き続き、ハンズオン資料の調査をしていた。夕方眠くなって集中力がなくなっていた。軽く1次会だけ行って眠くてそのまま帰ってきた。</p><h2 id=hugo-のハンズオン資料作り-2回目>hugo のハンズオン資料作り (2回目)</h2><p>飲み会から帰ってきて2時間ほど寝て、それからまた再開して2時半ぐらいまでやってた。サイトの構築とテーマの設定のところを書き終えた。初心者向けにハンズオン資料を書いているが、テーマの設定はなかなか難しいなと思える。拡張を作り込んでいるテーマもあるが、設定方法のドキュメントはあまりないことが多い。デモ画面とそのソースの設定ファイルをみながら空気を読むみたいなところで初期設定をしていかないといけない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0113/>ハンズオン資料の作成に着手</a></h1><div class=post-meta><time class=post-date>2024-01-13 (Sat.) ::</time></div><span class=post-tags>#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/pypi/>pypi</a>&nbsp;
#<a href=/diary/tags/iostat/>iostat</a>&nbsp;
#<a href=/diary/tags/finance/>finance</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=post-content><p>晩ご飯食べてくつろいでからまたオフィスに戻って作業してた。3時過ぎに寝て8時に起きた。寝不足のせいか、今日も夕方に眠くなって家に戻って3時間ほど寝てた。</p><p>今日の筋トレは腹筋:25x1,腕立て:10x0,スクワット15x1をした。</p><h2 id=ストレッチ>ストレッチ</h2><p>今週もとくにお仕事で疲労や負荷はないものの、筋トレを継続しているせいか、やや腰が痛いかなといったところ。トレーナーさんによると、筋トレで筋肉痛になっていると体が硬くなるという。おそらくそのせいでやや硬めの印象になっているのだと思う。腰や太ももの前・後ろの筋に張りがあったのでこれらはスクワットの反動ではないかと思われる。今日の開脚幅は開始前152cmで、ストレッチ後157cmだった。先週と同じだ。</p><h2 id=ハンガーラック受け取り>ハンガーラック受け取り</h2><p>ジモティーで「ハンガーラック」を500円で購入した。これもコワーキングスペースで使う。この前帰ったときにジャケットを掛けるものがないと気付いた。引き取りに東灘区へ行く機会が増えてきてだいぶ道を覚えてきた。マンションの駐車場まで行って、そこでハンガーラックを受け取った。解体してくれていたので難なく荷室に積めた。丁寧な方で駐車場から車が出ていくときまでお見送りしてくれた。ジモティーだと受け渡しが終わったらすぐ帰る人の方が普通なので性格なのかホスピタリティの違いが出るなと思った。</p><h2 id=iostat-tool-のメンテナンス>iostat-tool のメンテナンス</h2><p><a href=/diary/posts/2021/0926/>日記を書こうと決めて初日に書いた内容</a> が iostat-tool の保守だったなと思い出した。2年半ほど前。一昨日からプルリクエストが届いていたのでレビューしたり、CI 環境の設定を更新したりしてマージした。</p><ul><li><a href=https://github.com/t2y/iostat-tool/pull/6>Use %H for output generated with iostat -t #6</a></li></ul><p>マージしてから 0.3.1 として <a href=https://pypi.org/project/iostat-tool/>https://pypi.org/project/iostat-tool/</a> にパッケージをアップロードした。</p><h2 id=ファイナンシャルプランナーとの打ち合わせ>ファイナンシャルプランナーとの打ち合わせ</h2><p><a href=/diary/posts/2024/0106/#ファイナンシャルプランナーとの打ち合わせ>先週の続き</a> 。17時からの予定だったが、プランナーさんの前の予定が早く終わったそうで15時半からに変更になった。お昼以降ならいつでもよいと伝えていたのでこういった調整ができてよいと思う。卓上カレンダーをお土産にもってきてくれた。今日は次のような内容を話した。</p><ul><li>人生のキャッシュフローに問題ない</li><li>預貯金が多いのでもう少し運用にまわしたい<ul><li>どういった運用があるのかノーアイディアなので提案してほしい</li></ul></li><li>資産形成ではなく万が一のときのための役員向けの保険を提案してほしい</li></ul><p>先方もどうせ来るならもっと準備して来たらいいんじゃないかとも思うが、次は teams でテレビ会議にしましょうと提案した。30分の打ち合わせのために三ノ宮のオフィスまで来てもらうのも申し訳なく思えてきた。その際にメールアドレスを伝えていて「すべて小文字ですか？」と聞くのでメールアドレス (ドメイン名) は大文字小文字を区別せず、大文字でも届きますよと教えてあげたら思いの外驚かれていた。昔からある古い仕様は大文字小文字を区別しなかったりする。大文字小文字を区別しないというのは、多くのケースで百害あって一利なしだけれども、互換性のために変更することもできない。</p><h2 id=hugo-のハンズオン資料作り>hugo のハンズオン資料作り</h2><p><a href=/diary/posts/2024/0111/#静的サイトジェネレーターの勉強会の打ち合わせ>先日の打ち合わせ</a> を受けて資料作りに着手した。hugo のサイト構築やテーマ設定は一度行ったらそうそう変更することはないので久しぶりに設定したら忘れていて、これどうだったかな？とか、このフォーマットはどこからきているのか？とか、いろいろ調べて思い出しながらやっていた。</p><p>hugo は設定ファイルを yaml, toml, json で記述できる。フォーマットを複数対応するというのはよくないということに気付いた。json はみたことないけど、テーマのサンプルの設定ファイルを yaml と toml の、開発者が慣れた方を使う。そうすると、テーマのサンプルの設定ファイルを yaml で提供していて、hugo.toml でサイトの設定をしていた場合、テーマの設定を yaml から toml に変換する作業が発生する。コンテンツの markdown も toml と yaml の両方で記述できるからフォーマットの統一感もなかったりする。なによりも初心者が調べたときに設定ファイルが toml だったり、yaml だったりして混乱する。</p><ul><li><a href=https://gohugo.io/getting-started/configuration/>Configure Hugo</a></li></ul><p>デフォルト設定は toml になっているので hugo で yaml は使わない方がいいんだろうなと思えた。</p><p>さらに設定ファイルの名前も昔は <code>config.toml</code> だったのが、最近は <code>hugo.toml</code> に変わり、さらにどちらのファイル名でもよいという仕様になっている。こんなことになんの意味があるのかもわからない。</p><blockquote><p>With v0.109.0 and earlier the basename of the site configuration file was config instead of hugo. You can use either, but should transition to the new naming convention when practical.</p></blockquote><p>まずはサイト構築して github actions で github pages へアップロードする環境構築を完了した。</p><ul><li><a href=https://t2y.github.io/hugo-hands-on/>https://t2y.github.io/hugo-hands-on/</a></li></ul><p>徐々にコンテンツを追加していく。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0111/>仕事して打ち合わせしてレンタカーの手配</a></h1><div class=post-meta><time class=post-date>2024-01-11 (Thu.) ::</time></div><span class=post-tags>#<a href=/diary/tags/svelte/>svelte</a>&nbsp;
#<a href=/diary/tags/event/>event</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/workcation/>workcation</a>&nbsp;</span><div class=post-content><p>0時に寝て何度か起きて6時半に起きた。ようやく生活のリズムが戻ってきた。</p><p>今日の筋トレは腹筋:15x1,腕立て:10x1,スクワット15x1をした。</p><h2 id=sveltekit-のエラー制御>sveltekit のエラー制御</h2><p>svelte のエラーハンドラーの仕組みを調べた。</p><ul><li><a href=https://kit.svelte.jp/docs/errors>sveltekit: エラー</a></li></ul><p><code>error()</code> ヘルパーの内部で例外を throw して <code>+error.svelte</code> ファイルがエラーハンドラーでその例外を捕捉してエラーの表示を制御する。とくに目新しくない、普通のフレームワークなら用意してあるであろう例外ハンドラーのようにみえる。公式ドキュメントを読みなさいと常々メンバーに言っているが、なかなか読んでくれなくて、例外ハンドラーを知らずに自前のエラー制御を実装してしまう。私からツッコミが入って作り直しになる。公式ドキュメントを一通り読んだ方が開発が速いと何度も指摘しているのだが。</p><h2 id=静的サイトジェネレーターの勉強会の打ち合わせ>静的サイトジェネレーターの勉強会の打ち合わせ</h2><p>fin-py で2月に静的サイトジェネレーターのハンズオンをやるそうで hugo なら私が使っているので紹介ぐらいできますよと言ったらそのままハンズオンの講師をやることになった。今日はそのための打ち合わせを行うことになった。だいたい次の内容になった。私以外にも4人ほど講師がいて、他の静的サイトジェネレーターのハンズオンも行う。</p><ul><li>ハンズオンは1人30分を持ち時間とする<ul><li>質問も込みで30分</li><li>時間に余裕があるので少しぐらいなら超えてもよい</li><li>デプロイ先やホスティングについての話しは個別にやらない<ul><li>静的サイトジェネレーターとは別のセッションで話す</li></ul></li><li>ローカルでビルドするまでをハンズオンで話す</li></ul></li><li>このハンズオンの対象とする参加者の要項を書く<ul><li>ターゲットの参加者層を決めないと、どのレベルで解説してよいかわからない</li><li>git/github は使えるという前提</li><li>ターミナルでコマンドライン操作もできるという前提</li></ul></li><li>1月20日までにハンズオンのドキュメントを書いて connpass の要項を完成させる</li></ul><p>hugo をインストールして、サイト環境を構築して、記事の生成／ビルドをする。あとはメタデータ付きマークダウンやテーマの設定ぐらいを説明するかなぁ。</p><h2 id=開発合宿の準備>開発合宿の準備</h2><p>ちゃくちゃくと準備を進めている。今回は神戸から4人、関東から3人の合計7人が参加する。うちの会社の社用車で行く予定だったが5人しか乗れない。みんなで移動するのに車が2台になるのも面倒なのでレンタカーでミニバンを借りることにした。スタッドレスタイヤのオプションを付けると2泊3日で11,880円になる。これはスタッドレスタイヤのレンタルとほぼ同じぐらいの料金にみえる。これによって社用車のスタッドレスタイヤ換装の難しい課題からも解放される。キャンペーン割引があって保険も追加して2泊3日で合計61,215円となった。ミニバンなら7-8名は乗れるし、荷物も余裕をもって積み込みできる。このアイディアはいいなと思って、きのいえの定員もそのぐらいの人数がちょうどよさそうに思う。今回の開発合宿では人数の上限はどうかという点にも注目して取り組みたい。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/0109/>災害義援金を寄付してみた</a></h1><div class=post-meta><time class=post-date>2024-01-09 (Tue.) ::</time></div><span class=post-tags>#<a href=/diary/tags/donation/>donation</a>&nbsp;
#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/blog/>blog</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=post-content><p>2時半に寝て4時半に起きて6時半に起きて7時半に起きた。</p><p>今日の筋トレは腹筋:15x1,腕立て:10x1,スクワット10x1をした。</p><h2 id=災害義援金の寄付>災害義援金の寄付</h2><p>週末に災害の寄付をしようと思ったときに、ふと寄付を法人でやればいいんじゃないかと思い付いた。どちらも私のお金であることには変わりないのだけど、会社のお金は個人のお金という気がしないので個人よりも大きいお金を寄付できる。これは法人という人格を分けていることのメリットの1つかもしれない。</p><ul><li><a href=https://www.pref.ishikawa.lg.jp/suitou/gienkinr0601.html>令和6年（2024年）能登半島地震に係る災害義援金の受付について</a></li></ul><p>今朝から税理士さんに損金算入についての懸念がないかを確認して問題ないということだったので10万円を寄付した。領収書は電子フォームから申請したが、毎日それなりの数の人が寄付しているだろうから領収書が発送されるまで1ヶ月ぐらいはかかるのかもしれない。気長に待って領収書が届いたら軽く記事を書こうと思う。現時点での義援金の残高は 968,223,243 円とのこと。せいぜい集まるお金は数十億程度なのかな。</p><blockquote><p>現時点での暫定推計で被害総額は約8,000億円</p><p><a href=https://www.nri.com/jp/knowledge/blog/lst/2024/fis/kiuchi/0105>能登半島地震による経済損失について考える</a></p></blockquote><h2 id=はてなブックマーク数の表示>はてなブックマーク数の表示</h2><p>hugo ではてなブックマークの数を表示するためのカスタマイズを追加した。はてな社がそのための機能を提供しているのですぐできる。</p><ul><li><a href=https://b.hatena.ne.jp/help/entry/count>自分のブログに「○○users」を表示する</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ $url := .Permalink }}
</span></span><span style=display:flex><span>{{ if hugo.IsDevelopment }}
</span></span><span style=display:flex><span>  {{/* ローカル環境でブックマーク数の表示確認用途 */}}
</span></span><span style=display:flex><span>  {{ $url = &#34;https://kazamori.jp/&#34; }}
</span></span><span style=display:flex><span>{{ end }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ print &#34;</span><span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>hatena</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>ne</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>jp</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>entry</span><span style=color:#960050;background-color:#1e0010>/&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>url</span> <span style=color:#960050;background-color:#1e0010>}}&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ print &#34;</span><span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>hatena</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>ne</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>jp</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>entry</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>image</span><span style=color:#960050;background-color:#1e0010>/&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>url</span> <span style=color:#960050;background-color:#1e0010>}}&#34;</span> <span style=color:#a6e22e>alt</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;はてなブックマーク - {{ .Title }}&#34;</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;はてなブックマーク - {{ .Title }}&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>a</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>span</span>&gt;
</span></span></code></pre></div><p>呼び出し側はこんな風に使う。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ partial &#34;hatebu.html&#34; . }}
</span></span></code></pre></div><p>結果は <a href=https://blog.osstech.co.jp/posts/>記事一覧</a> で確認できる。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/1120/>生活リズムが崩れた月曜日</a></h1><div class=post-meta><time class=post-date>2023-11-20 (Mon.) ::</time></div><span class=post-tags>#<a href=/diary/tags/animation/>animation</a>&nbsp;
#<a href=/diary/tags/economy/>economy</a>&nbsp;
#<a href=/diary/tags/go/>go</a>&nbsp;
#<a href=/diary/tags/ldap/>ldap</a>&nbsp;
#<a href=/diary/tags/hugo/>hugo</a>&nbsp;</span><div class=post-content><p>1時に寝て2時半に起きて5時に起きて7時に起きた。朝から昼過ぎまで寝てたのでトータルでは睡眠時間をたくさん取っているのになんか疲れている。生活のリズムを崩すのがよくないのかも。</p><h2 id=ガンダムに学ぶ経営学>ガンダムに学ぶ経営学</h2><p>教えてもらって寝る前にみたらおもしろかった。入山先生がガンダム大好きなことが伝わってくる。おもしろいのはそうだけど、まじレスすると、アニメの世界の組織や経済に学ぶというのは誤りで、当時の組織や経済のリアルを参考にして、ガンダムの世界観は作られていると推測する。だから入山先生はユーモアで盛り上げているのだと思うけれど、ガンダムから学ぶのではなく歴史から学べが正解だと思う。でも、ガンダムの世界観を知るよい番組だと思う。</p><div class=video-container><iframe src=https://www.youtube.com/embed/w7Hhimmu26c allowfullscreen title="ガンダムに学ぶ経営学 【まとめ】【テレ東経済ニュースアカデミー　GWセレクション３】"></iframe></div><h2 id=go-ldap-へのプルリクエスト>go-ldap へのプルリクエスト</h2><p>2週間ほど前に送った pr がまだレビューすらしてもらえていない。github actions のテストがいくつか落ちていて、この pr の修正によるものではないところでエラーになっている。メンテナーの1人が再実行してくれたんだけど、たくさんあるマトリックステストのどこかが落ちてまた再実行しないといけない。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/471>IsErrorAnyOf should match the given result code even if the error is wrapped #471</a></li></ul><p>それを待っている間に、テストがエラーになる本当の原因の問題を直そうと2-3日前に issue 登録していた。この issue の対応を本当は昨日やろうと思っていたのに、思いの外、寝てしまって、その後もいろいろ書きものをしていて時間を使ってしまってできていなかった。今朝からそれを片付けた。業務の一環なので日曜日にプルリクエストを送らなくてもよいのだけど、コントリビューションなので空き時間に終わらせて、業務の時間は別のことに使いたいという思いもあったりする。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/473>Fix DATA RACE as a result of changing ber&rsquo;s module global variable for fuzz tests #473</a></li></ul><p>さらに github actions のログに deprecated ワーニングが出ていたのでついでにそれも直した。</p><ul><li><a href=https://github.com/go-ldap/ldap/pull/474>Fix deprecated warning on GitHub Actions #474</a></li></ul><p>473, 474, 471 の順番にマージされていくのが望ましい。そろそろコミット権をくれたりしないかな？と思ったりもする。というのは、タイミングの問題で action の job が落ちたり、バージョン上げるだけの pr とか、自分でマージしてしまえばいいと思ったりする。</p><h2 id=hugo-で書いた記事に目次を生成する>hugo で書いた記事に目次を生成する</h2><p>お手伝い先のテックブログは hugo で運用されている。記事の目次がないなと気付いて追加してみた。hugo v0.60.0 以降のバージョンなら標準で目次生成の機能をもっている。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>aside</span>&gt;
</span></span><span style=display:flex><span>  {{ .TableOfContents }}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>aside</span>&gt;
</span></span></code></pre></div><ul><li><a href=https://gohugo.io/content-management/toc/>Table of contents</a></li></ul><p>デフォルトはヘッダー2レベルより下の目次を生成する。レベル1も生成したい場合は config.toml に次の設定を追加する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>markup</span>]
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>markup</span>.<span style=color:#a6e22e>tableOfContents</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>startLevel</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>endLevel</span> = <span style=color:#ae81ff>3</span>
</span></span></code></pre></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2023/0101/>ジャンプスターター使ってみた</a></h1><div class=post-meta><time class=post-date>2023-01-01 (Sun.) ::</time></div><span class=post-tags>#<a href=/diary/tags/hugo/>hugo</a>&nbsp;
#<a href=/diary/tags/device/>device</a>&nbsp;
#<a href=/diary/tags/life/>life</a>&nbsp;
#<a href=/diary/tags/day-off/>day off</a>&nbsp;</span><div class=post-content><p>1時に寝て7時半に起きた。なんともなく新年あけた。朝ご飯食べて孤独のグルメをみながら宅急便が届くのを待った。</p><h2 id=hugo-のスタイル修正>hugo のスタイル修正</h2><p>日付に曜日を付けるように変更した。タグから過去の日記をみたときに曜日があると役に立つときがたまにある。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;span</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;post-date&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  {{ .Date.Format &#34;2006-01-02 (Mon.)&#34; }}
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/span&gt;</span>
</span></span></code></pre></div><p>テーマの <a href=https://github.com/panr/hugo-theme-terminal>terminal</a> のバージョンをあげたらビルドに失敗するようになった。<code>extended</code> をインストールしないと scss/sass 周りのビルドに失敗するらしい。github actions の hugo セットアップの設定も変更した。</p><ul><li><a href=https://gohugo.io/troubleshooting/faq/#i-get-this-feature-is-not-available-in-your-current-hugo-version>https://gohugo.io/troubleshooting/faq/#i-get-this-feature-is-not-available-in-your-current-hugo-version</a></li></ul><h2 id=ジャンプスターター>ジャンプスターター</h2><p>年末に注文したジャンプスターターが届いた。実家の軽トラのバッテリーがあがってしまいエンジンをかけられないという。いつもはディーラーさんに来てもらってバッテリー交換なり他の車と接続してエンジンをかけるなりをやってもらっていた。たまたまテレビをみていたら雪国での役立つツールとしてジャンプスターターと呼ばれるものがあることを知った。スマートデバイスなどの予備バッテリーの形状で車のバッテリーに接続してエンジンをかけられるらしい。さっそく amazon で検索してベストセラーのタグがついている「PHILIPS フィリップス ジャンプスターター 12000mAh大容量 ピーク電流800A 12V車用 エンジンスターター」を購入した。うちの軽トラでも試してみたら問題なくエンジンが始動した。車のバッテリーが弱っている場合、boost ボタンを押してブーストモードで接続しないといけないようだ。boost ボタンを押すのがわかって接続・設定したらエンジンがすぐに始動した。うちみたいな小さい兼業農家でたまに軽トラを使うといった家でも携帯バッテリーは充電がすぐできて、保管も場所取らずでとても便利。これはよい買いものだと思えた。</p><p><a href="https://www.amazon.co.jp/gp/product/B091Y9Y22G?ie=UTF8&psc=1&linkCode=li2&tag=t2y-diary-22&linkId=b31c3d97937c844d911bb79486599b0c&language=ja_JP&ref_=as_li_ss_il" target=_blank><img border=0 src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B091Y9Y22G&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=t2y-diary-22&language=ja_JP"></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&language=ja_JP&l=li2&o=9&a=B091Y9Y22G" width=1 height=1 border=0 alt style=border:none!important;margin:0!important></p><h2 id=温泉>温泉</h2><p>実家近くの <a href=http://awajiinfo.com/uzusio-onsen/>うずしお温泉</a> を提供している <a href=https://xn--y8jwbo3jva.com/>ゆとりっく</a> に行く。私にとっては銭湯へ行く感覚で実家に帰ったとき1回は行く。いつも通り温泉に浸かってそれから三ノ宮へ戻ることにした。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/hugo/page/2/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2021 Tetsuya Morimoto</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>