<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>smartplug on forest nook</title><link>/diary/tags/smartplug/</link><description>Recent content in smartplug on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><lastBuildDate>Mon, 12 Jun 2023 09:15:47 +0900</lastBuildDate><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/tags/smartplug/index.xml" rel="self" type="application/rss+xml"/><item><title>ネットワークからスマートプラグの制御</title><link>/diary/posts/2023/0612/</link><pubDate>Mon, 12 Jun 2023 09:15:47 +0900</pubDate><guid>/diary/posts/2023/0612/</guid><description>昨日は夕方に親が立ち寄るかもしれないというから待機していたのに空振りに終わった。0時に寝ようとしてあまり眠れなくて7時に起きた。ここ最近寝ているのか寝てないのかよく分からない眠り方になる。
決算してスマートプラグを ON にしろ 昨日の続き 。夕方に Tapo P105 が届いたので業務を終えてからさっそく使ってみた。
オフィスの wifi に接続して、tp-link 社のスマホアプリからデバイス登録する。スマホアプリからはすぐに on/off できた。スマホで電源の on/off を制御できてあまり嬉しいことはパッと思いつかないけど、プログラムから制御できるならなにか遊べそうな気もしてくる。ifttt というインテグレーションサービスがあって、それを使うと tp-link 社のデバイスと ifttt 社の web api 経由で制御できる。おそらくなんらかの web api が tp-link 社からも提供されているはず。それが公開されていれば ifttt を使う必要はないし、すでにハックされているものを使うのでもよいかもしれない。ひとまず動かすことを目的とするので ifttt を使う。スマートプラグに電球をつなげて、決済したら電球が灯って3秒後に消えるようなサンプルアプリを作った。一通り最後まで動かすことができておもしろかった。
https://github.com/kazamori/stripe-webhook-sample</description><content>&lt;p>昨日は夕方に親が立ち寄るかもしれないというから待機していたのに空振りに終わった。0時に寝ようとしてあまり眠れなくて7時に起きた。ここ最近寝ているのか寝てないのかよく分からない眠り方になる。&lt;/p>
&lt;h2 id="決算してスマートプラグを-on-にしろ">決算してスマートプラグを ON にしろ&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0611/">昨日の続き&lt;/a> 。夕方に &lt;a href="https://www.tp-link.com/jp/home-networking/smart-plug/tapo-p105/">Tapo P105&lt;/a> が届いたので業務を終えてからさっそく使ってみた。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0612_smartplug.jpeg"/>
&lt;/figure>
&lt;p>オフィスの wifi に接続して、tp-link 社のスマホアプリからデバイス登録する。スマホアプリからはすぐに on/off できた。スマホで電源の on/off を制御できてあまり嬉しいことはパッと思いつかないけど、プログラムから制御できるならなにか遊べそうな気もしてくる。&lt;a href="https://ifttt.com">ifttt&lt;/a> というインテグレーションサービスがあって、それを使うと tp-link 社のデバイスと ifttt 社の web api 経由で制御できる。おそらくなんらかの web api が tp-link 社からも提供されているはず。それが公開されていれば ifttt を使う必要はないし、すでにハックされているものを使うのでもよいかもしれない。ひとまず動かすことを目的とするので ifttt を使う。スマートプラグに電球をつなげて、決済したら電球が灯って3秒後に消えるようなサンプルアプリを作った。一通り最後まで動かすことができておもしろかった。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kazamori/stripe-webhook-sample">https://github.com/kazamori/stripe-webhook-sample&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>スマートプラグ制御の調査</title><link>/diary/posts/2023/0611/</link><pubDate>Sun, 11 Jun 2023 15:44:47 +0900</pubDate><guid>/diary/posts/2023/0611/</guid><description>23時に寝てうまく眠れなくて5時に起きた。そのまま10時ぐらいまでだらだらしてた。
スマートプラグの通電テスター 昨日の続き 。スマートプラグを検索すると TP-Link 社の製品がよく出てくるのでミニスマート wi-fi プラグの Tapo P105 を購入してみた。この製品だとネットワーク経由で電源の on/off ができそう。ifttt というサービスが TP-Link Tapo インテグレーションを公開している。TP-Link 社も自前で TP-LINK Cloud というサービスを提供していて、どうやらその web api は公開されていないようだけど、おそらくそこで使っている web api を調べてライブラリにしたのが tplink-cloud-api のようにみえる。サイトをみる限りはカメラしかサポートしていないようにもみえる。スマートプラグのようなデバイスがハックしやすい性質のせいか、書いてある情報が曖昧で実際にどうやってデバイスを制御したらよいのかネット上の記事からよくわからない。実際に購入したもので試してみるのが早そう。明日届く予定。
このスマートプラグによる電源 on/off のテスターに、ダイソーで電球を購入してきた。電源ソケットアダプタが100円、電球は100円、200円、300円とそれぞれあったんだけど、100円の差異でどうせ買うなら精度のよいものをと考えて300円のものを購入した。LED で電力消費も少ない。
試しにオフィスにあった amazon 純正スマートプラグ経由で接続して alexa アプリで on/off したら意図したように電球が灯ってテスターの代替にできた。デモのために使うのでそれぐらいわかりやすいのがよい。
モロゾフ 昨日参加したもくもく会を借りていた 中央区文化センター には2フロアに渡って大小いくつかの会議室がある。それぞれの会議室には張り紙をしていて借り主の名前が外からわかる。たまたま通ったところに「モロゾフ労働組合」と書いてあって、どこかの会社の労組が会議しているんだなと覚えていた。今日になって来週の東京出張のお土産を探していたらモロゾフというお店があることに気付いた。モロゾフの歩み によると1931年創業の神戸本店の洋菓子の会社らしい。これもなにかの縁だと思って今回はモロゾフさんの神戸本店へ行って ブロードランド 15個入 をお土産用に購入した。
自分用にアーモンドケーキを買って食べてみた。しっとり食感で控え目にアーモンドの風味がして甘過ぎなくて後味のよいケーキでおいしかった。</description><content>&lt;p>23時に寝てうまく眠れなくて5時に起きた。そのまま10時ぐらいまでだらだらしてた。&lt;/p>
&lt;h2 id="スマートプラグの通電テスター">スマートプラグの通電テスター&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0610/">昨日の続き&lt;/a> 。スマートプラグを検索すると TP-Link 社の製品がよく出てくるのでミニスマート wi-fi プラグの &lt;a href="https://www.tp-link.com/jp/home-networking/smart-plug/tapo-p105/">Tapo P105&lt;/a> を購入してみた。この製品だとネットワーク経由で電源の on/off ができそう。ifttt というサービスが &lt;a href="https://ifttt.com/tplink_tapo">TP-Link Tapo&lt;/a> インテグレーションを公開している。TP-Link 社も自前で &lt;a href="https://www.tplinkcloud.com/">TP-LINK Cloud&lt;/a> というサービスを提供していて、どうやらその web api は公開されていないようだけど、おそらくそこで使っている web api を調べてライブラリにしたのが &lt;a href="https://www.npmjs.com/package/tplink-cloud-api">tplink-cloud-api&lt;/a> のようにみえる。サイトをみる限りはカメラしかサポートしていないようにもみえる。スマートプラグのようなデバイスがハックしやすい性質のせいか、書いてある情報が曖昧で実際にどうやってデバイスを制御したらよいのかネット上の記事からよくわからない。実際に購入したもので試してみるのが早そう。明日届く予定。&lt;/p>
&lt;p>このスマートプラグによる電源 on/off のテスターに、ダイソーで電球を購入してきた。電源ソケットアダプタが100円、電球は100円、200円、300円とそれぞれあったんだけど、100円の差異でどうせ買うなら精度のよいものをと考えて300円のものを購入した。LED で電力消費も少ない。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0611_light.jpeg"/>
&lt;/figure>
&lt;p>試しにオフィスにあった amazon 純正スマートプラグ経由で接続して alexa アプリで on/off したら意図したように電球が灯ってテスターの代替にできた。デモのために使うのでそれぐらいわかりやすいのがよい。&lt;/p>
&lt;h2 id="モロゾフ">モロゾフ&lt;/h2>
&lt;p>昨日参加したもくもく会を借りていた &lt;a href="https://www.kobe-bunka.jp/facilities/chuo/">中央区文化センター&lt;/a> には2フロアに渡って大小いくつかの会議室がある。それぞれの会議室には張り紙をしていて借り主の名前が外からわかる。たまたま通ったところに「モロゾフ労働組合」と書いてあって、どこかの会社の労組が会議しているんだなと覚えていた。今日になって来週の東京出張のお土産を探していたらモロゾフというお店があることに気付いた。&lt;a href="https://www.morozoff.co.jp/company_ir/history_index.html">モロゾフの歩み&lt;/a> によると1931年創業の神戸本店の洋菓子の会社らしい。これもなにかの縁だと思って今回はモロゾフさんの神戸本店へ行って &lt;a href="https://www.morozoff.co.jp/products/baked_sweets/15_3/">ブロードランド 15個入&lt;/a> をお土産用に購入した。&lt;/p>
&lt;p>自分用にアーモンドケーキを買って食べてみた。しっとり食感で控え目にアーモンドの風味がして甘過ぎなくて後味のよいケーキでおいしかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0611_armond-cake.png"/>
&lt;/figure></content></item></channel></rss>