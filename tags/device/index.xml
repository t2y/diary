<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>device on forest nook</title><link>/diary/tags/device/</link><description>Recent content in device on forest nook</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>© 2021 Tetsuya Morimoto</copyright><lastBuildDate>Sat, 29 Apr 2023 14:24:07 +0900</lastBuildDate><atom:icon>/diary/favicon.ico</atom:icon><icon>/diary/favicon.ico</icon><atom:link href="/diary/tags/device/index.xml" rel="self" type="application/rss+xml"/><item><title>yubikey bio を触ってみた</title><link>/diary/posts/2023/0429/</link><pubDate>Sat, 29 Apr 2023 14:24:07 +0900</pubDate><guid>/diary/posts/2023/0429/</guid><description>3時半に寝て7時に起きた。リリース終えたので晩ご飯を食べてから自分の会社のお仕事をしていたら遅くなった。
ストレッチ 今週もリリース明けでそれほど座っている時間が長かったわけでもないため、腰の張りはあまりなく、負荷は低くなっているのではないかと推測する。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。右股関節周りの硬さは相変わらず大きく変化はないが、他がよくなった分、右ふともも前の筋を伸ばすと張りがきつくてしんどいように感じた。しばらく余裕のある生活ができるので歩いたりストレッチしたりする余裕が出てくるかもしれない。
yubikey bio を触ってみた 先日 yubikey bio をオンラインストアで購入 した。会社の経費で業務で使うことを目的に購入したのでこの場合は商用利用の輸入にあたる。また別途、輸入についての会計処理を書く。yubico はスウェーデンの会社でどうやら日本向けはスウェーデンの首都ストックホルムから発送されてきたらしい。安いエコノミープランで注文していた。発送メールを受け取ったのが 4/17 でオフィスの郵便受けに入っていることに気付いたのが 4/29 になる。12日で届いたことになる。船便にしては早いからなにかしら航空便の安いプランで届いたのだと推測する。
Economy - 10-20 Working Days - No tracking available
早速、接続していろいろ触ってみた。結論から言って ubuntu 22.04 で fido2 pin を設定して u2f を使って2要素認証のメソッドとして pam や web アプリケーションから問題なく使えた。ubuntu 向けのアプリケーションも ppa のリポジトリを追加して apt からインストールできる。
Installing Yubico Software on Linux このドキュメントには次の4つのアプリケーションのインストールが書いてある。
YubiKey Manager (CLI): sudo apt install yubikey-manager YubiKey Personalization Tool: sudo apt install yubikey-personalization-gui libpam-yubico: sudo apt install libpam-yubico libpam-u2f: sudo apt install libpam-u2f yubikey は他にもいろいろな認証の用途に使えるらしい。今回は fido2 の設定のみを紹介する。fido2 pin を登録するには YubiKey Manager の GUI を使った方が簡単なので次のアプリケーションも一緒にインストールするとよい。</description><content>&lt;p>3時半に寝て7時に起きた。リリース終えたので晩ご飯を食べてから自分の会社のお仕事をしていたら遅くなった。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>今週もリリース明けでそれほど座っている時間が長かったわけでもないため、腰の張りはあまりなく、負荷は低くなっているのではないかと推測する。今日の開脚幅は開始前156cmで、ストレッチ後158cmだった。右股関節周りの硬さは相変わらず大きく変化はないが、他がよくなった分、右ふともも前の筋を伸ばすと張りがきつくてしんどいように感じた。しばらく余裕のある生活ができるので歩いたりストレッチしたりする余裕が出てくるかもしれない。&lt;/p>
&lt;h2 id="yubikey-bio-を触ってみた">yubikey bio を触ってみた&lt;/h2>
&lt;p>先日 &lt;a href="/diary/diary/posts/2023/0416/#yubikey-bio-の購入">yubikey bio をオンラインストアで購入&lt;/a> した。会社の経費で業務で使うことを目的に購入したのでこの場合は商用利用の輸入にあたる。また別途、輸入についての会計処理を書く。yubico はスウェーデンの会社でどうやら日本向けはスウェーデンの首都ストックホルムから発送されてきたらしい。安いエコノミープランで注文していた。発送メールを受け取ったのが 4/17 でオフィスの郵便受けに入っていることに気付いたのが 4/29 になる。12日で届いたことになる。船便にしては早いからなにかしら航空便の安いプランで届いたのだと推測する。&lt;/p>
&lt;blockquote>
&lt;p>Economy - 10-20 Working Days - No tracking available&lt;/p>
&lt;/blockquote>
&lt;p>早速、接続していろいろ触ってみた。結論から言って ubuntu 22.04 で fido2 pin を設定して u2f を使って2要素認証のメソッドとして pam や web アプリケーションから問題なく使えた。ubuntu 向けのアプリケーションも ppa のリポジトリを追加して apt からインストールできる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://support.yubico.com/hc/en-us/articles/360016649039-Installing-Yubico-Software-on-Linux">Installing Yubico Software on Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>このドキュメントには次の4つのアプリケーションのインストールが書いてある。&lt;/p>
&lt;ul>
&lt;li>YubiKey Manager (CLI): &lt;code>sudo apt install yubikey-manager&lt;/code>&lt;/li>
&lt;li>YubiKey Personalization Tool: &lt;code>sudo apt install yubikey-personalization-gui&lt;/code>&lt;/li>
&lt;li>libpam-yubico: &lt;code>sudo apt install libpam-yubico&lt;/code>&lt;/li>
&lt;li>libpam-u2f: &lt;code>sudo apt install libpam-u2f&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>yubikey は他にもいろいろな認証の用途に使えるらしい。今回は fido2 の設定のみを紹介する。fido2 pin を登録するには YubiKey Manager の GUI を使った方が簡単なので次のアプリケーションも一緒にインストールするとよい。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo apt install -y yubikey-manager-qt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ykman-gui
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>おそらく ykman の cli でも登録できると思うけど、yubikey や認証設定に慣れていない初心者は gui のナビゲーションに従って作業して結果を確認した方が安心だと思う。fido2 pin は ssh でいうところのパスフレーズのようなものなのかな？デバイスが盗まれるのを防ぐために pin があるという。一方で web アプリケーションが fido2 で認証するときに pin を要求するかどうかは任意になるらしい。よくあるパターンは初めて使うときは pin を要求して2回目以降はスキップするといった用途が多いのではないかと推測する。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2023/0429_ykman-gui1.png"/>
&lt;/figure>
&lt;p>この fido2 pin を使って &lt;a href="https://en.wikipedia.org/wiki/Universal_2nd_Factor">Universal 2nd Factor (u2f)&lt;/a> の設定を行う。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ mkdir -p ~/.config/Yubico
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ pamu2fcfg &amp;gt; ~/.config/Yubico/u2f_keys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter PIN &lt;span style="color:#66d9ef">for&lt;/span> /dev/hidraw3: *** &amp;lt;&lt;span style="color:#f92672">=&lt;/span> このときに yubikey manager で設定した fido2 pin を入力
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>この後 yubikey デバイスが点滅するので丸いセンサー部分を指でタッチすると完了する。このときに指紋登録しているのか、物理的にタッチすることを要求しているだけなのか、よくわかっていない。この前に &lt;a href="https://www.yubico.com/setup/yubikey-bio-series/">chrome で指紋登録&lt;/a> をしていたのでそれが使われているのかもしれない。いま ykman で設定をみたら &lt;code>Fingerprints registered&lt;/code> とあるのでどこかしらに指紋登録されているらしい。おそらく chrome じゃないかと推測する。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ ykman fido info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WARNING: PC/SC not available. Smart card &lt;span style="color:#f92672">(&lt;/span>CCID&lt;span style="color:#f92672">)&lt;/span> protocols will not &lt;span style="color:#66d9ef">function&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PIN is set, with &lt;span style="color:#ae81ff">8&lt;/span> attempt&lt;span style="color:#f92672">(&lt;/span>s&lt;span style="color:#f92672">)&lt;/span> remaining.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Fingerprints registered, with &lt;span style="color:#ae81ff">3&lt;/span> attempt&lt;span style="color:#f92672">(&lt;/span>s&lt;span style="color:#f92672">)&lt;/span> remaining.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Always Require User Verification is turned on.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>linux で認証時に u2f を使いたいときは &lt;code>pam_u2f.so&lt;/code> を使って pam の設定をするとよい。ubuntu だと &lt;code>/etc/pam.d/&lt;/code> 配下にいろんな認証設定がある。例えば login 時に2要素認証をしたい場合は次のようにフックする。パスワード入力した後に yubikey のセンサーを物理的にタッチして指紋認証を行える。セキュリティに厳しい会社はこういった運用をしているのかもしれない。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo vi /etc/pam.d/login
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Standard Un*x authentication.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>@include common-auth
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>auth required pam_u2f.so
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>パスワード認証の代替として使いたい場合は通常の認証の前に &lt;code>sufficient&lt;/code> として呼び出せば指紋認証が成功したときにそれ以降の処理がスキップされる。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>auth sufficient pam_u2f.so
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>@include common-auth
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これらの設定を確認にするには &lt;a href="https://pamtester.sourceforge.net/">pamtester&lt;/a> というツールを使うと簡単にできる。認証の設定を誤るとログインできなくなってしまうので慎重にテストして振る舞いを確認した上で実際の運用を行うとよい。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ pamtester login t2y authenticate &amp;lt;&lt;span style="color:#f92672">=&lt;/span> このときに yubikey デバイスが点滅するので指紋認証する
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pamtester: successfully authenticated
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>せっかく購入したので 1password アカウントや github の2要素認証に設定してみた。ワンタイムパスワードの otp の代替として使える。ワンタイムパスワードを入力するより yubikey のセンサーをタッチする方が日々の運用としては少しお手軽と言える。設定していて otp と yubikey でお互いに2要素認証のバックアップを兼ねることに気付いた。認証方法が増えるのでセキュリティ的には脆弱になるけれど、サービスとセキュリティのトレードオフの考え方から、yubikey の分だけ脆弱になっても物理的なセキュリティを担保できるのであれば利便性を考慮してよいように私には思えた。&lt;/p></content></item><item><title>yubikey bio を購入してみた</title><link>/diary/posts/2023/0416/</link><pubDate>Sun, 16 Apr 2023 11:53:13 +0900</pubDate><guid>/diary/posts/2023/0416/</guid><description>0時に寝て7時に起きた。午前中は洗濯して、昨日届いたお肉を焼いて朝ご飯にしながらドラクエタクトやってた。
yubikey bio の購入 デスクトップマシンが不調だった1-2ヶ月ほど m2 macbook air でお仕事をしていた。デスクトップマシンと比べて明らかに便利だったことがある。1password にログインするときに os のシステムアカウントも利用できて、具体的には指紋認証によりパスワード入力を必要としなかった。デフォルトでは2週間ごとにパスワード入力を必要とする設定になっているが、これも無効にすることもできる。パスワードを忘れないように1ヶ月に1回ぐらいは手入力してもよいかもしれない。生体認証はその精度にまだ懸念はあるそうだけど、こういった日常的な認証における用途ならそれほど高い精度を要求しないことに気付いた。私は個人でお仕事しているから日常でオフィスに保管している物理的なデバイスを盗むのは難しい。他にも linux で使える指紋認証のデバイスを探してみた。しかし、現時点では usb の指紋認証デバイスは windows 一択になっていて linux はサポートされていない。YubiKey ぐらいしか、私はみつけることができなかった。
YubiKey Bio - FIDO Edition をオンラインストアで購入した。船便で購入したので届くまで1ヶ月ほどかかる。急ぐものではないので気長に待つ。
YubiKey Bio - FIDO Edition $90 Shipping &amp;amp; handling Economy - 10-20 Working Days - No tracking available $5 Duties, taxes and/or carrier subcharges $14.68 USD 日本にお店がないので輸入扱いで関税がかかるのかな？また会計システムに登録するときに税金の計上方法を調べる必要がありそう。
自分たちでやろうとしないことを他人は助けられない 他社のプロジェクト開発のお手伝いでプロジェクトマネージャーとしてこの半年をマネジメントしてきて分かるようになったことが1つある。米軍がアフガニスタンから撤退するときの方便のようにみかけ、ロシアのウクライナ侵攻のときにウクライナ軍が善戦して西側諸国の支持を得たことでその正しさを再確認できた言葉がある。
バイデン大統領は演説で「当事国の軍隊が戦う意思がないのにアメリカが戦うわけにはいかない」という趣旨を繰り返した。
アフガニスタン崩壊と日本への教訓
2月からプロジェクトの開発遅れがみえていてスケジュール調整している。プロジェクトの開発がうまくいかないことの全責任は私にあることは間違いない。その点には一切の懸念も疑問もない。昨今の働き方改革で有休取得が大事なことも理解していて、平均して取得するなら毎月1-2日休むことになる。それは理解できるが、開発が遅延していても有休で休み、その遅延をマネージャである私が休出して開発を肩代わりするという調整を1ヶ月以上続けてきて、この歪みは開発やプロジェクトにとってよくないということもわかってきた。
私個人のモチベーション管理にも多少の影響はあるが、私は指示されて休出しているわけではなく、自分の目的のためにやっているのでこの影響はそれほど重要ではない。
なにが問題かというとプロダクトオーナーシップを開発者がもたないという点にある。私はお手伝いであるから、いずれいなくなる。周りからどうみえようと最終的にプロダクトオーナーシップは契約形態としてもてない。そして、お手伝い先の開発メンバーがもつようになるのが望ましい。しかし、そういう雰囲気はみえない。これまで他社の人間がマネージャーをやっているようなプロジェクトに私が参加したことがなかったためにそういった視点がなかった。そして、私は自分がイニシアティブをもって開発するプロダクトはすべてプロダクトオーナーシップをもって臨んできた。そのため、開発者に裁量を与えることで必然的にプロダクトオーナーシップをもつようになると信じてきたが、いまのやり方だとそうならない気がしている。なぜならば、放っておいても問題になる前に私が勝手に対応してしまうために開発者のインセンティブやモチベーションを阻害してしまうからだ。
プロジェクトにおけるスケジュールや品質を担保するためにはマネージャーである私が一定の尽力をするのは合理的ではある。一方でそれをやり過ぎることで開発メンバーのプロダクトオーナーシップを遠ざけてしまう。プロダクトオーナーシップをもっていない開発者が休出してまで開発に尽力する意味など普通にはない。仮に私が開発メンバーでもそう思うだろう。昔の上長 がやっていたことをみて私が学んだことを、外部の人間として開発メンバーに教えることはとても難しいことを理解できた。</description><content>&lt;p>0時に寝て7時に起きた。午前中は洗濯して、昨日届いたお肉を焼いて朝ご飯にしながらドラクエタクトやってた。&lt;/p>
&lt;h2 id="yubikey-bio-の購入">yubikey bio の購入&lt;/h2>
&lt;p>デスクトップマシンが不調だった1-2ヶ月ほど &lt;a href="/diary/diary/posts/2022/1004/#m2-macbook-air-購入">m2 macbook air&lt;/a> でお仕事をしていた。デスクトップマシンと比べて明らかに便利だったことがある。&lt;a href="https://1password.com/jp/">1password&lt;/a> にログインするときに os のシステムアカウントも利用できて、具体的には指紋認証によりパスワード入力を必要としなかった。デフォルトでは2週間ごとにパスワード入力を必要とする設定になっているが、これも無効にすることもできる。パスワードを忘れないように1ヶ月に1回ぐらいは手入力してもよいかもしれない。生体認証はその精度にまだ懸念はあるそうだけど、こういった日常的な認証における用途ならそれほど高い精度を要求しないことに気付いた。私は個人でお仕事しているから日常でオフィスに保管している物理的なデバイスを盗むのは難しい。他にも linux で使える指紋認証のデバイスを探してみた。しかし、現時点では usb の指紋認証デバイスは windows 一択になっていて linux はサポートされていない。YubiKey ぐらいしか、私はみつけることができなかった。&lt;/p>
&lt;p>&lt;a href="https://www.yubico.com/jp/product/yubikey-bio-series/yubikey-bio/">YubiKey Bio - FIDO Edition&lt;/a> をオンラインストアで購入した。船便で購入したので届くまで1ヶ月ほどかかる。急ぐものではないので気長に待つ。&lt;/p>
&lt;pre tabindex="0">&lt;code>YubiKey Bio - FIDO Edition
$90
Shipping &amp;amp; handling
Economy - 10-20 Working Days - No tracking available
$5
Duties, taxes and/or carrier subcharges
$14.68 USD
&lt;/code>&lt;/pre>&lt;p>日本にお店がないので輸入扱いで関税がかかるのかな？また会計システムに登録するときに税金の計上方法を調べる必要がありそう。&lt;/p>
&lt;h2 id="自分たちでやろうとしないことを他人は助けられない">自分たちでやろうとしないことを他人は助けられない&lt;/h2>
&lt;p>他社のプロジェクト開発のお手伝いでプロジェクトマネージャーとしてこの半年をマネジメントしてきて分かるようになったことが1つある。米軍がアフガニスタンから撤退するときの方便のようにみかけ、ロシアのウクライナ侵攻のときにウクライナ軍が善戦して西側諸国の支持を得たことでその正しさを再確認できた言葉がある。&lt;/p>
&lt;blockquote>
&lt;p>バイデン大統領は演説で「当事国の軍隊が戦う意思がないのにアメリカが戦うわけにはいかない」という趣旨を繰り返した。&lt;/p>
&lt;p>&lt;a href="https://www.jfss.gr.jp/article/1569">アフガニスタン崩壊と日本への教訓&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>2月からプロジェクトの開発遅れがみえていてスケジュール調整している。プロジェクトの開発がうまくいかないことの全責任は私にあることは間違いない。その点には一切の懸念も疑問もない。昨今の働き方改革で有休取得が大事なことも理解していて、平均して取得するなら毎月1-2日休むことになる。それは理解できるが、開発が遅延していても有休で休み、その遅延をマネージャである私が休出して開発を肩代わりするという調整を1ヶ月以上続けてきて、この歪みは開発やプロジェクトにとってよくないということもわかってきた。&lt;/p>
&lt;p>私個人のモチベーション管理にも多少の影響はあるが、私は指示されて休出しているわけではなく、自分の目的のためにやっているのでこの影響はそれほど重要ではない。&lt;/p>
&lt;p>なにが問題かというとプロダクトオーナーシップを開発者がもたないという点にある。私はお手伝いであるから、いずれいなくなる。周りからどうみえようと最終的にプロダクトオーナーシップは契約形態としてもてない。そして、お手伝い先の開発メンバーがもつようになるのが望ましい。しかし、そういう雰囲気はみえない。これまで他社の人間がマネージャーをやっているようなプロジェクトに私が参加したことがなかったためにそういった視点がなかった。そして、私は自分がイニシアティブをもって開発するプロダクトはすべてプロダクトオーナーシップをもって臨んできた。そのため、開発者に裁量を与えることで必然的にプロダクトオーナーシップをもつようになると信じてきたが、いまのやり方だとそうならない気がしている。なぜならば、放っておいても問題になる前に私が勝手に対応してしまうために開発者のインセンティブやモチベーションを阻害してしまうからだ。&lt;/p>
&lt;p>プロジェクトにおけるスケジュールや品質を担保するためにはマネージャーである私が一定の尽力をするのは合理的ではある。一方でそれをやり過ぎることで開発メンバーのプロダクトオーナーシップを遠ざけてしまう。プロダクトオーナーシップをもっていない開発者が休出してまで開発に尽力する意味など普通にはない。仮に私が開発メンバーでもそう思うだろう。&lt;a href="/diary/diary/posts/2023/0310/">昔の上長&lt;/a> がやっていたことをみて私が学んだことを、外部の人間として開発メンバーに教えることはとても難しいことを理解できた。&lt;/p></content></item><item><title>ubuntu の環境構築</title><link>/diary/posts/2023/0409/</link><pubDate>Sun, 09 Apr 2023 18:10:30 +0900</pubDate><guid>/diary/posts/2023/0409/</guid><description>0時に寝て8時に起きた。昨日は出張から遅くに帰ってきたのでバテた。
ストレッチ 昨日はもくもく会で遅くに帰ってきたので毎週のストレッチを土曜日から日曜日に変更していた。ここ1-2ヶ月ほどでは最も調子がよかった。今週は出張していて普段より健康的な生活をしていた。というのは、お手伝い先のオフィスでは原則として私は9-18時でしか働けないため、業務の都合でずっと座りっぱなしにならない。例えば、自社のオフィスだとだいたい8時から始業して遅いと23時ぐらいまでずっと座りっぱなしになってしまう。たまたまホテルもいつもよりも離れた場所にとり、10分ほど歩く距離だったのでちょうどよかった。帰ってからホテルで2-3時間作業していたりもするのだが、それでも同じ姿勢でずっと座り続けている方が体にとってはよくないことがわかる。今日の開脚幅は開始前152cmで、ストレッチ後156cmだった。座っている時間が短かったために腰の張りはほとんどなかった。
ubuntu 22.04 lts の環境構築 先日 マシンに ubuntu をインストールした 続きの話し。東京出張があったり、開発の終盤でいろいろやっている中で開発環境を作り直すインセンティブが低かったので環境構築が遅くなった。過去の環境構築の issue が残っているのでそれをみながらやれば5-6時間もあれば作り直せた。結論から言って、マシンスペックが上がって、os も新しいものに変わったので開発環境としてはめちゃくちゃ快適になった。好みだが、私はリソースの潤沢なデスクトップマシンに linux をインストールして開発するのが一番しっくりくる。主観的に感情的にその構成が好きだというもの。
realforce の bluetooth キーボードの設定をするのにもう1つキーボードが必要なことに気付いた。私は bluez というツールを使って bluetooth キーボードのペアリングをしている。ペアリングするためには bluez の bluetoothctl という cli から操作してペアリングを行う。realforce のキーボードは有線/bluetooth 接続を両方同時につなぐことはできないため、bluetooth 接続するためには別のキーボードを接続して cli 操作しないといけない。
$ bluetoothctl [bluetooth]# power on [bluetooth]# agent on [bluetooth]# scan on bluetooth キーボードから接続要求を送る。
... [NEW] Device F6:9D:A5:41:B7:1F REALFORCE_2 ... [bluetooth]# info F6:9D:A5:41:B7:1F Device F6:9D:A5:41:B7:1F (random) Name: REALFORCE_2 Alias: REALFORCE_2 Appearance: 0x03c1 Icon: input-keyboard Paired: no Trusted: no Blocked: no Connected: no LegacyPairing: no UUID: Human Interface Device (00001812-0000-1000-8000-00805f9b34fb) RSSI: -51 マシンからデバイスを検出したらデバイス情報を確認してペアリングを実行する。</description><content>&lt;p>0時に寝て8時に起きた。昨日は出張から遅くに帰ってきたのでバテた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>昨日はもくもく会で遅くに帰ってきたので毎週のストレッチを土曜日から日曜日に変更していた。ここ1-2ヶ月ほどでは最も調子がよかった。今週は出張していて普段より健康的な生活をしていた。というのは、お手伝い先のオフィスでは原則として私は9-18時でしか働けないため、業務の都合でずっと座りっぱなしにならない。例えば、自社のオフィスだとだいたい8時から始業して遅いと23時ぐらいまでずっと座りっぱなしになってしまう。たまたまホテルもいつもよりも離れた場所にとり、10分ほど歩く距離だったのでちょうどよかった。帰ってからホテルで2-3時間作業していたりもするのだが、それでも同じ姿勢でずっと座り続けている方が体にとってはよくないことがわかる。今日の開脚幅は開始前152cmで、ストレッチ後156cmだった。座っている時間が短かったために腰の張りはほとんどなかった。&lt;/p>
&lt;h2 id="ubuntu-2204-lts-の環境構築">ubuntu 22.04 lts の環境構築&lt;/h2>
&lt;p>先日 &lt;a href="/diary/diary/posts/2023/0325/#dell-マシンに-ubuntu-をインストール">マシンに ubuntu をインストールした&lt;/a> 続きの話し。東京出張があったり、開発の終盤でいろいろやっている中で開発環境を作り直すインセンティブが低かったので環境構築が遅くなった。過去の環境構築の issue が残っているのでそれをみながらやれば5-6時間もあれば作り直せた。結論から言って、マシンスペックが上がって、os も新しいものに変わったので開発環境としてはめちゃくちゃ快適になった。好みだが、私はリソースの潤沢なデスクトップマシンに linux をインストールして開発するのが一番しっくりくる。主観的に感情的にその構成が好きだというもの。&lt;/p>
&lt;p>realforce の bluetooth キーボードの設定をするのにもう1つキーボードが必要なことに気付いた。私は &lt;a href="http://www.bluez.org/">bluez&lt;/a> というツールを使って bluetooth キーボードのペアリングをしている。ペアリングするためには bluez の bluetoothctl という cli から操作してペアリングを行う。realforce のキーボードは有線/bluetooth 接続を両方同時につなぐことはできないため、bluetooth 接続するためには別のキーボードを接続して cli 操作しないといけない。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ bluetoothctl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>bluetooth&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># power on&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>bluetooth&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># agent on&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>bluetooth&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># scan on&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>bluetooth キーボードから接続要求を送る。&lt;/p>
&lt;pre tabindex="0">&lt;code>...
[NEW] Device F6:9D:A5:41:B7:1F REALFORCE_2
...
[bluetooth]# info F6:9D:A5:41:B7:1F
Device F6:9D:A5:41:B7:1F (random)
Name: REALFORCE_2
Alias: REALFORCE_2
Appearance: 0x03c1
Icon: input-keyboard
Paired: no
Trusted: no
Blocked: no
Connected: no
LegacyPairing: no
UUID: Human Interface Device (00001812-0000-1000-8000-00805f9b34fb)
RSSI: -51
&lt;/code>&lt;/pre>&lt;p>マシンからデバイスを検出したらデバイス情報を確認してペアリングを実行する。&lt;/p>
&lt;pre tabindex="0">&lt;code>[bluetooth]# pair F6:9D:A5:41:B7:1F
Attempting to pair with F6:9D:A5:41:B7:1F
[CHG] Device F6:9D:A5:41:B7:1F Connected: yes
[agent] Passkey: ***
&lt;/code>&lt;/pre>&lt;p>これでペアリングが実行されて bluetooth 接続できるようになる。ubuntu 20.04 lts の頃より進化しているのは接続／切断時に電池の残量も表示されるようになった。キーボードには充電池を使っているので地味に嬉しい。残量が少なくなってきたら帰るときに充電を仕掛けて帰れる。&lt;/p>
&lt;p>今回の環境構築で1つはまったものがある。vagrant の仮想環境として virtualbox を使う。&lt;a href="https://wiki.ubuntu.com/UEFI/SecureBoot">secure boot&lt;/a> のために virtualbox をインストールするときにパスワードを mok (Machine-Owner Key) に登録しないといけない。この作業手順が分からなくて右往左往していた。インストール時に mok のダイアログが表示されてパスワードを登録するが、この後に os を再起動して bios 起動時に特別なダイアログが表示されて mok に登録したいパスワードを入力する。アプリケーションのインストール時に bios の設定が必要という概念が私の頭の中になくて分からなかった。これをやらないと virtualbox サービスが正常に起動しない。調べていると ubuntu 標準の virtualbox は壊れていて 3rd party の contrib なパッケージを使えという古い記事も出てくる。22.04 なら ubuntu 標準の virtualbox でも問題なく、mok の登録後に systemd から virtualbox サービスが起動することを確認した。再起動後の mok のダイアログは1度しか出てこないのでうっかり見逃してしまったら再設定しないといけない。次の cli で再設定できる。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo dpkg-reconfigure virtualbox-dkms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote class="twitter-tweet">&lt;p lang="ja" dir="ltr">dell の xps 8950 に ubuntu 22.04 lts をインストールして開発環境を一通り構築した。ほとんどトラブルなく構築できた。いろいろ快適になったので集中力が上がる。開発の追い込みなのでちょうどよい。&lt;/p>&amp;mdash; Tetsuya Morimoto (@t2y) &lt;a href="https://twitter.com/t2y/status/1646055812224417792?ref_src=twsrc%5Etfw">April 12, 2023&lt;/a>&lt;/blockquote>
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script></content></item><item><title>ubuntu のインストール</title><link>/diary/posts/2023/0325/</link><pubDate>Sat, 25 Mar 2023 13:32:37 +0900</pubDate><guid>/diary/posts/2023/0325/</guid><description>1時に寝て5時に起きて7時に起きた。今週も開発に集中していたのでバテ気味。時間がなくて2ヶ月以上行ってなかった散髪に行ってきた。前髪が目にかかって鬱陶しかったのでいつもよりも短くしてもらった。頭が軽いと日々の生活のストレスも軽減しそう。
ストレッチ 今日の開脚幅は開始前153cmで、ストレッチ後153cmだった。ストレッチ後の開脚幅はいつもとは計り方を変えたので数値は低くなっているが普段と同じぐらいのものだろう。すねの外側の筋は気にならないぐらいになったので復調したと言っていいだろう。今日は右股関節から太ももにかけての張りと右腰の張りが大きかった。今週も根を詰めて長時間オフィスで作業していたので座っているとかかる部位の負荷が高くなっていると想定される。納期が4月末なのでこの生活はもうしばらく続くといったところ。
dell マシンに ubuntu をインストール いつも通りオフィスで会社の事務手続きをしながら、並行して 購入した dell マシン に ubuntu をインストールする。いまお仕事で開発しているアプリケーションの成果物は amd64 をターゲットにしているのでローカルに amd64 の開発環境がないとインフラ周りやコンテナ周りの検証に一手間かかる。この状況を解消するために早くローカルの dell マシンを置き換えて開発環境を構築したい。dvd-r から ubuntu 22.04.01 (サイズ超過で dvd-r におさまらなくて 22.04.02 は断念) のインストールを行う。bios で一時的に secure boot の機能を無効にしないと署名チェックで起動しなかった。インストール作業中に予期せぬ不具合が発生しました的なポップアップが2-3回発生したけど、無視して継続できた。インストールして普通に起動すればいいやと緩い感覚で進めた。いつもはパーティションも自分で設定したりしているけれど、今回は windows 領域を残してデュアルブートな環境にしてみた。ディスク領域もインストーラーから windows 領域を 160GiB、残りをすべて ubuntu 領域にするといった設定ができた。すごい簡単。余裕があるときに windows の wsl を使うのも試してみれればと思う。</description><content>&lt;p>1時に寝て5時に起きて7時に起きた。今週も開発に集中していたのでバテ気味。時間がなくて2ヶ月以上行ってなかった散髪に行ってきた。前髪が目にかかって鬱陶しかったのでいつもよりも短くしてもらった。頭が軽いと日々の生活のストレスも軽減しそう。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>今日の開脚幅は開始前153cmで、ストレッチ後153cmだった。ストレッチ後の開脚幅はいつもとは計り方を変えたので数値は低くなっているが普段と同じぐらいのものだろう。すねの外側の筋は気にならないぐらいになったので復調したと言っていいだろう。今日は右股関節から太ももにかけての張りと右腰の張りが大きかった。今週も根を詰めて長時間オフィスで作業していたので座っているとかかる部位の負荷が高くなっていると想定される。納期が4月末なのでこの生活はもうしばらく続くといったところ。&lt;/p>
&lt;h2 id="dell-マシンに-ubuntu-をインストール">dell マシンに ubuntu をインストール&lt;/h2>
&lt;p>いつも通りオフィスで会社の事務手続きをしながら、並行して &lt;a href="/diary/diary/posts/2023/0323/">購入した dell マシン&lt;/a> に ubuntu をインストールする。いまお仕事で開発しているアプリケーションの成果物は amd64 をターゲットにしているのでローカルに amd64 の開発環境がないとインフラ周りやコンテナ周りの検証に一手間かかる。この状況を解消するために早くローカルの dell マシンを置き換えて開発環境を構築したい。dvd-r から ubuntu 22.04.01 (サイズ超過で dvd-r におさまらなくて 22.04.02 は断念) のインストールを行う。bios で一時的に secure boot の機能を無効にしないと署名チェックで起動しなかった。インストール作業中に予期せぬ不具合が発生しました的なポップアップが2-3回発生したけど、無視して継続できた。インストールして普通に起動すればいいやと緩い感覚で進めた。いつもはパーティションも自分で設定したりしているけれど、今回は windows 領域を残してデュアルブートな環境にしてみた。ディスク領域もインストーラーから windows 領域を 160GiB、残りをすべて ubuntu 領域にするといった設定ができた。すごい簡単。余裕があるときに windows の wsl を使うのも試してみれればと思う。&lt;/p></content></item><item><title>デスクトップマシンの買い替え</title><link>/diary/posts/2023/0323/</link><pubDate>Thu, 23 Mar 2023 13:10:26 +0900</pubDate><guid>/diary/posts/2023/0323/</guid><description>1時に寝て5時に起きて7時に起きた。昨日も吐き気がしてうまく眠れなかった。
dell マシンの買い替え 1月頃からデスクトップマシンの調子が悪かった 。ちょうど3年経ったところでそろそろ故障してもおかしくないと言える。ちょうど年度末なので dell の半期に一度の大感謝祭を待って購入することにした。これまでは vostro を使っていた。そろそろメモリが16GiBだと厳しくなってきたところ。メモリが32GiBついているデスクトップマシンは限られてくる。 その制約もあって xps マシンを購入をすることにした。
昨日のお昼過ぎに注文したのに翌日の午前中にマシンが届いた。あまりの早さに驚いた。dell の配送のワークフローの凄さを実感した。デスクトップマシンを注文して1週間ぐらいで来たらいいと普通の感覚で思っていたら翌日なんやもんな。24時間も経ってなかったしな。
グラフィックボードからモニタに接続しようとしたら4つのインターフェースのうち3つが displayport で1つが hdmi になっていた。いまどきは displayport が主流なんやね。そんなことすらも知らなくて変換アダプタ買わないととか思っていたら、モニターも displayport をもっていて、モニターの箱にも displayport ケーブルが同梱されていて、そのまま接続できることに気付いた。3年ぐらいでマシンを買い替えないとハードウェアのデバイスの変更にもついていけないのだなということも実感した。
私はもう世の中についていけてなくて、たまに普段やらないことをやるとそこで起きることに驚いて右往左往している。windows を起動して dell update から bios やファームウェアを最新のもの更新したりしていた。windows 上からダウンロードして設定して、再起動時に自動的に bios の更新がかかるような振る舞いをする。uefi のなせる技なんだろうけど、こういうところにも驚いて感心したりする。
ubuntu 22.04.02 が 4.8GiB あって dvd-r にぎりぎりおさまらない。もう dvd-r でもインストールメディアを作ることができなくなったんやなと気付く。22.04.01 は 3.6 GiB なので1つ前のバージョンをインストールしてアップグレードすればいいかとやってみたらブート時に次のようなエラーになった。
Verification failed:(0x1A) Security Violation
bios に secure boot 機能なるものがあって 22.04.01 ではインストールできないように署名チェックが行われるらしい。古いディストリビューションをインストールするには secure boot を一時的に無効にするしかなさそう。
https://askubuntu.com/questions/1456460/verification-failed-0x1a-security-violation-while-installing-ubuntu</description><content>&lt;p>1時に寝て5時に起きて7時に起きた。昨日も吐き気がしてうまく眠れなかった。&lt;/p>
&lt;h2 id="dell-マシンの買い替え">dell マシンの買い替え&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0123/#デスクトップマシンの調子が悪い">1月頃からデスクトップマシンの調子が悪かった&lt;/a> 。ちょうど3年経ったところでそろそろ故障してもおかしくないと言える。ちょうど年度末なので dell の半期に一度の大感謝祭を待って購入することにした。これまでは &lt;a href="https://www.dell.com/ja-jp/shop/%E8%A3%BD%E5%93%81%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA/sf/vostro-desktops">vostro&lt;/a> を使っていた。そろそろメモリが16GiBだと厳しくなってきたところ。メモリが32GiBついているデスクトップマシンは限られてくる。
その制約もあって &lt;a href="https://www.dell.com/ja-jp/shop/%E8%A3%BD%E5%93%81%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA/sf/xps-desktops">xps&lt;/a> マシンを購入をすることにした。&lt;/p>
&lt;p>昨日のお昼過ぎに注文したのに翌日の午前中にマシンが届いた。あまりの早さに驚いた。dell の配送のワークフローの凄さを実感した。デスクトップマシンを注文して1週間ぐらいで来たらいいと普通の感覚で思っていたら翌日なんやもんな。24時間も経ってなかったしな。&lt;/p>
&lt;p>グラフィックボードからモニタに接続しようとしたら4つのインターフェースのうち3つが displayport で1つが hdmi になっていた。いまどきは displayport が主流なんやね。そんなことすらも知らなくて変換アダプタ買わないととか思っていたら、モニターも displayport をもっていて、モニターの箱にも displayport ケーブルが同梱されていて、そのまま接続できることに気付いた。3年ぐらいでマシンを買い替えないとハードウェアのデバイスの変更にもついていけないのだなということも実感した。&lt;/p>
&lt;p>私はもう世の中についていけてなくて、たまに普段やらないことをやるとそこで起きることに驚いて右往左往している。windows を起動して dell update から bios やファームウェアを最新のもの更新したりしていた。windows 上からダウンロードして設定して、再起動時に自動的に bios の更新がかかるような振る舞いをする。uefi のなせる技なんだろうけど、こういうところにも驚いて感心したりする。&lt;/p>
&lt;p>ubuntu 22.04.02 が 4.8GiB あって dvd-r にぎりぎりおさまらない。もう dvd-r でもインストールメディアを作ることができなくなったんやなと気付く。22.04.01 は 3.6 GiB なので1つ前のバージョンをインストールしてアップグレードすればいいかとやってみたらブート時に次のようなエラーになった。&lt;/p>
&lt;blockquote>
&lt;p>Verification failed:(0x1A) Security Violation&lt;/p>
&lt;/blockquote>
&lt;p>bios に secure boot 機能なるものがあって 22.04.01 ではインストールできないように署名チェックが行われるらしい。古いディストリビューションをインストールするには secure boot を一時的に無効にするしかなさそう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://askubuntu.com/questions/1456460/verification-failed-0x1a-security-violation-while-installing-ubuntu">https://askubuntu.com/questions/1456460/verification-failed-0x1a-security-violation-while-installing-ubuntu&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>人間の体調もマシンの調子も悪い</title><link>/diary/posts/2023/0123/</link><pubDate>Mon, 23 Jan 2023 08:53:19 +0900</pubDate><guid>/diary/posts/2023/0123/</guid><description>1時に寝て7時に起きた。冬のせいか、朝起きるのが辛くなってきた。自身の体調がパッとしないと思っていたらマシンにも移ってしまった。
デスクトップマシンの調子が悪い 何の前触れもなく os がいきなりストールする。これまでも稀にあったり、サスペンドから復帰しないとかも1ヶ月に1回ぐらいはあったりしていたけど、今日は2時間以内に3回発生した。使い始めてちょうど3年を超えたところなのでそろそろ故障が出てきてもおかしくはない。もっとも疑わしいディスクの S.M.A.R.T チェックをやってみた。SMART / Health Informationの内容 をみると、Percentage Used という値がメーカーが独自計算した耐久値を表しているとのころ。しかし、値は13%なのでまだまだ大丈夫そう。その他のエラーチェックなどでもまったく問題は検出されなかった。どうやらディスクではないみたい。
=== START OF SMART DATA SECTION === SMART overall-health self-assessment test result: PASSED SMART/Health Information (NVMe Log 0x02) Critical Warning: 0x00 Temperature: 28 Celsius Available Spare: 100% Available Spare Threshold: 50% Percentage Used: 13% Data Units Read: 48,536,210 [24.8 TB] Data Units Written: 57,978,947 [29.6 TB] Host Read Commands: 1,818,481,150 Host Write Commands: 1,973,810,058 Controller Busy Time: 9,182 Power Cycles: 1,863 Power On Hours: 4,576 Unsafe Shutdowns: 80 Media and Data Integrity Errors: 0 Error Information Log Entries: 0 Warning Comp.</description><content>&lt;p>1時に寝て7時に起きた。冬のせいか、朝起きるのが辛くなってきた。自身の体調がパッとしないと思っていたらマシンにも移ってしまった。&lt;/p>
&lt;h2 id="デスクトップマシンの調子が悪い">デスクトップマシンの調子が悪い&lt;/h2>
&lt;p>何の前触れもなく os がいきなりストールする。これまでも稀にあったり、サスペンドから復帰しないとかも1ヶ月に1回ぐらいはあったりしていたけど、今日は2時間以内に3回発生した。使い始めてちょうど3年を超えたところなのでそろそろ故障が出てきてもおかしくはない。もっとも疑わしいディスクの S.M.A.R.T チェックをやってみた。&lt;a href="https://qiita.com/ken-yossy/items/ffecfd31d41d71f27dca#smart--health-information%E3%81%AE%E5%86%85%E5%AE%B9">SMART / Health Informationの内容&lt;/a> をみると、&lt;em>Percentage Used&lt;/em> という値がメーカーが独自計算した耐久値を表しているとのころ。しかし、値は13%なのでまだまだ大丈夫そう。その他のエラーチェックなどでもまったく問題は検出されなかった。どうやらディスクではないみたい。&lt;/p>
&lt;pre tabindex="0">&lt;code>=== START OF SMART DATA SECTION ===
SMART overall-health self-assessment test result: PASSED
SMART/Health Information (NVMe Log 0x02)
Critical Warning: 0x00
Temperature: 28 Celsius
Available Spare: 100%
Available Spare Threshold: 50%
Percentage Used: 13%
Data Units Read: 48,536,210 [24.8 TB]
Data Units Written: 57,978,947 [29.6 TB]
Host Read Commands: 1,818,481,150
Host Write Commands: 1,973,810,058
Controller Busy Time: 9,182
Power Cycles: 1,863
Power On Hours: 4,576
Unsafe Shutdowns: 80
Media and Data Integrity Errors: 0
Error Information Log Entries: 0
Warning Comp. Temperature Time: 0
Critical Comp. Temperature Time: 0
Temperature Sensor 1: 28 Celsius
Thermal Temp. 1 Transition Count: 90
Thermal Temp. 2 Transition Count: 50
Thermal Temp. 1 Total Time: 2246
Thermal Temp. 2 Total Time: 50
&lt;/code>&lt;/pre>&lt;h2 id="nginx-の-multi-upstream-対応">nginx の multi upstream 対応&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2023/0120/#sveltekit-アプリのデプロイ">先週末の続き&lt;/a> 。docker compose でデプロイして node.js 上のポートに http 接続できるところまでやっていた。nginx のリバースプロキシ経由でアクセスできるようにする。web api も外部から https 接続できるようにすると2つの upstream が必要になる。ホスト名を dns 登録していないから同じ ip アドレスでアクセスしているため、ポート番号を変えないといけない。そのまま server 設定を行うと location 設定が dry の原則に反してしまう。どうやったら再利用できるかを調べたら conf として外部に出してしまって include すればいいとあったので次のようにして再利用できた。これで node.js アプリは 443 を、web api は 8443 で https 接続できた。&lt;/p>
&lt;pre tabindex="0">&lt;code>http {
upstream my-app {
server app:3000;
}
upstream web-api {
server api:18080;
}
server {
listen 443 ssl;
server_name server-app;
location / {
include /etc/nginx/common_proxy.conf;
proxy_pass http://my-app;
}
}
server {
listen 8443 ssl;
server_name server-api;
location / {
include /etc/nginx/common_proxy.conf;
proxy_pass http://web-api;
}
}
}
&lt;/code>&lt;/pre></content></item><item><title>ジャンプスターター使ってみた</title><link>/diary/posts/2023/0101/</link><pubDate>Sun, 01 Jan 2023 08:16:49 +0900</pubDate><guid>/diary/posts/2023/0101/</guid><description>1時に寝て7時半に起きた。なんともなく新年あけた。朝ご飯食べて孤独のグルメをみながら宅急便が届くのを待った。
hugo のスタイル修正 日付に曜日を付けるように変更した。タグから過去の日記をみたときに曜日があると役に立つときがたまにある。
&amp;lt;span class=&amp;#34;post-date&amp;#34;&amp;gt; {{ .Date.Format &amp;#34;2006-01-02 (Mon.)&amp;#34; }} &amp;lt;/span&amp;gt; テーマの terminal のバージョンをあげたらビルドに失敗するようになった。extended をインストールしないと scss/sass 周りのビルドに失敗するらしい。github actions の hugo セットアップの設定も変更した。
https://gohugo.io/troubleshooting/faq/#i-get-this-feature-is-not-available-in-your-current-hugo-version ジャンプスターター 年末に注文したジャンプスターターが届いた。実家の軽トラのバッテリーがあがってしまいエンジンをかけられないという。いつもはディーラーさんに来てもらってバッテリー交換なり他の車と接続してエンジンをかけるなりをやってもらっていた。たまたまテレビをみていたら雪国での役立つツールとしてジャンプスターターと呼ばれるものがあることを知った。スマートデバイスなどの予備バッテリーの形状で車のバッテリーに接続してエンジンをかけられるらしい。さっそく amazon で検索してベストセラーのタグがついている「PHILIPS フィリップス ジャンプスターター 12000mAh大容量 ピーク電流800A 12V車用 エンジンスターター」を購入した。うちの軽トラでも試してみたら問題なくエンジンが始動した。車のバッテリーが弱っている場合、boost ボタンを押してブーストモードで接続しないといけないようだ。boost ボタンを押すのがわかって接続・設定したらエンジンがすぐに始動した。うちみたいな小さい兼業農家でたまに軽トラを使うといった家でも携帯バッテリーは充電がすぐできて、保管も場所取らずでとても便利。これはよい買いものだと思えた。
温泉 実家近くの うずしお温泉 を提供している ゆとりっく に行く。私にとっては銭湯へ行く感覚で実家に帰ったとき1回は行く。いつも通り温泉に浸かってそれから三ノ宮へ戻ることにした。</description><content>&lt;p>1時に寝て7時半に起きた。なんともなく新年あけた。朝ご飯食べて孤独のグルメをみながら宅急便が届くのを待った。&lt;/p>
&lt;h2 id="hugo-のスタイル修正">hugo のスタイル修正&lt;/h2>
&lt;p>日付に曜日を付けるように変更した。タグから過去の日記をみたときに曜日があると役に立つときがたまにある。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;span&lt;/span> &lt;span style="color:#a6e22e">class=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;post-date&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ .Date.Format &amp;#34;2006-01-02 (Mon.)&amp;#34; }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/span&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>テーマの &lt;a href="https://github.com/panr/hugo-theme-terminal">terminal&lt;/a> のバージョンをあげたらビルドに失敗するようになった。&lt;code>extended&lt;/code> をインストールしないと scss/sass 周りのビルドに失敗するらしい。github actions の hugo セットアップの設定も変更した。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/troubleshooting/faq/#i-get-this-feature-is-not-available-in-your-current-hugo-version">https://gohugo.io/troubleshooting/faq/#i-get-this-feature-is-not-available-in-your-current-hugo-version&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ジャンプスターター">ジャンプスターター&lt;/h2>
&lt;p>年末に注文したジャンプスターターが届いた。実家の軽トラのバッテリーがあがってしまいエンジンをかけられないという。いつもはディーラーさんに来てもらってバッテリー交換なり他の車と接続してエンジンをかけるなりをやってもらっていた。たまたまテレビをみていたら雪国での役立つツールとしてジャンプスターターと呼ばれるものがあることを知った。スマートデバイスなどの予備バッテリーの形状で車のバッテリーに接続してエンジンをかけられるらしい。さっそく amazon で検索してベストセラーのタグがついている「PHILIPS フィリップス ジャンプスターター 12000mAh大容量 ピーク電流800A 12V車用 エンジンスターター」を購入した。うちの軽トラでも試してみたら問題なくエンジンが始動した。車のバッテリーが弱っている場合、boost ボタンを押してブーストモードで接続しないといけないようだ。boost ボタンを押すのがわかって接続・設定したらエンジンがすぐに始動した。うちみたいな小さい兼業農家でたまに軽トラを使うといった家でも携帯バッテリーは充電がすぐできて、保管も場所取らずでとても便利。これはよい買いものだと思えた。&lt;/p>
&lt;p>&lt;a href="https://www.amazon.co.jp/gp/product/B091Y9Y22G?ie=UTF8&amp;psc=1&amp;linkCode=li2&amp;tag=t2y-diary-22&amp;linkId=b31c3d97937c844d911bb79486599b0c&amp;language=ja_JP&amp;ref_=as_li_ss_il" target="_blank">&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=B091Y9Y22G&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=t2y-diary-22&amp;language=ja_JP" >&lt;/a>&lt;img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&amp;language=ja_JP&amp;l=li2&amp;o=9&amp;a=B091Y9Y22G" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />&lt;/p>
&lt;h2 id="温泉">温泉&lt;/h2>
&lt;p>実家近くの &lt;a href="http://awajiinfo.com/uzusio-onsen/">うずしお温泉&lt;/a> を提供している &lt;a href="https://xn--y8jwbo3jva.com/">ゆとりっく&lt;/a> に行く。私にとっては銭湯へ行く感覚で実家に帰ったとき1回は行く。いつも通り温泉に浸かってそれから三ノ宮へ戻ることにした。&lt;/p></content></item><item><title>お仕事戻し</title><link>/diary/posts/2022/1230/</link><pubDate>Fri, 30 Dec 2022 09:43:25 +0900</pubDate><guid>/diary/posts/2022/1230/</guid><description>0時に寝て5時に起きた。昨日も疲れていたのか、不思議とよく眠れた。
年末のお仕事戻し 朝から近所のマクドナルドへ。今週は月・火とお休みしたため、いつも火曜日に書いている週報を書いていなかった。言うても3日分の作業なのでちゃっちゃと書いて送付した。私が休んだ日の定例会議はスキップされたようでその確認はなし。その後、issue のコメントをみたり、マージリクエストのコードレビューをしたりした。メンバーが課題管理システムを使うようになっているので、私が休んでいても後で見返してコメントを返せる。非同期／テキストコミュニケーションは働く時間帯があわないときに役に立つ。そういう雰囲気を学ぶ機会になればいいかもしれない。ある文字列の変換関数に go 1.18 で追加された fuzzing テストを実装してみようというリファクタリングの issue を追加していた。
Tutorial: Getting started with fuzzing 私自身、まだ自分で実装したことはなかった。fuzzing テストを実装したマージリクエストがあったのでコードレビューした。実際に実行して動いているようにはみえるが、デバッグログを出力できなくてどういった振る舞いをしているのかを確認できなかった。簡単にできるんやと思っていたら意外と難しかった。また後で自分でも実装してデバッグしてみて振る舞いを再確認する。
小さい椅子 葬儀で斎場に2泊3日過ごしたときに畳の控え室に小さい椅子が4つほど置いてあった。正座が難しいお年寄り向けだと推測する。あの控え室でその小さい椅子を最も活用していたのは私だった。地べたに座るのと小さな椅子に腰掛けるので腰の負担がこんなに違うとは思わなかった。おそらく太ったことも影響している。ラップトップでキー入力するときに正座にしろ、あぐらにしろ、どちらも長時間続けることはできなかった。この小さい椅子なら2-3時間ぐらいは平気で作業できる。気持ち程度の高さでも十分に椅子の役割を果たせるところに感心した。家用に購入して、いま小さい椅子でこの日記を書いている。</description><content>&lt;p>0時に寝て5時に起きた。昨日も疲れていたのか、不思議とよく眠れた。&lt;/p>
&lt;h2 id="年末のお仕事戻し">年末のお仕事戻し&lt;/h2>
&lt;p>朝から近所のマクドナルドへ。今週は月・火とお休みしたため、いつも火曜日に書いている週報を書いていなかった。言うても3日分の作業なのでちゃっちゃと書いて送付した。私が休んだ日の定例会議はスキップされたようでその確認はなし。その後、issue のコメントをみたり、マージリクエストのコードレビューをしたりした。メンバーが課題管理システムを使うようになっているので、私が休んでいても後で見返してコメントを返せる。非同期／テキストコミュニケーションは働く時間帯があわないときに役に立つ。そういう雰囲気を学ぶ機会になればいいかもしれない。ある文字列の変換関数に go 1.18 で追加された fuzzing テストを実装してみようというリファクタリングの issue を追加していた。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://go.dev/doc/tutorial/fuzz">Tutorial: Getting started with fuzzing&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>私自身、まだ自分で実装したことはなかった。fuzzing テストを実装したマージリクエストがあったのでコードレビューした。実際に実行して動いているようにはみえるが、デバッグログを出力できなくてどういった振る舞いをしているのかを確認できなかった。簡単にできるんやと思っていたら意外と難しかった。また後で自分でも実装してデバッグしてみて振る舞いを再確認する。&lt;/p>
&lt;h2 id="小さい椅子">小さい椅子&lt;/h2>
&lt;p>葬儀で斎場に2泊3日過ごしたときに畳の控え室に小さい椅子が4つほど置いてあった。正座が難しいお年寄り向けだと推測する。あの控え室でその小さい椅子を最も活用していたのは私だった。地べたに座るのと小さな椅子に腰掛けるので腰の負担がこんなに違うとは思わなかった。おそらく太ったことも影響している。ラップトップでキー入力するときに正座にしろ、あぐらにしろ、どちらも長時間続けることはできなかった。この小さい椅子なら2-3時間ぐらいは平気で作業できる。気持ち程度の高さでも十分に椅子の役割を果たせるところに感心した。家用に購入して、いま小さい椅子でこの日記を書いている。&lt;/p>
&lt;p>&lt;a href="https://www.amazon.co.jp/gp/product/B003VIW0PG?ie=UTF8&amp;th=1&amp;linkCode=li1&amp;tag=t2y-diary-22&amp;linkId=233bef8ca8a08ce7593f84b75fbea8cf&amp;language=ja_JP&amp;ref_=as_li_ss_il" target="_blank">&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=B003VIW0PG&amp;Format=_SL110_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=t2y-diary-22&amp;language=ja_JP" >&lt;/a>&lt;img src="https://ir-jp.amazon-adsystem.com/e/ir?t=t2y-diary-22&amp;language=ja_JP&amp;l=li1&amp;o=9&amp;a=B003VIW0PG" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />&lt;/p></content></item><item><title>ケーブル配線トレー気に入った</title><link>/diary/posts/2022/1220/</link><pubDate>Tue, 20 Dec 2022 19:56:29 +0900</pubDate><guid>/diary/posts/2022/1220/</guid><description>20時に寝て22時に起きて、24時ぐらいまでだらだらやって6時まで寝た。本当は晩ご飯食べてオフィスに戻るつもりが疲れて寝てた。
ケーブル配線トレー たいちさんの記事 を参考に購入した ケーブルトレー (CB-CT4) が届いたのですぐ机に取り付けてみた。ちょうど机のサイズやオフィスの空間にもマッチしていてケーブルの配線をよい感じに収納できた。新しいオフィスには幅広な棚がついていてその棚もそうなんだけど、縦の空間を分割して使えると効率がよい。普段プログラミングや ci/cd で効率のことばかり考えているから日常生活でも効率のよいことがあると嬉しい気持ちになる。ケーブルトレーはオフィス空間の効率化に寄与する。物理的なメリット以上に、私にとっては精神的に作用した気がする。
rabbitmq の management api rabbitmq には Management Plugin という拡張があって、これをインストールすると管理画面と HTTP API が付いてくる。docker image だと、たぶん management のタグが付いているものを選べばよいと思う。exchange や queue の初期設定を go のアプリケーションからできるようにしようと思って rabbit-hole というライブラリを使ってすぐに実装できた。最低限の必要な機能をもつサブコマンドな cli からも呼べるようにした。本番環境でもこの cli を使って rabbitmq の初期設定や確認をする運用ツールにしようと思う。管理画面でもできるけど、cli でできた方がマニュアルを作る上でも簡単だし作業ログも管理しやすい。</description><content>&lt;p>20時に寝て22時に起きて、24時ぐらいまでだらだらやって6時まで寝た。本当は晩ご飯食べてオフィスに戻るつもりが疲れて寝てた。&lt;/p>
&lt;h2 id="ケーブル配線トレー">ケーブル配線トレー&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2022/1218/#リモートワークの道具">たいちさんの記事&lt;/a> を参考に購入した &lt;a href="https://www.sanwa.co.jp/product/syohin?code=CB-CT4">ケーブルトレー (CB-CT4)&lt;/a> が届いたのですぐ机に取り付けてみた。ちょうど机のサイズやオフィスの空間にもマッチしていてケーブルの配線をよい感じに収納できた。新しいオフィスには幅広な棚がついていてその棚もそうなんだけど、縦の空間を分割して使えると効率がよい。普段プログラミングや ci/cd で効率のことばかり考えているから日常生活でも効率のよいことがあると嬉しい気持ちになる。ケーブルトレーはオフィス空間の効率化に寄与する。物理的なメリット以上に、私にとっては精神的に作用した気がする。&lt;/p>
&lt;h2 id="rabbitmq-の-management-api">rabbitmq の management api&lt;/h2>
&lt;p>rabbitmq には &lt;a href="https://www.rabbitmq.com/management.html">Management Plugin&lt;/a> という拡張があって、これをインストールすると管理画面と &lt;a href="https://www.rabbitmq.com/management.html#http-api">HTTP API&lt;/a> が付いてくる。&lt;a href="https://hub.docker.com/_/rabbitmq">docker image&lt;/a> だと、たぶん &lt;code>management&lt;/code> のタグが付いているものを選べばよいと思う。exchange や queue の初期設定を go のアプリケーションからできるようにしようと思って &lt;a href="https://github.com/michaelklishin/rabbit-hole">rabbit-hole&lt;/a> というライブラリを使ってすぐに実装できた。最低限の必要な機能をもつサブコマンドな cli からも呼べるようにした。本番環境でもこの cli を使って rabbitmq の初期設定や確認をする運用ツールにしようと思う。管理画面でもできるけど、cli でできた方がマニュアルを作る上でも簡単だし作業ログも管理しやすい。&lt;/p></content></item><item><title>オフィスでのんびり過ごす</title><link>/diary/posts/2022/1218/</link><pubDate>Sun, 18 Dec 2022 15:56:42 +0900</pubDate><guid>/diary/posts/2022/1218/</guid><description>21時に寝て何度も夜起きながら頭痛の機嫌をとりつつ8時に起きた。頭痛はほとんどなくなったもののお腹が痛かったりして微妙な体調。お仕事は断念してブログの記事を読んだりみかん食べたり買いものしたりしてのんびりしていた。
リモートワークの道具 たいちさんが 二年以上のリモートワークを生き残っている道具を紹介する という記事を書いていて同じマウスを使っているなと親近感をもって読んでいた。引っ越したばかりのオフィスでケーブル周りがあまりしっくりこないと思っていたので ケーブルトレー (CB-CT4) を購入してみることにした。机の上にわさわさしているケーブルや電源タップの取り回しをすっきりできそう。
マイナポータルへの登録 親が マイナポイントのキャンペーン がどうこうと、マイナンバーカードを取得して申し込みなどをしていた話しを聞いた。うちの親が手続きしているぐらいなのでそれなりに一般の人たちがマイナンバーカードを取得して申し込みしているのではないかと思う。私もよくわかっていなかったけど、12月中に手続きをすれば20,000ポイントをもらえるとあるので paypay 経由で手続きをしてみた。次の2つに登録するとよいみたい。
健康保険証としての利用申し込み 公金受取口座の登録 どちらも行政手続きの簡略化が期待される。システムに関わっている私は受け入れて申し込みした。手続きがうまくいけば paypay でマイナポイントをチャージして使えるらしい。paypay はふるさと納税とも連携するし、こういった行政との連携も抜群で便利な決済アプリになったなぁという印象。また以前はボーナス運用と呼ばれていた paypay を使ったときに還元されるポイントを資産運用している。それがパワーアップして paypay証券 になったみたい。paypay はイケイケやね。積立もできるらしいので投資信託の代わりのようなものだと思う。いままでのポイント運用プラス積立を気軽にできる資産運用としてよさそうに思えたので申し込みしてみた。</description><content>&lt;p>21時に寝て何度も夜起きながら頭痛の機嫌をとりつつ8時に起きた。頭痛はほとんどなくなったもののお腹が痛かったりして微妙な体調。お仕事は断念してブログの記事を読んだりみかん食べたり買いものしたりしてのんびりしていた。&lt;/p>
&lt;h2 id="リモートワークの道具">リモートワークの道具&lt;/h2>
&lt;p>たいちさんが &lt;a href="https://blog.satotaichi.info/working-area/">二年以上のリモートワークを生き残っている道具を紹介する&lt;/a> という記事を書いていて同じマウスを使っているなと親近感をもって読んでいた。引っ越したばかりのオフィスでケーブル周りがあまりしっくりこないと思っていたので &lt;a href="https://www.sanwa.co.jp/product/syohin?code=CB-CT4">ケーブルトレー (CB-CT4)&lt;/a> を購入してみることにした。机の上にわさわさしているケーブルや電源タップの取り回しをすっきりできそう。&lt;/p>
&lt;h2 id="マイナポータルへの登録">マイナポータルへの登録&lt;/h2>
&lt;p>親が &lt;a href="https://mynumbercard.point.soumu.go.jp/">マイナポイントのキャンペーン&lt;/a> がどうこうと、マイナンバーカードを取得して申し込みなどをしていた話しを聞いた。うちの親が手続きしているぐらいなのでそれなりに一般の人たちがマイナンバーカードを取得して申し込みしているのではないかと思う。私もよくわかっていなかったけど、12月中に手続きをすれば20,000ポイントをもらえるとあるので paypay 経由で手続きをしてみた。次の2つに登録するとよいみたい。&lt;/p>
&lt;ul>
&lt;li>健康保険証としての利用申し込み&lt;/li>
&lt;li>公金受取口座の登録&lt;/li>
&lt;/ul>
&lt;p>どちらも行政手続きの簡略化が期待される。システムに関わっている私は受け入れて申し込みした。手続きがうまくいけば paypay でマイナポイントをチャージして使えるらしい。paypay はふるさと納税とも連携するし、こういった行政との連携も抜群で便利な決済アプリになったなぁという印象。また以前はボーナス運用と呼ばれていた paypay を使ったときに還元されるポイントを資産運用している。それがパワーアップして &lt;a href="https://www.paypay-sec.co.jp/">paypay証券&lt;/a> になったみたい。paypay はイケイケやね。積立もできるらしいので投資信託の代わりのようなものだと思う。いままでのポイント運用プラス積立を気軽にできる資産運用としてよさそうに思えたので申し込みしてみた。&lt;/p></content></item><item><title>出張もくもく会を催す</title><link>/diary/posts/2022/1010/</link><pubDate>Mon, 10 Oct 2022 14:10:35 +0900</pubDate><guid>/diary/posts/2022/1010/</guid><description>0時に寝て8時に起きた。本当は休日なんだけど、運用に影響を与える変更の pr を金曜日に送っていて、その approve が出たのでマージ処理とデプロイをしてテストのお願いをしようと考えていたら、要件漏れがあることに気付いてその修正を行って再度 pr を出した。この変更はちゃんと検証しないといけない修正なのでできれば今日中にはテスト環境にデプロイしておきたかった。
出張もくもく会 出張中の隙間に当たる11月3日(木)は祝日でやることがない。普段の土日祝日は元気ならオフィスで調べものや自社のお仕事をしている。出張中だからコワーキングスペースに出掛けて作業しようという延長上で、いまシェアオフィスを借りている業者さんは全国展開しているので東京のコワーキングスペースの会議室も借りられるのであれば、会議室を1日借りてしまってもくもく会にしてしまおうと思い付いた。
会議室の予約システムからは東京のコワーキングスペースの会議室も予約できた。どうやって入室すればいいかわからないなと思ってサポートに電話してみた。そしたら、シェアオフィスの借り主が全国の施設を利用できるかどうかは契約次第らしい。最近の契約はそうなっているらしいが、私が契約したとき (約3年前) はどうだったかを忘れてしまった。たしか契約するときに関西は使い放題プランがサービスで付いていたのは契約書で確認できたが、関東はどうなるのかよく覚えていなかった。うちの施設に常駐しているコンシェルジュさんにどういう契約になっているのかを聞いてみた。すぐに調べてくれて問題ないと確認できた。せっかくなので connpass にイベントページを作ってみた。会議室なので8席しかない。この人数なら知り合い限定でよいとも考えている。とはいえ人が集まらなかったら寂しいので一応は一般枠も設けておく。一般枠は参加しにくいように金額設定しているが、様子をみてからあとで無料にする予定。
出張もくもく会 m2 macbook air が届いた 先日購入した macbook air が届いた。ひとまず起動してマシンの初期設定を行う。デスクトップまで起動して、最初にやることとして思い付いたのが google chrome をインストールして 1password のインストールと初期設定だった。すべての認証は 1password で管理しているのでこのサービスが使えないと業務できなくなる。また空き時間に少しずつ設定していく。</description><content>&lt;p>0時に寝て8時に起きた。本当は休日なんだけど、運用に影響を与える変更の pr を金曜日に送っていて、その approve が出たのでマージ処理とデプロイをしてテストのお願いをしようと考えていたら、要件漏れがあることに気付いてその修正を行って再度 pr を出した。この変更はちゃんと検証しないといけない修正なのでできれば今日中にはテスト環境にデプロイしておきたかった。&lt;/p>
&lt;h2 id="出張もくもく会">出張もくもく会&lt;/h2>
&lt;p>出張中の隙間に当たる11月3日(木)は祝日でやることがない。普段の土日祝日は元気ならオフィスで調べものや自社のお仕事をしている。出張中だからコワーキングスペースに出掛けて作業しようという延長上で、いまシェアオフィスを借りている業者さんは全国展開しているので東京のコワーキングスペースの会議室も借りられるのであれば、会議室を1日借りてしまってもくもく会にしてしまおうと思い付いた。&lt;/p>
&lt;p>会議室の予約システムからは東京のコワーキングスペースの会議室も予約できた。どうやって入室すればいいかわからないなと思ってサポートに電話してみた。そしたら、シェアオフィスの借り主が全国の施設を利用できるかどうかは契約次第らしい。最近の契約はそうなっているらしいが、私が契約したとき (約3年前) はどうだったかを忘れてしまった。たしか契約するときに関西は使い放題プランがサービスで付いていたのは契約書で確認できたが、関東はどうなるのかよく覚えていなかった。うちの施設に常駐しているコンシェルジュさんにどういう契約になっているのかを聞いてみた。すぐに調べてくれて問題ないと確認できた。せっかくなので connpass にイベントページを作ってみた。会議室なので8席しかない。この人数なら知り合い限定でよいとも考えている。とはいえ人が集まらなかったら寂しいので一応は一般枠も設けておく。一般枠は参加しにくいように金額設定しているが、様子をみてからあとで無料にする予定。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kazamori.connpass.com/event/262898/">出張もくもく会&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="m2-macbook-air-が届いた">m2 macbook air が届いた&lt;/h2>
&lt;p>先日購入した &lt;a href="/diary/diary/posts/2022/1004/#m2-macbook-air-購入">macbook air&lt;/a> が届いた。ひとまず起動してマシンの初期設定を行う。デスクトップまで起動して、最初にやることとして思い付いたのが google chrome をインストールして &lt;a href="https://1password.com/jp/">1password&lt;/a> のインストールと初期設定だった。すべての認証は 1password で管理しているのでこのサービスが使えないと業務できなくなる。また空き時間に少しずつ設定していく。&lt;/p></content></item><item><title>iphone のデータ移行が簡単になってた</title><link>/diary/posts/2022/1009/</link><pubDate>Sun, 09 Oct 2022 16:20:31 +0900</pubDate><guid>/diary/posts/2022/1009/</guid><description>0時に寝て7時に起きた。オフィスで荷物を受け取る必要があったので8時にはオフィスに行って普通に作業してた。午前中は金曜日の作業で途中になってた単体テストを仕上げた。
iphone 移行 iphone 11 から 14 pro に移行した。色はディープパープルにした。本当は 11 のグリーンが気に入っていたのでグリーンしたかったけどないから仕方なく。先月の上旬ぐらいから iphone のスクリーンの一部が操作を受け付けなくなった。タッチしても反応しないといった状態になる。最初はドラクエタクトをする上であるボタンが押せない程度だったのだけど、その後も使い続けているうちにその反応しない領域が少しずつ拡大していった。文字入力のパネルなら「や」と「ら」の領域が反応しない、paypay で支払うときに8や9が入力できない、電話が掛かってきてもスワイプで着話できないとか。一部の領域が反応しなくなってから1ヶ月ぐらいで普段使いに支障がでるようになっていた。
幸いにも9月半ばにはらさんとも相談しながら 14 pro を購入する決断をしていた。9月16日に注文したものが本日届いた。注文時の予定では10月20-27日の予定になっていたのがかなり前倒しになったみたい。朝から古い端末の ios を最新の 16.0.2 にアップグレードしたり、icloud へのバックアップを取ったりしていた。私はとくに icloud のストレージ容量を契約していないので無料の5GiBしかない。それなのにバックアップは成功して、なぜだろう？と調べたら機種変更時の icloud へのバックアップは容量無制限で使えるらしい。とても助かった。
iPhone機種変時のiCloudバックアップ、容量無制限で無料に　iOS 15の新機能、その手順を解説 iphone のデータ移行は クイックスタート という仕組みが3年前から提供されていて、基本的にはこの機能を使えばとくに労力なく移行できた。もちろんアプリによっては個別の移行作業が必要になるけれど、クイックスタートのおかげで基本的には古い端末と新しい端末を並べて移行の承認のような作業をするだけで済む。クイックスタートは iphone 同士を bluetooth 接続で繋ぐ。bluetooth 通信でもデータ移行できるそうだけど、wifi に比べると速度が遅いので256GiBなら3時間ぐらいかかる見通しらしい。icloud経由にするとwifiなので速度も速く15分程度で復元処理を完了できた。私の場合、電話、line、認証系アプリといったコアな機能の移行を1時間ほどで完了できた。一昔前に比べてかなり簡単になっているように感じた。
ストレッチ 本当は田んぼに実家に帰っている予定だったので日曜日の夜からストレッチ。今日の開脚幅は開始前157cmで、ストレッチ後161cmだった。最近はまったくストレッチしないようになりつつあるのだけど、腰の張りのアンバランスさは解消されていて、トレーナーさん曰くそれはよい状態だと言えるらしい。ストレッチを受ける前から雨降りでストレッチを終えてから何をしようかふらふらとアーケードを散歩して、結局のところ、やることがなくて雨に振られながら帰ってきた。</description><content>&lt;p>0時に寝て7時に起きた。オフィスで荷物を受け取る必要があったので8時にはオフィスに行って普通に作業してた。午前中は金曜日の作業で途中になってた単体テストを仕上げた。&lt;/p>
&lt;h2 id="iphone-移行">iphone 移行&lt;/h2>
&lt;p>iphone 11 から &lt;a href="https://www.apple.com/jp/iphone-14-pro/">14 pro&lt;/a> に移行した。色はディープパープルにした。本当は 11 のグリーンが気に入っていたのでグリーンしたかったけどないから仕方なく。先月の上旬ぐらいから iphone のスクリーンの一部が操作を受け付けなくなった。タッチしても反応しないといった状態になる。最初はドラクエタクトをする上であるボタンが押せない程度だったのだけど、その後も使い続けているうちにその反応しない領域が少しずつ拡大していった。文字入力のパネルなら「や」と「ら」の領域が反応しない、paypay で支払うときに8や9が入力できない、電話が掛かってきてもスワイプで着話できないとか。一部の領域が反応しなくなってから1ヶ月ぐらいで普段使いに支障がでるようになっていた。&lt;/p>
&lt;p>幸いにも9月半ばにはらさんとも相談しながら 14 pro を購入する決断をしていた。9月16日に注文したものが本日届いた。注文時の予定では10月20-27日の予定になっていたのがかなり前倒しになったみたい。朝から古い端末の ios を最新の 16.0.2 にアップグレードしたり、icloud へのバックアップを取ったりしていた。私はとくに icloud のストレージ容量を契約していないので無料の5GiBしかない。それなのにバックアップは成功して、なぜだろう？と調べたら機種変更時の icloud へのバックアップは容量無制限で使えるらしい。とても助かった。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.itmedia.co.jp/news/articles/2109/21/news113.html">iPhone機種変時のiCloudバックアップ、容量無制限で無料に　iOS 15の新機能、その手順を解説&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>iphone のデータ移行は &lt;a href="https://support.apple.com/ja-jp/HT210216">クイックスタート&lt;/a> という仕組みが3年前から提供されていて、基本的にはこの機能を使えばとくに労力なく移行できた。もちろんアプリによっては個別の移行作業が必要になるけれど、クイックスタートのおかげで基本的には古い端末と新しい端末を並べて移行の承認のような作業をするだけで済む。クイックスタートは iphone 同士を bluetooth 接続で繋ぐ。bluetooth 通信でもデータ移行できるそうだけど、wifi に比べると速度が遅いので256GiBなら3時間ぐらいかかる見通しらしい。icloud経由にするとwifiなので速度も速く15分程度で復元処理を完了できた。私の場合、電話、line、認証系アプリといったコアな機能の移行を1時間ほどで完了できた。一昔前に比べてかなり簡単になっているように感じた。&lt;/p>
&lt;h2 id="ストレッチ">ストレッチ&lt;/h2>
&lt;p>本当は田んぼに実家に帰っている予定だったので日曜日の夜からストレッチ。今日の開脚幅は開始前157cmで、ストレッチ後161cmだった。最近はまったくストレッチしないようになりつつあるのだけど、腰の張りのアンバランスさは解消されていて、トレーナーさん曰くそれはよい状態だと言えるらしい。ストレッチを受ける前から雨降りでストレッチを終えてから何をしようかふらふらとアーケードを散歩して、結局のところ、やることがなくて雨に振られながら帰ってきた。&lt;/p></content></item><item><title>備えあれば憂いなし</title><link>/diary/posts/2022/1004/</link><pubDate>Tue, 04 Oct 2022 15:06:16 +0900</pubDate><guid>/diary/posts/2022/1004/</guid><description>2時に寝て6時に起きた。眠り方がわからなくなってきた雰囲気。昨日に引き続き、淡々とリリース前の細かいバグ修正をしていた。フロントエンドの ux のよくないところを修正したりしていた。
m2 macbook air 購入 次のお仕事は東京出張もちょいちょい入る (自オフィスのデスクトップマシンで開発できない) ことからラップトップの開発マシンがあった方がよいなと気付いて M2 MacBook Air を購入した。2022年7月に販売開始されたそうなのでタイミングとしてはちょうどよかった。本当は macos である必要はない。linux が動くラップトップなら何でもよいのだけど、dell のラップトップをみても値段がそんなに安くない。数万円ぐらいの違いしか変わらないなら macbook にしようと思って決断した。1週間ほどで納品される。
いま macbook を使わなくなった理由の1つとしてバタフライキーボードが大きい。前職でも2台ほどキーボードのキー入力が一部受け付けなくなって交換してもらったりしていた。2016年モデルの macbook を持っているけど、もうバタフライキーボードを使いたくないという忌避感が強い。2019年からシザーキーボードが復活しているらしい。使ったことない他メーカーのラップトップに躊躇する理由もキーボードが気に入らないものだったらどうしようという不安がある。いまデスクトップマシンだから realforce の打鍵に慣れ親しんでしまい、キーボードの使い心地に敏感になっていると思う。
新しいお仕事、新しい挑戦、新しいマシン。気持ちを入れ替えて集中したい。
東京出張の準備 次のお仕事のキックオフのため、10月31日の週に1週間ほど東京出張しようと考えている。コロナ禍になってから約3年間ほとんど神戸を出ていない。大阪すら年に1-2回ぐらいしか行っていない。東京は約3年ぶり。新幹線やホテルの予約の仕方も忘れてしまった。せっかく行くので長い間、会っていない友だちや知人に挨拶できればと思う。</description><content>&lt;p>2時に寝て6時に起きた。眠り方がわからなくなってきた雰囲気。昨日に引き続き、淡々とリリース前の細かいバグ修正をしていた。フロントエンドの ux のよくないところを修正したりしていた。&lt;/p>
&lt;h2 id="m2-macbook-air-購入">m2 macbook air 購入&lt;/h2>
&lt;p>次のお仕事は東京出張もちょいちょい入る (自オフィスのデスクトップマシンで開発できない) ことからラップトップの開発マシンがあった方がよいなと気付いて &lt;a href="https://www.apple.com/jp/macbook-air/">M2 MacBook Air&lt;/a> を購入した。2022年7月に販売開始されたそうなのでタイミングとしてはちょうどよかった。本当は macos である必要はない。linux が動くラップトップなら何でもよいのだけど、dell のラップトップをみても値段がそんなに安くない。数万円ぐらいの違いしか変わらないなら macbook にしようと思って決断した。1週間ほどで納品される。&lt;/p>
&lt;p>いま macbook を使わなくなった理由の1つとしてバタフライキーボードが大きい。前職でも2台ほどキーボードのキー入力が一部受け付けなくなって交換してもらったりしていた。2016年モデルの macbook を持っているけど、もうバタフライキーボードを使いたくないという忌避感が強い。2019年からシザーキーボードが復活しているらしい。使ったことない他メーカーのラップトップに躊躇する理由もキーボードが気に入らないものだったらどうしようという不安がある。いまデスクトップマシンだから realforce の打鍵に慣れ親しんでしまい、キーボードの使い心地に敏感になっていると思う。&lt;/p>
&lt;p>新しいお仕事、新しい挑戦、新しいマシン。気持ちを入れ替えて集中したい。&lt;/p>
&lt;h2 id="東京出張の準備">東京出張の準備&lt;/h2>
&lt;p>次のお仕事のキックオフのため、10月31日の週に1週間ほど東京出張しようと考えている。コロナ禍になってから約3年間ほとんど神戸を出ていない。大阪すら年に1-2回ぐらいしか行っていない。東京は約3年ぶり。新幹線やホテルの予約の仕方も忘れてしまった。せっかく行くので長い間、会っていない友だちや知人に挨拶できればと思う。&lt;/p></content></item><item><title>シュレッダーを壊した</title><link>/diary/posts/2022/0721/</link><pubDate>Thu, 21 Jul 2022 07:20:21 +0900</pubDate><guid>/diary/posts/2022/0721/</guid><description>23時に寝て6時に起きた。今日は淡々と web api の実装をしてた。
シュレッダーの解体結果から 少し前に誤った書類を裁断していて用紙を3-4枚を一度にやろうとして力いっぱいまわしたら空回りするようになってしまった。メーカーのために取説には1-2枚とあるのでキャパシティ以上の負荷をかけた私が悪い。シュレッダーの刃は頑強だと実感していた分だけ別のところに弱点があることを失念していた。分解して歯車の部分をみてみると、歯車の一部が欠けていることがわかった。刃は頑強だが、どうやら歯車はそうではなかった。こんな小さい歯車が欠けるんだということがわかった。
このシュレッダーは2020年1月25日に購入してもう2年以上使っていて、手動で手回ししながら裁断する。ぷちぷちをやるような気持ちになるのでちょっとしたストレス解消にもなってた。購入時に amazon の悪いレビューには空回りするようになるみたいなコメントもあったんだけど、私はこれまで2年以上問題なく使えてきた。裁断するものの量と負荷が蓄積していくうちに歯車が壊れて空回りするようになるのだろうなと、今回の失敗から理解できた。</description><content>&lt;p>23時に寝て6時に起きた。今日は淡々と web api の実装をしてた。&lt;/p>
&lt;h2 id="シュレッダーの解体結果から">シュレッダーの解体結果から&lt;/h2>
&lt;p>少し前に誤った書類を裁断していて用紙を3-4枚を一度にやろうとして力いっぱいまわしたら空回りするようになってしまった。メーカーのために取説には1-2枚とあるのでキャパシティ以上の負荷をかけた私が悪い。シュレッダーの刃は頑強だと実感していた分だけ別のところに弱点があることを失念していた。分解して歯車の部分をみてみると、歯車の一部が欠けていることがわかった。刃は頑強だが、どうやら歯車はそうではなかった。こんな小さい歯車が欠けるんだということがわかった。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2022/0721_shredder.jpg"/>
&lt;/figure>
&lt;p>このシュレッダーは2020年1月25日に購入してもう2年以上使っていて、手動で手回ししながら裁断する。ぷちぷちをやるような気持ちになるのでちょっとしたストレス解消にもなってた。購入時に amazon の悪いレビューには空回りするようになるみたいなコメントもあったんだけど、私はこれまで2年以上問題なく使えてきた。裁断するものの量と負荷が蓄積していくうちに歯車が壊れて空回りするようになるのだろうなと、今回の失敗から理解できた。&lt;/p></content></item><item><title>電源アダプター入手</title><link>/diary/posts/2022/0102/</link><pubDate>Sun, 02 Jan 2022 09:31:47 +0900</pubDate><guid>/diary/posts/2022/0102/</guid><description>3時ぐらいまで本を読んでて、それから寝て8時に起きた。
USB-C の電源アダプター 大晦日、高速バスの乗車待ちの列に並んでいるときにふと気付いた。macbook の電源アダプターを持ってくるのを忘れた。その後の予定も詰まっていたので今更取りに帰るわけにもいかない。これまで10数年帰省してきて1度も忘れたことはなかったが、人間の注意力に頼っていると、いつかは失敗するというよい事例だ。完璧に自分の不注意で電源アダプターをバッグに入れ忘れた。反省はあとでやるとして、列に並びながら amazon のサイトをスマホで開いていた。検索すると、手ごろな価格帯で類似品がいくつか出てくる。調査する時間の余裕がなかったのであまり迷わず互換性があると書かれたものを選択した。3,588円。12月31日の15時過ぎに注文して1月2日の9時半に実家で受け取った。見た目は macbook の電源アダプターとほぼ同じ。この日記は購入した電源アダプターにより充電開始した macbook で書くことができた。お正月にも関わらず届けてくれた物流センターや宅急便の関係者に感謝。
バッタを倒しにアフリカへ 時間があるのと中盤を過ぎたのもあって一気に「第7章彷徨える博士」「第8章「神の罰」に挑む」「第9章我、サハラに死せず」「あとがき」と読み終えた。本書を読み終えてから著者のブログ記事である 『バッタを倒しにアフリカへ』行き、必殺技を見つけてきました を読むとまた違った印象を受ける。本書は著者の研究成果として論文を書くための、下積みの期間の物語と言える。アフリカへ行き、フィールドワークを通じてバッタのデータを収集し、研究資金が底をつきながらも著者の熱意や活動により、研究資金を得て、研究に専念するための環境を、文字通り、自ら作り上げていったという、言わば、著者がこれから評価を得るであろう研究の序章のような位置付けになる。あとがきでも研究内容の詳細は意図的に書いていないと書かれており、それは論文として提出できていれば詳細を書けるが、執筆時点では論文を完成させていなかったので詳細を伏せたとある。
著者は研究資金を得る活動の一環として広報活動やネット上の露出もあったため、そういう活動は時間を取られるため、研究に集中できない期間もあったことが伺える。2018年からSNS断ちして3年間、研究に没頭して論文を仕上げたというのも理解できる。また SNS でファンが増えるにつれ、誹謗中傷も増え、多くの励ましよりも数少ない誹謗中傷で傷つくといった話題も出てくる。私も SNS は時間の無駄だと考え、なるべく利用を減らそうとしているが、暇なときや時間つぶしにはよいサービスであることも確かでなかなか SNS と縁切りするところまではいけていない。
閑話休題。後半は著者の熱意に感情移入して研究がうまくいくといいなと応援しながら読み進めていた。研究がうまくいきそうな雰囲気のところで本書が終わってしまう。おそらく論文発表を一通り終えたら詳細も含めて続編を書いてくれるようだが、それはもう数年、もしかしたら10年以上先のことになるのかもしれない。著者は1980年生まれと私と1つしか違わない。40歳を過ぎて、私も周りもミドルエイジクライシスに悩む人たちをみかけるようになった。本当に価値のあることや世の中の役に立つことを研究できるのは著者にとっても幸せなことだろうというのがひしひしと伝わってくる。誰でもできるお仕事は基本的に受けるつもりはなく、自分の目指すキャリアにつながるお仕事、もしくはやる価値があると自ら判断したお仕事しかしないようにこの1年で方針を調整してきた。なにか新しいことに挑戦してみようという人にとって本書は勇気をもらえる内容だったと思う。
お風呂 実家の近くで うずしお温泉 という温泉が湧いていて、実家に帰ると銭湯へ行く感覚で温泉に入っていたりする。昔からあまり温泉を特別なものに感じていないのは地元にあって珍しくなかったからかもしれない。夜に入りに行って出てから少しストレッチをしてた。</description><content>&lt;p>3時ぐらいまで本を読んでて、それから寝て8時に起きた。&lt;/p>
&lt;h2 id="usb-c-の電源アダプター">USB-C の電源アダプター&lt;/h2>
&lt;p>大晦日、高速バスの乗車待ちの列に並んでいるときにふと気付いた。macbook の電源アダプターを持ってくるのを忘れた。その後の予定も詰まっていたので今更取りに帰るわけにもいかない。これまで10数年帰省してきて1度も忘れたことはなかったが、人間の注意力に頼っていると、いつかは失敗するというよい事例だ。完璧に自分の不注意で電源アダプターをバッグに入れ忘れた。反省はあとでやるとして、列に並びながら amazon のサイトをスマホで開いていた。検索すると、手ごろな価格帯で類似品がいくつか出てくる。調査する時間の余裕がなかったのであまり迷わず互換性があると書かれたものを選択した。3,588円。12月31日の15時過ぎに注文して1月2日の9時半に実家で受け取った。見た目は macbook の電源アダプターとほぼ同じ。この日記は購入した電源アダプターにより充電開始した macbook で書くことができた。お正月にも関わらず届けてくれた物流センターや宅急便の関係者に感謝。&lt;/p>
&lt;h2 id="バッタを倒しにアフリカへ">バッタを倒しにアフリカへ&lt;/h2>
&lt;p>時間があるのと中盤を過ぎたのもあって一気に「第7章彷徨える博士」「第8章「神の罰」に挑む」「第9章我、サハラに死せず」「あとがき」と読み終えた。本書を読み終えてから著者のブログ記事である &lt;a href="https://otokomaeno.hatenablog.com/entry/2021/10/30/170343">『バッタを倒しにアフリカへ』行き、必殺技を見つけてきました&lt;/a> を読むとまた違った印象を受ける。本書は著者の研究成果として論文を書くための、下積みの期間の物語と言える。アフリカへ行き、フィールドワークを通じてバッタのデータを収集し、研究資金が底をつきながらも著者の熱意や活動により、研究資金を得て、研究に専念するための環境を、文字通り、自ら作り上げていったという、言わば、著者がこれから評価を得るであろう研究の序章のような位置付けになる。あとがきでも研究内容の詳細は意図的に書いていないと書かれており、それは論文として提出できていれば詳細を書けるが、執筆時点では論文を完成させていなかったので詳細を伏せたとある。&lt;/p>
&lt;p>著者は研究資金を得る活動の一環として広報活動やネット上の露出もあったため、そういう活動は時間を取られるため、研究に集中できない期間もあったことが伺える。2018年からSNS断ちして3年間、研究に没頭して論文を仕上げたというのも理解できる。また SNS でファンが増えるにつれ、誹謗中傷も増え、多くの励ましよりも数少ない誹謗中傷で傷つくといった話題も出てくる。私も SNS は時間の無駄だと考え、なるべく利用を減らそうとしているが、暇なときや時間つぶしにはよいサービスであることも確かでなかなか SNS と縁切りするところまではいけていない。&lt;/p>
&lt;p>閑話休題。後半は著者の熱意に感情移入して研究がうまくいくといいなと応援しながら読み進めていた。研究がうまくいきそうな雰囲気のところで本書が終わってしまう。おそらく論文発表を一通り終えたら詳細も含めて続編を書いてくれるようだが、それはもう数年、もしかしたら10年以上先のことになるのかもしれない。著者は1980年生まれと私と1つしか違わない。40歳を過ぎて、私も周りもミドルエイジクライシスに悩む人たちをみかけるようになった。本当に価値のあることや世の中の役に立つことを研究できるのは著者にとっても幸せなことだろうというのがひしひしと伝わってくる。誰でもできるお仕事は基本的に受けるつもりはなく、自分の目指すキャリアにつながるお仕事、もしくはやる価値があると自ら判断したお仕事しかしないようにこの1年で方針を調整してきた。なにか新しいことに挑戦してみようという人にとって本書は勇気をもらえる内容だったと思う。&lt;/p>
&lt;h2 id="お風呂">お風呂&lt;/h2>
&lt;p>実家の近くで &lt;a href="http://awajiinfo.com/uzusio-onsen/">うずしお温泉&lt;/a> という温泉が湧いていて、実家に帰ると銭湯へ行く感覚で温泉に入っていたりする。昔からあまり温泉を特別なものに感じていないのは地元にあって珍しくなかったからかもしれない。夜に入りに行って出てから少しストレッチをしてた。&lt;/p></content></item><item><title>新型コロナワクチン接種証明書アプリを使ってみた</title><link>/diary/posts/2021/1220/</link><pubDate>Mon, 20 Dec 2021 20:36:47 +0900</pubDate><guid>/diary/posts/2021/1220/</guid><description>23時に寝て1時過ぎに起きて4時半に起きて6時半に起きた。寝てないわけじゃないけど、うまく眠れなくなった。
スマホのマイナンバーカードの読み取りは位置がシビア ワーケーションで ふるさと応援！ひょうごを旅しようキャンペーン を利用する条件の1つにワクチンの接種証明を提示する必要がある。ちょうどデジタル庁から 新型コロナワクチン接種証明書アプリ がリリースされた。このアプリを使えば接種の原本の書類を持っていかなくて済む。
朝からアプリをインストールしてマイナンバーカードを使って接種証明書を発行しようとしたのだけど、マイナンバーカードの読み取りができない。エラーも表示されなくてうんともすんとも動かない。パスワードがロックされていたらエラーが表示されるように思えるのでなんかおかしい状況だった。そのことをツィートしたら、とのきさんがマイナンバーカードの読み取りはシビアで位置があっていないと読み取りできないとアドバイスしてくれた。
スマホ機種によってNFCの搭載位置やカードの当て方などで読み取りが非常にシビアみたいです
NFCチップの位置をスマホとカードで正確に一致させてギリギリ読みとれた、など聞いたことがあります
&amp;mdash; tonoki(demobird) (@tonoki) December 20, 2021 午後から JPKIMobile を用いた有効性の確認方法 を確認しながら再挑戦した。ここに書いてあるようにちょっと離したり、カードの位置を少しずつずらして調整したりしてたら読み取りできた。この時点でパスワードロックではないことを確認できた。
iPhone端末にICカードをセットします。画面が変わらないようであれば、一度ICカードを離してから再度セットしてください。
JPKIMobile で読み取りできたので同じ要領で接種証明書アプリでもやってみたら今度はすんなりと読み取りできて発行できた。位置さえあえば読み取りはすぐできた。今朝はたぶん机に置いて位置を調整せず、読み取りには時間がかかるのかな？とずっと動かさず待っていたのがよくなかったみたい。とのきさんのおかげで区役所に行く無駄な時間を削減できた。感謝。</description><content>&lt;p>23時に寝て1時過ぎに起きて4時半に起きて6時半に起きた。寝てないわけじゃないけど、うまく眠れなくなった。&lt;/p>
&lt;h2 id="スマホのマイナンバーカードの読み取りは位置がシビア">スマホのマイナンバーカードの読み取りは位置がシビア&lt;/h2>
&lt;p>ワーケーションで &lt;a href="https://www.hyogo-tourism.jp/furusato-ouen/">ふるさと応援！ひょうごを旅しようキャンペーン&lt;/a> を利用する条件の1つにワクチンの接種証明を提示する必要がある。ちょうどデジタル庁から &lt;a href="https://www.digital.go.jp/policies/posts/vaccinecert">新型コロナワクチン接種証明書アプリ&lt;/a> がリリースされた。このアプリを使えば接種の原本の書類を持っていかなくて済む。&lt;/p>
&lt;p>朝からアプリをインストールしてマイナンバーカードを使って接種証明書を発行しようとしたのだけど、マイナンバーカードの読み取りができない。エラーも表示されなくてうんともすんとも動かない。パスワードがロックされていたらエラーが表示されるように思えるのでなんかおかしい状況だった。そのことをツィートしたら、とのきさんがマイナンバーカードの読み取りはシビアで位置があっていないと読み取りできないとアドバイスしてくれた。&lt;/p>
&lt;blockquote class="twitter-tweet">&lt;p lang="ja" dir="ltr">スマホ機種によってNFCの搭載位置やカードの当て方などで読み取りが非常にシビアみたいです&lt;br>NFCチップの位置をスマホとカードで正確に一致させてギリギリ読みとれた、など聞いたことがあります&lt;/p>&amp;mdash; tonoki(demobird) (@tonoki) &lt;a href="https://twitter.com/tonoki/status/1472760754332127235?ref_src=twsrc%5Etfw">December 20, 2021&lt;/a>&lt;/blockquote>
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script>
&lt;p>午後から &lt;a href="https://www.jpki.go.jp/download/howto_iphone/certificate_p02.html">JPKIMobile を用いた有効性の確認方法&lt;/a> を確認しながら再挑戦した。ここに書いてあるようにちょっと離したり、カードの位置を少しずつずらして調整したりしてたら読み取りできた。この時点でパスワードロックではないことを確認できた。&lt;/p>
&lt;blockquote>
&lt;p>iPhone端末にICカードをセットします。画面が変わらないようであれば、一度ICカードを離してから再度セットしてください。&lt;/p>
&lt;/blockquote>
&lt;p>JPKIMobile で読み取りできたので同じ要領で接種証明書アプリでもやってみたら今度はすんなりと読み取りできて発行できた。位置さえあえば読み取りはすぐできた。今朝はたぶん机に置いて位置を調整せず、読み取りには時間がかかるのかな？とずっと動かさず待っていたのがよくなかったみたい。とのきさんのおかげで区役所に行く無駄な時間を削減できた。感謝。&lt;/p></content></item><item><title>ASUS ROG Zephyrus G15 GA503QR</title><link>/diary/posts/2021/1103/</link><pubDate>Wed, 03 Nov 2021 09:55:10 +0900</pubDate><guid>/diary/posts/2021/1103/</guid><description>1時に寝て6時に起きた。朝活があると起きれるな。
朝活: ミクロ経済学入門の入門 【三宮.dev オンライン】リモート朝活もくもく会 で第5章の市場均衡と第6章の外部性を読んだ。
まず第5章から。用語を次にまとめる。
完全市場: 誰もがプライステイカー (自分の生産量が価格に影響を与えられない) である市場 社会的余剰: 消費者余剰 (価格より多めに払ってよいと考える金額の和) と生産者余剰 (利潤の和) を足し合わせたもの 従量税: 販売する量に応じて一定の金額を納める税 例) たばこ税、酒税、揮発油税 (ガソリン) これまでの章で学んだ内容から価格は需要曲線Dと供給曲線Sが交差する点p*になる。この価格を 市場均衡価格 と呼ぶ。市場全体のよさを測るモノサシとして 社会的余剰 を使う。市場均衡価格に対して価格を上げたり下げたりしたときにできる社会的余剰の差額を 死荷重 と呼ぶ。次の図の C の面積に相当する。
図から市場均衡価格は社会的余剰を最大化させた価格だとわかる。
生産者や消費者に従量税を課すと市場にどのようなことが起きるかを考察する。納税方法として、生産者が納税する方式 (価格に税を含める) と消費者が納税する方式 (価格と税は別) があるが、どちらも社会的余剰が C の分だけ減少するグラフとなり、社会的損失が発生していると言える。余剰の視点からはどちらの方式も全く同じだが、政府が徴税するしやすさの視点だと、相対的に数の少ない生産者から納税する方が管理しやすい。
狙い撃ち課税のダメな点として酒税を例にあげている。ビールの酒税を逃れるために、メーカーは1990年代に発泡酒、2003年に第3のビールを開発した。2016年時点での350ml (1缶) あたりの酒税は、ビール77円、発泡酒47円、第3のビール28円となった。同年、政府はすべて55円へ統一していく方針を発表した。ビールへの従量税が与えた社会的損失として死荷重だけでなく、発泡酒や第3のビールのような劣化ビールの技術開発のコストがあげられる。特定の品目を狙い撃つ従量税は社会的損失を生みやすいと述べられてる。
次に第6章から。用語を次にまとめる。
負の外部性: ある生産活動が他者へマイナスの影響を与える 例) 公害や花粉症など 正の外部生: ある生産活動が市場取引を経ずにプラスの影響を与える 例) 電鉄会社が駅や路線を開通させるとその地域に経済効果をもたらすなど 限界被害: 企業の生産活動が住民に与える被害の生産量に対する総和の金額 ピグー税: 住民に補償を与える環境税 ネットワーク外部性: SNS など、サービスの価値がユーザー数に大きく既存する性質 調整ゲーム: 何を選ぶかよりも、他人と同じものを選ぶことが重要な状況 ナッシュ均衡: 自分の行動を変えると損になるので誰も行動を変えない状況 企業の生産活動が住民に被害をもたらせていた場合、その被害をピグー税を通じて企業が支払う。これを 外部性の内部化 と呼ぶ。負の外部性は社会問題となるが、対して正の外部性は社会問題とならない。
調整ゲームにおいて、一方がもう一方よりも好ましい状態を パレート優位、またその逆の状態を パレート劣位 と呼ぶ。ネットワーク外部性においては優勝劣敗が必ずしも正しいとは限らない。先行者としてユーザー数を獲得し、ナッシュ均衡の座をつかむことが勝ちにつながる。
ASUS ROG Zephyrus G15 GA503QR 今日届いたのでセットアップだけ終えた。Windows アップデートすると次々に更新が出てくる仕組みは昔と変わってなかった。4回再起動した。</description><content>&lt;p>1時に寝て6時に起きた。朝活があると起きれるな。&lt;/p>
&lt;h2 id="朝活-ミクロ経済学入門の入門">朝活: ミクロ経済学入門の入門&lt;/h2>
&lt;p>&lt;a href="https://kobe-sannomiya-dev.connpass.com/event/229642/">【三宮.dev オンライン】リモート朝活もくもく会&lt;/a> で第5章の市場均衡と第6章の外部性を読んだ。&lt;/p>
&lt;p>まず第5章から。用語を次にまとめる。&lt;/p>
&lt;ul>
&lt;li>完全市場: 誰もがプライステイカー (自分の生産量が価格に影響を与えられない) である市場&lt;/li>
&lt;li>社会的余剰: 消費者余剰 (価格より多めに払ってよいと考える金額の和) と生産者余剰 (利潤の和) を足し合わせたもの&lt;/li>
&lt;li>従量税: 販売する量に応じて一定の金額を納める税
&lt;ul>
&lt;li>例) たばこ税、酒税、揮発油税 (ガソリン)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>これまでの章で学んだ内容から価格は需要曲線Dと供給曲線Sが交差する点p*になる。この価格を &lt;strong>市場均衡価格&lt;/strong> と呼ぶ。市場全体のよさを測るモノサシとして &lt;strong>社会的余剰&lt;/strong> を使う。市場均衡価格に対して価格を上げたり下げたりしたときにできる社会的余剰の差額を &lt;strong>死荷重&lt;/strong> と呼ぶ。次の図の C の面積に相当する。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2021/1103_market-equilibrium.png"/>
&lt;/figure>
&lt;p>図から市場均衡価格は社会的余剰を最大化させた価格だとわかる。&lt;/p>
&lt;p>生産者や消費者に従量税を課すと市場にどのようなことが起きるかを考察する。納税方法として、生産者が納税する方式 (価格に税を含める) と消費者が納税する方式 (価格と税は別) があるが、どちらも社会的余剰が C の分だけ減少するグラフとなり、社会的損失が発生していると言える。余剰の視点からはどちらの方式も全く同じだが、政府が徴税するしやすさの視点だと、相対的に数の少ない生産者から納税する方が管理しやすい。&lt;/p>
&lt;figure>&lt;img src="/diary/diary/img/2021/1103_specific-duty.png"/>
&lt;/figure>
&lt;p>狙い撃ち課税のダメな点として酒税を例にあげている。ビールの酒税を逃れるために、メーカーは1990年代に発泡酒、2003年に第3のビールを開発した。2016年時点での350ml (1缶) あたりの酒税は、ビール77円、発泡酒47円、第3のビール28円となった。同年、政府はすべて55円へ統一していく方針を発表した。ビールへの従量税が与えた社会的損失として死荷重だけでなく、発泡酒や第3のビールのような劣化ビールの技術開発のコストがあげられる。特定の品目を狙い撃つ従量税は社会的損失を生みやすいと述べられてる。&lt;/p>
&lt;p>次に第6章から。用語を次にまとめる。&lt;/p>
&lt;ul>
&lt;li>負の外部性: ある生産活動が他者へマイナスの影響を与える
&lt;ul>
&lt;li>例) 公害や花粉症など&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>正の外部生: ある生産活動が市場取引を経ずにプラスの影響を与える
&lt;ul>
&lt;li>例) 電鉄会社が駅や路線を開通させるとその地域に経済効果をもたらすなど&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>限界被害: 企業の生産活動が住民に与える被害の生産量に対する総和の金額&lt;/li>
&lt;li>ピグー税: 住民に補償を与える環境税&lt;/li>
&lt;li>ネットワーク外部性: SNS など、サービスの価値がユーザー数に大きく既存する性質&lt;/li>
&lt;li>調整ゲーム: 何を選ぶかよりも、他人と同じものを選ぶことが重要な状況&lt;/li>
&lt;li>ナッシュ均衡: 自分の行動を変えると損になるので誰も行動を変えない状況&lt;/li>
&lt;/ul>
&lt;p>企業の生産活動が住民に被害をもたらせていた場合、その被害をピグー税を通じて企業が支払う。これを &lt;strong>外部性の内部化&lt;/strong> と呼ぶ。負の外部性は社会問題となるが、対して正の外部性は社会問題とならない。&lt;/p>
&lt;p>調整ゲームにおいて、一方がもう一方よりも好ましい状態を &lt;strong>パレート優位&lt;/strong>、またその逆の状態を &lt;strong>パレート劣位&lt;/strong> と呼ぶ。ネットワーク外部性においては優勝劣敗が必ずしも正しいとは限らない。先行者としてユーザー数を獲得し、ナッシュ均衡の座をつかむことが勝ちにつながる。&lt;/p>
&lt;h2 id="asus-rog-zephyrus-g15-ga503qr">ASUS ROG Zephyrus G15 GA503QR&lt;/h2>
&lt;p>今日届いたのでセットアップだけ終えた。Windows アップデートすると次々に更新が出てくる仕組みは昔と変わってなかった。4回再起動した。&lt;/p>
&lt;p>前々から Windows マシンがほしいと思っていて、次のお仕事が決まったので思い切って購入することにした。買おうかどうしようかを迷っている心の中の動きのコストというか、検討事項としてずっと残り続けるのもあまり生産的ではないなと最近は思うようになっていた。私が Widnows マシンが必要になった背景はこれら。&lt;/p>
&lt;ul>
&lt;li>行政の電子申請・手続きはまだまだ Windows アプリが主流&lt;/li>
&lt;/ul>
&lt;p>最近は Windows アプリ版とは別に、Web 版というブラウザベースのアプリケーションが提供されつつあるが、まだまだ黎明期で一部の機能しか対応してなかったり、不具合で macos だと動きませんと障害情報が出てたり、ひどい場合だとブラウザベースなのに Linux はサポートしてませんとか言われたりする。毎年この申請は Web 版で対応したやろか？と調べて、やっぱりまだできんかったと紙ベースの申請に切り替えるときの、調べるコスト (とがっかりするコスト) がしんどくなった。&lt;/p>
&lt;ul>
&lt;li>VR 系アプリケーションのプラットフォームは Windows&lt;/li>
&lt;/ul>
&lt;p>Facebook 社が Meta 社になって、ややメタバースが盛り上がりをみせつつある。&lt;a href="https://www.oculus.com/quest-2/">Oculus Quest 2&lt;/a> を買ったものの、VR 系アプリケーションは Windows がメインターゲットらしく macos や linux は、現時点ではサポートしていないことが多い。&lt;a href="https://www.oculus.com/accessories/oculus-link/">Oclus Link&lt;/a> も Windows しかサポートしていない。せっかくヘッドマウントディスプレイを購入したので、そのデバイスをもっと活用するためにも Windows マシンがあった方がよいと考えた。&lt;/p>
&lt;ul>
&lt;li>Microsoft Teams を使いたい&lt;/li>
&lt;/ul>
&lt;p>私の周りでも &lt;a href="https://www.microsoft.com/ja-jp/microsoft-teams/group-chat-software">Microsoft Teams&lt;/a> を使うことが増えてきた。ゲストアカウントでも会議できるのでエージェントと打ち合わせするときは Teams を使ったりしていた。社内システムを MS 系のプロダクトで固めている企業は普通に Teams を使っているし、顧問さんから聞く話しでも Teams (と MS 製品とのインテグレーション) の評判はよい。チャットツールを対象としたプロダクトを作っていくにあたり、今後は Slack だけではなく Teams 対応も必須になっていく気がする。実際に私も Slack/Teams 両対応のプロダクトもみかけるようになりつつある。Microsoft Teams を Linux で使えるかどうかは調べてないのでわからないけど、Windows マシンが1台あった方が手っ取り早いと考えた。&lt;/p>
&lt;ul>
&lt;li>オフィスと自宅にパソコンを据え置きたい&lt;/li>
&lt;/ul>
&lt;p>オフィスでは普段デスクトップマシンを使いつつ、macbook をサブマシンとして使っている。自宅で作業するときは macbook を持ち帰ったりしていた。人間はどんどん怠惰になるのでこの持ち運びが面倒になってきたり、持ち帰ってないときにパソコンで作業したくなったりしたときは、オフィスに出かけるといったことをするようになってストレスにもなってた。徒歩でも15分あれば行ける場所にオフィスがあるので、タブレットやスマホでの作業効率を考えたらオフィスに行ってしまう。ラップトップを自宅とオフィスに置いておけるといいなぁとは薄々思っていた。これを機にオフィスには asus マシンを、自宅には macbook を据え置くようにしたい。&lt;/p>
&lt;h2 id="データ指向アプリケーションデザイン">データ指向アプリケーションデザイン&lt;/h2>
&lt;p>9.4 分散トランザクションと合意の前半の2つの節を読んだ。&lt;/p>
&lt;ul>
&lt;li>9.4.1 アトミックなコミットと2相コミット（2PC）&lt;/li>
&lt;li>9.4.2 分散トランザクションの実際&lt;/li>
&lt;/ul>
&lt;p>分散トランザクションという扱っているテーマが難しいけど、書いてある内容は1つずつ追っていけば理解できるのでそこまで難しくはない。一言で分散トランザクションと言っても次の2つに大別される。&lt;/p>
&lt;ul>
&lt;li>データベース内部の分散トランザクション&lt;/li>
&lt;li>ヘテロジニアスな分散トランザクション&lt;/li>
&lt;/ul>
&lt;p>前者は特定のデータベースシステムだけで動くので相対的に最適化ができたり、うまく運用できるケースもある。後者は複数のシステムを介した汎用の仕組みになるので2相コミットのような プロトコル を使って &lt;strong>アトミックなコミット&lt;/strong> を保証しなければならない。2PC はコーディネータの障害が運用上の大きな問題となることがわかっている。ヘテロジニアスな技術間での2相コミットの標準を &lt;strong>X/Open XA（eXtended Architecture の省略）&lt;/strong> と呼ぶ。多くの RDB やメッセージブローカーでもサポートされているらしい。Java EE アプリケーションの世界だと Java Transaction API （ JTA ）で実装されているらしい。全く聞いたことがなくて、私はいままでこの技術に関わることがなかった。&lt;/p></content></item><item><title>ワイヤレス REALFORCE</title><link>/diary/posts/2021/1102/</link><pubDate>Tue, 02 Nov 2021 09:22:30 +0900</pubDate><guid>/diary/posts/2021/1102/</guid><description>3時に寝て7時に起きた。ウォーキングから帰ってきて0時にベッドに入ったものの、選挙結果の総括記事を読んだり、宇宙よりも遠い場所 をみたりしていたら3時になってしまった。全13話すべてみた。どちらかと言えばおもしろかったけど、ツィートみて期待値が高かった分、そこまで私の中に響くものはなかったかな。南極へ行く道中や南極の生活がわりと遊んでいるようにみえてあまり大変そうにみえなかった。とはいえ、実際の船上や南極でもやることなくて娯楽ないと持て余すのかなとも思えた。南極地域観測隊 って現実にあるんだなとみてた。
僕はだいたいプログラミングしてるときは既に内容を知ってるアニメを常に流してるんですが今週はまた「宇宙よりも遠い場所」を観ていました。これほどまでに13話すべて足すところも引くところもない完璧な作品は他に早々思いつかないです。
&amp;mdash; 父 (@fushiroyama) October 28, 2021 データ指向アプリケーションデザイン 9.3 順序の保証を読んだ。
データベースや分散システムにおいて順序付けは重要な基本的概念である。順序と線形化可能性、合意との間には深い関係がある。順序付けが重要なのは 因果関係 を保つのに役立つことがあげられる。
全順序 があれば任意の2つの数を比較して大小関係を必ず判断できる。たとえば自然数には全順序があると言える。線形化可能なシステムは操作に全順序がある。一方で因果律には並行という概念があり、どちらが先に行われたかが重要ではない場合に操作が並行に行われたとみなせる。したがって、因果律は全順序ではなく、 半順序 を定義すると言える。半順序とは、大小関係を比較できる場合もあるしできない場合もあることを指す。
因果律に基づく順序と線形化可能性との関係は、線形化可能性は因果関係を 暗に含む といえる。線形化可能性を持つシステムは、因果律を正しく保持する。しかし、システムを線形化可能にすればパフォーマンスや可用性が損なわれる可能性がある。特にネットワークの遅延が大きい（たとえば地理的に分散している）システムで問題になる。そのため、分散データシステムの中には線形化可能性をあきらめることでパフォーマンスを向上させたものの、扱いが難しいものもある。因果律を保持する方法は、線形化可能性が唯一というわけではなく他の方法もある。多くの場合、システムに本当に必要なのは線形化可能性ではなく因果律における一貫性だけであり、これは線形化可能性よりも効率の良い実装が可能となる。
因果律における一貫性を保持する方法として次のものがあげられている。
シーケンス番号またはタイムスタンプ ランポートタイムスタンプ（Lamport timestamp） しかし、分散システムではネットワークを介して他のノードの状態を確認しないと因果律の一貫性を確定できない。たとえシングルリーダーアプリケーションであっても、リーダーに障害が発生したときにリーダーのフェイルオーバーが必要となる。この問題は 全順序のブロードキャスト と呼ばれる。ZooKeeper や etcd のような合意サービスが全順序ブロードキャストを実装している。
詳細は省くが、ネットワークを介した分散システムで線形化可能な compare-and-set （あるいは increment-and-get ）を実装しようとすると、必然的に合意アルゴリズムに行き着く。これらと全順序ブロードキャストは等価であることが証明できる。したがって、これらの問題のいずれかを解決できれば、他方の問題の解決策に変換できるという点は重大な知見である。
REALFORCE のワイヤレスモデル ユーザーから待望されていた REALFORCE のワイヤレスモデルがとうとう発売された。
高級キーボードREALFORCEから待望のワイヤレス機「R3」が登場、見どころは？ 先週から amazon で予約販売を受け付けていたので REALFORCE 東プレ R3 キーボード 静音 ハイブリッドモデル 日本語配列 91キー ブラック R3HC12 を予約して、本日届いた。私はとくに必要ないけど、bluetooth のマルチペアリングに対応していて最大4つまで接続できる。オフィスの机はそこそこ広いけれど、本とラップトップとモニター2台置いたらスペースが埋まってしまっている。ご飯を食べるときや書類を作成するときにキーボードを立てかけたりしてスペースを確保していて不便に感じていた。
ubuntu 環境での bluetooth の設定に少し手こずった。GUI の設定マネージャー (blueman) でペアリングしようとしても失敗する。キーボードの情報は取得できるけど、ペアリングは失敗する。試しに macos でペアリングしてみたらパスキーの入力画面が表示されて、6桁の数字を入力して ENTER した後に接続するとペアリングできた。blueman だとパスキーが表示されないなと気付いてググってたら [SOLVED] Bluetooth keyboard: Unable to pair (authentication timeout) を見かけて、bluetoothctl でも設定できそうなのでやってみた。</description><content>&lt;p>3時に寝て7時に起きた。ウォーキングから帰ってきて0時にベッドに入ったものの、選挙結果の総括記事を読んだり、&lt;a href="http://yorimoi.com/story/">宇宙よりも遠い場所&lt;/a> をみたりしていたら3時になってしまった。全13話すべてみた。どちらかと言えばおもしろかったけど、ツィートみて期待値が高かった分、そこまで私の中に響くものはなかったかな。南極へ行く道中や南極の生活がわりと遊んでいるようにみえてあまり大変そうにみえなかった。とはいえ、実際の船上や南極でもやることなくて娯楽ないと持て余すのかなとも思えた。&lt;a href="https://www.nipr.ac.jp/antarctic/">南極地域観測隊&lt;/a> って現実にあるんだなとみてた。&lt;/p>
&lt;blockquote class="twitter-tweet">&lt;p lang="ja" dir="ltr">僕はだいたいプログラミングしてるときは既に内容を知ってるアニメを常に流してるんですが今週はまた「宇宙よりも遠い場所」を観ていました。これほどまでに13話すべて足すところも引くところもない完璧な作品は他に早々思いつかないです。&lt;/p>&amp;mdash; 父 (@fushiroyama) &lt;a href="https://twitter.com/fushiroyama/status/1453610090632663048?ref_src=twsrc%5Etfw">October 28, 2021&lt;/a>&lt;/blockquote>
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script>
&lt;h2 id="データ指向アプリケーションデザイン">データ指向アプリケーションデザイン&lt;/h2>
&lt;p>9.3 順序の保証を読んだ。&lt;/p>
&lt;blockquote>
&lt;p>データベースや分散システムにおいて順序付けは重要な基本的概念である。順序と線形化可能性、合意との間には深い関係がある。順序付けが重要なのは &lt;strong>因果関係&lt;/strong> を保つのに役立つことがあげられる。&lt;/p>
&lt;p>&lt;strong>全順序&lt;/strong> があれば任意の2つの数を比較して大小関係を必ず判断できる。たとえば自然数には全順序があると言える。線形化可能なシステムは操作に全順序がある。一方で因果律には並行という概念があり、どちらが先に行われたかが重要ではない場合に操作が並行に行われたとみなせる。したがって、因果律は全順序ではなく、 &lt;strong>半順序&lt;/strong> を定義すると言える。半順序とは、大小関係を比較できる場合もあるしできない場合もあることを指す。&lt;/p>
&lt;p>因果律に基づく順序と線形化可能性との関係は、線形化可能性は因果関係を &lt;strong>暗に含む&lt;/strong> といえる。線形化可能性を持つシステムは、因果律を正しく保持する。しかし、システムを線形化可能にすればパフォーマンスや可用性が損なわれる可能性がある。特にネットワークの遅延が大きい（たとえば地理的に分散している）システムで問題になる。そのため、分散データシステムの中には線形化可能性をあきらめることでパフォーマンスを向上させたものの、扱いが難しいものもある。因果律を保持する方法は、線形化可能性が唯一というわけではなく他の方法もある。多くの場合、システムに本当に必要なのは線形化可能性ではなく因果律における一貫性だけであり、これは線形化可能性よりも効率の良い実装が可能となる。&lt;/p>
&lt;p>因果律における一貫性を保持する方法として次のものがあげられている。&lt;/p>
&lt;ul>
&lt;li>シーケンス番号またはタイムスタンプ&lt;/li>
&lt;li>ランポートタイムスタンプ（Lamport timestamp）&lt;/li>
&lt;/ul>
&lt;p>しかし、分散システムではネットワークを介して他のノードの状態を確認しないと因果律の一貫性を確定できない。たとえシングルリーダーアプリケーションであっても、リーダーに障害が発生したときにリーダーのフェイルオーバーが必要となる。この問題は &lt;strong>全順序のブロードキャスト&lt;/strong> と呼ばれる。ZooKeeper や etcd のような合意サービスが全順序ブロードキャストを実装している。&lt;/p>
&lt;p>詳細は省くが、ネットワークを介した分散システムで線形化可能な compare-and-set （あるいは increment-and-get ）を実装しようとすると、必然的に合意アルゴリズムに行き着く。これらと全順序ブロードキャストは等価であることが証明できる。したがって、これらの問題のいずれかを解決できれば、他方の問題の解決策に変換できるという点は重大な知見である。&lt;/p>
&lt;/blockquote>
&lt;h2 id="realforce-のワイヤレスモデル">REALFORCE のワイヤレスモデル&lt;/h2>
&lt;p>ユーザーから待望されていた REALFORCE のワイヤレスモデルがとうとう発売された。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://weekly.ascii.jp/elem/000/004/073/4073042/">高級キーボードREALFORCEから待望のワイヤレス機「R3」が登場、見どころは？&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>先週から amazon で予約販売を受け付けていたので &lt;a href="https://amzn.to/3EJivAF">REALFORCE 東プレ R3 キーボード 静音 ハイブリッドモデル 日本語配列 91キー ブラック R3HC12&lt;/a> を予約して、本日届いた。私はとくに必要ないけど、bluetooth のマルチペアリングに対応していて最大4つまで接続できる。オフィスの机はそこそこ広いけれど、本とラップトップとモニター2台置いたらスペースが埋まってしまっている。ご飯を食べるときや書類を作成するときにキーボードを立てかけたりしてスペースを確保していて不便に感じていた。&lt;/p>
&lt;p>ubuntu 環境での bluetooth の設定に少し手こずった。GUI の設定マネージャー (blueman) でペアリングしようとしても失敗する。キーボードの情報は取得できるけど、ペアリングは失敗する。試しに macos でペアリングしてみたらパスキーの入力画面が表示されて、6桁の数字を入力して ENTER した後に接続するとペアリングできた。blueman だとパスキーが表示されないなと気付いてググってたら &lt;a href="https://bbs.archlinux.org/viewtopic.php?id=174239">[SOLVED] Bluetooth keyboard: Unable to pair (authentication timeout)&lt;/a> を見かけて、bluetoothctl でも設定できそうなのでやってみた。&lt;/p>
&lt;pre tabindex="0">&lt;code>キーボードの情報を表示
[REALFORCE_3]# info F6:9D:A5:80:B7:1F
Device F6:9D:A5:80:B7:1F (random)
Name: REALFORCE_3
Alias: REALFORCE_3
Appearance: 0x03c1
Icon: input-keyboard
Paired: no
Trusted: yes
Blocked: no
Connected: yes
LegacyPairing: no
UUID: Generic Access Profile (00001800-0000-1000-8000-00805f9b34fb)
UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
UUID: Device Information (0000180a-0000-1000-8000-00805f9b34fb)
UUID: Battery Service (0000180f-0000-1000-8000-00805f9b34fb)
UUID: Human Interface Device (00001812-0000-1000-8000-00805f9b34fb)
RSSI: -45
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>ペアリングを実行
* エージェントからパスキーが表示されて、キーボードで入力して ENTER したらペアリングに成功した
[bluetooth]# pair F6:9D:A5:80:B7:1F
Attempting to pair with F6:9D:A5:80:B7:1F
[CHG] Device F6:9D:A5:80:B7:1F Connected: yes
[agent] Passkey: 323759
[CHG] Device F6:9D:A5:80:B7:1F Paired: yes
Pairing successful
[CHG] Device F6:9D:A5:80:B7:1F Modalias: usb:v08ACp0302d0001
[CHG] Device F6:9D:A5:80:B7:1F ServicesResolved: yes
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>キーボードを信頼する
[REALFORCE_3]# trust F6:9D:A5:80:B7:1F
Changing F6:9D:A5:80:B7:1F trust succeeded
&lt;/code>&lt;/pre>&lt;h2 id="契約書の確認">契約書の確認&lt;/h2>
&lt;p>&lt;a href="/diary/diary/posts/2021/1026/#選考面談">先日&lt;/a> の業務委託案件の契約書が届いたので内容を確認した。&lt;/p>
&lt;p>これまで &lt;a href="https://www.cloudsign.jp/">クラウドサイン&lt;/a> でしか契約したことがなくて、紙の契約書で契約を締結するのは初めての挑戦でもある。&lt;a href="https://www.post.japanpost.jp/service/letterpack/">レターパック&lt;/a> を使って郵送するのがお作法？といったところから調べてた。明後日から働き始める。フルリモートなので物理的な職場は変わらないけど、新しい職場は緊張するな。うまく入っていけるやろか。フルリモートの経験もだいぶたまってきたし、体調も万全だし、憂うことは何もないはず。いまの状況は純粋に私ががんばるだけだ。&lt;/p></content></item></channel></rss>