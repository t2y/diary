<!doctype html><html lang=en><head><title>Badminton :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/diary/tags/badminton/><link rel=stylesheet href=/diary/styles.css><link rel=stylesheet href=/diary/style.css><link rel="shortcut icon" href=/diary/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="t2y"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Badminton"><meta property="og:description" content><meta property="og:url" content="/diary/tags/badminton/"><meta property="og:site_name" content><meta property="og:image" content="/diary/favicon.ico"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/diary/tags/badminton/index.xml rel=alternate type=application/rss+xml title></head><body class=green><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/diary><div class=logo>forest nook</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/diary/about>自己紹介</a></li><li><a href=/diary/dates>月別一覧</a></li><li><a href=/diary/tags>タグ一覧</a></li></ul></nav></header><div class=content><h1>Posts for: #Badminton</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1222/>時間とモチベーションの関係</a></h1><div class=post-meta><time class=post-date>2024-12-22</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/writing/>writing</a>&nbsp;
#<a href=/diary/tags/motivation/>motivation</a>&nbsp;
#<a href=/diary/tags/postmortem/>postmortem</a>&nbsp;</span><div class=post-content><p>朝から磯上体育館の先着利用申込みに並んで、それからオフィスへ行って作業して、午後からバドミントンして、カフェ行って買い物して、またオフィスへ戻って作業という1日だった。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/1124/#体育館でバドミントン>前回の所感</a> 。先週の土曜日も <a href=https://www.kobe-bunka.jp/facilities/hyogo/>兵庫区文化センター</a> の体育館でバドミントン練習をしてきた。そのときにやったフットワークの練習や打ち込みの練習などを今日やってみたりしていた。今日の参加者は私を含めて2人なのでゆっくり打ち合いしたり、プッシュとロブの練習をしたり、試合形式をしたりと休憩しながらラケットコントロールの感触を確認したりしていた。参加者の人数調整はなかなか難しくて1面を借りるなら4人いたらダブルスできてよいのだけど、そんなうまいこと人数調整できない。それでも1人来れば相手と打ち合う練習はできるから最低限の練習にはなる。</p><p>磯上体育館の <a href=https://isogami-gym.jp/course/>冬期スポーツ教室</a> の申込みはうまくいって1月7日から通うことになる。約3ヶ月 (全10回) になる。先週バドミントン練習に行ったコミュニティにそのスポーツ教室の参加者がいて、3ヶ月終えても連続して受講していたりするという話しも聞いた。私も3ヶ月やって練習が足りないと思ったら追加でさらに3ヶ月行ってもよいかもしれない。教室で教えてもらった練習方法などをうちのコミュニティでもやるようにすれば、初心者向けのコンテンツが充実していくのではないかという見通し。</p><h2 id=時間は平等に成果を生む>時間は平等に成果を生む</h2><p>1ヶ月ほど日記を書くことをやめていた。12月3日がお仕事の開発フェーズの区切りになっていたのと、11月の最終週はそのためのパッケージングや検証に忙しかったのと、その週末に親戚の引率旅行に2泊3日でまた城崎温泉へ行っていたのと、戻ってきてからも暫定的な開発フェーズで突貫で追加要件の機能拡張をやらないといけなかったと、いろいろ業務と生活の繁忙期になっていた。疲れて義務的に日記を書くモチベーションがなくなっていたのと、お仕事で突貫の開発をやらないといけないという物理的に時間を要する目的もあって、日記を書くのをやめていたらどうなるかな？と1ヶ月ほど休んでいた。日によってはメモも残ってはいるので気が向いたら過去の日記も書くかもしれない。</p><p>日記を書くのをやめてみてメリット・デメリットがある。</p><p>メリット</p><ul><li>空いた時間を他のことに使える<ul><li>開発に集中していたら、ずっと設計を練ったり試行錯誤でコードを実装したりして、それもやはり「書く」ことなので1つのことに集中できる</li><li>なにもせず家で休む時間を増やせる<ul><li>お仕事を終えてから残って1-2時間書いたり、休日を使ってまとめて書いたりといった作業をせずに休める</li></ul></li></ul></li><li>業務中にもたくさん書いているので書くモチベーションがないときは楽になる</li></ul><p>デメリット</p><ul><li>日々の気付きや所感が流れてしまうことをもったいなく感じる<ul><li>書いておかないと2-3日後には忘れてしまうだろうなと思うことが多々ある</li></ul></li><li>日々のルーチンを継続せずに怠けてしまうことへのインセンティブを与えてしまう<ul><li>これは休むことと継続することのトレードオフになる</li></ul></li><li>言語化することで曖昧な状態や理解不足であることを自身で確認する機会が失われる<ul><li>書けないことを認めることが大事</li></ul></li></ul><p>疲れて体調が悪くなってくると、日々の生活を簡素化していく。自炊したり、掃除したり、運動したり、日記を書いたりといった、毎日やらなくてもよいことを後回しにする。そこで本業の業務量を減らせばよいという考え方もあるのだけど、課題管理にも通じることでもあるが、私は開発を積み重ねることにアイデンティティをもっているから自身が納得いかない状況に対しては、開発の業務を逆に増やしてしまうことがある。そして若い人向けにも模範たれという思いもある。それで12月に入ってからはだいたい8-20時を開発を割り当てて突貫の開発に集中していた。休日もできる範囲でコードを書いていた。そして、それ自体はスコープ外の機能も作ってしまってすごくうまく進捗した。日記を書く時間を開発に使った成果はあったと言える。</p><p>日記を書くことに義務感とそれなりのコストを費やしているなと感じていたときに次の記事をみかけた。</p><ul><li><a href=https://note.com/fta7/n/n18f9146d52ac>「やらなきゃ」駆動から「やりたい」駆動へ切り替える方法をついに見つけたかもしれない</a></li></ul><p>この記事に書かれている内容は私もかなり共感できる。どんなことでもずっと続けているとマンネリ化して義務感になったりモチベーションがあがらないときがある。この状況に対してイチローの言葉をよく思い出すが「続けることが大事」であることに変わりはない。「プロ野球の一流選手とそうじゃない選手の違いはスランプ期間の差でしかない」といった要旨を原田隆史さんからも聞いたことがある。私が日記を1ヶ月書くのをやめていたのはまさにここでいうところのスランプなのだろうと思う。なにか理由があってもしんどくても続けることが大事で、休むとしても1ヶ月よりは2週間、2週間よりは1週間、1週間よりは3日といった、スランプ期間を短くすることが大きな成果を出すための日々の活動になっていくのだと、知識や理屈の上では理解できる。そのため、この問題はモチベーションコントロールと、仮にモチベーションはなかったとしても継続するための仕組みや環境づくりの方がずっと大事だという話しでしかない。そのやり方は人それぞれの工夫でよいと思うが、どんな新しい方法を見出してもいつかはマンネリ化して飽きたり、モチベーションのあがらない時期はやってくると、私の過去の失敗経験からのふりかえりでもある。そして一時的に休んでもやめてしまわなければ、着実に前へ進むことも知っている。だから、日記をやめてしまっても開発を積み重ねることだけはやめなかったので今月の機能開発は大きな成果を出せたとも言える。時間は平等であって、なにかを為した分なにかを為せなかったという事実に大きな差はないと思う。そして、為したことの成果や評価が本人にとってどうなのか、周りからみてどうなのかだけの違いでしかない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1124/>バドミントンしただけの休日</a></h1><div class=post-meta><time class=post-date>2024-11-24</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は体育館で1.5時間ほど練習した。久しぶりに相手がいて打ち合いできて楽しかった。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/1031/#体育館でバドミントン>前回の所感</a> 。朝から磯上体育館の個人利用のための行列に並ぶ。今日は7時52分に磯上体育館へ着いたら5番目だった。徐々に並ぶ時間が早くなっていっている気がする。本当は9時から予約するつもりだったが、他の参加者から15時がよいとのことで15-17時で予約した。実際に行ってみたら6面あるうちの2面が空いていた。個人利用の遅い時間帯なら並ばなくても予約を取れるのかもしれない。但し、確実に狙った時間を予約するためにはこれからも8時前後に行って並ぶことにはなると思う。逆に9時から予約しようと思ったら8時よりも早く並ばないといけない。</p><p>15時から2-3回休憩を挟みつつ、打ち合いして、シングルスの試合やって、移動した場所に狙って打つ練習などをした。たくさん打ち込みできたので <a href=/diary/posts/2024/1117/>グリップの握り</a> を試したりもしていた。今日の収穫はバック持ちの低い軌道でシャトルを打ち返すときによい手応えを掴んだ。低い位置にあるシャトルをネットを超える高さで強く速く返せるラケットコントロールを何回かできたと思う。5回中2-3回といった頻度だからまだまだ完全に捉えられてはいない。壁打ちでもよいタイミングを掴めるときはあったのでその成果が出たと言えるのかもしれない。やはり相手がいる打ち合いは練習の幅が広がる。1人でリフティングや壁打ちするのも、もちろん重要ではあるし練習にはなるが、相手がいて打ち返してくれる方がもっとさまざまなパターンや状況に対するラケットコントロールやシャトルとの距離感を試すことができる。単純にシャトルを打っていても楽しい。</p><p>家に帰るまではバドミントン終えてからオフィスで作業しようと思っていたのに、休んだらやる気がなくなって、そのままだらだらしていた。体調悪い。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1117/>壁打ちとシャトル</a></h1><div class=post-meta><time class=post-date>2024-11-17</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は壁打ちを1時間ほどした。複数のシャトルを使ってそれぞれの違いなどを検証してみた。シャトルによって壁打ちのやり方が変わってくることがわかっておもしろかった。壁打ちを終えてから軽く縄跳びをした。</p><h2 id=壁打ちの研究>壁打ちの研究</h2><p><a href=/diary/posts/2024/1116/#壁打ちの研究>昨日の続き</a> 。動画の解説やアドバイスを参考にしながらいろいろなシャトルで壁打ちしてみた。</p><figure><img src=/diary/img/2024/1117_shuttle.jpg></figure><p>バドミントンを始めるときに amazon でシャトルを検索すると、いろいろな種類のシャトルが販売されている。どのシャトルを買ってよいか最初のうちはよくわからなかった。いくつか買ってみて試すうちに違いがわかってきてシャトル選びのノウハウも得た。あらためて単価を算出してみるとアウトドア向けは専用設計だから割高になってしまうことも伺える。</p><ul><li>エアシャトル (アウトドア向け, 単価660円)</li><li>メイビスフィールド2 (アウトドア向け, 単価440円)</li><li>エアロセンサ200 (水鳥羽, 練習用シャトル, 単価225円)</li><li>メイビス40 (ナイロンシャトル, 単価233円)</li><li>メイビスフィールド (アウトドア向け, 単価380円)</li></ul><p>体育館でバドミントンをするならエアロセンサを買えばよい。ナイロンシャトルは耐久性があると聞くが、趣味でやる程度ならそんなに消耗しないのでエアロセンサで数ヶ月は使えると思う。アウトドア向けならメイビスフィールド2がよく反発して遠くへ飛ぶので打ち合いしやすいと思う。エアシャトルはコルクが硬くて重い分だけもっとも飛距離も速度もでると推測されるが、まだ打ち合いしたことがないので未知数でもある。</p><p>閑話休題。それぞれのシャトルで壁打ちしてみた所感をまとめておく。コルクの素材によって壁にぶつかったときの反発力が大きく違う。反発力の強いものから並べると次になる。</p><ol><li>エアシャトル</li><li>メイビスフィールド2</li><li>↑ 壁との距離を変える基準 ↓</li><li>メイビスフィールド</li><li>エアロセンサ200, メイビス40</li></ol><p>しかし、エアシャトルはコルクが硬いせいか、どこに跳ね返ってくるかわからない。エアシャトルはリフティングするのももっとも難しい。うまく打たないと変な方向に飛んでいってしまう。そしてエアシャトルで壁打ちするのは物理的に無理だと思う。そうすると、メイビスフィールド2がもっとも反発力が強いと言える。エアロセンサ (またはメイビス40) の反発力はもっとも弱い。同じ位置で壁打ちすると、メイビスフィールド2と比べてシャトルが返ってくるまでに時間の余裕があることに気付いた。メイビスフィールド2で壁打ちするときは壁からさらに離れて距離を取るとよいことに気付いた。メイビスフィールドはメイビスフィールド2と比べて反発力が弱い。反発力が弱いという特性は必ずしもデメリットではなく、キャッチの練習はしやすいし、ロビングで真上に上げるときも強く打っても高くあがりにくいため (天井に届きにくい) 、ラケットのスィートスポットで捉えられているかどうかのチェックもしやすい。シャトルそれぞれの特性にあわせた向いている練習というのはあるように思える。</p><p>エアロセンサを打つと <em>カコン</em> という乾いた音が鳴り、打っていて気持ちがよい。壁打ちするとシャトルは傷んでしまうかもしれないが、単価比較したらエアロセンサは安いから打ち心地を優先するのもよい。もしくはメイビス40もあまり反発しないから耐久性のあるナイロンシャトルで代用するのもよいかもしれない。まだそんなに使っていないから水鳥羽とナイロンシャトルの耐久性の違いを私はまだ実感できていない。1日数十分程度の練習ならエアロセンサでもよいかもしれないと考え始めた。</p><p>壁打ちしていて打ち返しやすいパターンとそうではないパターンがある。打ち返しやすいのは、自分の身体の前の得意なポイントにシャトルを呼び込めているとうまく打ち返せる。動画でもシャトルの前に移動するのが大事だと説明していた理由を理解できた。シャトルが返ってきたところにラケットを伸ばしてただ打ち返そうとしてもうまく打てない。シャトルが返ってくる軌道を見定めて、自分が打ちやすいポイントにシャトルを呼び込んでからラケットを振り抜いて打ち返す方がうまくいく。そのためにはフットワークを使ってカラダをシャトルの前へ移動させないといけない状況もある。ラケットを振り抜くと速度が速くなってしまい、メイビスフィールド2だと距離を取らないとその次のシャトルが戻ってくる速度に対応できない。</p><p>壁打ちするときにグリップの上下の握る位置を変えてみるとラケットコントロールも変わってくる。グリップの上の方をもつ (ラケットを短くもつ) と小回りがきくからコントロール重視になる。グリップの下の方をもつ (ラケットを長くもつ) と回転半径が大きくなる分パワーを加えたり、遠くのシャトルに届くといった利点がある。ある動画ではシングルスのときは長めに、ダブルスのときは短めといった持ち方をするという一般論や、昔はラケットが重かったから短めにもつのが主流だったが、いまのラケットはフルカーボン素材で軽くなったから長めにもつプレイヤーが増えたという話しも聞いた。いくつか動画をみた感じだと、グリップの持ち方や握る位置はそれぞれのプレイヤーが別々のことを言っていて自分にあったスタイルならそれでよいように思えた。基本はイースタン／ウェスタングリップになるが、個々人が打ちやすいように微妙にカスタマイズしているように思えた。動画の解説者によっては握り方はそれほど重要ではないと説明している人もいた。イースタングリップを意識しながら持ちつつ、真正面のシャトルをウェスタングリップに持ち替えて打つといった練習もしてみたが、なかなか壁打ちが続かない。何度も反復してその切り替えに慣れていく必要がある。</p><figure><img src=/diary/img/2024/1117_racket.jpg></figure><h2 id=シャトルとスピード番号>シャトルとスピード番号</h2><p>以前 <a href=/diary/posts/2024/0927/#ラケット選び>ラケットを購入した</a> <a href=http://www.pro-champ.com/>バドミントンプロショップチャンプ</a> で練習用シャトルを1ダース購入した。paypay で買うと2,850円、現金で買うと2,700円になる。いま買ったらスピード番号が4だった。9月末にラケットと一緒に購入したときのスピード番号は3だった。バドミントンのシャトルにはスピード番号というのがあり、気温によって速度ではなく飛ぶ飛距離に差が生じるために飛びやすさを季節によって飛びやすさ調整しているらしい。スピード番号が高い方が遠くまで飛ぶ = 気温が低いときに使うシャトルになるとのこと。いまは暖かいから3番と4番があればだいたい1年は過ごせそう。</p><ul><li><a href=https://www.e-rslshop.com/shuttle_speed/>バドミントンシャトルのスピード番号って？意味や見方を完全解説</a></li></ul><h2 id=シャトルすくい>シャトルすくい</h2><p>次の動画の1分20秒からシャトルをすくう練習方法を説明している。上手い人はラケットでシャトルを拾っている。これも初心者は簡単にはできない。これならオフィスや家でも練習できるかもしれない。その続きに相手がいるときの基礎打ちで同じ位置にシャトルを打ち返す練習を紹介している。壁打ちをしていて同じ位置に狙って返すことが全然できないと気付いてきた。野球のキャッチボールでも同じようなことを言われるが、特定の位置へ狙って返すというのは球技を問わず基本の所作になるんだなと思えた。</p><div class=video-container><iframe src=https://www.youtube.com/embed/-Gpc67VTT4c allowfullscreen title=【初心者必見！！】ラケットの持ち方とグリップの握り方の練習方法　バドミントン></iframe></div></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1116/>壁打ちの研究</a></h1><div class=post-meta><time class=post-date>2024-11-16</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は公園と近所のビルの軒下で1時間ほど行った。</p><h2 id=みなとのもりの運動>みなとのもりの運動</h2><p><a href=/diary/posts/2024/1005/#みなとのもりの運動>前回の所感</a> 。エアシャトルで打ち合いしてみたくて企画した。知人が来てくれる予定ではあったけど、急遽予定が変わってしまったようでドタキャンになって普通に運動して練習してきた。</p><p>ジョギング3周 1.4 km、縄跳び15分で1561回、今日は土の上で跳んでみた。ひざへの負担は低いものの、リズムがあわなくてコンクリートの上で跳ぶよりも多くミスした。回数も150回ほど少なくなった。跳ぶ地面がコンクリートと土で大きく異なることを実感した。個々の運動の合間にストレッチもたくさん行った。</p><p>その後にバドミントン練習をした。エアシャトルでリフティングを10分ほどやってウォームアップしてから <a href=/diary/posts/2024/0928/#ひとりでできるバドミントンの練習>ひとり練習の動画でみたロビング</a> を試してみた。調子に乗っていたらエアシャトルを木の枝に引っ掛けてしまった。冬になったら葉が落ちて自然に落ちてくるかなぁ。エアバドミントンを行う風速の基準は3-4m/sが基準になる。今日の風速は4-5m程度だった。雨が降る少し前から風が出てきたときはシャトルが流れ過ぎてちょっと無理だなと感じた。ロビング (頭上にシャトルを打ち上げる) を向かい風に向かって打つことでまさに動画でみた通りにシャトルが戻ってきておもしろかった。なかなか連続ではできないが、よい角度で思いっきり打つとちょうど同じ位置にシャトルが戻ってきてもう1度打ち込みできる。</p><p>雨が降りそうな雰囲気が出てきたところで公園から撤収していつものビルの軒下へ。屋根があるから雨天練習場でもある。メイビス2で壁打ちを15分した。<a href=/diary/posts/2024/1113/#壁打ち>前にみた壁打ちの動画</a> でまずは10回続けられるのを目指そうと解説していたのでそれを目標に練習してみる。うまくいくときで10回程度、ほとんどは数回で失敗してしまう。壁打ちすら私にとってはかなり難しい。これはエアシャトルでリフティングを始めたときも <a href=/diary/posts/2024/1011/>ほとんどは20回も続かなかった</a> 。その後1ヶ月ほど練習して、いまは大抵50-100回は続くし、うまくいくと300回を超える。壁打ちも10回も続かないところから練習して回数を増やしていく。</p><p>シャトルを壁に打ちつけても器物破損にはならないとは思うが、ビルの関係者にとって気持ちのよいものではないだろう。いつかビルの壁打ちは怒られるかもしれない。そのときのために壁打ちできる他の場所も探していこうと思う。また時間のあるときに屋根と照明があって人がこない壁を探しにいこうと思う。</p><h2 id=壁打ちの研究>壁打ちの研究</h2><p>壁打ちがおもしろくなってきたのでまた別の動画をみた。</p><div class=video-container><iframe src=https://www.youtube.com/embed/AIPq8Vn1q70 allowfullscreen title=じーまコーチ登場！レベル別壁打ち練習法を紹介（バドミントン）></iframe></div><p>この動画のコーチもよい音を鳴らして壁打ちしている。上級者はみんなシャトルを打ったときによい音が鳴る。この音を鳴らしたいというのが私の目標でもある。動画で壁打ちのスキルアップをレベル別に解説している。こういうのはとても助かる。足はスタンスを広めにし、リアクションステップがよいとのこと。リアクションステップとは、相手が打った瞬間に着地してその反動を利用して動くという動き出しを速くするためのフットワーク。足音を小さくなっているとよいらしい。</p><h4 id=レベル1>レベル1</h4><ul><li>得意な手の持ち方でずっと打つ<ul><li>私はバックで打つ方が得意になる (多くの人がそう？)</li></ul></li><li>壁の同じ位置に打てば同じところへ返ってくるのを自分のペースで打つ<ul><li>速く打てば速く返ってきて打ち返しが間に合わない</li></ul></li></ul><h4 id=レベル2>レベル2</h4><ul><li>バックとフォアを交互に打つ</li><li>シャトルをクロスに打ち返すと交互になる</li><li>ラケットの持ち替えをがんばるのが大事<ul><li>私はフォアとバックのラケットの持ち方を理解できていない</li><li>バドミントン教室へ行ったときに教えてもらおうと思う</li></ul></li></ul><h4 id=レベル3>レベル3</h4><ul><li>壁に近づく</li><li>シャトルの方へ自分が動いていく</li></ul><h4 id=上級者向け>上級者向け</h4><ul><li>壁から返ってきたコルクが自分の方を向くまで待って打つ<ul><li>リフティングしていてもコルクが下を向いているときと曲がっていたりスピンしたりしてるとミスをする確率が高くなるのを私も実感している</li></ul></li><li>自分の打った速さで返ってくる、仕掛ける・流すの実践練習をする</li><li>打つポイントを決めてその位置へ動く</li></ul><h2 id=ストレッチ>ストレッチ</h2><p>今週は木・金以外の曜日を運動した。今日も午前中はしっかりカラダを動かしたのでストレッチで状況を確認するにはちょうどよい。ころんで痛めた腰の張りはなくなっていた。右足全般の関節周りがやや痛いのと、左右ともに太ももの後ろの張りが強かったように思う。週の半ばでは右足の前太ももの張りもあったものの、その後の運動や休養で回復したのか、今日のストレッチ中にはとくに張りを感じなかった。木・金を休んだせいか、よい感じに筋肉痛の疲労も抜けていたように感じた。今日の開脚幅は開始前150cmで、ストレッチ後154cmだった。今週はストレッチもたくさん出来たので開脚幅の数字は伸びるかと期待したが、いつも通りだった。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1113/>シャトルの壁打ちの研究</a></h1><div class=post-meta><time class=post-date>2024-11-13</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを10分した。連続最大回数は275回。リフティングをしてからシャトルを真上に強く打つのを10分、シャトルを反発力の高いメイビス2にして壁打ちを15分していた。シャトルを強く打つときにチカラの入れ方や角度などを考えながら打ってみた。壁打ちも練習していて2パターン思いついた。1つは壁の近くでひたすらシャトルを打ち返すやり方、もう1つは少し壁から距離をとって真上にシャトルをあげて落ちてきたシャトルを思いっきり振り抜いて壁に向かって打つ。壁から返ってきたシャトルをまた真上にあげて、思いっきり振り抜くのを繰り返す。このやり方だと素振りの延長上でラケットを振る練習になるような気がする。</p><p>昨日まではジョギングしてからバドミントンの練習をしてきた。今日は逆にバドミントンの練習をしてからジョギングと縄跳びをした。お仕事を終えたのが20時頃で21時にバドミントン練習場 (ビルの軒下) の照明がおちる。だから先に照明が消える前に先にバドミントンの練習をすることにした。おかげで壁打ちのやり方をひらめいたりして約1時間集中して練習していた。その後、みなとのもり公園へ移動してジョギング2周 (0.9km) と縄跳び15分で1770回跳べた。昨日からの筋肉痛も続いているので軽めに運動しようと思ったものの、縄跳びは少し回数が増えた。休憩時間を少し減らしたり、ミスが減ったり、バドミントン後のせいか腕がだるくて縄をまわすリズムにのれなくてペース落ちたりと、昨日とはコンディションがいろいろ違うなと思いながら数字をみるとおもしろい。</p><p>お仕事は昨日の続きで mongodb のトランザクションのデバッグをずっとやってた。デバッグしての結論として middleware で unit of work を実装するのは断念した。</p><h2 id=メガネ探し>メガネ探し</h2><p>視力が 0.3 ぐらいで有事のときに困る状況を想定してメガネを1つもっておこうと考えている。やぎさんにも相談していくつかアドバイスをいただいた。動体視力も落ちていてバドミントンをしていて動くシャトルを空振りすることも多い。もしかしたらメガネをした方がシャトルとの距離感もつかめるのかも？と思いスポーツ用のメガネがどうなのかも調べてみた。結論から言うと、スポーツ用途ならメガネよりもコンタクトレンズの方がよいらしい。コンタクトレンズをするほど視力低下に困っているわけでもないからまずはメガネを買って必要なときだけ使うといった運用を考えている。</p><ul><li><a href=https://amagan.jp/badominntonnmegane/>バドミントンどきに適したメガネ＆保護眼鏡</a></li></ul><h2 id=壁打ち>壁打ち</h2><p>次のバドミントンの練習方法として壁打ちがよいんじゃないかと調べてみた。上級者の動画をみると、近くで力強く打ち返して壁打ちしている。これはめちゃくちゃ難しい。シャトルが速過ぎて全然おいつかない。実際にやっている人をみるとこのぐらいはできるんやとわかってやり方のイメージづくりにはよい。</p><div class=video-container><iframe src=https://www.youtube.com/embed/wjHObGsg07E allowfullscreen title=一人でこっそり練習「壁打ち」でレシーブを鍛える！></iframe></div><div class=video-container><iframe src=https://www.youtube.com/embed/03VxIKM7NCg allowfullscreen title=一人でも出来る上達の方法！これも絶対みるべし❗️❗️壁打ちの極意👍👍></iframe></div><p>もう1つ。室内でスポンジボールを打ち返す壁打ちを取り上げているサイトもあった。これならオフィスでもできるんじゃないかとベルボールを amazon で発注してみた。出張にももっていってホテルでやってもよいかもしれない。</p><ul><li><a href=https://machida-badminton.com/bellbad-training/>スポンジボールで壁打ちをやってみた≪ベルバド≫</a></li></ul></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1104/>疲労回復のための余暇</a></h1><div class=post-meta><time class=post-date>2024-11-04</time></div><span class=post-tags>#<a href=/diary/tags/founding/>founding</a>&nbsp;
#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>朝から起きていたものの、開発合宿疲れのせいか、起き上がる気力がなくて夕方まで家でのんびりしていた。お腹が空いて外へ出掛けたことをきっかけにそれから活動していた。イベントは楽しいし得るものも多いが、その疲労も確実にくる。前回の開発合宿は忙しい時期に休みもなく <a href=/diary/posts/2024/0307/#精神的な疲労>精神的に疲弊した</a> 記憶がある。こうやって書いておくと当時の様子を思い出せるので日記を書いておくと役に立つ。今後も開発合宿のようなイベントの後に休日がある日程を設けていく。今日のバドミントン練習もお休み。</p><h2 id=経費の精算>経費の精算</h2><p>夕方からオフィスで経費精算をしていた。11月に入ったのでお客さんへの請求書も発行していないことに気付いて請求書を作ったりしていた。11月1日にお休みをとったから忘れていた。その後に開発合宿の経費の整理をいろいろやってた。今回は約15万円ほど会社の経費を使ったことになる。予算通りではあるが、改めて精査してみるとインフレの影響で食費や宿泊費のすべての値段が上がっていることを実感する。</p><h2 id=バドミントンの予定登録>バドミントンの予定登録</h2><p>エアバドミントンの予定登録、磯上体育館の抽選確認／確定、中学校体育館の予約、<a href=https://isogami-gym.jp/2024%e5%b9%b4%e5%ba%a6%e5%86%ac%e6%9c%9f%e3%82%b9%e3%83%9d%e3%83%bc%e3%83%84%e6%95%99%e5%ae%a4%e3%80%80%e5%8f%97%e8%ac%9b%e7%94%9f%e5%8b%9f%e9%9b%86/>冬期スポーツ教室</a> の申し込みなど、バドミントンに関する予定の登録などを行った。自分のモチベーションコントロールが難しくなっていて、ゆっくり休みたいという気持ちはありつつも、なにも予定を入れないとただだらだら過ごしてしまうという懸念もある。バドミントンは今後がんばりたいのでどんどん練習の予定を入れてしまう。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1031/>開発合宿前日</a></h1><div class=post-meta><time class=post-date>2024-10-31</time></div><span class=post-tags>#<a href=/diary/tags/testing/>testing</a>&nbsp;
#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は体育館で1時間ほど練習できた。試合中にまた足と腰を痛めてしまった。無理しないように意識していてもついついシャトルを追いかけてしまう。しばらく試合はやめとこうと思う。</p><h2 id=テストコード追加の一区切り>テストコード追加の一区切り</h2><p>これまでテストの改善をやってきてもっとも仕様が複雑、且つ数量も多い api 群のテストコードを一通り書き終えた。カバレッジを目標の1つにしているので改善していることを数値で確認できる。その過程でいくつかバグをみつけて直すこともできる。区切りとして一通りやり切ったので安心して明日はお休みをとって開発合宿へと行ける。しんどかったけど、やっていれば形になって結果は出てくる。一方で私が実際の開発をやってしまうと自分の時間をどんどん浪費していることにも気付けるようになってきた。自分の時間をどう使うのかをいろいろ考える開発やリファクタリングの機会となった。今回の開発フェーズが終わったらまた振り返りしたい。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/1027/#体育館でバドミントン>前回の所感</a> 。抽選予約で獲得した平日夜の時間帯。今日は参加者が多くて8人来られた。1面のスペースだとこれ以上の人数はちょっと無理そうに思えた。なにか練習をしてもよかったのだけど、8人もいたらスペースが足りないかなと思ってどう運用していいのかわからなかった。不完全燃焼。最初は3対3でネットを挟んでの打ち合いをしてみたが、スペースが狭いからなんとなく手持ち無沙汰になってしまう。経験者の方から2人チームを作ってローテーションでまわしましょうという提案をもらって2対2で10点先取の試合形式にした。10点取ったら交代でローテーションしていくようにした。このときにチーム編成を簡単に決める手段を準備しておくと、決め方を「決める」の無駄な時間を省ける。前に練習に参加させてもらったチームではトランプのカードを引いていた。これはなにかしらツールを用意しておくとよさそう。</p><p>経験者の方にフットワークについて教えてもらった。一歩でどう動くか、腕とラケットを伸ばしてどこまで届くかの距離感を掴むのが大事なように思えた。カラダの近くでシャトルを捉えようとすると動かないといけないが、実際の試合だとシャトルの方が速いのでなかなか動けない。フットワークの重要性が少しわかってきた。</p><p>私の場合、下手だから試合形式にするとすぐミスをして試合を止めてしまい、申し訳なさと自身の練習時間も短くなるという2重でネガティブな所感を受ける。なにかしら量をこなせる練習メニューや打ち合いをしていた方が楽しかったりする。中級者なら試合する方が楽しめるのかな？やはり2面ないと別の思考をもつ人たちが一緒に活動するのは難しいのかもしれない。いまの私はスキルアップにつながる練習の量をこなしないという思いがある。また他のチームの練習にも参加して考察してみようと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1028/>光るシャトル雑感</a></h1><div class=post-meta><time class=post-date>2024-10-28</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/business/>business</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は公園で軽く打ち合いを15分ほどした。昨日は疲れて休んでしまってオフィスへもっていくご飯も炊いてなかった。お仕事もバタバタしていてほとんど何も食べずに夜まで過ごした。</p><h2 id=光るシャトルの試し打ち>光るシャトルの試し打ち</h2><p>シャトルのコルク部分に LED がついた光るシャトルがある。amazon で検索してみつかるのはほとんど中国製で安かろう悪かろうな印象を受ける。試しに買ってみて4個で561円だった。注文してから届くまで3週間ほどかかった。amazon の配送状況もトレースできていなくて今週中に届かなければ返金しますというステータスになってから郵便受けに届いていた。値段も安いからシャトルの品質は粗悪なモノだった。軽く練習で使うならいいんじゃないかと私は許容範囲。</p><p><a href=https://amzn.to/3A9iGbT target=_blank><img src=https://m.media-amazon.com/images/I/61w9P9l-6vL._AC_SX425_.jpg width=120></a></p><p>バドミントンのシャトルを打ち合いするには公園の街灯は光量不足でみえない。光るシャトルなら軌跡を追いかけられる。慣れればそれっぽく打ち合いできそうな雰囲気はした。今日は雨上がりで地面が濡れていたのと風も少しあったので軽く試し打ちにとどめた。また天気のよい日を探してやってみようと思う。なにもしないよりはラケットの制御やシャトルを打ち返す感覚を養うために使うのはよいと思う。一方で打ち合いするにはそんなレベル感で一緒にやってくれる人を探さないといけない。相手を探す方が難しい気はする。</p><p>電池交換は不可で10時間ほどで電池がなくなる。おそらくコルクに LED を取り付けたものだと状況によってはすぐ壊れるだろう。安いから使い捨てでも構わないが中国から取り寄せになるから購入に時間がかかる。品質のよい既存のシャトルに自分で電子工作して LED を取り付けたりできないやろか？と考える。そうすれば電池交換や修理対応も自分でできてコストも削減できて、品質がよければ他の人にも関心をもってもらえるかもしれない。</p><h2 id=お風呂ウォーキング>お風呂ウォーキング</h2><p>光るシャトルの試し打ちを付き合ってもらってから、ながいさんと <a href=https://nagisa-u.com/>HATなぎさの湯</a> へ歩いて行ってきた。往復してきて15,000歩を超えていた。<a href=/diary/posts/2024/0326/#晩ご飯を食べて温泉へ入ってくる散歩コース>前回は3月26日に行っていた</a> から半年ぶりになる。もう半年以上も経っていることに日記から気付く。毎日なにかしらに追われて生活しているとすぐ半年や1年がたってしまう。時間が早い。いつでも行けるはずなのに予定を作らないと私はなかなか行けない。ここのお風呂は温度はぬるめ。熱いお風呂が苦手な私でもゆっくり入れる。月曜日のせいか空いていた。最近はシャワーで済ます日の方が多く、お風呂はたまにしか入らない。久しぶりに足を伸ばしてお風呂に入ってリフレッシュできた。あと県立美術館前の広場やスペースも人がいなくてバドミントンの練習をするにはよさそうにもみえた。人が来なくて広いスペースを自然に探すようになってきた。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1027/>バドミントンのフットワークを学んだ</a></h1><div class=post-meta><time class=post-date>2024-10-27</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;</span><div class=post-content><p>今日は体育館でバドミントン練習を120分した。前回よりは余裕をもって練習できた。1日の消費カロリーも3000を超えた。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/1020/#体育館でバドミントン>前回の所感</a> 。先週シニアの方の練習に混ぜてもらって今日も初心者と練習すると伺っていたので部外者なのにまた混ぜてもらった。8時に体育館へ並びに行ったら前に2人いて3番目だった。10分ほどしたらシニアも方も来られて一緒に並びましょうと声をかけた。1人1面しか借りられないため、2面借りるためには2人いる。私は近所なので8時から並ぶことも苦にならない。今後も個人利用の日で9時から来られるなら私が並びますよと提案したら先方もそれは助かるみたいな話しになって line 交換して連絡とれるようになった。個人利用は人数を数えてからチケットを購入し、開始前に窓口でまとめて支払う必要がある。料金の支払い方がよくわからなくて後でまとめてもっていったら手続きが違うって怒られた。ちゃんとした指導者と練習場所を確保できる可能性が高くなることから願ったり叶ったり。先週も並んでいたメンバーが何人かいて、これを繰り返すうちにいつものメンバーになって他のチームとも仲良くなるのかもしれない。</p><p>今日は一緒に練習させてもらった中級者の方にフットワークの足さばきを教えてもらった。</p><ul><li>基本的には奇数で移動する (1歩か3歩)<ul><li>ホームポジションから3歩でコートの範囲内を移動できる</li><li>実際の試合だとシャトルが飛んでいるから3歩も歩く余裕はなくて1歩になることが多いらしい</li></ul></li><li>足さばきで移動する足は必ず後ろを通す</li><li>移動した後にラケットを打つために腰を入れられるような動き方が大事になる</li><li>移動してラケットを振った後に右足が前に出る<ul><li>そのための体重移動や体幹のバランスを取る</li></ul></li></ul><p>その他にも一緒に練習してもらった方からもアドバイスをいただいたりしていた。</p><ul><li>フォア持ちとバック持ちで少し握りを変える<ul><li>持ち方が少し違うらしい</li><li>打ち返す前に握り方を変えているらしい</li></ul></li><li>バック打ちは手の甲を上に向けて固定する<ul><li>手首を曲げたりひねったりしない</li></ul></li></ul><p>今日は次のような練習をした。忘れないようにメモしておく。</p><ul><li>ホームポジションからフットワークを使って素振りの練習 (ひとり練習可)<ul><li>左右斜め前と後ろの4つの方向へ移動する</li></ul></li><li>左右にシャトルを投げてフォアとバック持ちでドライブを返す練習</li><li>左右にシャトルを投げてプッシュを打つ練習</li><li>ネット際からシャトルを投げてプッシュ・クロス・ヘアピンの3つを打ち分ける練習</li><li>ドライブで交互に打ち合いする練習 (真っ直ぐ飛ばす)</li><li>落ちてくるシャトルをヘッドを立ててひじを曲げてうつ練習<ul><li>地面にシャトルを置いて真っ直ぐうつ練習</li><li>これは素振りでもよいかも？ (ひとり練習可)</li></ul></li></ul><p>実際に教えてもらったり実践した練習を覚えていってオプチャのコミュニティでも活用しようと思う。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1020/>バドミントンの基本練習</a></h1><div class=post-meta><time class=post-date>2024-10-20</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/exercise/>exercise</a>&nbsp;
#<a href=/diary/tags/health/>health</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習は磯上体育館で9時から12時半頃まで3時間ほど練習できた。ひとりでリフティング練習をするよりも相手がいて打ち合いする方がずっと楽しい。午前中にしっかり動いたので2万歩を超えて昨日の消費エネルギーは4500カロリーを超えた。</p><h2 id=体育館でバドミントン>体育館でバドミントン</h2><p><a href=/diary/posts/2024/0918/#体育館でバドミントン>前回の所感</a> 。磯上体育館では月に2回ぐらい個人利用という先着順で予約できる仕組みがある。8時過ぎに磯上体育館へ行ったらすでに2組並んでいた。先頭の方は9時から2面予約するという。私は3番目で並んでいた。8時半頃には10人以上後ろに並んでいたので8時頃に行くと確実に予約できると思う。事務側も本当は9時から受付だけど、並んでいるせいか8時45分頃から予約受け付けしてれくた。こうやって予約を取るためにどんどん並ぶ時間が早くなっていくのかもしれない。</p><p>先頭に並んでいたシニアの方が気さくに周りに声をかけていて、話しているうちに仲良くなってその人たちの9時からの練習に混ぜてもらうことになった。ベテランのシニアな方で経験もあって教え方もとても上手だった。丁寧に教えてくれてすごく勉強になった。来週も個人利用で9時から借りると話されていたのを聞いて来週も練習に混ぜてもらうことにした。今日は3つの打ち方の基本を教えてもらいながら練習した。</p><ul><li>クリア<ul><li>コートの奥から相手のコート奥へ大きく前方へ打ち返す</li></ul></li><li>ドロップ<ul><li>クリアを同じ打ち方でコートの奥からネットを超えた前方位置へゆるく落とす</li></ul></li><li>プッシュ<ul><li>ネット前で浮いた球を下方に叩きつけるような打ち方になる</li></ul></li></ul><p>打ちながら、私のラケットの振り方や持ち方のよくないところを指摘してもらった。我流でやっていたからちゃんとした知識やフォームを教えてもらえるのは本当にありがたい。教えてもらったことで覚えていることを書いておく。</p><ul><li>足は肩幅に開いて準備をする<ul><li>まだ言語化できないが、右足/左足の使い方について説明されてた</li><li>足の親指部分にチカラを入れてコントロールするように話されていた</li></ul></li><li>フットワークと足の位置を意識してみる<ul><li>私は無意識に一歩目は左足から動いてしまう<ul><li>フォアハンドで打つときは右足から動いた方が速いのかもしれない</li></ul></li></ul></li><li>シャトルが来てから動くのではなく、来る前から位置を予測して動いて備える</li><li>ラケットを振るときに左手をあげてカラダのバランスをとる<ul><li>基本として左手をどう使うのかがすごく大事とのこと</li><li>左手を下げない、肘を90度にまげてあげるのに備えておく</li><li>手首をまげずに固定してラケットを振る</li></ul></li><li>ラケットは親指と人差し指でつまむ気持ちで軽くもち、シャトルを打ち返す瞬間だけ握る<ul><li>この感覚で打ち返すと真っ直ぐ強い打球を返せるようになった</li><li>バックハンドで返すときも同様でシャトルを打つ瞬間だけ握り込んで止めるような感覚で返す</li></ul></li><li>向かってくるシャトルに対してカラダの正面でとらえて打つ<ul><li>この位置を固定にすることで安定して打ち返せる気がする</li></ul></li></ul><p>1時間ちょっと練習の指導をしてもらって30分ほどダブルスの試合をした。私は下手だからすぐ失敗してラリーが止まってしまう。試合形式になると簡単そうにみえるシャトルの打ち返しも緊張や前後左右の動きの中で失敗してしまう。練習でできないことは試合では絶対にできない。ラリーを止めてしまって他の人たちに悪いなと罪悪感を感じるし、練習する方がたくさんシャトルを打つことができて楽しい。もう少し上達するまでは試合は棄権しようかなとも思う。11時からいとうさんが来られて、前の時間帯に教えてもらった打ち方を意識しながらひたすら打ち合いの練習をしていた。その前の練習で教えてもらったことをゆっくり反復する時間をとれてこの時間もよかった。基本の打ち方を教えてもらった通りにやっていると狙ったところにうまく返せる回数が増えたように感じた。</p><h2 id=ストレッチ>ストレッチ</h2><p>先週は実家へ帰ってストレッチをお休みして2週間ぶり。午前中にバドミントンの練習をたくさんして疲れていたのと、試合をしているときにころんで足と腰を少し痛めていた。その部位を伸ばす意図でもストレッチしてもらってちょうどよかった。運動して筋肉痛もある状態でストレッチするとよく伸びて、その日の睡眠もよく取れるし疲労回復も早くなる。今日の開脚幅は開始前146cmで、ストレッチ後155cmだった。ストレッチ前は筋肉痛で伸びないのがストレッチ後によく伸びていることが伺える。トレーナーさんはサッカーをずっとされていた方なのでたまたまはてブでみかけた町田ゼルビアの記事を話題にしたら盛り上がった。この著者の記事が3つもあがっているようにいまホット話題ではあるらしい。</p><ul><li><a href=https://note.com/shv12/n/nab3420c578d4>なぜ町田ゼルビアは叩かれるのか？ここ2年の出来事を振り返る③</a></li></ul><p>ストレッチを終えて晩ご飯を食べた後にオフィスで作業しようと思っていたものの、家に帰ったら疲れてそのまま休んでしまった。体調が悪いわけでもないのに、最近はやらないといけないことをがんばる気力がなくなっている。なにか内からのやりたいが出てこない。</p></div></article><article class="post on-list"><h1 class=post-title><a href=/diary/posts/2024/1018/>exec とスクリプト</a></h1><div class=post-meta><time class=post-date>2024-10-18</time></div><span class=post-tags>#<a href=/diary/tags/badminton/>badminton</a>&nbsp;
#<a href=/diary/tags/cli/>cli</a>&nbsp;
#<a href=/diary/tags/infrastructure/>infrastructure</a>&nbsp;</span><div class=post-content><p>今日のバドミントン練習はエアシャトルでリフティングを60分した。連続最大回数は191回だった。もう少しで200回だったのに残念。木曜日は睡眠をたくさんとって疲れは少し取れたし、安定的に50回前後は続くようになりつつも、100回までに失敗してしまう。今日は100回を超えたのが2回だけだった。ラケットのスィートスポットでとらえたときにきれいに真上にあがる感覚が楽しい。うまくいくときは数回は続く。それが自然にできるときとそうじゃないときの違いを私は制御できてなくて言語化もできない。</p><p>エアシャトルとメイビスにおけるリフティングの違いを比べてみると、メイビスの方が打ち上げて落ちてくるときにあまり回転せずコルクが下を向く傾向が多いようにみえる。エアシャトルの方がコルクが重い分、縦方向に回転し始めるとその回転が止まらず、回転しているからラケット面でとらえるのが難しくなる。だからエアシャトルの方がメイビスよりもリフティングが難しいといえる。シャトルを高く打ち上げると、落下してくる距離が長くなりその回転が落ち着く傾向があるからリフティングしやすくなるのではないかと仮説を考えた。伸び悩みかもしれないし、地道に練習を継続するときかもしれない。</p><h2 id=exec-とエントリーポイントのスクリプト>exec とエントリーポイントのスクリプト</h2><p>コンテナを起動して stop すると SIGTERM が送られる。そのときに api サーバーでシグナルの処理をしているのに、気付いたらシグナル処理が行われずタイムアウトするようになっていた。デフォルトでは10秒でタイムアウトして強制終了となる。なぜシグナルを捕捉しなくなったかを調査したら、あるときサーバーの起動前に前処理が必要になってエントリーポイントをシェルスクリプトにしていた。そのときに exec しないと、シェルスクリプトのプロセスに対してシグナルが送られるため、api サーバーがシグナルを検知できなくなるという副作用があることに気付いた。これまでも <a href=https://ja.wikipedia.org/wiki/Exec>exec</a> を使うとプロセス ID は変更されないという知識を知っていたが、それがどういう状況で役に立つかを理解できていなかった。シグナルを用いた同期処理に exec が役に立つ状況があることを学んだ。修正は次の1行のみ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#f92672>--- a/docker/entrypoint.sh
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/docker/entrypoint.sh
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -2,4 +2,4 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> ...
</span></span><span style=display:flex><span> ... (pre process)
</span></span><span style=display:flex><span> ...
</span></span><span style=display:flex><span><span style=color:#f92672>-./bin/api &#34;$@&#34;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+exec ./bin/api &#34;$@&#34;
</span></span></span></code></pre></div><h2 id=go-test-からバイナリをビルドしてサーバーを起動する>go test からバイナリをビルドしてサーバーを起動する</h2><p>先日 <a href=/diary/posts/2024/1011/#go-の結合テスト向けカバレッジ計測の考察>結合テスト向けカバレッジ計測の調査</a> をした成果を使って実際に go test からカバレッジ計測のカスタマイズを施したバイナリをビルドしてサーバー起動するコードを書いてみた。やや手間取ったが、一通り動いてカバレッジを計測できた。例えば、単体テストのカバレッジを計測するための makefile のターゲットは次のようになる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span>GO_COVER_DIR<span style=color:#f92672>:=</span><span style=color:#66d9ef>$(</span>CURDIR<span style=color:#66d9ef>)</span>/tests/coverage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>coverage</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>GO_COVER_DIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	go test -tags<span style=color:#f92672>=</span>integration -race -cover ./... -covermode atomic -args -test.gocoverdir<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GO_COVER_DIR<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><p>go は <a href=https://ja.wikipedia.org/wiki/Fork>fork</a> ができない。fork の代わりに exec を使う。<a href=https://stackoverflow.com/a/28371586>How do I fork a go process?</a> に go の goroutine のスケジューリングと fork は相性が悪くてうまく動かないということが背景だと説明されている。それはともかく exec を使ってもサーバープロセスを非同期に起動できたのでそのスニペットを書いておく。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>binaryPath</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>buildBinary</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>args</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;-verbose&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;-port&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Itoa</span>(<span style=color:#a6e22e>ServerPort</span>),
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>w</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Pipe</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewScanner</span>(<span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Scan</span>() {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Text</span>())
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>cmd</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>exec</span>.<span style=color:#a6e22e>Command</span>(<span style=color:#a6e22e>binaryPath</span>, <span style=color:#a6e22e>args</span><span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Stdout</span> = <span style=color:#a6e22e>w</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Start</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to start api server&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Process</span>.<span style=color:#a6e22e>Signal</span>(<span style=color:#a6e22e>syscall</span>.<span style=color:#a6e22e>SIGTERM</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to terminate the api process&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Process</span>.<span style=color:#a6e22e>Wait</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#e6db74>&#34;failed to wait terminating the api process&#34;</span>, <span style=color:#e6db74>&#34;err&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Info</span>(<span style=color:#e6db74>&#34;completed to terminate the api process&#34;</span>, <span style=color:#e6db74>&#34;s&#34;</span>, <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>String</span>())
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// サーバーに対するテストを実行
</span></span></span></code></pre></div><p>サーバープロセスの標準出力のログを <a href=/diary/posts/2024/0919/>io.Pipe</a> を使って出力することもできる。exec で生成したプロセスに対してもシグナルを送ったり終了を待つこともできる。デバッグしている分にはこれで意図したように制御できた。この知見は将来的に役に立つ気がする。0時過ぎから調査を再開して4時前ぐらいまでやっていた。少しはまって時間はかかったものの、久しぶりに集中してデバッグしていた。</p></div></article><div class=pagination><div class=pagination__buttons><a href=/diary/tags/badminton/page/2/ class="button next"><span class=button__text>過去の日記</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/diary/bundle.min.js></script></div></body></html>